!function(window,undefined){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||"function"!==type&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||!getByName||data!==undefined)return id||(isNode?elem[internalKey]=id=core_deletedIds.pop()||jQuery.guid++:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),getByName?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var i,l,thisCache,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" "));for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function returnTrue(){return!0}function returnFalse(){return!1}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function disableScript(elem){var attr=elem.getAttributeNode("type");return elem.type=(attr&&attr.specified)+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!jQuery.support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&manipulation_rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.remove(),display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response){var conv2,current,conv,tmp,converters={},i=0,dataTypes=s.dataTypes.slice(),prev=dataTypes[0];if(s.dataFilter&&(response=s.dataFilter(response,s.dataType)),dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];)if("*"!==current){if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.splice(i--,0,current));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){for(var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(collection[index].call(animation,prop,value))return})}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return createTweens(animation,props),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var value,name,index,easing,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function defaultPrefilter(elem,props,opts){var prop,index,length,value,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(index in props)if(value=props[index],rfxtypes.exec(value)){if(delete props[index],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))continue;handled.push(index)}if(length=handled.length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{}),"hidden"in dataShow&&(hidden=dataShow.hidden),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(index=0;length>index;index++)prop=handled[index],tween=anim.createTween(prop,hidden?dataShow[prop]:0),orig[prop]=dataShow[prop]||jQuery.style(elem,prop),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var readyList,rootjQuery,core_strundefined=typeof undefined,document=window.document,location=window.location,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="1.9.1",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(event){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())},detach=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:function(data){return window.JSON&&window.JSON.parse?window.JSON.parse(data):null===data?data:"string"==typeof data&&(data=jQuery.trim(data),data&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:core_trim&&!core_trim.call("﻿ ")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;for(inv=!!inv;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return args=args||[],args=[context,args.slice?args.slice():args],!list||fired&&!stack||(firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)
}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(){var support,all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");if(div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!a||!all.length)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",support={getSetAttribute:"t"!==div.className,leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===document.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),fragment=document.createDocumentFragment(),fragment.appendChild(input),support.appendChecked=input.checked,support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click());for(i in{submit:!0,change:!0,focusin:!0})div.setAttribute(eventName="on"+i,"t"),support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===!1;return div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];body&&(container=document.createElement("div"),container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),tds[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",support.boxSizing=4===div.offsetWidth,support.doesNotIncludeMarginInBodyOffset=1!==body.offsetTop,window.getComputedStyle&&(support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,marginDiv=div.appendChild(document.createElement("div")),marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),typeof div.style.zoom!==core_strundefined&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=3!==div.offsetWidth,support.inlineBlockNeedsLayout&&(body.style.zoom=1)),body.removeChild(container),container=div=tds=marginDiv=null)}),all=select=fragment=opt=a=input=null,support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){if(elem.nodeType&&1!==elem.nodeType&&9!==elem.nodeType)return!1;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==!0&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)name=attrs[i].name,name.indexOf("data-")||(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):jQuery.access(this,function(value){return value===undefined?elem?dataAttr(elem,key,jQuery.data(elem,key)):null:void this.each(function(){jQuery.data(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),hooks.cur=fn,fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)tmp=jQuery._data(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return this.each(jQuery.isFunction(value)?function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}:function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else(type===core_strundefined||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1},val:function(value){var ret,hooks,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val,self=jQuery(this);1===this.nodeType&&(val=isFunction?value.call(this,i,self.val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),values.length||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var hooks,notxml,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===core_strundefined?jQuery.prop(elem,name,value):(notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)),value===undefined?hooks&&notxml&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(typeof elem.getAttribute!==core_strundefined&&(ret=elem.getAttribute(name)),null==ret?undefined:ret):null!==value?hooks&&notxml&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,rboolean.test(name)?!getSetAttribute&&ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),boolHook={get:function(elem,name){var prop=jQuery.prop(elem,name),attr="boolean"==typeof prop&&elem.getAttribute(name),detail="boolean"==typeof prop?getSetInput&&getSetAttribute?null!=attr:ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]:!!attr:elem.getAttributeNode(name);return detail&&detail.value!==!1?name.toLowerCase():undefined},set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},getSetInput&&getSetAttribute||(jQuery.attrHooks.value={get:function(elem,name){var ret=elem.getAttributeNode(name);return jQuery.nodeName(elem,"input")?elem.defaultValue:ret&&ret.specified?ret.value:undefined},set:function(elem,value,name){return jQuery.nodeName(elem,"input")?void(elem.defaultValue=value):nodeHook&&nodeHook.set(elem,value,name)}}),getSetAttribute||(nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&("id"===name||"name"===name||"coords"===name?""!==ret.value:ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:undefined}},jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}})})),jQuery.support.hrefNormalized||(jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null==ret?undefined:ret}})}),jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0;elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=!0,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===!1&&event.preventDefault();if(event.type=type,!(onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(elem.ownerDocument,data)!==!1||"click"===type&&jQuery.nodeName(elem,"a")||!jQuery.acceptData(elem)||!ontype||!elem[type]||jQuery.isWindow(elem))){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",matches[sel]===undefined&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},click:{trigger:function(){return jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===document.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===core_strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;
else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}}),function(window,undefined){function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return cache=function(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return!1}finally{div=null}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(!documentIsXML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,slice.call(context.getElementsByTagName(selector),0)),results;if((m=match[3])&&support.getByClassName&&context.getElementsByClassName)return push.apply(results,slice.call(context.getElementsByClassName(m),0)),results}if(support.qsa&&!rbuggyQSA.test(selector)){if(old=!0,nid=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function siblingCheck(a,b){var cur=b&&a,diff=cur&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),(cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===!0||data===cachedruns)return data===!0}else if(cache=outerCache[dir]=[dirkey],cache[1]=matcher(elem,context,xml)||cachedruns,cache[1]===!0)return!0}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&!documentIsXML&&Expr.relative[tokens[1].type]){if(context=Expr.find.ID(token.matches[0].replace(runescape,funescape),context)[0],!context)return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,slice.call(seed,0)),results;break}}return compile(selector,match)(seed,context,documentIsXML,results,rsibling.test(selector)),results}function setFilters(){}var i,cachedruns,Expr,getText,isXML,compile,hasDuplicate,outermostContext,setDocument,document,docElem,documentIsXML,rbuggyQSA,rbuggyMatches,matches,contains,sortOrder,expando="sizzle"+-new Date,preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,rnative=/^[^{]+\{\s*\[native code/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!==high?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{slice.call(preferredDoc.documentElement.childNodes,0)[0].nodeType}catch(e){slice=function(i){for(var elem,results=[];elem=this[i++];)results.push(elem);return results}}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsXML=isXML(doc),support.tagNameNoComments=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.attributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return"boolean"!==type&&"string"!==type}),support.getByClassName=assert(function(div){return div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",div.getElementsByClassName&&div.getElementsByClassName("e").length?(div.lastChild.className="e",2===div.getElementsByClassName("e").length):!1}),support.getByName=assert(function(div){div.id=expando+0,div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>",docElem.insertBefore(div,docElem.firstChild);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===2+doc.getElementsByName(expando+0).length;return support.getIdNotName=!doc.getElementById(expando),docElem.removeChild(div),pass}),Expr.attrHandle=assert(function(div){return div.innerHTML="<a href='#'></a>",div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&"#"===div.firstChild.getAttribute("href")})?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},support.getIdNotName?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.tagNameNoComments?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.NAME=support.getByName&&function(tag,context){return typeof context.getElementsByName!==strundefined?context.getElementsByName(name):void 0},Expr.find.CLASS=support.getByClassName&&function(className,context){return typeof context.getElementsByClassName===strundefined||documentIsXML?void 0:context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[":focus"],(support.qsa=isNative(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){div.innerHTML="<input type='hidden' i=''/>",div.querySelectorAll("[i^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=isNative(matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=new RegExp(rbuggyQSA.join("|")),rbuggyMatches=new RegExp(rbuggyMatches.join("|")),contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){var compare;return a===b?(hasDuplicate=!0,0):(compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&compare||a.parentNode&&11===a.parentNode.nodeType?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},hasDuplicate=!1,[0,0].sort(sortOrder),support.detectDuplicates=hasDuplicate,document):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||documentIsXML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){var val;return(elem.ownerDocument||elem)!==document&&setDocument(elem),documentIsXML||(name=name.toLowerCase()),(val=Expr.attrHandle[name])?val(elem):documentIsXML||support.attributes?elem.getAttribute(name):((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&elem[name]===!0?name:val&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;if(hasDuplicate=!support.detectDuplicates,results.sort(sortOrder),hasDuplicate){for(;elem=results[i];i++)elem===results[i-1]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[4]?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeName){return"*"===nodeName?function(){return!0}:(nodeName=nodeName.replace(runescape,funescape).toLowerCase(),function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName})},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsXML?elem.getAttribute("xml:lang")||elem.getAttribute("lang"):elem.lang)return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}};for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)cached=matcherFromTokens(group[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},Expr.pseudos.nth=Expr.pseudos.eq,Expr.filters=setFilters.prototype=Expr.pseudos,Expr.setFilters=new setFilters,setDocument(),Sizzle.attr=jQuery.attr,jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,ret,self,len=this.length;if("string"!=typeof selector)return self=this,this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(ret=[],i=0;len>i;i++)jQuery.find(selector,this[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=(this.selector?this.selector+" ":"")+selector,ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1))},filter:function(selector){return this.pushStack(winnow(this,selector,!0))},is:function(selector){return!!selector&&("string"==typeof selector?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur.ownerDocument&&cur!==context&&11!==cur.nodeType;){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}return this.pushStack(ret.length>1?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.fn.andSelf=jQuery.fn.addBack,jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)
},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,this.length>1&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret)}}),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return this.each(jQuery.isFunction(html)?function(i){jQuery(this).wrapInner(html.call(this,i))}:function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(elem,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)(!selector||jQuery.filter(selector,[elem]).length>0)&&(keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem)));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(!("string"!=typeof value||rnoInnerhtml.test(value)||!jQuery.support.htmlSerialize&&rnoshimcache.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){var isFunc=jQuery.isFunction(value);return isFunc||"string"==typeof value||(value=jQuery(value).not(this).detach()),this.domManip([value],!0,function(elem){var next=this.nextSibling,parent=this.parentNode;parent&&(jQuery(this).remove(),parent.insertBefore(elem,next))})},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){args=core_concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(1>=l||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,table?self.html():undefined)),self.domManip(args,table,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(table=table&&jQuery.nodeName(first,"tr"),scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery.ajax({url:node.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!jQuery.support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==core_strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,core_deletedIds.push(id))}}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){var bool="boolean"==typeof state;return this.each(function(){(bool?state:isHidden(this))?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),!(null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}}),window.getComputedStyle?(getStyles=function(elem){return window.getComputedStyle(elem,null)},curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),""===ret?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.hover=function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)};var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return off>=0&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),status>=200&&300>status||304===status?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status?(isSuccess=!0,statusText="nocontent"):304===status?(isSuccess=!0,statusText="notmodified"):(isSuccess=ajaxConvert(s,response),statusText=isSuccess.state,success=isSuccess.data,error=isSuccess.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=undefined),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"):void 0});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,!0)};jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,xhrSupported=jQuery.ajaxSettings.xhr(),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=jQuery.support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?4===xhr.readyState?setTimeout(callback):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()
},abort:function(){callback&&callback(undefined,!0)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){if(end=+parts[2],unit=parts[3]||(jQuery.cssNumber[prop]?"":"px"),"px"!==unit&&start){start=jQuery.css(tween.elem,prop,!0)||end||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}tween.unit=unit,tween.start=start,tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.pos=eased=this.options.duration?jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);doAnimation.finish=function(){anim.stop(!0)},(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.cur&&hooks.cur.finish&&hooks.cur.finish.call(this),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.documentElement;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:void(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery})}(window),function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.5.2";var each=_.each=_.forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){return iterator.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&results.push(value)}),results)},_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)},_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){return(result=result&&iterator.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){return result||(result=iterator.call(context,value,index,list))?breaker:void 0}),!!result)};_.contains=_.include=function(obj,target){return null==obj?!1:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.where=function(obj,attrs,first){return _.isEmpty(attrs)?first?void 0:[]:_[first?"find":"filter"](obj,function(value){for(var key in attrs)if(attrs[key]!==value[key])return!1;return!0})},_.findWhere=function(obj,attrs){return _.where(obj,attrs,!0)},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-1/0;var result={computed:-1/0,value:-1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0,value:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){return arguments.length<2||guard?obj[_.random(obj.length-1)]:_.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,value,context){var result={},iterator=null==value?_.identity:lookupIterator(value);return each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=null==iterator?_.identity:lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return shallow&&_.every(input,_.isArray)?concat.apply(output,input):(each(input,function(value){_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output)};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:new Date,timeout=null,result=func.apply(context,args)};return function(){var now=new Date;previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return function(){var args=[func];return push.apply(args,arguments),wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){{var Backbone,root=this,previousBackbone=root.Backbone,array=[],slice=(array.push,array.slice);array.splice}Backbone="undefined"!=typeof exports?exports:root.Backbone={},Backbone.VERSION="1.1.0";var _=root._;_||"undefined"==typeof require||(_=require("underscore")),Backbone.$=root.jQuery||root.Zepto||root.ender||root.$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events={},this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]
}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;callback||"object"!=typeof name||(callback=this),obj&&((listeningTo={})[obj._listenId]=obj);for(var id in listeningTo)obj=listeningTo[id],obj.off(name,callback,this),(remove||_.isEmpty(obj._events))&&delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args)}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={}),id=obj._listenId||(obj._listenId=_.uniqueId("l"));return listeningTo[id]=obj,callback||"object"!=typeof name||(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection&&(this.collection=options.collection),options.parse&&(attrs=this.parse(attrs,options)||{}),attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);for(attr in attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=!0);for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){return model.set(model.parse(resp,options),options)?(success&&success(model,resp,options),void model.trigger("sync",model,resp,options)):!1},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);return options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options)?!1:(success&&success(model,resp,options),void model.trigger("sync",model,resp,options))},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base+("/"===base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return error?(this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1):!0}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models),options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++)model=models[i]=this.get(models[i]),model&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return singular?models[0]:models},set:function(models,options){options=_.defaults({},options,setOptions),options.parse&&(models=this.parse(models,options));var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort,at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1;for(i=0,l=models.length;l>i;i++){if(attrs=models[i],id=attrs instanceof Model?model=attrs:attrs[targetModel.prototype.idAttribute],existing=this.get(id))remove&&(modelMap[existing.cid]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)),models[i]=existing;else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;toAdd.push(model),model.on("all",this._onModelEvent,this),this._byId[model.cid]=model,null!=model.id&&(this._byId[model.id]=model)}order&&order.push(existing||model)}if(remove){for(i=0,l=this.length;l>i;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;l>i;i++)this.models.splice(at+i,0,toAdd[i]);else{order&&(this.models.length=0);var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;l>i;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);return options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){return null==obj?void 0:this._byId[obj.id]||this._byId[obj.cid]||this._byId[obj]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp,options){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs.collection||(attrs.collection=this),attrs;options=options?_.clone(options):{},options.collection=this;var model=new this.model(attrs,options);return model.validationError?(this.trigger("invalid",this,model.validationError,options),!1):model},_removeReference:function(model){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs["class"]=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){return xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend?beforeSend.apply(this,arguments):void 0}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"===params.type&&noXhrPatch&&(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);callback&&callback.apply(router,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param){return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/[?#].*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.slice(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange&&(this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location,atRoot=loc.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!atRoot)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment+loc.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();return current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment?!1:(this.iframe&&this.navigate(current),void this.loadUrl())},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0})},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment!==fragment){if(this.fragment=fragment,""===fragment&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}}}.call(this),function(definition){if("function"==typeof bootstrap)bootstrap("promise",definition);else if("object"==typeof exports)module.exports=definition();else if("function"==typeof define&&define.amd)define(definition);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=definition}else Q=definition()}(function(){"use strict";function uncurryThis(f){return function(){return call.apply(f,arguments)}}function isObject(value){return value===Object(value)}function isStopIteration(exception){return"[object StopIteration]"===object_toString(exception)||exception instanceof QReturnValue}function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)){for(var stacks=[],p=promise;p;p=p.source)p.stack&&stacks.unshift(p.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0;i<lines.length;++i){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||!line||desiredLines.push(line)}return desiredLines.join("\n")}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);return attempt3?[attempt3[1],Number(attempt3[2])]:void 0}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&qEndingLine>=lineNumber}function captureLine(){if(hasStacks)try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return qFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack),callback.apply(callback,arguments)}}function Q(value){return isPromise(value)?value:isPromiseAlike(value)?coerce(value):fulfill(value)}function defer(){function become(newPromise){resolvedPromise=newPromise,promise.source=newPromise,array_reduce(messages,function(undefined,message){nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0),messages=void 0,progressListeners=void 0}var resolvedPromise,messages=[],progressListeners=[],deferred=object_create(defer.prototype),promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);messages?(messages.push(args),"when"===op&&operands[1]&&progressListeners.push(operands[1])):nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})},promise.valueOf=deprecate(function(){if(messages)return promise;var nearerValue=nearer(resolvedPromise);return isPromise(nearerValue)&&(resolvedPromise=nearerValue),nearerValue},"valueOf","inspect"),promise.inspect=function(){return resolvedPromise?resolvedPromise.inspect():{state:"pending"}},Q.longStackSupport&&hasStacks)try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return deferred.promise=promise,deferred.resolve=function(value){resolvedPromise||become(Q(value))},deferred.fulfill=function(value){resolvedPromise||become(fulfill(value))},deferred.reject=function(reason){resolvedPromise||become(reject(reason))},deferred.notify=function(progress){resolvedPromise||array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)},deferred}function promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function.");var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;len>i;i++)Q(answerPs[i]).then(resolve,reject)})}function Promise(descriptor,fallback,inspect){void 0===fallback&&(fallback=function(op){return reject(new Error("Promise does not support operation: "+op))}),void 0===inspect&&(inspect=function(){return{state:"unknown"}});var promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,args){var result;try{result=descriptor[op]?descriptor[op].apply(promise,args):fallback.call(promise,op,args)}catch(exception){result=reject(exception)}resolve&&resolve(result)},promise.inspect=inspect,inspect){var inspected=inspect();"rejected"===inspected.state&&(promise.exception=inspected.reason),promise.valueOf=deprecate(function(){var inspected=inspect();return"pending"===inspected.state||"rejected"===inspected.state?promise:inspected.value})}return promise}function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}function nearer(value){if(isPromise(value)){var inspected=value.inspect();if("fulfilled"===inspected.state)return inspected.value}return value}function isPromise(object){return isObject(object)&&"function"==typeof object.promiseDispatch&&"function"==typeof object.inspect}function isPromiseAlike(object){return isObject(object)&&"function"==typeof object.then}function isPending(object){return isPromise(object)&&"pending"===object.inspect().state}function isFulfilled(object){return!isPromise(object)||"fulfilled"===object.inspect().state}function isRejected(object){return isPromise(object)&&"rejected"===object.inspect().state}function displayUnhandledReasons(){unhandledReasonsDisplayed||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",unhandledReasons),unhandledReasonsDisplayed=!0}function logUnhandledReasons(){for(var i=0;i<unhandledReasons.length;i++){var reason=unhandledReasons[i];console.warn("Unhandled rejection reason:",reason)}}function resetUnhandledRejections(){unhandledReasons.length=0,unhandledRejections.length=0,unhandledReasonsDisplayed=!1,trackUnhandledRejections||(trackUnhandledRejections=!0,"undefined"!=typeof process&&process.on&&process.on("exit",logUnhandledReasons))}function trackRejection(promise,reason){trackUnhandledRejections&&(unhandledRejections.push(promise),unhandledReasons.push(reason&&"undefined"!=typeof reason.stack?reason.stack:"(no stack) "+reason),displayUnhandledReasons())}function untrackRejection(promise){if(trackUnhandledRejections){var at=array_indexOf(unhandledRejections,promise);-1!==at&&(unhandledRejections.splice(at,1),unhandledReasons.splice(at,1))}}function reject(reason){var rejection=Promise({when:function(rejected){return rejected&&untrackRejection(this),rejected?rejected(reason):this}},function(){return this},function(){return{state:"rejected",reason:reason}});return trackRejection(rejection,reason),rejection}function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){return null===name||void 0===name?value.apply(void 0,args):value[name].apply(value,args)},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();return nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}}),deferred.promise}function master(object){return Promise({isDef:function(){}},function(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()
})}function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}function async(makeGenerator){return function(){function continuer(verb,arg){var result;if(hasES6Generators){try{result=generator[verb](arg)}catch(exception){return reject(exception)}return result.done?result.value:when(result.value,callback,errback)}try{result=generator[verb](arg)}catch(exception){return isStopIteration(exception)?exception.value:reject(exception)}return when(result,callback,errback)}var generator=makeGenerator.apply(this,arguments),callback=continuer.bind(continuer,"next"),errback=continuer.bind(continuer,"throw");return callback()}}function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}function _return(value){throw new QReturnValue(value)}function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}function dispatch(object,op,args){return Q(object).dispatch(op,args)}function all(promises){return when(promises,function(promises){var countDown=0,deferred=defer();return array_reduce(promises,function(undefined,promise,index){var snapshot;isPromise(promise)&&"fulfilled"===(snapshot=promise.inspect()).state?promises[index]=snapshot.value:(++countDown,when(promise,function(value){promises[index]=value,0===--countDown&&deferred.resolve(promises)},deferred.reject,function(progress){deferred.notify({index:index,value:progress})}))},void 0),0===countDown&&deferred.resolve(promises),deferred.promise})}function allResolved(promises){return when(promises,function(promises){return promises=array_map(promises,Q),when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}function allSettled(promises){return Q(promises).allSettled()}function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}var hasStacks=!1;try{throw new Error}catch(e){hasStacks=!!e.stack}var qFileName,QReturnValue,qStartingLine=captureLine(),noop=function(){},nextTick=function(){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;domain&&(head.domain=void 0,domain.enter());try{task()}catch(e){if(isNodeJS)throw domain&&domain.exit(),setTimeout(flush,0),domain&&domain.enter(),e;setTimeout(function(){throw e},0)}domain&&domain.exit()}flushing=!1}var head={task:void 0,next:null},tail=head,flushing=!1,requestTick=void 0,isNodeJS=!1;if(nextTick=function(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null},flushing||(flushing=!0,requestTick())},"undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestTick=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)requestTick="undefined"!=typeof window?setImmediate.bind(window,flush):function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=function(){requestTick=requestPortTick,channel.port1.onmessage=flush,flush()};var requestPortTick=function(){channel.port2.postMessage(0)};requestTick=function(){setTimeout(flush,0),requestPortTick()}}else requestTick=function(){setTimeout(flush,0)};return nextTick}(),call=Function.call,array_slice=uncurryThis(Array.prototype.slice),array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(1===arguments.length)for(;;){if(index in this){basis=this[index++];break}if(++index>=length)throw new TypeError}for(;length>index;index++)index in this&&(basis=callback(basis,this[index],index));return basis}),array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++)if(this[i]===value)return i;return-1}),array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this,collect=[];return array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0),collect}),object_create=Object.create||function(prototype){function Type(){}return Type.prototype=prototype,new Type},object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty),object_keys=Object.keys||function(object){var keys=[];for(var key in object)object_hasOwnProperty(object,key)&&keys.push(key);return keys},object_toString=uncurryThis(Object.prototype.toString);QReturnValue="undefined"!=typeof ReturnValue?ReturnValue:function(value){this.value=value};var hasES6Generators;try{new Function("(function* (){ yield 1; })"),hasES6Generators=!0}catch(e){hasES6Generators=!1}var STACK_JUMP_SEPARATOR="From previous event:";Q.resolve=Q,Q.nextTick=nextTick,Q.longStackSupport=!1,Q.defer=defer,defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){error?self.reject(error):self.resolve(arguments.length>2?array_slice(arguments,1):value)}},Q.promise=promise,Q.passByCopy=function(object){return object},Promise.prototype.passByCopy=function(){return this},Q.join=function(x,y){return Q(x).join(y)},Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y)return x;throw new Error("Can't join: not the same: "+x+" "+y)})},Q.race=race,Promise.prototype.race=function(){return this.then(Q.race)},Q.makePromise=Promise,Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.then=function(fulfilled,rejected,progressed){function _fulfilled(value){try{return"function"==typeof fulfilled?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if("function"==typeof rejected){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return"function"==typeof progressed?progressed(value):value}var self=this,deferred=defer(),done=!1;return nextTick(function(){self.promiseDispatch(function(value){done||(done=!0,deferred.resolve(_fulfilled(value)))},"when",[function(exception){done||(done=!0,deferred.resolve(_rejected(exception)))}])}),self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue,threw=!1;try{newValue=_progressed(value)}catch(e){if(threw=!0,!Q.onerror)throw e;Q.onerror(e)}threw||deferred.notify(newValue)}]),deferred.promise},Q.when=when,Promise.prototype.thenResolve=function(value){return this.then(function(){return value})},Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)},Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})},Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)},Q.nearer=nearer,Q.isPromise=isPromise,Q.isPromiseAlike=isPromiseAlike,Q.isPending=isPending,Promise.prototype.isPending=function(){return"pending"===this.inspect().state},Q.isFulfilled=isFulfilled,Promise.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},Q.isRejected=isRejected,Promise.prototype.isRejected=function(){return"rejected"===this.inspect().state};var unhandledReasons=[],unhandledRejections=[],unhandledReasonsDisplayed=!1,trackUnhandledRejections=!0;Q.resetUnhandledRejections=resetUnhandledRejections,Q.getUnhandledReasons=function(){return unhandledReasons.slice()},Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",logUnhandledReasons),trackUnhandledRejections=!1},resetUnhandledRejections(),Q.reject=reject,Q.fulfill=fulfill,Q.master=master,Q.spread=spread,Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)},Q.async=async,Q.spawn=spawn,Q["return"]=_return,Q.promised=promised,Q.dispatch=dispatch,Promise.prototype.dispatch=function(op,args){var self=this,deferred=defer();return nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)}),deferred.promise},Q.get=function(object,key){return Q(object).dispatch("get",[key])},Promise.prototype.get=function(key){return this.dispatch("get",[key])},Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])},Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])},Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])},Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])},Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])},Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])},Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])},Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])},Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])},Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])},Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])},Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])},Q.fbind=function(object){var promise=Q(object),args=array_slice(arguments,1);return function(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Promise.prototype.fbind=function(){var promise=this,args=array_slice(arguments);return function(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Q.keys=function(object){return Q(object).dispatch("keys",[])},Promise.prototype.keys=function(){return this.dispatch("keys",[])},Q.all=all,Promise.prototype.all=function(){return all(this)},Q.allResolved=deprecate(allResolved,"allResolved","allSettled"),Promise.prototype.allResolved=function(){return allResolved(this)},Q.allSettled=allSettled,Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){function regardless(){return promise.inspect()}return promise=Q(promise),promise.then(regardless,regardless)}))})},Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)},Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)},Q.progress=progress,Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)},Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)},Promise.prototype.fin=Promise.prototype["finally"]=function(callback){return callback=Q(callback),this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})},Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)},Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){nextTick(function(){if(makeStackTraceLong(error,promise),!Q.onerror)throw error;Q.onerror(error)})},promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;"object"==typeof process&&process&&process.domain&&(onUnhandledError=process.domain.bind(onUnhandledError)),promise.then(void 0,onUnhandledError)},Q.timeout=function(object,ms,message){return Q(object).timeout(ms,message)},Promise.prototype.timeout=function(ms,message){var deferred=defer(),timeoutId=setTimeout(function(){deferred.reject(new Error(message||"Timed out after "+ms+" ms"))},ms);return this.then(function(value){clearTimeout(timeoutId),deferred.resolve(value)},function(exception){clearTimeout(timeoutId),deferred.reject(exception)},deferred.notify),deferred.promise},Q.delay=function(object,timeout){return void 0===timeout&&(timeout=object,object=void 0),Q(object).delay(timeout)},Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();return setTimeout(function(){deferred.resolve(value)},timeout),deferred.promise})},Q.nfapply=function(callback,args){return Q(callback).nfapply(args)},Promise.prototype.nfapply=function(args){var deferred=defer(),nodeArgs=array_slice(args);return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)},Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(callback).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);return args.unshift(this),Q.denodeify.apply(void 0,args)},Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){function bound(){return callback.apply(thisp,arguments)}var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(bound).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nbind=function(){var args=array_slice(arguments,0);return args.unshift(this),Q.nbind.apply(void 0,args)},Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)},Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nodeify=nodeify,Promise.prototype.nodeify=function(nodeback){return nodeback?void this.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})}):this};var qEndingLine=captureLine();return Q}),function(glob){function definition(Q){function PipeContext(handlers,nextMehod,end){this._handlers=handlers,this._next=nextMehod,this._end=end,this._i=0}function indexOfHandler(handlers,len,target){for(var i=0;len>i;++i){var handler=handlers[i];if(handler.name===target||handler.handler===target)return i}return-1}function forward(ctx){return ctx.next.apply(ctx,Array.prototype.slice.call(arguments,1))}function coerce(methodNames,handler){methodNames.forEach(function(meth){handler[meth]||(handler[meth]=forward)})}function createPipeline(pipedMethodNames){function Pipeline(pipedMethodNames){this.pipe={_handlers:[],_contextCtor:PipeContext,_nextMethods:nextMethods,end:end,_pipedMethodNames:pipedMethodNames}}var end={},endStubFunc=function(){return end},nextMethods={},pipeline=new Pipeline(pipedMethodNames);for(var k in abstractPipeline)pipeline.pipe[k]=abstractPipeline[k];return pipedMethodNames.forEach(function(name){end[name]=endStubFunc,nextMethods[name]=new Function("var handler = this._nextHandler();handler.__pipectx = this.__pipectx;return handler."+name+".apply(handler, arguments);"),pipeline[name]=new Function("var ctx = new this.pipe._contextCtor(this.pipe._handlers, this.pipe._nextMethods."+name+", this.pipe.end);return ctx.next.apply(ctx, arguments);")}),pipeline}PipeContext.prototype={next:function(){return this.__pipectx=this,this._next.apply(this,arguments)},_nextHandler:function(){if(this._i>=this._handlers.length)return this._end;var handler=this._handlers[this._i].handler;return this._i+=1,handler},length:function(){return this._handlers.length}};var abstractPipeline={addFirst:function(name,handler){coerce(this._pipedMethodNames,handler),this._handlers.unshift({name:name,handler:handler})},addLast:function(name,handler){coerce(this._pipedMethodNames,handler),this._handlers.push({name:name,handler:handler})},addAfter:function(target,name,handler){coerce(this._pipedMethodNames,handler);var handlers=this._handlers,len=handlers.length,i=indexOfHandler(handlers,len,target);i>=0&&handlers.splice(i+1,0,{name:name,handler:handler})},addBefore:function(target,name,handler){coerce(this._pipedMethodNames,handler);var handlers=this._handlers,len=handlers.length,i=indexOfHandler(handlers,len,target);i>=0&&handlers.splice(i,0,{name:name,handler:handler})},replace:function(target,newName,handler){coerce(this._pipedMethodNames,handler);var handlers=this._handlers,len=handlers.length,i=indexOfHandler(handlers,len,target);i>=0&&handlers.splice(i,1,{name:newName,handler:handler})},removeFirst:function(){return this._handlers.shift()},removeLast:function(){return this._handlers.pop()},remove:function(target){var handlers=this._handlers,len=handlers.length,i=indexOfHandler(handlers,len,target);i>=0&&handlers.splice(i,1)},getHandler:function(name){var i=indexOfHandler(this._handlers,this._handlers.length,name);return i>=0?this._handlers[i].handler:null}};createPipeline.isPipeline=function(obj){return obj instanceof Pipeline};var utils=function(){function _mapAsync(fn,data,result,deferred){fn(data[result.length],function(v){result.push(v),result.length==data.length?deferred.resolve(result):_mapAsync(fn,data,result,deferred)},function(err){deferred.reject(err)})}return{convertToBase64:function(blob,cb){var fr=new FileReader;fr.onload=function(e){cb(e.target.result)},fr.onerror=function(){},fr.onabort=function(){},fr.readAsDataURL(blob)},dataURLToBlob:function(dataURL){var BASE64_MARKER=";base64,";if(-1==dataURL.indexOf(BASE64_MARKER)){var parts=dataURL.split(","),contentType=parts[0].split(":")[1],raw=parts[1];return new Blob([raw],{type:contentType})}for(var parts=dataURL.split(BASE64_MARKER),contentType=parts[0].split(":")[1],raw=window.atob(parts[1]),rawLength=raw.length,uInt8Array=new Uint8Array(rawLength),i=0;rawLength>i;++i)uInt8Array[i]=raw.charCodeAt(i);return new Blob([uInt8Array.buffer],{type:contentType})},splitAttachmentPath:function(path){var parts=path.split("/");return 1==parts.length&&parts.unshift("__nodoc__"),parts},mapAsync:function(fn,promise){var deferred=Q.defer();return promise.then(function(data){_mapAsync(fn,data,[],deferred)},function(e){deferred.reject(e)}),deferred.promise},countdown:function(n,cb){var args=[];return function(){for(var i=0;i<arguments.length;++i)args.push(arguments[i]);n-=1,0==n&&cb.apply(this,args)}}}}(),FilesystemAPIProvider=function(Q){function makeErrorHandler(deferred,finalDeferred){return function(e){1==e.code?deferred.resolve(undefined):finalDeferred?finalDeferred.reject(e):deferred.reject(e)}}function getAttachmentPath(docKey,attachKey){docKey=docKey.replace(/\//g,"--");var attachmentsDir=docKey+"-attachments";return{dir:attachmentsDir,path:attachmentsDir+"/"+attachKey}}function readDirEntries(reader,result){var deferred=Q.defer();return _readDirEntries(reader,result,deferred),deferred.promise}function _readDirEntries(reader,result,deferred){reader.readEntries(function(entries){0==entries.length?deferred.resolve(result):(result=result.concat(entries),_readDirEntries(reader,result,deferred))},function(err){deferred.reject(err)})}function FSAPI(fs,numBytes,prefix){this._fs=fs,this._capacity=numBytes,this._prefix=prefix,this.type="FilesystemAPI"}return FSAPI.prototype={getContents:function(path,options){var deferred=Q.defer();return path=this._prefix+path,this._fs.root.getFile(path,{},function(fileEntry){fileEntry.file(function(file){var reader=new FileReader;reader.onloadend=function(e){var err,data=e.target.result;if(options&&options.json)try{data=JSON.parse(data)}catch(e){err=new Error("unable to parse JSON for "+path)}err?deferred.reject(err):deferred.resolve(data)},reader.readAsText(file)},makeErrorHandler(deferred))},makeErrorHandler(deferred)),deferred.promise},setContents:function(path,data,options){var deferred=Q.defer();return options&&options.json&&(data=JSON.stringify(data)),path=this._prefix+path,this._fs.root.getFile(path,{create:!0},function(fileEntry){fileEntry.createWriter(function(fileWriter){var blob;fileWriter.onwriteend=function(){fileWriter.onwriteend=function(){deferred.resolve()},fileWriter.truncate(blob.size)},fileWriter.onerror=makeErrorHandler(deferred),blob=data instanceof Blob?data:new Blob([data],{type:"text/plain"}),fileWriter.write(blob)},makeErrorHandler(deferred))},makeErrorHandler(deferred)),deferred.promise},ls:function(docKey){var isRoot=!1;docKey?docKey=this._prefix+docKey+"-attachments":(docKey=this._prefix,isRoot=!0);var deferred=Q.defer();return this._fs.root.getDirectory(docKey,{create:!1},function(entry){var reader=entry.createReader();readDirEntries(reader,[]).then(function(entries){var listing=[];entries.forEach(function(entry){entry.isDirectory||listing.push(entry.name)}),deferred.resolve(listing)})},function(error){deferred.reject(error)}),deferred.promise},clear:function(){var deferred=Q.defer(),failed=!1,ecb=function(err){failed=!0,deferred.reject(err)};return this._fs.root.getDirectory(this._prefix,{},function(entry){var reader=entry.createReader();reader.readEntries(function(entries){var latch=utils.countdown(entries.length,function(){failed||deferred.resolve()});entries.forEach(function(entry){entry.isDirectory?entry.removeRecursively(latch,ecb):entry.remove(latch,ecb)}),0==entries.length&&deferred.resolve()},ecb)},ecb),deferred.promise},rm:function(path){var deferred=Q.defer(),finalDeferred=Q.defer();path=this._prefix+path;var attachmentsDir=path+"-attachments";return this._fs.root.getFile(path,{create:!1},function(entry){entry.remove(function(){deferred.promise.then(finalDeferred.resolve)},function(err){finalDeferred.reject(err)})},makeErrorHandler(finalDeferred)),this._fs.root.getDirectory(attachmentsDir,{},function(entry){entry.removeRecursively(function(){deferred.resolve()},function(err){finalDeferred.reject(err)})},makeErrorHandler(deferred,finalDeferred)),finalDeferred.promise},getAttachment:function(docKey,attachKey){var attachmentPath=this._prefix+getAttachmentPath(docKey,attachKey).path,deferred=Q.defer();return this._fs.root.getFile(attachmentPath,{},function(fileEntry){fileEntry.file(function(file){deferred.resolve(0==file.size?undefined:file)},makeErrorHandler(deferred))},function(err){1==err.code?deferred.resolve(undefined):deferred.reject(err)}),deferred.promise},getAttachmentURL:function(docKey,attachKey){var attachmentPath=this._prefix+getAttachmentPath(docKey,attachKey).path,deferred=Q.defer(),url="filesystem:"+window.location.protocol+"//"+window.location.host+"/persistent/"+attachmentPath;return deferred.resolve(url),deferred.promise},getAllAttachments:function(docKey){var deferred=Q.defer(),attachmentsDir=this._prefix+docKey+"-attachments";return this._fs.root.getDirectory(attachmentsDir,{},function(entry){var reader=entry.createReader();deferred.resolve(utils.mapAsync(function(entry,cb,eb){entry.file(function(file){cb({data:file,docKey:docKey,attachKey:entry.name})},eb)},readDirEntries(reader,[])))},function(err){deferred.reject(err)}),deferred.promise},getAllAttachmentURLs:function(docKey){var deferred=Q.defer(),attachmentsDir=this._prefix+docKey+"-attachments";return this._fs.root.getDirectory(attachmentsDir,{},function(entry){var reader=entry.createReader();readDirEntries(reader,[]).then(function(entries){deferred.resolve(entries.map(function(entry){return{url:entry.toURL(),docKey:docKey,attachKey:entry.name}}))})},function(err){deferred.reject(err)}),deferred.promise},revokeAttachmentURL:function(){},setAttachment:function(docKey,attachKey,data){var attachInfo=getAttachmentPath(docKey,attachKey),deferred=Q.defer(),self=this;return this._fs.root.getDirectory(this._prefix+attachInfo.dir,{create:!0},function(){deferred.resolve(self.setContents(attachInfo.path,data))},makeErrorHandler(deferred)),deferred.promise},rmAttachment:function(docKey,attachKey){var attachmentPath=getAttachmentPath(docKey,attachKey).path,deferred=Q.defer();return this._fs.root.getFile(this._prefix+attachmentPath,{create:!1},function(entry){entry.remove(function(){deferred.resolve()},makeErrorHandler(deferred))},makeErrorHandler(deferred)),deferred.promise},getCapacity:function(){return this._capacity}},{init:function(config){var deferred=Q.defer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var persistentStorage=navigator.persistentStorage||navigator.webkitPersistentStorage;if(!requestFileSystem)return deferred.reject("No FS API"),deferred.promise;var prefix=config.name+"/";return persistentStorage.requestQuota(config.size,function(numBytes){requestFileSystem(window.PERSISTENT,numBytes,function(fs){fs.root.getDirectory(config.name,{create:!0},function(){deferred.resolve(new FSAPI(fs,numBytes,prefix))},function(err){console.error(err),deferred.reject(err)})},function(err){console.error(err),deferred.reject(err)})},function(err){console.error(err),deferred.reject(err)}),deferred.promise}}}(Q),IndexedDBProvider=function(Q){function IDB(db){this._db=db,this.type="IndexedDB";var transaction=this._db.transaction(["attachments"],"readwrite");this._supportsBlobs=!0;try{transaction.objectStore("attachments").put(Blob(["sdf"],{type:"text/plain"}),"featurecheck")}catch(e){this._supportsBlobs=!1}}var URL=window.URL||window.webkitURL,convertToBase64=utils.convertToBase64,dataURLToBlob=utils.dataURLToBlob;return IDB.prototype={getContents:function(docKey){var deferred=Q.defer(),transaction=this._db.transaction(["files"],"readonly"),get=transaction.objectStore("files").get(docKey);return get.onsuccess=function(e){deferred.resolve(e.target.result)},get.onerror=function(e){deferred.reject(e)},deferred.promise},setContents:function(docKey,data){var deferred=Q.defer(),transaction=this._db.transaction(["files"],"readwrite"),put=transaction.objectStore("files").put(data,docKey);return put.onsuccess=function(e){deferred.resolve(e)},put.onerror=function(e){deferred.reject(e)},deferred.promise},rm:function(docKey){var deferred=Q.defer(),finalDeferred=Q.defer(),transaction=this._db.transaction(["files","attachments"],"readwrite"),del=transaction.objectStore("files").delete(docKey);del.onsuccess=function(){deferred.promise.then(function(){finalDeferred.resolve()})},del.onerror=function(e){deferred.promise.catch(function(){finalDeferred.reject(e)})};var attachmentsStore=transaction.objectStore("attachments"),index=attachmentsStore.index("fname"),cursor=index.openCursor(IDBKeyRange.only(docKey));return cursor.onsuccess=function(e){var cursor=e.target.result;cursor?(cursor.delete(),cursor.continue()):deferred.resolve()},cursor.onerror=function(e){deferred.reject(e)},finalDeferred.promise},getAttachment:function(docKey,attachKey){var deferred=Q.defer(),transaction=this._db.transaction(["attachments"],"readonly"),get=transaction.objectStore("attachments").get(docKey+"/"+attachKey),self=this;return get.onsuccess=function(e){if(!e.target.result)return void deferred.resolve(undefined);var data=e.target.result.data;self._supportsBlobs||(data=dataURLToBlob(data)),deferred.resolve(data)},get.onerror=function(e){deferred.reject(e)},deferred.promise},ls:function(docKey){var deferred=Q.defer();if(docKey)var store="attachments";else var store="files";var transaction=this._db.transaction([store],"readonly"),cursor=transaction.objectStore(store).openCursor(),listing=[];return cursor.onsuccess=function(e){var cursor=e.target.result;cursor?(listing.push(docKey?cursor.key.split("/")[1]:cursor.key),cursor.continue()):deferred.resolve(listing)},cursor.onerror=function(e){deferred.reject(e)},deferred.promise},clear:function(){var deferred=Q.defer(),finalDeferred=Q.defer(),t=this._db.transaction(["attachments","files"],"readwrite"),req1=t.objectStore("attachments").clear(),req2=t.objectStore("files").clear();return req1.onsuccess=function(){deferred.promise.then(finalDeferred.resolve)},req2.onsuccess=function(){deferred.resolve()},req1.onerror=function(err){finalDeferred.reject(err)},req2.onerror=function(err){finalDeferred.reject(err)},finalDeferred.promise},getAllAttachments:function(docKey){var deferred=Q.defer(),self=this,transaction=this._db.transaction(["attachments"],"readonly"),index=transaction.objectStore("attachments").index("fname"),cursor=index.openCursor(IDBKeyRange.only(docKey)),values=[];return cursor.onsuccess=function(e){var cursor=e.target.result;if(cursor){var data;data=self._supportsBlobs?cursor.value.data:dataURLToBlob(cursor.value.data),values.push({data:data,docKey:docKey,attachKey:cursor.primaryKey.split("/")[1]}),cursor.continue()}else deferred.resolve(values)},cursor.onerror=function(e){deferred.reject(e)},deferred.promise},getAllAttachmentURLs:function(docKey){var deferred=Q.defer();return this.getAllAttachments(docKey).then(function(attachments){var urls=attachments.map(function(a){return a.url=URL.createObjectURL(a.data),delete a.data,a});deferred.resolve(urls)},function(e){deferred.reject(e)}),deferred.promise},getAttachmentURL:function(docKey,attachKey){var deferred=Q.defer();return this.getAttachment(docKey,attachKey).then(function(attachment){deferred.resolve(URL.createObjectURL(attachment))},function(e){deferred.reject(e)}),deferred.promise},revokeAttachmentURL:function(url){URL.revokeObjectURL(url)},setAttachment:function(docKey,attachKey,data){function continuation(data){var obj={path:docKey+"/"+attachKey,fname:docKey,data:data},transaction=this._db.transaction(["attachments"],"readwrite"),put=transaction.objectStore("attachments").put(obj);put.onsuccess=function(e){deferred.resolve(e)},put.onerror=function(e){deferred.reject(e)}}var deferred=Q.defer();if(data instanceof Blob&&!this._supportsBlobs){var self=this;convertToBase64(data,function(data){continuation.call(self,data)})}else continuation.call(this,data);return deferred.promise},rmAttachment:function(docKey,attachKey){var deferred=Q.defer(),transaction=this._db.transaction(["attachments"],"readwrite"),del=transaction.objectStore("attachments").delete(docKey+"/"+attachKey);return del.onsuccess=function(e){deferred.resolve(e)},del.onerror=function(e){deferred.reject(e)},deferred.promise}},{init:function(config){function createObjectStore(db){db.createObjectStore("files");var attachStore=db.createObjectStore("attachments",{keyPath:"path"});attachStore.createIndex("fname","fname",{unique:!1})}var deferred=Q.defer(),indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,dbVersion=2;if(!indexedDB||!IDBTransaction)return deferred.reject("No IndexedDB"),deferred.promise;var request=indexedDB.open(config.name,dbVersion);return request.onerror=function(event){deferred.reject(event)},request.onsuccess=function(){var db=request.result;if(db.onerror=function(event){console.log(event)},db.setVersion)if(db.version!=dbVersion){var setVersion=db.setVersion(dbVersion);setVersion.onsuccess=function(){createObjectStore(db),deferred.resolve()}}else deferred.resolve(new IDB(db));else deferred.resolve(new IDB(db))},request.onupgradeneeded=function(event){createObjectStore(event.target.result)},deferred.promise}}}(Q),LocalStorageProvider=function(Q){return{init:function(){return Q({type:"LocalStorage"})}}}(Q),WebSQLProvider=function(Q){function WSQL(db){this._db=db,this.type="WebSQL"}var URL=window.URL||window.webkitURL,convertToBase64=utils.convertToBase64,dataURLToBlob=utils.dataURLToBlob;return WSQL.prototype={getContents:function(docKey,options){var deferred=Q.defer();
return this._db.transaction(function(tx){tx.executeSql("SELECT value FROM files WHERE fname = ?",[docKey],function(tx,res){if(0==res.rows.length)deferred.resolve(undefined);else{var data=res.rows.item(0).value;options&&options.json&&(data=JSON.parse(data)),deferred.resolve(data)}})},function(err){consol.log(err),deferred.reject(err)}),deferred.promise},setContents:function(docKey,data,options){var deferred=Q.defer();return options&&options.json&&(data=JSON.stringify(data)),this._db.transaction(function(tx){tx.executeSql("INSERT OR REPLACE INTO files (fname, value) VALUES(?, ?)",[docKey,data])},function(err){console.log(err),deferred.reject(err)},function(){deferred.resolve()}),deferred.promise},rm:function(docKey){var deferred=Q.defer();return this._db.transaction(function(tx){tx.executeSql("DELETE FROM files WHERE fname = ?",[docKey]),tx.executeSql("DELETE FROM attachments WHERE fname = ?",[docKey])},function(err){console.log(err),deferred.reject(err)},function(){deferred.resolve()}),deferred.promise},getAttachment:function(fname,akey){var deferred=Q.defer();return this._db.transaction(function(tx){tx.executeSql("SELECT value FROM attachments WHERE fname = ? AND akey = ?",[fname,akey],function(tx,res){deferred.resolve(0==res.rows.length?undefined:dataURLToBlob(res.rows.item(0).value))})},function(err){deferred.reject(err)}),deferred.promise},getAttachmentURL:function(docKey,attachKey){var deferred=Q.defer();return this.getAttachment(docKey,attachKey).then(function(blob){deferred.resolve(URL.createObjectURL(blob))},function(){deferred.reject()}),deferred.promise},ls:function(docKey){var select,field,deferred=Q.defer();return docKey?(select="SELECT akey FROM attachments WHERE fname = ?",field="akey"):(select="SELECT fname FROM files",field="fname"),this._db.transaction(function(tx){tx.executeSql(select,docKey?[docKey]:[],function(tx,res){for(var listing=[],i=0;i<res.rows.length;++i)listing.push(res.rows.item(i)[field]);deferred.resolve(listing)},function(err){deferred.reject(err)})}),deferred.promise},clear:function(){var deffered1=Q.defer(),deffered2=Q.defer();return this._db.transaction(function(tx){tx.executeSql("DELETE FROM files",function(){deffered1.resolve()}),tx.executeSql("DELETE FROM attachments",function(){deffered2.resolve()})},function(err){deffered1.reject(err),deffered2.reject(err)}),Q.all([deffered1,deffered2])},getAllAttachments:function(fname){var deferred=Q.defer();return this._db.transaction(function(tx){tx.executeSql("SELECT value, akey FROM attachments WHERE fname = ?",[fname],function(tx,res){for(var result=[],i=0;i<res.rows.length;++i){var item=res.rows.item(i);result.push({docKey:fname,attachKey:item.akey,data:dataURLToBlob(item.value)})}deferred.resolve(result)})},function(err){deferred.reject(err)}),deferred.promise},getAllAttachmentURLs:function(fname){var deferred=Q.defer();return this.getAllAttachments(fname).then(function(attachments){var urls=attachments.map(function(a){return a.url=URL.createObjectURL(a.data),delete a.data,a});deferred.resolve(urls)},function(e){deferred.reject(e)}),deferred.promise},revokeAttachmentURL:function(url){URL.revokeObjectURL(url)},setAttachment:function(fname,akey,data){var deferred=Q.defer(),self=this;return convertToBase64(data,function(data){self._db.transaction(function(tx){tx.executeSql("INSERT OR REPLACE INTO attachments (fname, akey, value) VALUES(?, ?, ?)",[fname,akey,data])},function(err){deferred.reject(err)},function(){deferred.resolve()})}),deferred.promise},rmAttachment:function(fname,akey){var deferred=Q.defer();return this._db.transaction(function(tx){tx.executeSql("DELETE FROM attachments WHERE fname = ? AND akey = ?",[fname,akey])},function(err){deferred.reject(err)},function(){deferred.resolve()}),deferred.promise}},{init:function(config){var openDb=window.openDatabase,deferred=Q.defer();if(!openDb)return deferred.reject("No WebSQL"),deferred.promise;var db=openDb(config.name,"1.0","large local storage",config.size);return db.transaction(function(tx){tx.executeSql("CREATE TABLE IF NOT EXISTS files (fname unique, value)"),tx.executeSql("CREATE TABLE IF NOT EXISTS attachments (fname, akey, value)"),tx.executeSql("CREATE INDEX IF NOT EXISTS fname_index ON attachments (fname)"),tx.executeSql("CREATE INDEX IF NOT EXISTS akey_index ON attachments (akey)"),tx.executeSql("CREATE UNIQUE INDEX IF NOT EXISTS uniq_attach ON attachments (fname, akey)")},function(err){deferred.reject(err)},function(){deferred.resolve(new WSQL(db))}),deferred.promise}}}(Q),LargeLocalStorage=function(Q){function defaults(options,defaultOptions){for(var k in defaultOptions)options[k]===undefined&&(options[k]=defaultOptions[k]);return options}function selectImplementation(config){return config||(config={}),config=defaults(config,defaultConfig),config.forceProvider?providers[config.forceProvider].init(config):FilesystemAPIProvider.init(config).then(function(impl){return Q(impl)},function(){return IndexedDBProvider.init(config)}).then(function(impl){return Q(impl)},function(){return WebSQLProvider.init(config)}).then(function(impl){return Q(impl)},function(){return console.error("Unable to create any storage implementations.  Using LocalStorage"),LocalStorageProvider.init(config)})}function copyOldData(){console.log("Underlying implementation change.")}function LargeLocalStorage(config){var self=this,deferred=Q.defer();selectImplementation(config).then(function(impl){console.log("Selected: "+impl.type),self._impl=impl,sessionMeta.lastStorageImpl!=self._impl.type&&copyOldData(sessionMeta.lastStorageImpl,self._impl),sessionMeta.lastStorageImpl=impl.type,deferred.resolve(self)}).catch(function(e){console.log(e),deferred.reject("No storage provider found")}),this.initialized=deferred.promise;var piped=createPipeline(["ready","ls","rm","clear","getContents","setContents","getAttachment","setAttachment","getAttachmentURL","getAllAttachments","getAllAttachmentURLs","revokeAttachmentURL","rmAttachment","getCapacity","initialized"]);return piped.pipe.addLast("lls",this),piped.initialized=this.initialized,piped}var sessionMeta=localStorage.getItem("LargeLocalStorage-meta");sessionMeta=sessionMeta?JSON.parse(sessionMeta):{};var providers={FileSystemAPI:FilesystemAPIProvider,IndexedDB:IndexedDBProvider,WebSQL:WebSQLProvider,LocalStorage:LocalStorageProvider},defaultConfig={size:10485760,name:"lls"};return LargeLocalStorage.prototype={ready:function(){return null!=this._impl},ls:function(docKey){return this._checkAvailability(),this._impl.ls(docKey)},rm:function(docKey){return this._checkAvailability(),this._impl.rm(docKey)},clear:function(){return this._checkAvailability(),this._impl.clear()},getContents:function(docKey,options){return this._checkAvailability(),this._impl.getContents(docKey,options)},setContents:function(docKey,data,options){return this._checkAvailability(),this._impl.setContents(docKey,data,options)},getAttachment:function(docKey,attachKey){return docKey||(docKey="__emptydoc__"),this._checkAvailability(),this._impl.getAttachment(docKey,attachKey)},setAttachment:function(docKey,attachKey,data){return docKey||(docKey="__emptydoc__"),this._checkAvailability(),this._impl.setAttachment(docKey,attachKey,data)},getAttachmentURL:function(docKey,attachKey){return docKey||(docKey="__emptydoc__"),this._checkAvailability(),this._impl.getAttachmentURL(docKey,attachKey)},getAllAttachments:function(docKey){return docKey||(docKey="__emptydoc__"),this._checkAvailability(),this._impl.getAllAttachments(docKey)},getAllAttachmentURLs:function(docKey){return docKey||(docKey="__emptydoc__"),this._checkAvailability(),this._impl.getAllAttachmentURLs(docKey)},revokeAttachmentURL:function(url){return this._checkAvailability(),this._impl.revokeAttachmentURL(url)},rmAttachment:function(docKey,attachKey){return docKey||(docKey="__emptydoc__"),this._checkAvailability(),this._impl.rmAttachment(docKey,attachKey)},getCapacity:function(){return this._checkAvailability(),this._impl.getCapacity?this._impl.getCapacity():-1},_checkAvailability:function(){if(!this._impl)throw{msg:"No storage implementation is available yet.  The user most likely has not granted you app access to FileSystemAPI or IndexedDB",code:"NO_IMPLEMENTATION"}}},LargeLocalStorage.contrib={},LargeLocalStorage}(Q);return LargeLocalStorage}var undefined={}.a;"function"==typeof define&&define.amd?define(["Q"],definition):glob.LargeLocalStorage=definition.call(glob,Q)}.call(this,this),function(){var a,b,c,d,e,f,g;d=function(a,b){var c,d,e,f;f=[];for(d in b.prototype)try{e=b.prototype[d],f.push(null==a[d]&&"function"!=typeof e?a[d]=e:void 0)}catch(g){c=g}return f},a={},null==a.options&&(a.options={}),c={checks:{xhr:{url:function(){return"/offline-test-request/"+Math.floor(1e9*Math.random())}},image:{url:function(){return"img/tiny-image.gif?_="+Math.floor(1e9*Math.random())}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},e=function(a,b){var c,d,e,f,g,h;for(c=a,f=b.split("."),d=g=0,h=f.length;h>g&&(e=f[d],c=c[e],"object"==typeof c);d=++g);return d===f.length-1?c:void 0},a.getOption=function(b){var d,f;return d=null!=(f=e(a.options,b))?f:e(c,b),"function"==typeof d?d():d},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(a.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return a.confirmDown()},!1),a.state="up",a.markUp=function(){return a.trigger("confirmed-up"),"up"!==a.state?(a.state="up",a.trigger("up")):void 0},a.markDown=function(){return a.trigger("confirmed-down"),"down"!==a.state?(a.state="down",a.trigger("down")):void 0},f={},a.on=function(b,c,d){var e,g,h,i,j;if(g=b.split(" "),g.length>1){for(j=[],h=0,i=g.length;i>h;h++)e=g[h],j.push(a.on(e,c,d));return j}return null==f[b]&&(f[b]=[]),f[b].push([d,c])},a.off=function(a,b){var c,d,e,g,h;if(null!=f[a]){if(b){for(d=0,h=[];d<f[a].length;)g=f[a][d],c=g[0],e=g[1],h.push(e===b?f[a].splice(d,1):d++);return h}return f[a]=[]}},a.trigger=function(a){var b,c,d,e,g,h,i;if(null!=f[a]){for(g=f[a],i=[],d=0,e=g.length;e>d;d++)h=g[d],b=h[0],c=h[1],i.push(c.call(b));return i}},b=function(a,b,c){var d,e;return d=function(){return a.status&&a.status<12e3?b():c()},null===a.onprogress?(a.addEventListener("error",c,!1),a.addEventListener("timeout",c,!1),a.addEventListener("load",d,!1)):(e=a.onreadystatechange,a.onreadystatechange=function(){return 4===a.readyState?d():0===a.readyState&&c(),"function"==typeof e?e.apply(null,arguments):void 0})},a.checks={},a.checks.xhr=function(){var c,d;d=new XMLHttpRequest,d.offline=!1,d.open("HEAD",a.getOption("checks.xhr.url"),!0),b(d,a.markUp,a.markDown);try{d.send()}catch(e){c=e,a.markDown()}return d},a.checks.image=function(){var b;return b=document.createElement("img"),b.onerror=a.markDown,b.onload=a.markUp,void(b.src=a.getOption("checks.image.url"))},a.check=function(){return a.trigger("checking"),a.checks[a.getOption("checks.active")]()},a.confirmUp=a.confirmDown=a.check,a.onXHR=function(a){var b,c,e;return b=function(b,c){var d;return d=b.open,b.open=function(e,f,g,h,i){return a({type:e,url:f,async:g,flags:c,user:h,password:i,xhr:b}),d.apply(b,arguments)}},e=window.XMLHttpRequest,window.XMLHttpRequest=function(a){var c,d,f;return c=new e(a),b(c,a),f=c.setRequestHeader,c.headers={},c.setRequestHeader=function(a,b){return c.headers[a]=b,f.call(c,a,b)},d=c.overrideMimeType,c.overrideMimeType=function(a){return c.mimeType=a,d.call(c,a)},c},d(window.XMLHttpRequest,e),null!=window.XDomainRequest?(c=window.XDomainRequest,window.XDomainRequest=function(){var a;return a=new c,b(a),a},d(window.XDomainRequest,c)):void 0},g=function(){return a.getOption("interceptRequests")&&a.onXHR(function(c){var d;return d=c.xhr,d.offline!==!1?b(d,a.confirmUp,a.confirmDown):void 0}),a.getOption("checkOnLoad")?a.check():void 0},setTimeout(g,0),window.Offline=a}.call(this),function(){var a,b,c,d,e,f,g,h,i;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");d=Offline.reconnect={},f=null,e=function(){var a;return null!=d.state&&"inactive"!==d.state&&Offline.trigger("reconnect:stopped"),d.state="inactive",d.remaining=d.delay=null!=(a=Offline.getOption("reconnect.initialDelay"))?a:3},b=function(){var a,b;return a=null!=(b=Offline.getOption("reconnect.delay"))?b:Math.min(Math.ceil(1.5*d.delay),3600),d.remaining=d.delay=a},g=function(){return"connecting"!==d.state?(d.remaining-=1,Offline.trigger("reconnect:tick"),0===d.remaining?h():void 0):void 0},h=function(){return"waiting"===d.state?(Offline.trigger("reconnect:connecting"),d.state="connecting",Offline.check()):void 0},a=function(){return Offline.getOption("reconnect")?(e(),d.state="waiting",Offline.trigger("reconnect:started"),f=setInterval(g,1e3)):void 0},i=function(){return null!=f&&clearInterval(f),e()},c=function(){return Offline.getOption("reconnect")&&"connecting"===d.state?(Offline.trigger("reconnect:failure"),d.state="waiting",b()):void 0},d.tryNow=h,e(),Offline.on("down",a),Offline.on("confirmed-down",c),Offline.on("up",i)}.call(this),function(){var a,b,c,d,e,f;if(!window.Offline)throw new Error("Requests module brought in without offline.js");c=[],f=!1,d=function(a){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(f=!0),c.push(a)},e=function(a){var b,c,d,e,f,g,h,i,j;i=a.xhr,f=a.url,e=a.type,g=a.user,d=a.password,b=a.body,i.abort(),i.open(e,f,!0,g,d),j=i.headers;for(c in j)h=j[c],i.setRequestHeader(c,h);return i.mimeType&&i.overrideMimeType(i.mimeType),i.send(b)},a=function(){return c=[]},b=function(){var b,d,f,g,h,i;for(Offline.trigger("requests:flush"),f={},h=0,i=c.length;i>h;h++)d=c[h],g=d.url.replace(/(\?|&)_=[0-9]+/,function(a,b){return"?"===b?b:""}),f[""+d.type.toUpperCase()+" - "+g]=d;for(b in f)d=f[b],e(d);return a()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return f?(f=!1,a()):void 0}),Offline.on("up",b),Offline.on("down",function(){return f=!1}),Offline.onXHR(function(a){var b,c,e,f,g;return e=a.xhr,b=a.async,e.offline!==!1&&(c=function(){return d(a)},g=e.send,e.send=function(b){return a.body=b,g.apply(e,arguments)},b)?null===e.onprogress?(e.addEventListener("error",c,!1),e.addEventListener("timeout",c,!1)):(f=e.onreadystatechange,e.onreadystatechange=function(){return 0===e.readyState?c():4===e.readyState&&(0===e.status||e.status>=12e3)&&c(),"function"==typeof f?f.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:b,clear:a}):void 0},0)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");b='<div class="offline-ui"><div class="offline-ui-content"></div></div>',a='<a href class="offline-ui-retry"></a>',e=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},f=d=null,c=function(a){return j(a),f.className+=" "+a},j=function(a){return f.className=f.className.replace(new RegExp("(^| )"+a.split(" ").join("|")+"( |$)","gi")," ")},h={},g=function(a,b){return c(a),null!=h[a]&&clearTimeout(h[a]),h[a]=setTimeout(function(){return j(a),delete h[a]},1e3*b)},l=function(a){var b,c,d,e;d={day:86400,hour:3600,minute:60,second:1};for(c in d)if(b=d[c],a>=b)return e=Math.floor(a/b),[e,c];return["now",""]},k=function(){var g,h;return f=e(b),document.body.appendChild(f),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(f.appendChild(e(a)),g=f.querySelector(".offline-ui-retry"),h=function(a){return a.preventDefault(),Offline.reconnect.tryNow()},null!=g.addEventListener?g.addEventListener("click",h,!1):g.attachEvent("click",h)),c("offline-ui-"+Offline.state),d=f.querySelector(".offline-ui-content")},i=function(){return k(),Offline.on("up",function(){return j("offline-ui-down"),c("offline-ui-up"),g("offline-ui-up-2s",2),g("offline-ui-up-5s",5)}),Offline.on("down",function(){return j("offline-ui-up"),c("offline-ui-down"),g("offline-ui-down-2s",2),g("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return c("offline-ui-connecting"),j("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var a,b,e;return c("offline-ui-waiting"),j("offline-ui-connecting"),e=l(Offline.reconnect.remaining),a=e[0],b=e[1],d.setAttribute("data-retry-in-value",a),d.setAttribute("data-retry-in-unit",b)}),Offline.on("reconnect:stopped",function(){return j("offline-ui-connecting offline-ui-waiting"),d.setAttribute("data-retry-in-value",null),d.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return g("offline-ui-reconnect-failed-2s",2),g("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return g("offline-ui-reconnect-succeeded-2s",2),g("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?i():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",i,!1):(m=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&i(),"function"==typeof m?m.apply(null,arguments):void 0})}.call(this),d3=function(){function d3_number(x){return null!=x&&!isNaN(x)}function d3_zipLength(d){return d.length}function d3_range_integerScale(x){for(var k=1;x*k%1;)k*=10;return k}function d3_class(ctor,properties){try{for(var key in properties)Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:!1})}catch(e){ctor.prototype=properties}}function d3_Map(){}function d3_Set(){}function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.substring(1);for(var i=0,n=d3_vendorPrefixes.length;n>i;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(dispatch){function event(){for(var l,z=listeners,i=-1,n=z.length;++i<n;)(l=z[i].on)&&l.apply(this,arguments);return dispatch}var listeners=[],listenerByName=new d3_Map;return event.on=function(name,listener){var i,l=listenerByName.get(name);return arguments.length<2?l&&l.on:(l&&(l.on=null,listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1)),listenerByName.remove(name)),listener&&listeners.push(listenerByName.set(name,{on:listener})),dispatch)},event}function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){for(var s,e=d3.event;s=e.sourceEvent;)e=s;return e}function d3_eventDispatch(target){for(var dispatch=new d3_dispatch,i=0,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target,d3.event=e1,dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}},dispatch}function d3_selection(groups){return d3_subclass(groups,d3_selectionPrototype),groups}function d3_selection_selector(selector){return"function"==typeof selector?selector:function(){return d3_select(selector,this)}}function d3_selection_selectorAll(selector){return"function"==typeof selector?selector:function(){return d3_selectAll(selector,this)}}function d3_selection_attr(name,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);null==x?this.removeAttribute(name):this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);null==x?this.removeAttributeNS(name.space,name.local):this.setAttributeNS(name.space,name.local,x)}return name=d3.ns.qualify(name),null==value?name.local?attrNullNS:attrNull:"function"==typeof value?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return name.trim().split(/^|\s+/)}function d3_selection_classed(name,value){function classedConstant(){for(var i=-1;++i<n;)name[i](this,value)}function classedFunction(){for(var i=-1,x=value.apply(this,arguments);++i<n;)name[i](this,x)}name=d3_selection_classes(name).map(d3_selection_classedName);var n=name.length;return"function"==typeof value?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";value?(re.lastIndex=0,re.test(c)||node.setAttribute("class",d3_collapse(c+" "+name))):node.setAttribute("class",d3_collapse(c.replace(re," ")))}}function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);null==x?this.style.removeProperty(name):this.style.setProperty(name,x,priority)}return null==value?styleNull:"function"==typeof value?styleFunction:styleConstant}function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);null==x?delete this[name]:this[name]=x}return null==value?propertyNull:"function"==typeof value?propertyFunction:propertyConstant}function d3_selection_creator(name){return"function"==typeof name?name:(name=d3.ns.qualify(name)).local?function(){return this.ownerDocument.createElementNS(name.space,name.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,name)}}function d3_selection_dataNode(data){return{__data__:data}}function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}function d3_selection_sortComparator(comparator){return arguments.length||(comparator=d3.ascending),function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}function d3_selection_each(groups,callback){for(var j=0,m=groups.length;m>j;j++)for(var node,group=groups[j],i=0,n=group.length;n>i;i++)(node=group[i])&&callback(node,i,j);return groups}function d3_selection_enter(selection){return d3_subclass(selection,d3_selection_enterPrototype),selection}function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var node,group=enter[j].update,n=group.length;for(j!=j0&&(j0=j,i0=0),i>=i0&&(i0=i+1);!(node=group[i0])&&++i0<n;);return node}}function d3_selection_interrupt(){var lock=this.__transition__;lock&&++lock.active}function d3_selection_on(type,listener,capture){function onRemove(){var l=this[name];l&&(this.removeEventListener(type,l,l.$),delete this[name])}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this),this.addEventListener(type,this[name]=l,l.$=capture),l._=listener}function removeAll(){var match,re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$");for(var name in this)if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$),delete this[name]}}var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;i>0&&(type=type.substring(0,i));var filter=d3_selection_onFilters.get(type);return filter&&(type=filter,wrap=d3_selection_onFilter),i?listener?onAdd:onRemove:listener?d3_noop:removeAll}function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e,argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;related&&(related===target||8&related.compareDocumentPosition(target))||l.call(target,e)}}function d3_event_dragSuppress(){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(d3_event_dragSelect){var style=d3_documentElement.style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){function off(){w.on(click,null)}w.on(name,null),d3_event_dragSelect&&(style[d3_event_dragSelect]=select),suppressClick&&(w.on(click,function(){d3_eventPreventDefault(),off()},!0),setTimeout(off,0))}}function d3_mousePoint(container,e){e.changedTouches&&(e=e.changedTouches[0]);var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(0>d3_mouse_bug44083&&(d3_window.scrollX||d3_window.scrollY)){svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ctm=svg[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e),svg.remove()}return d3_mouse_bug44083?(point.x=e.pageX,point.y=e.pageY):(point.x=e.clientX,point.y=e.clientY),point=point.matrixTransform(container.getScreenCTM().inverse()),[point.x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}function d3_sgn(x){return x>0?1:0>x?-1:0}function d3_acos(x){return x>1?0:-1>x?π:Math.acos(x)}function d3_asin(x){return x>1?halfπ:-1>x?-halfπ:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}function d3_Color(){}function d3_hsl(h,s,l){return new d3_Hsl(h,s,l)}function d3_Hsl(h,s,l){this.h=h,this.s=s,this.l=l}function d3_hsl_rgb(h,s,l){function v(h){return h>360?h-=360:0>h&&(h+=360),60>h?m1+(m2-m1)*h/60:180>h?m2:240>h?m1+(m2-m1)*(240-h)/60:m1}function vv(h){return Math.round(255*v(h))}var m1,m2;return h=isNaN(h)?0:(h%=360)<0?h+360:h,s=isNaN(s)?0:0>s?0:s>1?1:s,l=0>l?0:l>1?1:l,m2=.5>=l?l*(1+s):l+s-l*s,m1=2*l-m2,d3_rgb(vv(h+120),vv(h),vv(h-120))}function d3_hcl(h,c,l){return new d3_Hcl(h,c,l)}function d3_Hcl(h,c,l){this.h=h,this.c=c,this.l=l}function d3_hcl_lab(h,c,l){return isNaN(h)&&(h=0),isNaN(c)&&(c=0),d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}function d3_lab(l,a,b){return new d3_Lab(l,a,b)}function d3_Lab(l,a,b){this.l=l,this.a=a,this.b=b}function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;return x=d3_lab_xyz(x)*d3_lab_X,y=d3_lab_xyz(y)*d3_lab_Y,z=d3_lab_xyz(z)*d3_lab_Z,d3_rgb(d3_xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):d3_hcl(0/0,0/0,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(.00304>=r?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function d3_rgbNumber(value){return d3_rgb(value>>16,value>>8&255,255&value)}function d3_rgbString(value){return d3_rgbNumber(value)+""}function d3_rgb(r,g,b){return new d3_Rgb(r,g,b)}function d3_Rgb(r,g,b){this.r=r,this.g=g,this.b=b}function d3_rgb_hex(v){return 16>v?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var m1,m2,name,r=0,g=0,b=0;if(m1=/([a-z]+)\((.*)\)/i.exec(format))switch(m2=m1[2].split(","),m1[1]){case"hsl":return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100);case"rgb":return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}return(name=d3_rgb_names.get(format))?rgb(name.r,name.g,name.b):(null!=format&&"#"===format.charAt(0)&&(4===format.length?(r=format.charAt(1),r+=r,g=format.charAt(2),g+=g,b=format.charAt(3),b+=b):7===format.length&&(r=format.substring(1,3),g=format.substring(3,5),b=format.substring(5,7)),r=parseInt(r,16),g=parseInt(g,16),b=parseInt(b,16)),rgb(r,g,b))}function d3_rgb_hsl(r,g,b){var h,s,min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,l=(max+min)/2;return d?(s=.5>l?d/(max+min):d/(2-max-min),h=r==max?(g-b)/d+(b>g?6:0):g==max?(b-r)/d+2:(r-g)/d+4,h*=60):(h=0/0,s=l>0&&1>l?0:h),d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){r=d3_rgb_xyz(r),g=d3_rgb_xyz(g),b=d3_rgb_xyz(b);var x=d3_xyz_lab((.4124564*r+.3575761*g+.1804375*b)/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y),z=d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z);return d3_lab(116*y-16,500*(x-y),200*(y-z))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*f):f}function d3_functor(v){return"function"==typeof v?v:function(){return v}}function d3_identity(d){return d}function d3_xhrType(response){return function(url,mimeType,callback){return 2===arguments.length&&"function"==typeof mimeType&&(callback=mimeType,mimeType=null),d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){function respond(){var result,status=request.status;if(!status&&request.responseText||status>=200&&300>status||304===status){try{result=response.call(xhr,request)}catch(e){return void dispatch.error.call(xhr,e)}dispatch.load.call(xhr,result)}else dispatch.error.call(xhr,request)}var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;return!d3_window.XDomainRequest||"withCredentials"in request||!/^(http(s)?:)?\/\//.test(url)||(request=new XDomainRequest),"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()},request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}},xhr.header=function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers[name]:(null==value?delete headers[name]:headers[name]=value+"",xhr)},xhr.mimeType=function(value){return arguments.length?(mimeType=null==value?null:value+"",xhr):mimeType},xhr.responseType=function(value){return arguments.length?(responseType=value,xhr):responseType},xhr.response=function(value){return response=value,xhr},["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}}),xhr.send=function(method,data,callback){if(2===arguments.length&&"function"==typeof data&&(callback=data,data=null),request.open(method,url,!0),null==mimeType||"accept"in headers||(headers.accept=mimeType+",*/*"),request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);return null!=mimeType&&request.overrideMimeType&&request.overrideMimeType(mimeType),null!=responseType&&(request.responseType=responseType),null!=callback&&xhr.on("error",callback).on("load",function(request){callback(null,request)}),dispatch.beforesend.call(xhr,request),request.send(null==data?null:data),xhr},xhr.abort=function(){return request.abort(),xhr},d3.rebind(xhr,dispatch,"on"),null==callback?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return 1===callback.length?function(error,request){callback(null==error?request:null)}:callback}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;delay>24?(isFinite(delay)&&(clearTimeout(d3_timer_timeout),d3_timer_timeout=setTimeout(d3_timer_step,delay)),d3_timer_interval=0):(d3_timer_interval=1,d3_timer_frame(d3_timer_step))}function d3_timer_mark(){var now=Date.now();for(d3_timer_active=d3_timer_queueHead;d3_timer_active;)now>=d3_timer_active.t&&(d3_timer_active.f=d3_timer_active.c(now-d3_timer_active.t)),d3_timer_active=d3_timer_active.n;return now}function d3_timer_sweep(){for(var t0,t1=d3_timer_queueHead,time=1/0;t1;)t1.f?t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n:(t1.t<time&&(time=t1.t),t1=(t0=t1).n);return d3_timer_queueTail=t0,time
}function d3_formatPrefix(d,i){var k=Math.pow(10,3*abs(8-i));return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}function d3_format_typeDefault(x){return x+""}function d3_adder(){}function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}function d3_geo_streamGeometry(geometry,listener){geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)&&d3_geo_streamGeometryType[geometry.type](geometry,listener)}function d3_geo_streamLine(coordinates,listener,closed){var coordinate,i=-1,n=coordinates.length-closed;for(listener.lineStart();++i<n;)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;for(listener.polygonStart();++i<n;)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}function d3_geo_areaRingStart(){function nextPoint(λ,φ){λ*=d3_radians,φ=φ*d3_radians/2+π/4;var dλ=λ-λ0,cosφ=Math.cos(φ),sinφ=Math.sin(φ),k=sinφ0*sinφ,u=cosφ0*cosφ+k*Math.cos(dλ),v=k*Math.sin(dλ);d3_geo_areaRingSum.add(Math.atan2(v,u)),λ0=λ,cosφ0=cosφ,sinφ0=sinφ}var λ00,φ00,λ0,cosφ0,sinφ0;d3_geo_area.point=function(λ,φ){d3_geo_area.point=nextPoint,λ0=(λ00=λ)*d3_radians,cosφ0=Math.cos(φ=(φ00=φ)*d3_radians/2+π/4),sinφ0=Math.sin(φ)},d3_geo_area.lineEnd=function(){nextPoint(λ00,φ00)}}function d3_geo_cartesian(spherical){var λ=spherical[0],φ=spherical[1],cosφ=Math.cos(φ);return[cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ)]}function d3_geo_cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<ε&&abs(a[1]-b[1])<ε}function d3_geo_centroidPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);d3_geo_centroidPointXYZ(cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ))}function d3_geo_centroidPointXYZ(x,y,z){++d3_geo_centroidW0,d3_geo_centroidX0+=(x-d3_geo_centroidX0)/d3_geo_centroidW0,d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0,d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}var x0,y0,z0;d3_geo_centroid.point=function(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroid.point=nextPoint,d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx,d3_geo_centroidY2+=v*cy,d3_geo_centroidZ2+=v*cz,d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}var λ00,φ00,x0,y0,z0;d3_geo_centroid.point=function(λ,φ){λ00=λ,φ00=φ,d3_geo_centroid.point=nextPoint,λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroidPointXYZ(x0,y0,z0)},d3_geo_centroid.lineEnd=function(){nextPoint(λ00,φ00),d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd,d3_geo_centroid.point=d3_geo_centroidPoint}}function d3_true(){return!0}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];if(segments.forEach(function(segment){if(!((n=segment.length-1)<=0)){var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart();for(var i=0;n>i;++i)listener.point((p0=segment[i])[0],p0[1]);return void listener.lineEnd()}var a=new d3_geo_clipPolygonIntersection(p0,segment,null,!0),b=new d3_geo_clipPolygonIntersection(p0,null,a,!1);a.o=b,subject.push(a),clip.push(b),a=new d3_geo_clipPolygonIntersection(p1,segment,null,!1),b=new d3_geo_clipPolygonIntersection(p1,null,a,!0),a.o=b,subject.push(a),clip.push(b)}}),clip.sort(compare),d3_geo_clipPolygonLinkCircular(subject),d3_geo_clipPolygonLinkCircular(clip),subject.length){for(var i=0,entry=clipStartInside,n=clip.length;n>i;++i)clip[i].e=entry=!entry;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,listener.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(var i=0,n=points.length;n>i;++i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,listener);current=current.n}else{if(isSubject){points=current.p.z;for(var i=points.length-1;i>=0;--i)listener.point((point=points[i])[0],point[1])}else interpolate(current.x,current.p.x,-1,listener);current=current.p}current=current.o,points=current.z,isSubject=!isSubject}while(!current.v);listener.lineEnd()}}}function d3_geo_clipPolygonLinkCircular(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){function point(λ,φ){var point=rotate(λ,φ);pointVisible(λ=point[0],φ=point[1])&&listener.point(λ,φ)}function pointLine(λ,φ){var point=rotate(λ,φ);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(λ,φ){ring.push([λ,φ]);var point=rotate(λ,φ);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringListener.lineEnd();var segment,clean=ringListener.clean(),ringSegments=buffer.buffer(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n){if(1&clean){segment=ringSegments[0];var point,n=segment.length-1,i=-1;for(listener.lineStart();++i<n;)listener.point((point=segment[i])[0],point[1]);return void listener.lineEnd()}n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}}var segments,polygon,ring,line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[],listener.polygonStart()},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=d3.merge(segments);var clipStartInside=d3_geo_pointInPolygon(rotatedClipStart,polygon);segments.length?d3_geo_clipPolygon(segments,d3_geo_clipSort,clipStartInside,interpolate,listener):clipStartInside&&(listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),listener.polygonEnd(),segments=polygon=null},sphere:function(){listener.polygonStart(),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd(),listener.polygonEnd()}},buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer);return clip}}function d3_geo_clipSegmentLength1(segment){return segment.length>1}function d3_geo_clipBufferListener(){var line,lines=[];return{lineStart:function(){lines.push(line=[])},point:function(λ,φ){line.push([λ,φ])},lineEnd:d3_noop,buffer:function(){var buffer=lines;return lines=[],line=null,buffer},rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x)[0]<0?a[1]-halfπ-ε:halfπ-a[1])-((b=b.x)[0]<0?b[1]-halfπ-ε:halfπ-b[1])}function d3_geo_pointInPolygon(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;n>i;++i){var ring=polygon[i],m=ring.length;if(m)for(var point0=ring[0],λ0=point0[0],φ0=point0[1]/2+π/4,sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),j=1;;){j===m&&(j=0),point=ring[j];var λ=point[0],φ=point[1]/2+π/4,sinφ=Math.sin(φ),cosφ=Math.cos(φ),dλ=λ-λ0,antimeridian=abs(dλ)>π,k=sinφ0*sinφ;if(d3_geo_areaRingSum.add(Math.atan2(k*Math.sin(dλ),cosφ0*cosφ+k*Math.cos(dλ))),polarAngle+=antimeridian?dλ+(dλ>=0?τ:-τ):dλ,antimeridian^λ0>=meridian^λ>=meridian){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var φarc=(antimeridian^dλ>=0?-1:1)*d3_asin(intersection[2]);(parallel>φarc||parallel===φarc&&(arc[0]||arc[1]))&&(winding+=antimeridian^dλ>=0?1:-1)}if(!j++)break;λ0=λ,sinφ0=sinφ,cosφ0=cosφ,point0=point}}return(-ε>polarAngle||ε>polarAngle&&0>d3_geo_areaRingSum)^1&winding}function d3_geo_clipAntimeridianLine(listener){var clean,λ0=0/0,φ0=0/0,sλ0=0/0;return{lineStart:function(){listener.lineStart(),clean=1},point:function(λ1,φ1){var sλ1=λ1>0?π:-π,dλ=abs(λ1-λ0);abs(dλ-π)<ε?(listener.point(λ0,φ0=(φ0+φ1)/2>0?halfπ:-halfπ),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),listener.point(λ1,φ0),clean=0):sλ0!==sλ1&&dλ>=π&&(abs(λ0-sλ0)<ε&&(λ0-=sλ0*ε),abs(λ1-sλ1)<ε&&(λ1-=sλ1*ε),φ0=d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),clean=0),listener.point(λ0=λ1,φ0=φ1),sλ0=sλ1},lineEnd:function(){listener.lineEnd(),λ0=φ0=0/0},clean:function(){return 2-clean}}}function d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1){var cosφ0,cosφ1,sinλ0_λ1=Math.sin(λ0-λ1);return abs(sinλ0_λ1)>ε?Math.atan((Math.sin(φ0)*(cosφ1=Math.cos(φ1))*Math.sin(λ1)-Math.sin(φ1)*(cosφ0=Math.cos(φ0))*Math.sin(λ0))/(cosφ0*cosφ1*sinλ0_λ1)):(φ0+φ1)/2}function d3_geo_clipAntimeridianInterpolate(from,to,direction,listener){var φ;if(null==from)φ=direction*halfπ,listener.point(-π,φ),listener.point(0,φ),listener.point(π,φ),listener.point(π,0),listener.point(π,-φ),listener.point(0,-φ),listener.point(-π,-φ),listener.point(-π,0),listener.point(-π,φ);else if(abs(from[0]-to[0])>ε){var s=from[0]<to[0]?π:-π;φ=direction*s/2,listener.point(-s,φ),listener.point(0,φ),listener.point(s,φ)}else listener.point(to[0],to[1])}function d3_geo_clipCircle(radius){function visible(λ,φ){return Math.cos(λ)*Math.cos(φ)>cr}function clipLine(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(λ,φ){var point2,point1=[λ,φ],v=visible(λ,φ),c=smallRadius?v?0:code(λ,φ):v?code(λ+(0>λ?π:-π),φ):0;if(!point0&&(v00=v0=v)&&listener.lineStart(),v!==v0&&(point2=intersect(point0,point1),(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2))&&(point1[0]+=ε,point1[1]+=ε,v=visible(point1[0],point1[1]))),v!==v0)clean=0,v?(listener.lineStart(),point2=intersect(point1,point0),listener.point(point2[0],point2[1])):(point2=intersect(point0,point1),listener.point(point2[0],point2[1]),listener.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(listener.lineStart(),listener.point(t[0][0],t[0][1]),listener.point(t[1][0],t[1][1]),listener.lineEnd()):(listener.point(t[1][0],t[1][1]),listener.lineEnd(),listener.lineStart(),listener.point(t[0][0],t[0][1])))}!v||point0&&d3_geo_sphericalEqual(point0,point1)||listener.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&listener.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa=d3_geo_cartesian(a),pb=d3_geo_cartesian(b),n1=[1,0,0],n2=d3_geo_cartesianCross(pa,pb),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1),B=d3_geo_cartesianScale(n2,c2);d3_geo_cartesianAdd(A,B);var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(!(0>t2)){var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);if(d3_geo_cartesianAdd(q,A),q=d3_geo_spherical(q),!two)return q;var z,λ0=a[0],λ1=b[0],φ0=a[1],φ1=b[1];λ0>λ1&&(z=λ0,λ0=λ1,λ1=z);var δλ=λ1-λ0,polar=abs(δλ-π)<ε,meridian=polar||ε>δλ;if(!polar&&φ0>φ1&&(z=φ0,φ0=φ1,φ1=z),meridian?polar?φ0+φ1>0^q[1]<(abs(q[0]-λ0)<ε?φ0:φ1):φ0<=q[1]&&q[1]<=φ1:δλ>π^(λ0<=q[0]&&q[0]<=λ1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);return d3_geo_cartesianAdd(q1,A),[q,d3_geo_spherical(q1)]}}}function code(λ,φ){var r=smallRadius?radius:π-radius,code=0;return-r>λ?code|=1:λ>r&&(code|=2),-r>φ?code|=4:φ>r&&(code|=8),code}var cr=Math.cos(radius),smallRadius=cr>0,notHemisphere=abs(cr)>ε,interpolate=d3_geo_circleInterpolate(radius,6*d3_radians);return d3_geo_clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-π,radius-π])}function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var r,a=line.a,b=line.b,ax=a.x,ay=a.y,bx=b.x,by=b.y,t0=0,t1=1,dx=bx-ax,dy=by-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,0>dx){if(t0>r)return;t1>r&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(0>r)){if(r/=dx,0>dx){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(t0>r)return;t1>r&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,0>dy){if(t0>r)return;t1>r&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(0>r)){if(r/=dy,0>dy){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(t0>r)return;t1>r&&(t1=r)}return t0>0&&(line.a={x:ax+t0*dx,y:ay+t0*dy}),1>t1&&(line.b={x:ax+t1*dx,y:ay+t1*dy}),line}}}}}}function d3_geo_clipExtent(x0,y0,x1,y1){function corner(p,direction){return abs(p[0]-x0)<ε?direction>0?0:3:abs(p[0]-x1)<ε?direction>0?2:1:abs(p[1]-y0)<ε?direction>0?1:0:direction>0?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(listener){function insidePolygon(p){for(var wn=0,n=polygon.length,y=p[1],i=0;n>i;++i)for(var b,j=1,v=polygon[i],m=v.length,a=v[0];m>j;++j)b=v[j],a[1]<=y?b[1]>y&&isLeft(a,b,p)>0&&++wn:b[1]<=y&&isLeft(a,b,p)<0&&--wn,a=b;return 0!==wn}function isLeft(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function interpolate(from,to,direction,listener){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^direction>0){do listener.point(0===a||3===a?x0:x1,a>1?y1:y0);while((a=(a+direction+4)%4)!==a1)}else listener.point(to[0],to[1])}function pointVisible(x,y){return x>=x0&&x1>=x&&y>=y0&&y1>=y}function point(x,y){pointVisible(x,y)&&listener.point(x,y)}function lineStart(){clip.point=linePoint,polygon&&polygon.push(ring=[]),first=!0,v_=!1,x_=y_=0/0}function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferListener.rejoin(),segments.push(bufferListener.buffer())),clip.point=point,v_&&listener.lineEnd()}function linePoint(x,y){x=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,x)),y=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,y));var v=pointVisible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(listener.lineStart(),listener.point(x,y));else if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};clipLine(l)?(v_||(listener.lineStart(),listener.point(l.a.x,l.a.y)),listener.point(l.b.x,l.b.y),v||listener.lineEnd(),clean=!1):v&&(listener.lineStart(),listener.point(x,y),clean=!1)}x_=x,y_=y,v_=v}var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){listener=bufferListener,segments=[],polygon=[],clean=!0},polygonEnd:function(){listener=listener_,segments=d3.merge(segments);var clipStartInside=insidePolygon([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;(inside||visible)&&(listener.polygonStart(),inside&&(listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),visible&&d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener),listener.polygonEnd()),segments=polygon=ring=null}};return clip}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return x=b.invert(x,y),x&&a.invert(x[0],x[1])}),compose}function d3_geo_conic(projectAt){var φ0=0,φ1=π/3,m=d3_geo_projectionMutator(projectAt),p=m(φ0,φ1);return p.parallels=function(_){return arguments.length?m(φ0=_[0]*π/180,φ1=_[1]*π/180):[φ0/π*180,φ1/π*180]},p}function d3_geo_conicEqualArea(φ0,φ1){function forward(λ,φ){var ρ=Math.sqrt(C-2*n*Math.sin(φ))/n;return[ρ*Math.sin(λ*=n),ρ0-ρ*Math.cos(λ)]}var sinφ0=Math.sin(φ0),n=(sinφ0+Math.sin(φ1))/2,C=1+sinφ0*(2*n-sinφ0),ρ0=Math.sqrt(C)/n;return forward.invert=function(x,y){var ρ0_y=ρ0-y;return[Math.atan2(x,ρ0_y)/n,d3_asin((C-(x*x+ρ0_y*ρ0_y)*n*n)/(2*n))]},forward}function d3_geo_pathAreaRingStart(){function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y,x0=x,y0=y}var x00,y00,x0,y0;d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint,x00=x0=x,y00=y0=y},d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathBoundsPoint(x,y){d3_geo_pathBoundsX0>x&&(d3_geo_pathBoundsX0=x),x>d3_geo_pathBoundsX1&&(d3_geo_pathBoundsX1=x),d3_geo_pathBoundsY0>y&&(d3_geo_pathBoundsY0=y),y>d3_geo_pathBoundsY1&&(d3_geo_pathBoundsY1=y)}function d3_geo_pathBuffer(){function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y){buffer.push("M",x,",",y),stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[],stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointCircle=d3_geo_pathBufferCircle(_),stream},result:function(){if(buffer.length){var result=buffer.join("");return buffer=[],result}}};return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x,d3_geo_centroidY0+=y,++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_pathCentroidPoint(x0=x,y0=y)}var x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}function d3_geo_pathCentroidRingStart(){function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,z=y0*x-x0*y,d3_geo_centroidX2+=z*(x0+x),d3_geo_centroidY2+=z*(y0+y),d3_geo_centroidZ2+=3*z,d3_geo_pathCentroidPoint(x0=x,y0=y)}var x00,y00,x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)},d3_geo_pathCentroid.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathContext(context){function point(x,y){context.moveTo(x,y),context.arc(x,y,pointRadius,0,τ)}function pointLineStart(x,y){context.moveTo(x,y),stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}var pointRadius=4.5,stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointRadius=_,stream},result:d3_noop};return stream}function d3_geo_resample(project){function resample(stream){return(maxDepth?resampleRecursive:resampleNone)(stream)}function resampleNone(stream){return d3_geo_transformPoint(stream,function(x,y){x=project(x,y),stream.point(x[0],x[1])})}function resampleRecursive(stream){function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=0/0,resample.point=linePoint,stream.lineStart()}function linePoint(λ,φ){var c=d3_geo_cartesian([λ,φ]),p=project(λ,φ);resampleLineTo(x0,y0,λ0,a0,b0,c0,x0=p[0],y0=p[1],λ0=λ,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resample.point=point,stream.lineEnd()}function ringStart(){lineStart(),resample.point=ringPoint,resample.lineEnd=ringEnd}function ringPoint(λ,φ){linePoint(λ00=λ,φ00=φ),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,λ0,a0,b0,c0,x00,y00,λ00,a00,b00,c00,maxDepth,stream),resample.lineEnd=lineEnd,lineEnd()}var λ00,φ00,x00,y00,a00,b00,c00,λ0,x0,y0,a0,b0,c0,resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resample.lineStart=lineStart}};return resample}function resampleLineTo(x0,y0,λ0,a0,b0,c0,x1,y1,λ1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*δ2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),φ2=Math.asin(c/=m),λ2=abs(abs(c)-1)<ε||abs(λ0-λ1)<ε?(λ0+λ1)/2:Math.atan2(b,a),p=project(λ2,φ2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>δ2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||cosMinDistance>a0*a1+b0*b1+c0*c1)&&(resampleLineTo(x0,y0,λ0,a0,b0,c0,x2,y2,λ2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,λ2,a,b,c,x1,y1,λ1,a1,b1,c1,depth,stream))}}var δ2=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;return resample.precision=function(_){return arguments.length?(maxDepth=(δ2=_*_)>0&&16,resample):Math.sqrt(δ2)},resample}function d3_geo_pathProjectStream(project){var resample=d3_geo_resample(function(x,y){return project([x*d3_degrees,y*d3_degrees])});return function(stream){return d3_geo_projectionRadians(resample(stream))}}function d3_geo_transform(stream){this.stream=stream}function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}function d3_geo_projection(project){return d3_geo_projectionMutator(function(){return project})()}function d3_geo_projectionMutator(projectAt){function projection(point){return point=projectRotate(point[0]*d3_radians,point[1]*d3_radians),[point[0]*k+δx,δy-point[1]*k]}function invert(point){return point=projectRotate.invert((point[0]-δx)/k,(δy-point[1])/k),point&&[point[0]*d3_degrees,point[1]*d3_degrees]}function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(δλ,δφ,δγ),project);var center=project(λ,φ);return δx=x-center[0]*k,δy=y+center[1]*k,invalidate()}function invalidate(){return stream&&(stream.valid=!1,stream=null),projection}var project,rotate,projectRotate,δx,δy,stream,projectResample=d3_geo_resample(function(x,y){return x=project(x,y),[x[0]*k+δx,δy-x[1]*k]}),k=150,x=480,y=250,λ=0,φ=0,δλ=0,δφ=0,δγ=0,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null;return projection.stream=function(output){return stream&&(stream.valid=!1),stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output)))),stream.valid=!0,stream},projection.clipAngle=function(_){return arguments.length?(preclip=null==_?(clipAngle=_,d3_geo_clipAntimeridian):d3_geo_clipCircle((clipAngle=+_)*d3_radians),invalidate()):clipAngle},projection.clipExtent=function(_){return arguments.length?(clipExtent=_,postclip=_?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]):d3_identity,invalidate()):clipExtent},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],reset()):[x,y]},projection.center=function(_){return arguments.length?(λ=_[0]%360*d3_radians,φ=_[1]%360*d3_radians,reset()):[λ*d3_degrees,φ*d3_degrees]},projection.rotate=function(_){return arguments.length?(δλ=_[0]%360*d3_radians,δφ=_[1]%360*d3_radians,δγ=_.length>2?_[2]%360*d3_radians:0,reset()):[δλ*d3_degrees,δφ*d3_degrees,δγ*d3_degrees]},d3.rebind(projection,projectResample,"precision"),function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,function(x,y){stream.point(x*d3_radians,y*d3_radians)})}function d3_geo_equirectangular(λ,φ){return[λ,φ]}function d3_geo_identityRotation(λ,φ){return[λ>π?λ-τ:-π>λ?λ+τ:λ,φ]}function d3_geo_rotation(δλ,δφ,δγ){return δλ?δφ||δγ?d3_geo_compose(d3_geo_rotationλ(δλ),d3_geo_rotationφγ(δφ,δγ)):d3_geo_rotationλ(δλ):δφ||δγ?d3_geo_rotationφγ(δφ,δγ):d3_geo_identityRotation}function d3_geo_forwardRotationλ(δλ){return function(λ,φ){return λ+=δλ,[λ>π?λ-τ:-π>λ?λ+τ:λ,φ]}}function d3_geo_rotationλ(δλ){var rotation=d3_geo_forwardRotationλ(δλ);return rotation.invert=d3_geo_forwardRotationλ(-δλ),rotation}function d3_geo_rotationφγ(δφ,δγ){function rotation(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδφ+x*sinδφ;return[Math.atan2(y*cosδγ-k*sinδγ,x*cosδφ-z*sinδφ),d3_asin(k*cosδγ+y*sinδγ)]}var cosδφ=Math.cos(δφ),sinδφ=Math.sin(δφ),cosδγ=Math.cos(δγ),sinδγ=Math.sin(δγ);return rotation.invert=function(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδγ-y*sinδγ;return[Math.atan2(y*cosδγ+z*sinδγ,x*cosδφ+k*sinδφ),d3_asin(k*cosδφ-x*sinδφ)]},rotation}function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;null!=from?(from=d3_geo_circleAngle(cr,from),to=d3_geo_circleAngle(cr,to),(direction>0?to>from:from>to)&&(from+=direction*τ)):(from=radius+direction*τ,to=radius-.5*step);for(var point,t=from;direction>0?t>to:to>t;t-=step)listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr,d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-ε)%(2*Math.PI)}function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-ε,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-ε,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function d3_source(d){return d.source}function d3_target(d){return d.target}function d3_geo_interpolate(x0,y0,x1,y1){var cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d),interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y))*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]};return interpolate.distance=d,interpolate}function d3_geo_lengthLineStart(){function nextPoint(λ,φ){var sinφ=Math.sin(φ*=d3_radians),cosφ=Math.cos(φ),t=abs((λ*=d3_radians)-λ0),cosΔλ=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cosφ*Math.sin(t))*t+(t=cosφ0*sinφ-sinφ0*cosφ*cosΔλ)*t),sinφ0*sinφ+cosφ0*cosφ*cosΔλ),λ0=λ,sinφ0=sinφ,cosφ0=cosφ}var λ0,sinφ0,cosφ0;d3_geo_length.point=function(λ,φ){λ0=λ*d3_radians,sinφ0=Math.sin(φ*=d3_radians),cosφ0=Math.cos(φ),d3_geo_length.point=nextPoint},d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop}}function d3_geo_azimuthal(scale,angle){function azimuthal(λ,φ){var cosλ=Math.cos(λ),cosφ=Math.cos(φ),k=scale(cosλ*cosφ);return[k*cosφ*Math.sin(λ),k*Math.sin(φ)]}return azimuthal.invert=function(x,y){var ρ=Math.sqrt(x*x+y*y),c=angle(ρ),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,ρ*cosc),Math.asin(ρ&&y*sinc/ρ)]},azimuthal}function d3_geo_conicConformal(φ0,φ1){function forward(λ,φ){var ρ=abs(abs(φ)-halfπ)<ε?0:F/Math.pow(t(φ),n);return[ρ*Math.sin(n*λ),F-ρ*Math.cos(n*λ)]}var cosφ0=Math.cos(φ0),t=function(φ){return Math.tan(π/4+φ/2)},n=φ0===φ1?Math.sin(φ0):Math.log(cosφ0/Math.cos(φ1))/Math.log(t(φ1)/t(φ0)),F=cosφ0*Math.pow(t(φ0),n)/n;return n?(forward.invert=function(x,y){var ρ0_y=F-y,ρ=d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y);return[Math.atan2(x,ρ0_y)/n,2*Math.atan(Math.pow(F/ρ,1/n))-halfπ]},forward):d3_geo_mercator}function d3_geo_conicEquidistant(φ0,φ1){function forward(λ,φ){var ρ=G-φ;return[ρ*Math.sin(n*λ),G-ρ*Math.cos(n*λ)]}var cosφ0=Math.cos(φ0),n=φ0===φ1?Math.sin(φ0):(cosφ0-Math.cos(φ1))/(φ1-φ0),G=cosφ0/n+φ0;return abs(n)<ε?d3_geo_equirectangular:(forward.invert=function(x,y){var ρ0_y=G-y;return[Math.atan2(x,ρ0_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y)]},forward)}function d3_geo_mercator(λ,φ){return[λ,Math.log(Math.tan(π/4+φ/2))]}function d3_geo_mercatorProjection(project){var clipAuto,m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent;return m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=null==_){var k=π*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else clipAuto&&(v=null);return v},m.clipExtent(null)}function d3_geo_transverseMercator(λ,φ){return[Math.log(Math.tan(π/4+φ/2)),-λ]}function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}function d3_geom_hullCCW(i1,i2,i3,v){var t,a,b,c,d,e,f;return t=v[i1],a=t[0],b=t[1],t=v[i2],c=t[0],d=t[1],t=v[i3],e=t[0],f=t[1],(f-b)*(c-a)-(d-b)*(e-a)>0}function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;return beach.site=site,beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach),d3_geom_voronoiBeaches.remove(beach),d3_geom_voronoiBeachPool.push(beach),d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);for(var lArc=previous;lArc.circle&&abs(x-lArc.circle.x)<ε&&abs(y-lArc.circle.cy)<ε;)previous=lArc.P,disappearing.unshift(lArc),d3_geom_voronoiDetachBeach(lArc),lArc=previous;
disappearing.unshift(lArc),d3_geom_voronoiDetachCircle(lArc);for(var rArc=next;rArc.circle&&abs(x-rArc.circle.x)<ε&&abs(y-rArc.circle.cy)<ε;)next=rArc.N,disappearing.push(rArc),d3_geom_voronoiDetachBeach(rArc),rArc=next;disappearing.push(rArc),d3_geom_voronoiDetachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;nArcs>iArc;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],rArc=disappearing[nArcs-1],rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,rArc.site,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){for(var lArc,rArc,dxl,dxr,x=site.x,directrix=site.y,node=d3_geom_voronoiBeaches._;node;)if(dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x,dxl>ε)node=node.L;else{if(dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix),!(dxr>ε)){dxl>-ε?(lArc=node.P,rArc=node):dxr>-ε?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}var newArc=d3_geom_voronoiCreateBeach(site);if(d3_geom_voronoiBeaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return d3_geom_voronoiDetachCircle(lArc),rArc=d3_geom_voronoiCreateBeach(lArc.site),d3_geom_voronoiBeaches.insert(newArc,rArc),newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site),d3_geom_voronoiAttachCircle(lArc),void d3_geom_voronoiAttachCircle(rArc);if(!rArc)return void(newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site));d3_geom_voronoiDetachCircle(lArc),d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex),rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;site=lArc.site;var lfocx=site.x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:1/0}function d3_geom_voronoiCell(site){this.site=site,this.edges=[]}function d3_geom_voronoiCloseCells(extent){for(var x2,y2,x3,y3,cell,iHalfEdge,halfEdges,nHalfEdges,start,end,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],cells=d3_geom_voronoiCells,iCell=cells.length;iCell--;)if(cell=cells[iCell],cell&&cell.prepare())for(halfEdges=cell.edges,nHalfEdges=halfEdges.length,iHalfEdge=0;nHalfEdges>iHalfEdge;)end=halfEdges[iHalfEdge].end(),x3=end.x,y3=end.y,start=halfEdges[++iHalfEdge%nHalfEdges].start(),x2=start.x,y2=start.y,(abs(x3-x2)>ε||abs(y3-y2)>ε)&&(halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site,end,abs(x3-x0)<ε&&y1-y3>ε?{x:x0,y:abs(x2-x0)<ε?y2:y1}:abs(y3-y1)<ε&&x1-x3>ε?{x:abs(y2-y1)<ε?x2:x1,y:y1}:abs(x3-x1)<ε&&y3-y0>ε?{x:x1,y:abs(x2-x1)<ε?y2:y0}:abs(y3-y0)<ε&&x3-x0>ε?{x:abs(y2-y0)<ε?x2:x0,y:y0}:null),cell.site,null)),++nHalfEdges)}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,cy=rSite.y-by,d=2*(ax*cy-ay*cx);if(!(d>=-ε2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by,circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=cy+Math.sqrt(x*x+y*y),circle.cy=cy,arc.circle=circle;for(var before=null,node=d3_geom_voronoiCircles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}d3_geom_voronoiCircles.insert(before,circle),before||(d3_geom_voronoiFirstCircle=circle)}}}}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;circle&&(circle.P||(d3_geom_voronoiFirstCircle=circle.N),d3_geom_voronoiCircles.remove(circle),d3_geom_voronoiCirclePool.push(circle),d3_geom_voronoiRedBlackNode(circle),arc.circle=null)}function d3_geom_voronoiClipEdges(extent){for(var e,edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length;i--;)e=edges[i],(!d3_geom_voronoiConnectEdge(e,extent)||!clip(e)||abs(e.a.x-e.b.x)<ε&&abs(e.a.y-e.b.y)<ε)&&(e.a=e.b=null,edges.splice(i,1))}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return!0;var fm,fb,va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(x0>fx||fx>=x1)return;if(lx>rx){if(va){if(va.y>=y1)return}else va={x:fx,y:y0};vb={x:fx,y:y1}}else{if(va){if(va.y<y0)return}else va={x:fx,y:y1};vb={x:fx,y:y0}}}else if(fm=(lx-rx)/(ry-ly),fb=fy-fm*fx,-1>fm||fm>1)if(lx>rx){if(va){if(va.y>=y1)return}else va={x:(y0-fb)/fm,y:y0};vb={x:(y1-fb)/fm,y:y1}}else{if(va){if(va.y<y0)return}else va={x:(y1-fb)/fm,y:y1};vb={x:(y0-fb)/fm,y:y0}}else if(ry>ly){if(va){if(va.x>=x1)return}else va={x:x0,y:fm*x0+fb};vb={x:x1,y:fm*x1+fb}}else{if(va){if(va.x<x0)return}else va={x:x1,y:fm*x1+fb};vb={x:x0,y:fm*x0+fb}}return edge.a=va,edge.b=vb,!0}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite,this.r=rSite,this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);return d3_geom_voronoiEdges.push(edge),va&&d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va),vb&&d3_geom_voronoiSetEdgeEnd(edge,rSite,lSite,vb),d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite)),d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite)),edge}function d3_geom_voronoiCreateBorderEdge(lSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,null);return edge.a=va,edge.b=vb,d3_geom_voronoiEdges.push(edge),edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){edge.a||edge.b?edge.l===rSite?edge.b=vertex:edge.a=vertex:(edge.a=vertex,edge.l=lSite,edge.r=rSite)}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge,this.site=lSite,this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function d3_geom_voronoiRedBlackFirst(node){for(;node.L;)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var x0,y0,circle,site=sites.sort(d3_geom_voronoiVertexOrder).pop();for(d3_geom_voronoiEdges=[],d3_geom_voronoiCells=new Array(sites.length),d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree,d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;;)if(circle=d3_geom_voronoiFirstCircle,site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x))(site.x!==x0||site.y!==y0)&&(d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site),d3_geom_voronoiAddBeach(site),x0=site.x,y0=site.y),site=sites.pop();else{if(!circle)break;d3_geom_voronoiRemoveBeach(circle.arc)}bbox&&(d3_geom_voronoiClipEdges(bbox),d3_geom_voronoiCloseCells(bbox));var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};return d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null,diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}function d3_geom_voronoiTriangleArea(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=.5*(x1+x2),sy=.5*(y1+y2),children=node.nodes;children[0]&&d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy),children[1]&&d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy),children[2]&&d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2),children[3]&&d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}function d3_interpolateRgb(a,b){a=d3.rgb(a),b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}function d3_interpolateObject(a,b){var k,i={},c={};for(k in a)k in b?i[k]=d3_interpolate(a[k],b[k]):c[k]=a[k];for(k in b)k in a||(c[k]=b[k]);return function(t){for(k in i)c[k]=i[k](t);return c}}function d3_interpolateNumber(a,b){return b-=a=+a,function(t){return a+b*t}}function d3_interpolateString(a,b){var m,i,j,n,o,s0=0,s1=0,s=[],q=[];for(a+="",b+="",d3_interpolate_number.lastIndex=0,i=0;m=d3_interpolate_number.exec(b);++i)m.index&&s.push(b.substring(s0,s1=m.index)),q.push({i:s.length,x:m[0]}),s.push(null),s0=d3_interpolate_number.lastIndex;for(s0<b.length&&s.push(b.substring(s0)),i=0,n=q.length;(m=d3_interpolate_number.exec(a))&&n>i;++i)if(o=q[i],o.x==m[0]){if(o.i)if(null==s[o.i+1])for(s[o.i-1]+=o.x,s.splice(o.i,1),j=i+1;n>j;++j)q[j].i--;else for(s[o.i-1]+=o.x+s[o.i+1],s.splice(o.i,2),j=i+1;n>j;++j)q[j].i-=2;else if(null==s[o.i+1])s[o.i]=o.x;else for(s[o.i]=o.x+s[o.i+1],s.splice(o.i+1,1),j=i+1;n>j;++j)q[j].i--;q.splice(i,1),n--,i--}else o.x=d3_interpolateNumber(parseFloat(m[0]),parseFloat(o.x));for(;n>i;)o=q.pop(),null==s[o.i+1]?s[o.i]=o.x:(s[o.i]=o.x+s[o.i+1],s.splice(o.i+1,1)),n--;return 1===s.length?null==s[0]?(o=q[0].x,function(t){return o(t)+""}):function(){return b}:function(t){for(i=0;n>i;++i)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_interpolate(a,b){for(var f,i=d3.interpolators.length;--i>=0&&!(f=d3.interpolators[i](a,b)););return f}function d3_interpolateArray(a,b){var i,x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length);for(i=0;n0>i;++i)x.push(d3_interpolate(a[i],b[i]));for(;na>i;++i)c[i]=a[i];for(;nb>i;++i)c[i]=b[i];return function(t){for(i=0;n0>i;++i)c[i]=x[i](t);return c}}function d3_ease_clamp(f){return function(t){return 0>=t?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(.5>t?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(0>=t)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(.5>t?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*halfπ)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;return arguments.length<2&&(p=.45),arguments.length?s=p/τ*Math.asin(1/a):(a=1,s=p/4),function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*τ/p)}}function d3_ease_back(s){return s||(s=1.70158),function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function d3_interpolateHcl(a,b){a=d3.hcl(a),b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;return isNaN(bc)&&(bc=0,ac=isNaN(ac)?b.c:ac),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:-180>bh&&(bh+=360),function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}}function d3_interpolateHsl(a,b){a=d3.hsl(a),b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,bh=b.h-ah,bs=b.s-as,bl=b.l-al;return isNaN(bs)&&(bs=0,as=isNaN(as)?b.s:as),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:-180>bh&&(bh+=360),function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}}function d3_interpolateLab(a,b){a=d3.lab(a),b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}}function d3_interpolateRound(a,b){return b-=a,function(t){return Math.round(a+b*t)}}function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;r0[0]*r1[1]<r1[0]*r0[1]&&(r0[0]*=-1,r0[1]*=-1,kx*=-1,kz*=-1),this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees,this.translate=[m.e,m.f],this.scale=[kx,ky],this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));return k&&(a[0]/=k,a[1]/=k),k}function d3_transformCombine(a,b,k){return a[0]+=k*b[0],a[1]+=k*b[1],a}function d3_interpolateTransform(a,b){var n,s=[],q=[],A=d3.transform(a),B=d3.transform(b),ta=A.translate,tb=B.translate,ra=A.rotate,rb=B.rotate,wa=A.skew,wb=B.skew,ka=A.scale,kb=B.scale;return ta[0]!=tb[0]||ta[1]!=tb[1]?(s.push("translate(",null,",",null,")"),q.push({i:1,x:d3_interpolateNumber(ta[0],tb[0])},{i:3,x:d3_interpolateNumber(ta[1],tb[1])})):s.push(tb[0]||tb[1]?"translate("+tb+")":""),ra!=rb?(ra-rb>180?rb+=360:rb-ra>180&&(ra+=360),q.push({i:s.push(s.pop()+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})):rb&&s.push(s.pop()+"rotate("+rb+")"),wa!=wb?q.push({i:s.push(s.pop()+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)}):wb&&s.push(s.pop()+"skewX("+wb+")"),ka[0]!=kb[0]||ka[1]!=kb[1]?(n=s.push(s.pop()+"scale(",null,",",null,")"),q.push({i:n-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:n-2,x:d3_interpolateNumber(ka[1],kb[1])})):(1!=kb[0]||1!=kb[1])&&s.push(s.pop()+"scale("+kb+")"),n=q.length,function(t){for(var o,i=-1;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){return b=b-(a=+a)?1/(b-a):0,function(x){return(x-a)*b}}function d3_uninterpolateClamp(a,b){return b=b-(a=+a)?1/(b-a):0,function(x){return Math.max(0,Math.min(1,(x-a)*b))}}function d3_layout_bundlePath(link){for(var start=link.source,end=link.target,lca=d3_layout_bundleLeastCommonAncestor(start,end),points=[start];start!==lca;)start=start.parent,points.push(start);for(var k=points.length;end!==lca;)points.splice(k,0,end),end=end.parent;return points}function d3_layout_bundleAncestors(node){for(var ancestors=[],parent=node.parent;null!=parent;)ancestors.push(node),node=parent,parent=parent.parent;return ancestors.push(node),ancestors}function d3_layout_bundleLeastCommonAncestor(a,b){if(a===b)return a;for(var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),sharedNode=null;aNode===bNode;)sharedNode=aNode,aNode=aNodes.pop(),bNode=bNodes.pop();return sharedNode}function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=-7}function d3_layout_forceMouseover(d){d.fixed|=4,d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=-5}function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;if(quad.charge=0,!quad.leaf)for(var c,nodes=quad.nodes,n=nodes.length,i=-1;++i<n;)c=nodes[i],null!=c&&(d3_layout_forceAccumulate(c,alpha,charges),quad.charge+=c.charge,cx+=c.charge*c.cx,cy+=c.charge*c.cy);if(quad.point){quad.leaf||(quad.point.x+=Math.random()-.5,quad.point.y+=Math.random()-.5);var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k,cx+=k*quad.point.x,cy+=k*quad.point.y}quad.cx=cx/quad.charge,quad.cy=cy/quad.charge}function d3_layout_hierarchyRebind(object,hierarchy){return d3.rebind(object,hierarchy,"sort","children","value"),object.nodes=object,object.links=d3_layout_hierarchyLinks,object}function d3_layout_hierarchyChildren(d){return d.children}function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map(function(parent){return(parent.children||[]).map(function(child){return{source:parent,target:child}})}))}function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0,d.y=y}function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){for(var j=-1,m=data[0].length,y0=[];++j<m;)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){for(var k,i=1,j=0,v=array[0][1],n=array.length;n>i;++i)(k=array[i][1])>v&&(j=i,v=k);return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){for(var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];++x<=n;)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(node){var children=node.children;return children&&children.length?children[0]:node._tree.thread}function d3_layout_treeRight(node){var n,children=node.children;return children&&(n=children.length)?children[n-1]:node._tree.thread}function d3_layout_treeSearch(node,compare){var children=node.children;if(children&&(n=children.length))for(var child,n,i=-1;++i<n;)compare(child=d3_layout_treeSearch(children[i],compare),node)>0&&(node=child);return node}function d3_layout_treeRightmost(a,b){return a.x-b.x}function d3_layout_treeLeftmost(a,b){return b.x-a.x}function d3_layout_treeDeepest(a,b){return a.depth-b.depth}function d3_layout_treeVisitAfter(node,callback){function visit(node,previousSibling){var children=node.children;if(children&&(n=children.length))for(var child,n,previousChild=null,i=-1;++i<n;)child=children[i],visit(child,previousChild),previousChild=child;callback(node,previousSibling)}visit(node,null)}function d3_layout_treeShift(node){for(var child,shift=0,change=0,children=node.children,i=children.length;--i>=0;)child=children[i]._tree,child.prelim+=shift,child.mod+=shift,shift+=child.shift+(change+=child.change)}function d3_layout_treeMove(ancestor,node,shift){ancestor=ancestor._tree,node=node._tree;var change=shift/(node.number-ancestor.number);ancestor.change+=change,node.change-=change,node.shift+=shift,node.prelim+=shift,node.mod+=shift}function d3_layout_treeAncestor(vim,node,ancestor){return vim._tree.ancestor.parent==node.parent?vim._tree.ancestor:ancestor}function d3_layout_packSort(a,b){return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function d3_layout_packSplice(a,b){a._pack_next=b,b._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return.999*dr*dr>dx*dx+dy*dy}function d3_layout_packSiblings(node){function bound(node){xMin=Math.min(node.x-node.r,xMin),xMax=Math.max(node.x+node.r,xMax),yMin=Math.min(node.y-node.r,yMin),yMax=Math.max(node.y+node.r,yMax)}if((nodes=node.children)&&(n=nodes.length)){var nodes,a,b,c,i,j,k,n,xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;if(nodes.forEach(d3_layout_packLink),a=nodes[0],a.x=-a.r,a.y=0,bound(a),n>1&&(b=nodes[1],b.x=b.r,b.y=0,bound(b),n>2))for(c=nodes[2],d3_layout_packPlace(a,b,c),bound(c),d3_layout_packInsert(a,c),a._pack_prev=c,d3_layout_packInsert(c,b),b=a._pack_next,i=3;n>i;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++)if(d3_layout_packIntersects(j,c)){isect=1;break}if(1==isect)for(k=a._pack_prev;k!==j._pack_prev&&!d3_layout_packIntersects(k,c);k=k._pack_prev,s2++);isect?(s2>s1||s1==s2&&b.r<a.r?d3_layout_packSplice(a,b=j):d3_layout_packSplice(a=k,b),i--):(d3_layout_packInsert(a,c),b=c,bound(c))}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;n>i;i++)c=nodes[i],c.x-=cx,c.y-=cy,cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y));node.r=cr,nodes.forEach(d3_layout_packUnlink)}}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next,delete node._pack_prev}function d3_layout_packTransform(node,x,y,k){var children=node.children;if(node.x=x+=k*node.x,node.y=y+=k*node.y,node.r*=k,children)for(var i=-1,n=children.length;++i<n;)d3_layout_packTransform(children[i],x,y,k)}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy;da*=da,db*=db;var x=.5+(db-da)/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy,c.y=a.y+x*dy-y*dx}else c.x=a.x+db,c.y=a.y}function d3_layout_clusterY(children){return 1+d3.max(children,function(child){return child.y})}function d3_layout_clusterX(children){return children.reduce(function(x,child){return x+child.x},0)/children.length}function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}function d3_layout_clusterRight(node){var n,children=node.children;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];return 0>dx&&(x+=dx/2,dx=0),0>dy&&(y+=dy/2,dy=0),{x:x,y:y,dx:dx,dy:dy}}function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return stop>start?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var dx,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];return x0>x1&&(dx=i0,i0=i1,i1=dx,dx=x0,x0=x1,x1=dx),domain[i0]=nice.floor(x0),domain[i1]=nice.ceil(x1),domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;for(domain[k]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++j<=k;)u.push(uninterpolate(domain[j-1],domain[j])),i.push(interpolate(range[j-1],range[j]));return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}function d3_scale_linear(domain,range,interpolate,clamp){function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;return output=linear(domain,range,uninterpolate,interpolate),input=linear(range,domain,uninterpolate,d3_interpolate),scale}function scale(x){return output(x)}var output,input;return scale.invert=function(y){return input(y)},scale.domain=function(x){return arguments.length?(domain=x.map(Number),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)},scale.clamp=function(x){return arguments.length?(clamp=x,rescale()):clamp},scale.interpolate=function(x){return arguments.length?(interpolate=x,rescale()):interpolate},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return d3_scale_linearNice(domain,m),rescale()},scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)},rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){return d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]))}function d3_scale_linearTickRange(domain,m){null==m&&(m=10);var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;return.15>=err?step*=10:.35>=err?step*=5:.75>=err&&(step*=2),extent[0]=Math.ceil(extent[0]/step)*step,extent[1]=Math.floor(extent[1]/step)*step+.5*step,extent[2]=step,extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);return d3.format(format?format.replace(d3_format_re,function(a,b,c,d,e,f,g,h,i,j){return[b,c,d,e,f,g,h,i||"."+d3_scale_linearFormatPrecision(j,range),j].join("")}):",."+d3_scale_linearPrecision(range[2])+"f")}function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(Math.abs(range[0]),Math.abs(range[1]))))+ +("e"!==type):p-2*("%"===type)}function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(0>x?0:x):-Math.log(x>0?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}return scale.invert=function(x){return pow(linear.invert(x))},scale.domain=function(x){return arguments.length?(positive=x[0]>=0,linear.domain((domain=x.map(Number)).map(log)),scale):domain},scale.base=function(_){return arguments.length?(base=+_,linear.domain(domain.map(log)),scale):base},scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);return linear.domain(niced),domain=niced.map(pow),scale},scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;j>i;i++)for(var k=1;n>k;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else for(ticks.push(pow(i));i++<j;)for(var k=n-1;k>0;k--)ticks.push(pow(i)*k);for(i=0;ticks[i]<u;i++);for(j=ticks.length;ticks[j-1]>v;j--);ticks=ticks.slice(i,j)}return ticks},scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;arguments.length<2?format=d3_scale_logFormat:"function"!=typeof format&&(format=d3.format(format));var e,k=Math.max(.1,n/scale.ticks().length),f=positive?(e=1e-12,Math.ceil):(e=-1e-12,Math.floor);return function(d){return d/pow(f(log(d)+e))<=k?format(d):""}},scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_pow(linear,exponent,domain){function scale(x){return linear(powp(x))}var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);return scale.invert=function(x){return powb(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain((domain=x.map(Number)).map(powp)),scale):domain},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m))},scale.exponent=function(x){return arguments.length?(powp=d3_scale_powPow(exponent=x),powb=d3_scale_powPow(1/exponent),linear.domain(domain.map(powp)),scale):exponent},scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_powPow(e){return function(x){return 0>x?-Math.pow(-x,e):Math.pow(x,e)}}function d3_scale_ordinal(domain,ranger){function scale(x){return range[((index.get(x)||"range"===ranger.t&&index.set(x,domain.push(x)))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map(function(i){return start+step*i})}var index,range,rangeBand;return scale.domain=function(x){if(!arguments.length)return domain;domain=[],index=new d3_Map;for(var xi,i=-1,n=x.length;++i<n;)index.has(xi=x[i])||index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)},scale.range=function(x){return arguments.length?(range=x,rangeBand=0,ranger={t:"range",a:arguments},scale):range},scale.rangePoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=(stop-start)/(Math.max(1,domain.length-1)+padding);return range=steps(domain.length<2?(start+stop)/2:start+step*padding/2,step),rangeBand=0,ranger={t:"rangePoints",a:arguments},scale},scale.rangeBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);return range=steps(start+step*outerPadding,step),reverse&&range.reverse(),rangeBand=step*(1-padding),ranger={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding)),error=stop-start-(domain.length-padding)*step;return range=steps(start+Math.round(error/2),step),reverse&&range.reverse(),rangeBand=Math.round(step*(1-padding)),ranger={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return rangeBand},scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])},scale.copy=function(){return d3_scale_ordinal(domain,ranger)},scale.domain(domain)}function d3_scale_quantile(domain,range){function rescale(){var k=0,q=range.length;for(thresholds=[];++k<q;)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){return isNaN(x=+x)?void 0:range[d3.bisect(thresholds,x)]}var thresholds;return scale.domain=function(x){return arguments.length?(domain=x.filter(function(d){return!isNaN(d)}).sort(d3.ascending),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.quantiles=function(){return thresholds},scale.invertExtent=function(y){return y=range.indexOf(y),0>y?[0/0,0/0]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]},scale.copy=function(){return d3_scale_quantile(domain,range)},rescale()}function d3_scale_quantize(x0,x1,range){function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){return kx=range.length/(x1-x0),i=range.length-1,scale}var kx,i;return scale.domain=function(x){return arguments.length?(x0=+x[0],x1=+x[x.length-1],rescale()):[x0,x1]},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.invertExtent=function(y){return y=range.indexOf(y),y=0>y?0/0:y/kx+x0,[y,y+1/kx]},scale.copy=function(){return d3_scale_quantize(x0,x1,range)},rescale()}function d3_scale_threshold(domain,range){function scale(x){return x>=x?range[d3.bisect(domain,x)]:void 0}return scale.domain=function(_){return arguments.length?(domain=_,scale):domain},scale.range=function(_){return arguments.length?(range=_,scale):range},scale.invertExtent=function(y){return y=range.indexOf(y),[domain[y-1],domain[y]]},scale.copy=function(){return d3_scale_threshold(domain,range)
},scale}function d3_scale_identity(domain){function identity(x){return+x}return identity.invert=identity,identity.domain=identity.range=function(x){return arguments.length?(domain=x.map(identity),identity):domain},identity.ticks=function(m){return d3_scale_linearTicks(domain,m)},identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},identity.copy=function(){return d3_scale_identity(domain)},identity}function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_line(projection){function line(data){function segment(){segments.push("M",interpolate(projection(points),tension))}for(var d,segments=[],points=[],i=-1,n=data.length,fx=d3_functor(x),fy=d3_functor(y);++i<n;)defined.call(this,d=data[i],i)?points.push([+fx.call(this,d,i),+fy.call(this,d,i)]):points.length&&(segment(),points=[]);return points.length&&segment(),segments.length?segments.join(""):null}var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;return line.x=function(_){return arguments.length?(x=_,line):x},line.y=function(_){return arguments.length?(y=_,line):y},line.defined=function(_){return arguments.length?(defined=_,line):defined},line.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,line):interpolateKey},line.tension=function(_){return arguments.length?(tension=_,line):tension},line}function d3_svg_lineLinear(points){return points.join("L")}function d3_svg_lineLinearClosed(points){return d3_svg_lineLinear(points)+"Z"}function d3_svg_lineStep(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);return n>1&&path.push("H",p[0]),path.join("")}function d3_svg_lineStepBefore(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,points.length-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2)return d3_svg_lineLinear(points);var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad&&(path+="Q"+(p[0]-2*t0[0]/3)+","+(p[1]-2*t0[1]/3)+","+p[0]+","+p[1],p0=points[1],pi=2),tangents.length>1){t=tangents[1],p=points[pi],pi++,path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++)p=points[pi],t=tangents[i],path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}if(quad){var lp=points[pi];path+="Q"+(p[0]+2*t[0]/3)+","+(p[1]+2*t[1]/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){for(var p0,tangents=[],a=(1-tension)/2,p1=points[0],p2=points[1],i=1,n=points.length;++i<n;)p0=p1,p1=p2,p2=points[i],tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])]);return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];for(points.push(points[n-1]);++i<=n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return points.pop(),path.push("L",pi),path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);for(var pi,path=[],i=-1,n=points.length,px=[0],py=[0];++i<3;)pi=points[i],px.push(pi[0]),py.push(pi[1]);for(path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)),--i;++i<n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBasisClosed(points){for(var path,pi,i=-1,n=points.length,m=n+4,px=[],py=[];++i<4;)pi=points[i%n],px.push(pi[0]),py.push(pi[1]);for(path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)],--i;++i<m;)pi=points[i%n],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n)for(var p,t,x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1;++i<=n;)p=points[i],t=i/n,p[0]=tension*p[0]+(1-tension)*(x0+t*dx),p[1]=tension*p[1]+(1-tension)*(y0+t*dy);return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){for(var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);++i<j;)m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2;return m[i]=d,m}function d3_svg_lineMonotoneTangents(points){for(var d,a,b,s,tangents=[],m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;++i<j;)d=d3_svg_lineSlope(points[i],points[i+1]),abs(d)<ε?m[i]=m[i+1]=0:(a=m[i]/d,b=m[i+1]/d,s=a*a+b*b,s>9&&(s=3*d/Math.sqrt(s),m[i]=s*a,m[i+1]=s*b));for(i=-1;++i<=j;)s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i])),tangents.push([s||0,m[i]*s||0]);return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}function d3_svg_lineRadial(points){for(var point,r,a,i=-1,n=points.length;++i<n;)point=points[i],r=point[0],a=point[1]+d3_svg_arcOffset,point[0]=r*Math.cos(a),point[1]=r*Math.sin(a);return points}function d3_svg_area(projection){function area(data){function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}for(var d,x,y,segments=[],points0=[],points1=[],i=-1,n=data.length,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1);++i<n;)defined.call(this,d=data[i],i)?(points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]),points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])):points0.length&&(segment(),points0=[],points1=[]);return points0.length&&segment(),segments.length?segments.join(""):null}var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;return area.x=function(_){return arguments.length?(x0=x1=_,area):x1},area.x0=function(_){return arguments.length?(x0=_,area):x0},area.x1=function(_){return arguments.length?(x1=_,area):x1},area.y=function(_){return arguments.length?(y0=y1=_,area):y1},area.y0=function(_){return arguments.length?(y0=_,area):y0},area.y1=function(_){return arguments.length?(y1=_,area):y1},area.defined=function(_){return arguments.length?(defined=_,area):defined},area.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,interpolateReverse=interpolate.reverse||interpolate,L=interpolate.closed?"M":"L",area):interpolateKey},area.tension=function(_){return arguments.length?(tension=_,area):tension},area}function d3_svg_chordRadius(d){return d.radius}function d3_svg_diagonalProjection(d){return[d.x,d.y]}function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]+d3_svg_arcOffset;return[r*Math.cos(a),r*Math.sin(a)]}}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/π);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}function d3_transition(groups,id){return d3_subclass(groups,d3_transitionPrototype),groups.id=id,groups}function d3_transition_tween(groups,name,value,tween){var id=groups.id;return d3_selection_each(groups,"function"==typeof value?function(node,i,j){node.__transition__[id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node.__transition__[id].tween.set(name,value)}))}function d3_transition_text(b){return null==b&&(b=""),function(){this.textContent=b}}function d3_transitionNode(node,i,id,inherit){var lock=node.__transition__||(node.__transition__={active:0,count:0}),transition=lock[id];if(!transition){var time=inherit.time;transition=lock[id]={tween:new d3_Map,time:time,ease:inherit.ease,delay:inherit.delay,duration:inherit.duration},++lock.count,d3.timer(function(elapsed){function start(elapsed){return lock.active>id?stop():(lock.active=id,transition.event&&transition.event.start.call(node,d,i),transition.tween.forEach(function(key,value){(value=value.call(node,d,i))&&tweened.push(value)}),void d3.timer(function(){return timer.c=tick(elapsed||1)?d3_true:tick,1},0,time))}function tick(elapsed){if(lock.active!==id)return stop();for(var t=elapsed/duration,e=ease(t),n=tweened.length;n>0;)tweened[--n].call(node,e);return t>=1?(transition.event&&transition.event.end.call(node,d,i),stop()):void 0}function stop(){return--lock.count?delete lock[id]:delete node.__transition__,1}var d=node.__data__,ease=transition.ease,delay=transition.delay,duration=transition.duration,timer=d3_timer_active,tweened=[];return timer.t=delay+time,elapsed>=delay?start(elapsed-delay):void(timer.c=start)},0,time)}}function d3_svg_axisX(selection,x){selection.attr("transform",function(d){return"translate("+x(d)+",0)"})}function d3_svg_axisY(selection,y){selection.attr("transform",function(d){return"translate(0,"+y(d)+")"})}function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return d1-date>date-d0?d0:d1}function ceil(date){return step(date=local(new d3_date(date-1)),1),date}function offset(date,k){return step(date=new d3_date(+date),k),date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1)for(;t1>time;)number(time)%dt||times.push(new Date(+time)),step(time,1);else for(;t1>time;)times.push(new Date(+time)),step(time,1);return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=t0,range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local,local.round=round,local.ceil=ceil,local.offset=offset,local.range=range;var utc=local.utc=d3_time_interval_utc(local);return utc.floor=utc,utc.round=d3_time_interval_utc(round),utc.ceil=d3_time_interval_utc(ceil),utc.offset=d3_time_interval_utc(offset),utc.range=range_utc,local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=date,method(utc,k)._}finally{d3_date=Date}}}function d3_time_format(template){function format(date){for(var c,p,f,string=[],i=-1,j=0;++i<n;)37===template.charCodeAt(i)&&(string.push(template.substring(j,i)),null!=(p=d3_time_formatPads[c=template.charAt(++i)])&&(c=template.charAt(++i)),(f=d3_time_formats[c])&&(c=f(date,null==p?"e"===c?" ":"0":p)),string.push(c),j=i+1);return string.push(template.substring(j,i)),string.join("")}var n=template.length;return format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=d3_time_parse(d,template,string,0);if(i!=string.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var localZ=null!=d.Z&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);return"j"in d?date.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(date.setFullYear(d.y,0,1),date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(date.getDay()+5)%7:d.w+7*d.U-(date.getDay()+6)%7)):date.setFullYear(d.y,d.m,d.d),date.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L),localZ?date._:date},format.toString=function(){return template},format}function d3_time_parse(date,template,string,j){for(var c,p,t,i=0,n=template.length,m=string.length;n>i;){if(j>=m)return-1;if(c=template.charCodeAt(i++),37===c){if(t=template.charAt(i++),p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t],!p||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){for(var map=new d3_Map,i=-1,n=names.length;++i<n;)map.set(names[i].toLowerCase(),i);return map}function d3_time_formatPad(value,fill,width){var sign=0>value?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(width>length?new Array(width-length+1).join(fill)+string:string)}function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.substring(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.substring(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.substring(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.substring(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.substring(i,i+5))?(date.Z=+string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_parseAmPm(date,string,i){var n=d3_time_amPmLookup.get(string.substring(i,i+=2).toLowerCase());return null==n?-1:(date.p=n,i)}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=~~(abs(z)/60),zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.substring(i,i+1));return n?i+n[0].length:-1}function d3_time_formatUtc(template){function format(date){try{d3_date=d3_date_utc;var utc=new d3_date;return utc._=date,local(utc)}finally{d3_date=Date}}var local=d3_time_format(template);return format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}},format.toString=local.toString,format}function d3_time_formatIsoNative(date){return date.toISOString()}function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}function tickMethod(extent,count){var span=extent[1]-extent[0],target=span/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map(function(d){return d/31536e6}),count)[2]]:i?methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]:[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]}return scale.invert=function(x){return d3_time_scaleDate(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain(x),scale):linear.domain().map(d3_time_scaleDate)},scale.nice=function(interval,skip){function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}var domain=scale.domain(),extent=d3_scaleExtent(domain),method=null==interval?tickMethod(extent,10):"number"==typeof interval&&tickMethod(extent,interval);return method&&(interval=method[0],skip=method[1]),scale.domain(d3_scale_nice(domain,skip>1?{floor:function(date){for(;skipped(date=interval.floor(date));)date=d3_time_scaleDate(date-1);return date},ceil:function(date){for(;skipped(date=interval.ceil(date));)date=d3_time_scaleDate(+date+1);return date}}:interval))},scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=null==interval?tickMethod(extent,10):"number"==typeof interval?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];return method&&(interval=method[0],skip=method[1]),interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),1>skip?1:skip)},scale.tickFormat=function(){return format},scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)},d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}function d3_time_scaleFormat(formats){return function(date){for(var i=formats.length-1,f=formats[i];!f[1](date);)f=formats[--i];return f[0](date)}}function d3_json(request){return JSON.parse(request.responseText)}function d3_html(request){var range=d3_document.createRange();return range.selectNode(d3_document.body),range.createContextualFragment(request.responseText)}var d3={version:"3.3.13"};Date.now||(Date.now=function(){return+new Date});var d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)},d3_document=document,d3_documentElement=d3_document.documentElement,d3_window=window;try{d3_array(d3_documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){for(var i=list.length,array=new Array(i);i--;)array[i]=list[i];return array}}try{d3_document.createElement("div").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=d3_window.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=d3_window.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")},d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")},d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}d3.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0},d3.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},d3.min=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n&&!(null!=(a=array[i])&&a>=a);)a=void 0;for(;++i<n;)null!=(b=array[i])&&a>b&&(a=b)}else{for(;++i<n&&!(null!=(a=f.call(array,array[i],i))&&a>=a);)a=void 0;for(;++i<n;)null!=(b=f.call(array,array[i],i))&&a>b&&(a=b)}return a},d3.max=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n&&!(null!=(a=array[i])&&a>=a);)a=void 0;for(;++i<n;)null!=(b=array[i])&&b>a&&(a=b)}else{for(;++i<n&&!(null!=(a=f.call(array,array[i],i))&&a>=a);)a=void 0;for(;++i<n;)null!=(b=f.call(array,array[i],i))&&b>a&&(a=b)}return a},d3.extent=function(array,f){var a,b,c,i=-1,n=array.length;if(1===arguments.length){for(;++i<n&&!(null!=(a=c=array[i])&&a>=a);)a=c=void 0;for(;++i<n;)null!=(b=array[i])&&(a>b&&(a=b),b>c&&(c=b))}else{for(;++i<n&&!(null!=(a=c=f.call(array,array[i],i))&&a>=a);)a=void 0;for(;++i<n;)null!=(b=f.call(array,array[i],i))&&(a>b&&(a=b),b>c&&(c=b))}return[a,c]},d3.sum=function(array,f){var a,s=0,n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)isNaN(a=+array[i])||(s+=a);else for(;++i<n;)isNaN(a=+f.call(array,array[i],i))||(s+=a);return s},d3.mean=function(array,f){var a,n=array.length,m=0,i=-1,j=0;if(1===arguments.length)for(;++i<n;)d3_number(a=array[i])&&(m+=(a-m)/++j);else for(;++i<n;)d3_number(a=f.call(array,array[i],i))&&(m+=(a-m)/++j);return j?m:void 0},d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v},d3.median=function(array,f){return arguments.length>1&&(array=array.map(f)),array=array.filter(d3_number),array.length?d3.quantile(array.sort(d3.ascending),.5):void 0},d3.bisector=function(f){return{left:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);hi>lo;){var mid=lo+hi>>>1;f.call(a,a[mid],mid)<x?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);hi>lo;){var mid=lo+hi>>>1;x<f.call(a,a[mid],mid)?hi=mid:lo=mid+1}return lo}}};var d3_bisector=d3.bisector(function(d){return d});d3.bisectLeft=d3_bisector.left,d3.bisect=d3.bisectRight=d3_bisector.right,d3.shuffle=function(array){for(var t,i,m=array.length;m;)i=Math.random()*m--|0,t=array[m],array[m]=array[i],array[i]=t;return array},d3.permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},d3.pairs=function(array){for(var p0,i=0,n=array.length-1,p1=array[0],pairs=new Array(0>n?0:n);n>i;)pairs[i]=[p0=p1,p1=array[++i]];return pairs},d3.zip=function(){if(!(n=arguments.length))return[];for(var i=-1,m=d3.min(arguments,d3_zipLength),zips=new Array(m);++i<m;)for(var n,j=-1,zip=zips[i]=new Array(n);++j<n;)zip[j]=arguments[j][i];return zips},d3.transpose=function(matrix){return d3.zip.apply(d3,matrix)},d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys},d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values},d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},d3.merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(array=arrays[n],m=array.length;--m>=0;)merged[--j]=array[m];return merged};var abs=Math.abs;d3.range=function(start,stop,step){if(arguments.length<3&&(step=1,arguments.length<2&&(stop=start,start=0)),(stop-start)/step===1/0)throw new Error("infinite range");var j,range=[],k=d3_range_integerScale(abs(step)),i=-1;if(start*=k,stop*=k,step*=k,0>step)for(;(j=start+step*++i)>stop;)range.push(j/k);else for(;(j=start+step*++i)<stop;)range.push(j/k);return range},d3.map=function(object){var map=new d3_Map;if(object instanceof d3_Map)object.forEach(function(key,value){map.set(key,value)});else for(var key in object)map.set(key,object[key]);return map},d3_class(d3_Map,{has:function(key){return d3_map_prefix+key in this},get:function(key){return this[d3_map_prefix+key]},set:function(key,value){return this[d3_map_prefix+key]=value},remove:function(key){return key=d3_map_prefix+key,key in this&&delete this[key]},keys:function(){var keys=[];return this.forEach(function(key){keys.push(key)}),keys},values:function(){var values=[];return this.forEach(function(key,value){values.push(value)}),values},entries:function(){var entries=[];return this.forEach(function(key,value){entries.push({key:key,value:value})}),entries},forEach:function(f){for(var key in this)key.charCodeAt(0)===d3_map_prefixCode&&f.call(this,key.substring(1),this[key])}});var d3_map_prefix="\x00",d3_map_prefixCode=d3_map_prefix.charCodeAt(0);d3.nest=function(){function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;for(var keyValue,object,setter,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=new d3_Map;++i<n;)(values=valuesByKey.get(keyValue=key(object=array[i])))?values.push(object):valuesByKey.set(keyValue,[object]);return mapType?(object=mapType(),setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}):(object={},setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}),valuesByKey.forEach(setter),object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];return map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})}),sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}var sortValues,rollup,nest={},keys=[],sortKeys=[];return nest.map=function(array,mapType){return map(mapType,array,0)},nest.entries=function(array){return entries(map(d3.map,array,0),0)},nest.key=function(d){return keys.push(d),nest},nest.sortKeys=function(order){return sortKeys[keys.length-1]=order,nest},nest.sortValues=function(order){return sortValues=order,nest},nest.rollup=function(f){return rollup=f,nest},nest},d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;n>i;++i)set.add(array[i]);return set},d3_class(d3_Set,{has:function(value){return d3_map_prefix+value in this},add:function(value){return this[d3_map_prefix+value]=!0,value},remove:function(value){return value=d3_map_prefix+value,value in this&&delete this[value]},values:function(){var values=[];return this.forEach(function(value){values.push(value)}),values},forEach:function(f){for(var value in this)value.charCodeAt(0)===d3_map_prefixCode&&f.call(this,value.substring(1))}}),d3.behavior={},d3.rebind=function(target,source){for(var method,i=1,n=arguments.length;++i<n;)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];d3.dispatch=function(){for(var dispatch=new d3_dispatch,i=-1,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch},d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0&&(name=type.substring(i+1),type=type.substring(0,i)),type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(2===arguments.length){if(null==listener)for(type in this)this.hasOwnProperty(type)&&this[type].on(name,null);return this}},d3.event=null,d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]},d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatcher=d3_documentElement[d3_vendorSymbol(d3_documentElement,"matchesSelector")],d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)};"function"==typeof Sizzle&&(d3_select=function(s,n){return Sizzle(s,n)[0]||null},d3_selectAll=function(s,n){return Sizzle.uniqueSort(Sizzle(s,n))},d3_selectMatches=Sizzle.matchesSelector),d3.selection=function(){return d3_selectionRoot};var d3_selectionPrototype=d3.selection.prototype=[];d3_selectionPrototype.select=function(selector){var subgroup,subnode,group,node,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(subnode=selector.call(node,node.__data__,i,j)),subnode&&"__data__"in node&&(subnode.__data__=node.__data__)):subgroup.push(null)}return d3_selection(subgroups)},d3_selectionPrototype.selectAll=function(selector){var subgroup,node,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j))),subgroup.parentNode=node);return d3_selection(subgroups)};var d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;return i>=0&&(prefix=name.substring(0,i),name=name.substring(i+1)),d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}},d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node();return name=d3.ns.qualify(name),name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))},d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){for(;++i<n;)if(!value.contains(name[i]))return!1}else for(value=node.getAttribute("class");++i<n;)if(!d3_selection_classedRe(name[i]).test(value))return!1;return!0}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))},d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;
if(3>n){if("string"!=typeof name){2>n&&(value="");for(priority in name)this.each(d3_selection_style(priority,name[priority],value));return this}if(2>n)return d3_window.getComputedStyle(this.node(),null).getPropertyValue(name);priority=""}return this.each(d3_selection_style(name,value,priority))},d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if("string"==typeof name)return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))},d3_selectionPrototype.text=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}:null==value?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent},d3_selectionPrototype.html=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}:null==value?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML},d3_selectionPrototype.append=function(name){return name=d3_selection_creator(name),this.select(function(){return this.appendChild(name.apply(this,arguments))})},d3_selectionPrototype.insert=function(name,before){return name=d3_selection_creator(name),before=d3_selection_selector(before),this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})},d3_selectionPrototype.remove=function(){return this.each(function(){var parent=this.parentNode;parent&&parent.removeChild(this)})},d3_selectionPrototype.data=function(value,key){function bind(group,groupData){var i,node,nodeData,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n);if(key){var keyValue,nodeByKeyValue=new d3_Map,dataByKeyValue=new d3_Map,keyValues=[];for(i=-1;++i<n;)keyValue=key.call(node=group[i],node.__data__,i),nodeByKeyValue.has(keyValue)?exitNodes[i]=node:nodeByKeyValue.set(keyValue,node),keyValues.push(keyValue);for(i=-1;++i<m;)keyValue=key.call(groupData,nodeData=groupData[i],i),(node=nodeByKeyValue.get(keyValue))?(updateNodes[i]=node,node.__data__=nodeData):dataByKeyValue.has(keyValue)||(enterNodes[i]=d3_selection_dataNode(nodeData)),dataByKeyValue.set(keyValue,nodeData),nodeByKeyValue.remove(keyValue);for(i=-1;++i<n;)nodeByKeyValue.has(keyValues[i])&&(exitNodes[i]=group[i])}else{for(i=-1;++i<n0;)node=group[i],nodeData=groupData[i],node?(node.__data__=nodeData,updateNodes[i]=node):enterNodes[i]=d3_selection_dataNode(nodeData);for(;m>i;++i)enterNodes[i]=d3_selection_dataNode(groupData[i]);for(;n>i;++i)exitNodes[i]=group[i]}enterNodes.update=updateNodes,enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode,enter.push(enterNodes),update.push(updateNodes),exit.push(exitNodes)}var group,node,i=-1,n=this.length;if(!arguments.length){for(value=new Array(n=(group=this[0]).length);++i<n;)(node=group[i])&&(value[i]=node.__data__);return value}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if("function"==typeof value)for(;++i<n;)bind(group=this[i],value.call(group,group.parentNode.__data__,i));else for(;++i<n;)bind(group=this[i],value);return update.enter=function(){return enter},update.exit=function(){return exit},update},d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")},d3_selectionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;m>j;j++){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;n>i;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_selection(subgroups)},d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;)for(var node,group=this[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()},d3_selectionPrototype.each=function(callback){return d3_selection_each(this,function(node,i,j){callback.call(node,node.__data__,i,j)})},d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);return callback.apply(args[0]=this,args),this},d3_selectionPrototype.empty=function(){return!this.node()},d3_selectionPrototype.node=function(){for(var j=0,m=this.length;m>j;j++)for(var group=this[j],i=0,n=group.length;n>i;i++){var node=group[i];if(node)return node}return null},d3_selectionPrototype.size=function(){var n=0;return this.each(function(){++n}),n};var d3_selection_enterPrototype=[];d3.selection.enter=d3_selection_enter,d3.selection.enter.prototype=d3_selection_enterPrototype,d3_selection_enterPrototype.append=d3_selectionPrototype.append,d3_selection_enterPrototype.empty=d3_selectionPrototype.empty,d3_selection_enterPrototype.node=d3_selectionPrototype.node,d3_selection_enterPrototype.call=d3_selectionPrototype.call,d3_selection_enterPrototype.size=d3_selectionPrototype.size,d3_selection_enterPrototype.select=function(selector){for(var subgroup,subnode,upgroup,group,node,subgroups=[],j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update,subgroups.push(subgroup=[]),subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j)),subnode.__data__=node.__data__):subgroup.push(null)}return d3_selection(subgroups)},d3_selection_enterPrototype.insert=function(name,before){return arguments.length<2&&(before=d3_selection_enterInsertBefore(this)),d3_selectionPrototype.insert.call(this,name,before)},d3_selectionPrototype.transition=function(){for(var subgroup,node,id=d3_transitionInheritId||++d3_transitionId,subgroups=[],transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&d3_transitionNode(node,i,id,transition),subgroup.push(node)}return d3_transition(subgroups,id)},d3_selectionPrototype.interrupt=function(){return this.each(d3_selection_interrupt)},d3.select=function(node){var group=["string"==typeof node?d3_select(node,d3_document):node];return group.parentNode=d3_documentElement,d3_selection([group])},d3.selectAll=function(nodes){var group=d3_array("string"==typeof nodes?d3_selectAll(nodes,d3_document):nodes);return group.parentNode=d3_documentElement,d3_selection([group])};var d3_selectionRoot=d3.select(d3_documentElement);d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(3>n){if("string"!=typeof type){2>n&&(listener=!1);for(capture in type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(2>n)return(n=this.node()["__on"+type])&&n._;capture=!1}return this.each(d3_selection_on(type,listener,capture))};var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});d3_selection_onFilters.forEach(function(k){"on"+k in d3_document&&d3_selection_onFilters.remove(k)});var d3_event_dragSelect="onselectstart"in d3_document?null:d3_vendorSymbol(d3_documentElement.style,"userSelect"),d3_event_dragId=0;d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=/WebKit/.test(d3_window.navigator.userAgent)?-1:0;d3.touches=function(container,touches){return arguments.length<2&&(touches=d3_eventSource().touches),touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);return point.identifier=touch.identifier,point}):[]},d3.behavior.drag=function(){function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function touchid(){return d3.event.changedTouches[0].identifier}function touchposition(parent,id){return d3.touches(parent).filter(function(p){return p.identifier===id})[0]}function dragstart(id,position,move,end){return function(){function moved(){var p=position(parent,eventId),dx=p[0]-origin_[0],dy=p[1]-origin_[1];dragged|=dx|dy,origin_=p,event_({type:"drag",x:p[0]+offset[0],y:p[1]+offset[1],dx:dx,dy:dy})}function ended(){w.on(move+"."+drag,null).on(end+"."+drag,null),dragRestore(dragged&&d3.event.target===eventTarget),event_({type:"dragend"})}var offset,target=this,parent=target.parentNode,event_=event.of(target,arguments),eventTarget=d3.event.target,eventId=id(),drag=null==eventId?"drag":"drag-"+eventId,origin_=position(parent,eventId),dragged=0,w=d3.select(d3_window).on(move+"."+drag,moved).on(end+"."+drag,ended),dragRestore=d3_event_dragSuppress();origin?(offset=origin.apply(target,arguments),offset=[offset.x-origin_[0],offset.y-origin_[1]]):offset=[0,0],event_({type:"dragstart"})}}var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,"mousemove","mouseup"),touchstart=dragstart(touchid,touchposition,"touchmove","touchend");return drag.origin=function(x){return arguments.length?(origin=x,drag):origin},d3.rebind(drag,event,"on")};var π=Math.PI,τ=2*π,halfπ=π/2,ε=1e-6,ε2=ε*ε,d3_radians=π/180,d3_degrees=180/π,ρ=Math.SQRT2,ρ2=2,ρ4=4;d3.interpolateZoom=function(p0,p1){function interpolate(t){var s=t*S;if(dr){var coshr0=d3_cosh(r0),u=w0/(ρ2*d1)*(coshr0*d3_tanh(ρ*s+r0)-d3_sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(ρ*s+r0)]}return[ux0+t*dx,uy0+t*dy,w0*Math.exp(ρ*s)]}var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+ρ4*d2)/(2*w0*ρ2*d1),b1=(w1*w1-w0*w0-ρ4*d2)/(2*w1*ρ2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1),dr=r1-r0,S=(dr||Math.log(w1/w0))/ρ;return interpolate.duration=1e3*S,interpolate},d3.behavior.zoom=function(){function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on(mousemove,mousewheelreset).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}function location(p){return[(p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function point(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=point(l),view.x+=p[0]-l[0],view.y+=p[1]-l[1]}function rescale(){x1&&x1.domain(x0.range().map(function(x){return(x-view.x)/view.k}).map(x0.invert)),y1&&y1.domain(y0.range().map(function(y){return(y-view.y)/view.k}).map(y0.invert))}function zoomstarted(event){event({type:"zoomstart"})}function zoomed(event){rescale(),event({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(event){event({type:"zoomend"})}function mousedowned(){function moved(){dragged=1,translateTo(d3.mouse(target),l),zoomed(event_)}function ended(){w.on(mousemove,d3_window===target?mousewheelreset:null).on(mouseup,null),dragRestore(dragged&&d3.event.target===eventTarget),zoomended(event_)}var target=this,event_=event.of(target,arguments),eventTarget=d3.event.target,dragged=0,w=d3.select(d3_window).on(mousemove,moved).on(mouseup,ended),l=location(d3.mouse(target)),dragRestore=d3_event_dragSuppress();d3_selection_interrupt.call(target),zoomstarted(event_)}function touchstarted(){function relocate(){var touches=d3.touches(target);return scale0=view.k,touches.forEach(function(t){t.identifier in locations0&&(locations0[t.identifier]=location(t))}),touches}function started(){for(var changed=d3.event.changedTouches,i=0,n=changed.length;n>i;++i)locations0[changed[i].identifier]=null;var touches=relocate(),now=Date.now();if(1===touches.length){if(500>now-touchtime){var p=touches[0],l=locations0[p.identifier];scaleTo(2*view.k),translateTo(p,l),d3_eventPreventDefault(),zoomed(event_)}touchtime=now}else if(touches.length>1){var p=touches[0],q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){for(var p0,l0,p1,l1,touches=d3.touches(target),i=0,n=touches.length;n>i;++i,l1=null)if(p1=touches[i],l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}if(l1){var distance1=(distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2],scaleTo(scale1*scale0)}touchtime=null,translateTo(p0,l0),zoomed(event_)}function ended(){if(d3.event.touches.length){for(var changed=d3.event.changedTouches,i=0,n=changed.length;n>i;++i)delete locations0[changed[i].identifier];for(var identifier in locations0)return void relocate()}w.on(touchmove,null).on(touchend,null),t.on(mousedown,mousedowned).on(touchstart,touchstarted),dragRestore(),zoomended(event_)}var scale0,target=this,event_=event.of(target,arguments),locations0={},distance0=0,eventId=d3.event.changedTouches[0].identifier,touchmove="touchmove.zoom-"+eventId,touchend="touchend.zoom-"+eventId,w=d3.select(d3_window).on(touchmove,moved).on(touchend,ended),t=d3.select(target).on(mousedown,null).on(touchstart,started),dragRestore=d3_event_dragSuppress();d3_selection_interrupt.call(target),started(),zoomstarted(event_)}function mousewheeled(){var event_=event.of(this,arguments);mousewheelTimer?clearTimeout(mousewheelTimer):(d3_selection_interrupt.call(this),zoomstarted(event_)),mousewheelTimer=setTimeout(function(){mousewheelTimer=null,zoomended(event_)},50),d3_eventPreventDefault();var point=center||d3.mouse(this);translate0||(translate0=location(point)),scaleTo(Math.pow(2,.002*d3_behavior_zoomDelta())*view.k),translateTo(point,translate0),zoomed(event_)}function mousewheelreset(){translate0=null}function dblclicked(){var event_=event.of(this,arguments),p=d3.mouse(this),l=location(p),k=Math.log(view.k)/Math.LN2;zoomstarted(event_),scaleTo(Math.pow(2,d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)),translateTo(p,l),zoomed(event_),zoomended(event_)}var translate0,center,mousewheelTimer,touchtime,x0,x1,y0,y1,view={x:0,y:0,k:1},size=[960,500],scaleExtent=d3_behavior_zoomInfinity,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",touchstart="touchstart.zoom",event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend");return zoom.event=function(g){g.each(function(){var event_=event.of(this,arguments),view1=view;d3_transitionInheritId?d3.select(this).transition().each("start.zoom",function(){view=this.__chart__||{x:0,y:0,k:1},zoomstarted(event_)}).tween("zoom:zoom",function(){var dx=size[0],dy=size[1],cx=dx/2,cy=dy/2,i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k},zoomed(event_)}}).each("end.zoom",function(){zoomended(event_)}):(this.__chart__=view,zoomstarted(event_),zoomed(event_),zoomended(event_))})},zoom.translate=function(_){return arguments.length?(view={x:+_[0],y:+_[1],k:view.k},rescale(),zoom):[view.x,view.y]},zoom.scale=function(_){return arguments.length?(view={x:view.x,y:view.y,k:+_},rescale(),zoom):view.k},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent=null==_?d3_behavior_zoomInfinity:[+_[0],+_[1]],zoom):scaleExtent},zoom.center=function(_){return arguments.length?(center=_&&[+_[0],+_[1]],zoom):center},zoom.size=function(_){return arguments.length?(size=_&&[+_[0],+_[1]],zoom):size},zoom.x=function(z){return arguments.length?(x1=z,x0=z.copy(),view={x:0,y:0,k:1},zoom):x1},zoom.y=function(z){return arguments.length?(y1=z,y0=z.copy(),view={x:0,y:0,k:1},zoom):y1},d3.rebind(zoom,event,"on")};var d3_behavior_zoomDelta,d3_behavior_zoomInfinity=[0,1/0],d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll");d3_Color.prototype.toString=function(){return this.rgb()+""},d3.hsl=function(h,s,l){return 1===arguments.length?h instanceof d3_Hsl?d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):d3_hsl(+h,+s,+l)};var d3_hslPrototype=d3_Hsl.prototype=new d3_Color;d3_hslPrototype.brighter=function(k){return k=Math.pow(.7,arguments.length?k:1),d3_hsl(this.h,this.s,this.l/k)},d3_hslPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),d3_hsl(this.h,this.s,k*this.l)},d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)},d3.hcl=function(h,c,l){return 1===arguments.length?h instanceof d3_Hcl?d3_hcl(h.h,h.c,h.l):h instanceof d3_Lab?d3_lab_hcl(h.l,h.a,h.b):d3_lab_hcl((h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):d3_hcl(+h,+c,+l)};var d3_hclPrototype=d3_Hcl.prototype=new d3_Color;d3_hclPrototype.brighter=function(k){return d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.darker=function(k){return d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()},d3.lab=function(l,a,b){return 1===arguments.length?l instanceof d3_Lab?d3_lab(l.l,l.a,l.b):l instanceof d3_Hcl?d3_hcl_lab(l.l,l.c,l.h):d3_rgb_lab((l=d3.rgb(l)).r,l.g,l.b):d3_lab(+l,+a,+b)};var d3_lab_K=18,d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883,d3_labPrototype=d3_Lab.prototype=new d3_Color;d3_labPrototype.brighter=function(k){return d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.darker=function(k){return d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},d3.rgb=function(r,g,b){return 1===arguments.length?r instanceof d3_Rgb?d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):d3_rgb(~~r,~~g,~~b)};var d3_rgbPrototype=d3_Rgb.prototype=new d3_Color;d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;return r||g||b?(r&&i>r&&(r=i),g&&i>g&&(g=i),b&&i>b&&(b=i),d3_rgb(Math.min(255,~~(r/k)),Math.min(255,~~(g/k)),Math.min(255,~~(b/k)))):d3_rgb(i,i,i)},d3_rgbPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),d3_rgb(~~(k*this.r),~~(k*this.g),~~(k*this.b))},d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))}),d3.functor=d3_functor,d3.xhr=d3_xhrType(d3_identity),d3.dsv=function(delimiter,mimeType){function dsv(url,row,callback){arguments.length<3&&(callback=row,row=null);var xhr=d3_xhr(url,mimeType,null==row?response:typedResponse(row),callback);return xhr.row=function(_){return arguments.length?xhr.response(null==(row=_)?response:typedResponse(_)):row},xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);return dsv.parse=function(text,f){var o;return dsv.parseRows(text,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})},dsv.parseRows=function(text,f){function token(){if(I>=N)return EOF;if(eol)return eol=!1,EOL;var j=I;if(34===text.charCodeAt(j)){for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;++i}I=i+2;var c=text.charCodeAt(i+1);return 13===c?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),text.substring(j+1,i).replace(/""/g,'"')}for(;N>I;){var c=text.charCodeAt(I++),k=1;if(10===c)eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&(++I,++k);else if(c!==delimiterCode)continue;return text.substring(j,I-k)}return text.substring(j)}for(var t,eol,EOL={},EOF={},rows=[],N=text.length,I=0,n=0;(t=token())!==EOF;){for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();(!f||(a=f(a,n++)))&&rows.push(a)}return rows},dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];return rows.forEach(function(row){for(var field in row)fieldSet.has(field)||fields.push(fieldSet.add(field))}),[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")},dsv.formatRows=function(rows){return rows.map(formatRow).join("\n")},dsv},d3.csv=d3.dsv(",","text/csv"),d3.tsv=d3.dsv("	","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_active,d3_timer_frame=d3_window[d3_vendorSymbol(d3_window,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};d3.timer=function(callback,delay,then){var n=arguments.length;2>n&&(delay=0),3>n&&(then=Date.now());var time=then+delay,timer={c:callback,t:time,f:!1,n:null};d3_timer_queueTail?d3_timer_queueTail.n=timer:d3_timer_queueHead=timer,d3_timer_queueTail=timer,d3_timer_interval||(d3_timer_timeout=clearTimeout(d3_timer_timeout),d3_timer_interval=1,d3_timer_frame(d3_timer_step))},d3.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()};var d3_format_decimalPoint=".",d3_format_thousandsSeparator=",",d3_format_grouping=[3,3],d3_format_currencySymbol="$",d3_formatPrefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);d3.formatPrefix=function(value,precision){var i=0;return value&&(0>value&&(value*=-1),precision&&(value=d3.round(value,d3_format_precision(value,precision))),i=1+Math.floor(1e-12+Math.log(value)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((0>=i?i+1:i-1)/3)))),d3_formatPrefixes[8+i/3]},d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)},d3.format=function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,suffix="",integer=!1;switch(precision&&(precision=+precision.substring(1)),(zfill||"0"===fill&&"="===align)&&(zfill=fill="0",align="=",comma&&(width-=Math.floor((width-1)/4))),type){case"n":comma=!0,type="g";break;case"%":scale=100,suffix="%",type="f";break;case"p":scale=100,suffix="%",type="r";break;case"b":case"o":case"x":case"X":"#"===symbol&&(symbol="0"+type.toLowerCase());case"c":case"d":integer=!0,precision=0;break;case"s":scale=-1,type="r"}"#"===symbol?symbol="":"$"===symbol&&(symbol=d3_format_currencySymbol),"r"!=type||precision||(type="g"),null!=precision&&("g"==type?precision=Math.max(1,Math.min(21,precision)):("e"==type||"f"==type)&&(precision=Math.max(0,Math.min(20,precision)))),type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){if(integer&&value%1)return"";var negative=0>value||0===value&&0>1/value?(value=-value,"-"):sign;if(0>scale){var prefix=d3.formatPrefix(value,precision);value=prefix.scale(value),suffix=prefix.symbol}else value*=scale;value=type(value,precision);var i=value.lastIndexOf("."),before=0>i?value:value.substring(0,i),after=0>i?"":d3_format_decimalPoint+value.substring(i+1);!zfill&&comma&&(before=d3_format_group(before));var length=symbol.length+before.length+after.length+(zcomma?0:negative.length),padding=width>length?new Array(length=width-length+1).join(fill):"";return zcomma&&(before=d3_format_group(padding+before)),negative+=symbol,value=before+after,("<"===align?negative+value+padding:">"===align?padding+negative+value:"^"===align?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+suffix}};var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}}),d3_format_group=d3_identity;if(d3_format_grouping){var d3_format_groupingLength=d3_format_grouping.length;d3_format_group=function(value){for(var i=value.length,t=[],j=0,g=d3_format_grouping[0];i>0&&g>0;)t.push(value.substring(i-=g,i+g)),g=d3_format_grouping[j=(j+1)%d3_format_groupingLength];return t.reverse().join(d3_format_thousandsSeparator)}}d3.geo={},d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp),d3_adderSum(d3_adderTemp.s,this.s,this),this.s?this.t+=d3_adderTemp.t:this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;d3.geo.stream=function(object,listener){object&&d3_geo_streamObjectType.hasOwnProperty(object.type)?d3_geo_streamObjectType[object.type](object,listener):d3_geo_streamGeometry(object,listener)};var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){for(var features=object.features,i=-1,n=features.length;++i<n;)d3_geo_streamGeometry(features[i].geometry,listener)}},d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates,listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,listener){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)d3_geo_streamGeometry(geometries[i],listener)}};d3.geo.area=function(object){return d3_geo_areaSum=0,d3.geo.stream(object,d3_geo_area),d3_geo_areaSum};var d3_geo_areaSum,d3_geo_areaRingSum=new d3_adder,d3_geo_area={sphere:function(){d3_geo_areaSum+=4*π},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset(),d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=0>area?4*π+area:area,d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}};d3.geo.bounds=function(){function point(λ,φ){ranges.push(range=[λ0=λ,λ1=λ]),φ0>φ&&(φ0=φ),φ>φ1&&(φ1=φ)}function linePoint(λ,φ){var p=d3_geo_cartesian([λ*d3_radians,φ*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=d3_geo_cartesianCross(equatorial,normal);d3_geo_cartesianNormalize(inflection),inflection=d3_geo_spherical(inflection);var dλ=λ-λ_,s=dλ>0?1:-1,λi=inflection[0]*d3_degrees*s,antimeridian=abs(dλ)>180;if(antimeridian^(λi>s*λ_&&s*λ>λi)){var φi=inflection[1]*d3_degrees;φi>φ1&&(φ1=φi)}else if(λi=(λi+360)%360-180,antimeridian^(λi>s*λ_&&s*λ>λi)){var φi=-inflection[1]*d3_degrees;φ0>φi&&(φ0=φi)}else φ0>φ&&(φ0=φ),φ>φ1&&(φ1=φ);antimeridian?λ_>λ?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ):λ1>=λ0?(λ0>λ&&(λ0=λ),λ>λ1&&(λ1=λ)):λ>λ_?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ)}else point(λ,φ);p0=p,λ_=λ}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=λ0,range[1]=λ1,bound.point=point,p0=null}function ringPoint(λ,φ){if(p0){var dλ=λ-λ_;dλSum+=abs(dλ)>180?dλ+(dλ>0?360:-360):dλ}else λ__=λ,φ__=φ;d3_geo_area.point(λ,φ),linePoint(λ,φ)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(λ__,φ__),d3_geo_area.lineEnd(),abs(dλSum)>ε&&(λ0=-(λ1=180)),range[0]=λ0,range[1]=λ1,p0=null}function angle(λ0,λ1){return(λ1-=λ0)<0?λ1+360:λ1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var λ0,φ0,λ1,φ1,λ_,λ__,φ__,p0,dλSum,ranges,range,bound={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint,bound.lineStart=ringStart,bound.lineEnd=ringEnd,dλSum=0,d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd(),bound.point=point,bound.lineStart=lineStart,bound.lineEnd=lineEnd,0>d3_geo_areaRingSum?(λ0=-(λ1=180),φ0=-(φ1=90)):dλSum>ε?φ1=90:-ε>dλSum&&(φ0=-90),range[0]=λ0,range[1]=λ1
}};return function(feature){φ1=λ1=-(λ0=φ0=1/0),ranges=[],d3.geo.stream(feature,bound);var n=ranges.length;if(n){ranges.sort(compareRanges);for(var b,i=1,a=ranges[0],merged=[a];n>i;++i)b=ranges[i],withinRange(b[0],a)||withinRange(b[1],a)?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(var dλ,b,best=-1/0,n=merged.length-1,i=0,a=merged[n];n>=i;a=b,++i)b=merged[i],(dλ=angle(a[1],b[0]))>best&&(best=dλ,λ0=b[0],λ1=a[1])}return ranges=range=null,1/0===λ0||1/0===φ0?[[0/0,0/0],[0/0,0/0]]:[[λ0,φ0],[λ1,φ1]]}}(),d3.geo.centroid=function(object){d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;return ε2>m&&(x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1,ε>d3_geo_centroidW1&&(x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0),m=x*x+y*y+z*z,ε2>m)?[0/0,0/0]:[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2,d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}},d3_geo_clipAntimeridian=d3_geo_clip(d3_true,d3_geo_clipAntimeridianLine,d3_geo_clipAntimeridianInterpolate,[-π,-π/2]),d3_geo_clipExtentMAX=1e9;d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){return stream&&(stream.valid=!1),stream=clip(output),stream.valid=!0,stream},extent:function(_){return arguments.length?(clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),stream&&(stream.valid=!1,stream=null),clipExtent):[[x0,y0],[x1,y1]]}};return clipExtent.extent([[0,0],[960,500]])},(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea,d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},d3.geo.albersUsa=function(){function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point(x,y),point||(alaskaPoint(x,y),point)||hawaiiPoint(x,y),point}var point,lower48Point,alaskaPoint,hawaiiPoint,lower48=d3.geo.albers(),alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&.234>y&&x>=-.425&&-.214>x?alaska:y>=.166&&.234>y&&x>=-.214&&-.115>x?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y),alaskaStream.point(x,y),hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere(),alaskaStream.sphere(),hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart(),alaskaStream.lineStart(),hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd(),alaskaStream.lineEnd(),hawaiiStream.lineEnd()},polygonStart:function(){lower48Stream.polygonStart(),alaskaStream.polygonStart(),hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd(),alaskaStream.polygonEnd(),hawaiiStream.polygonEnd()}}},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),albersUsa):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point,alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+ε,y+.12*k+ε],[x-.214*k-ε,y+.234*k-ε]]).stream(pointStream).point,hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+ε,y+.166*k+ε],[x-.115*k-ε,y+.234*k-ε]]).stream(pointStream).point,albersUsa},albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0,d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop,d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}},d3_geo_pathBounds={point:d3_geo_pathBoundsPoint,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop},d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint,d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart,d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}};d3.geo.path=function(){function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),cacheStream&&cacheStream.valid||(cacheStream=projectStream(contextStream)),d3.geo.stream(object,cacheStream)),contextStream.result()}function reset(){return cacheStream=null,path}var projection,context,projectStream,contextStream,cacheStream,pointRadius=4.5;return path.area=function(object){return d3_geo_pathAreaSum=0,d3.geo.stream(object,projectStream(d3_geo_pathArea)),d3_geo_pathAreaSum},path.centroid=function(object){return d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,projectStream(d3_geo_pathCentroid)),d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,d3_geo_centroidY0/d3_geo_centroidZ0]:[0/0,0/0]},path.bounds=function(object){return d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=1/0),d3.geo.stream(object,projectStream(d3_geo_pathBounds)),[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]},path.projection=function(_){return arguments.length?(projectStream=(projection=_)?_.stream||d3_geo_pathProjectStream(_):d3_identity,reset()):projection},path.context=function(_){return arguments.length?(contextStream=null==(context=_)?new d3_geo_pathBuffer:new d3_geo_pathContext(_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),reset()):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(d3.geo.albersUsa()).context(null)},d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}},d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},d3.geo.projection=d3_geo_projection,d3.geo.projectionMutator=d3_geo_projectionMutator,(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular,d3.geo.rotation=function(rotate){function forward(coordinates){return coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians),coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}return rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,rotate.length>2?rotate[2]*d3_radians:0),forward.invert=function(coordinates){return coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians),coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates},forward},d3_geo_identityRotation.invert=d3_geo_equirectangular,d3.geo.circle=function(){function circle(){var center="function"==typeof origin?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];return interpolate(null,null,1,{point:function(x,y){ring.push(x=rotate(x,y)),x[0]*=d3_degrees,x[1]*=d3_degrees}}),{type:"Polygon",coordinates:[ring]}}var angle,interpolate,origin=[0,0],precision=6;return circle.origin=function(x){return arguments.length?(origin=x,circle):origin},circle.angle=function(x){return arguments.length?(interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians),circle):angle},circle.precision=function(_){return arguments.length?(interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians),circle):precision},circle.angle(90)},d3.geo.distance=function(a,b){var t,Δλ=(b[0]-a[0])*d3_radians,φ0=a[1]*d3_radians,φ1=b[1]*d3_radians,sinΔλ=Math.sin(Δλ),cosΔλ=Math.cos(Δλ),sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),sinφ1=Math.sin(φ1),cosφ1=Math.cos(φ1);return Math.atan2(Math.sqrt((t=cosφ1*sinΔλ)*t+(t=cosφ0*sinφ1-sinφ0*cosφ1*cosΔλ)*t),sinφ0*sinφ1+cosφ0*cosφ1*cosΔλ)},d3.geo.graticule=function(){function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>ε}).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>ε}).map(y))}var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;return graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.majorExtent(_).minorExtent(_):graticule.minorExtent()},graticule.majorExtent=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.minorExtent=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.majorStep(_).minorStep(_):graticule.minorStep()},graticule.majorStep=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.minorStep=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=d3_geo_graticuleX(y0,y1,90),y=d3_geo_graticuleY(x0,x1,precision),X=d3_geo_graticuleX(Y0,Y1,90),Y=d3_geo_graticuleY(X0,X1,precision),graticule):precision},graticule.majorExtent([[-180,-90+ε],[180,90-ε]]).minorExtent([[-180,-80-ε],[180,80+ε]])},d3.geo.greatArc=function(){function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}var source_,target_,source=d3_source,target=d3_target;return greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))},greatArc.source=function(_){return arguments.length?(source=_,source_="function"==typeof _?null:_,greatArc):source},greatArc.target=function(_){return arguments.length?(target=_,target_="function"==typeof _?null:_,greatArc):target},greatArc.precision=function(){return arguments.length?greatArc:0},greatArc},d3.geo.interpolate=function(source,target){return d3_geo_interpolate(source[0]*d3_radians,source[1]*d3_radians,target[0]*d3_radians,target[1]*d3_radians)},d3.geo.length=function(object){return d3_geo_lengthSum=0,d3.geo.stream(object,d3_geo_length),d3_geo_lengthSum};var d3_geo_lengthSum,d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:d3_geo_lengthLineStart,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop},d3_geo_azimuthalEqualArea=d3_geo_azimuthal(function(cosλcosφ){return Math.sqrt(2/(1+cosλcosφ))},function(ρ){return 2*Math.asin(ρ/2)});(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal(function(cosλcosφ){var c=Math.acos(cosλcosφ);return c&&c/Math.sin(c)},d3_identity);(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}).raw=d3_geo_azimuthalEquidistant,(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal,(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal(function(cosλcosφ){return 1/cosλcosφ},Math.atan);(d3.geo.gnomonic=function(){return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic,d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-halfπ]},(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal(function(cosλcosφ){return 1/(1+cosλcosφ)},function(ρ){return 2*Math.atan(ρ)});(d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic,d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-halfπ]},(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;return projection.center=function(_){return _?center([-_[1],_[0]]):(_=center(),[-_[1],_[0]])},projection.rotate=function(_){return _?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),[_[0],_[1],_[2]-90])},projection.rotate([0,0])}).raw=d3_geo_transverseMercator,d3.geom={},d3.geom.hull=function(vertices){function hull(data){if(data.length<3)return[];var vertices,d,i,j,x1,y1,x2,y2,u,v,a,sp,fx=d3_functor(x),fy=d3_functor(y),n=data.length,plen=n-1,points=[],stack=[],h=0;if(fx===d3_geom_pointX&&y===d3_geom_pointY)vertices=data;else for(i=0,vertices=[];n>i;++i)vertices.push([+fx.call(this,d=data[i],i),+fy.call(this,d,i)]);for(i=1;n>i;++i)(vertices[i][1]<vertices[h][1]||vertices[i][1]==vertices[h][1]&&vertices[i][0]<vertices[h][0])&&(h=i);for(i=0;n>i;++i)i!==h&&(y1=vertices[i][1]-vertices[h][1],x1=vertices[i][0]-vertices[h][0],points.push({angle:Math.atan2(y1,x1),index:i}));for(points.sort(function(a,b){return a.angle-b.angle}),a=points[0].angle,v=points[0].index,u=0,i=1;plen>i;++i){if(j=points[i].index,a==points[i].angle){if(x1=vertices[v][0]-vertices[h][0],y1=vertices[v][1]-vertices[h][1],x2=vertices[j][0]-vertices[h][0],y2=vertices[j][1]-vertices[h][1],x1*x1+y1*y1>=x2*x2+y2*y2){points[i].index=-1;continue}points[u].index=-1}a=points[i].angle,u=i,v=j}for(stack.push(h),i=0,j=0;2>i;++j)points[j].index>-1&&(stack.push(points[j].index),i++);for(sp=stack.length;plen>j;++j)if(!(points[j].index<0)){for(;!d3_geom_hullCCW(stack[sp-2],stack[sp-1],points[j].index,vertices);)--sp;stack[sp++]=points[j].index}var poly=[];for(i=sp-1;i>=0;--i)poly.push(data[stack[i]]);return poly}var x=d3_geom_pointX,y=d3_geom_pointY;return arguments.length?hull(vertices):(hull.x=function(_){return arguments.length?(x=_,hull):x},hull.y=function(_){return arguments.length?(y=_,hull):y},hull)},d3.geom.polygon=function(coordinates){return d3_subclass(coordinates,d3_geom_polygonPrototype),coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];d3_geom_polygonPrototype.area=function(){for(var a,i=-1,n=this.length,b=this[n-1],area=0;++i<n;)a=b,b=this[i],area+=a[1]*b[0]-a[0]*b[1];return.5*area},d3_geom_polygonPrototype.centroid=function(k){var a,c,i=-1,n=this.length,x=0,y=0,b=this[n-1];for(arguments.length||(k=-1/(6*this.area()));++i<n;)a=b,b=this[i],c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x*k,y*k]},d3_geom_polygonPrototype.clip=function(subject){for(var input,j,m,b,c,d,closed=d3_geom_polygonClosed(subject),i=-1,n=this.length-d3_geom_polygonClosed(this),a=this[n-1];++i<n;){for(input=subject.slice(),subject.length=0,b=this[i],c=input[(m=input.length-closed)-1],j=-1;++j<m;)d=input[j],d3_geom_polygonInside(d,a,b)?(d3_geom_polygonInside(c,a,b)||subject.push(d3_geom_polygonIntersect(c,d,a,b)),subject.push(d)):d3_geom_polygonInside(c,a,b)&&subject.push(d3_geom_polygonIntersect(c,d,a,b)),c=d;closed&&subject.push(subject[0]),a=b}return subject};var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiBeachPool=[],d3_geom_voronoiCirclePool=[];d3_geom_voronoiCell.prototype.prepare=function(){for(var edge,halfEdges=this.edges,iHalfEdge=halfEdges.length;iHalfEdge--;)edge=halfEdges[iHalfEdge].edge,edge.b&&edge.a||halfEdges.splice(iHalfEdge,1);return halfEdges.sort(d3_geom_voronoiHalfEdgeOrder),halfEdges.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=d3_geom_voronoiRedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)grandpa=parent.U,parent===grandpa.L?(uncle=grandpa.R,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(d3_geom_voronoiRedBlackRotateLeft(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateRight(this,grandpa))):(uncle=grandpa.L,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(d3_geom_voronoiRedBlackRotateRight(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,grandpa))),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?d3_geom_voronoiRedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red){if(node&&node.C)return void(node.C=!1);do{if(node===this._)break;if(node===parent.L){if(sibling=parent.R,sibling.C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,parent),node=this._;break}}else if(sibling=parent.L,sibling.C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}},d3.geom.voronoi=function(points){function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];return d3_geom_voronoi(sites(data),clipExtent).cells.forEach(function(cell,i){var edges=cell.edges,site=cell.site,polygon=polygons[i]=edges.length?edges.map(function(e){var s=e.start();return[s.x,s.y]}):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[];polygon.point=data[i]}),polygons}function sites(data){return data.map(function(d,i){return{x:Math.round(fx(d,i)/ε)*ε,y:Math.round(fy(d,i)/ε)*ε,i:i}})}var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;return points?voronoi(points):(voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter(function(edge){return edge.l&&edge.r}).map(function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}})},voronoi.triangles=function(data){var triangles=[];return d3_geom_voronoi(sites(data)).cells.forEach(function(cell,i){for(var e0,s0,site=cell.site,edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;++j<m;)e0=e1,s0=s1,e1=edges[j].edge,s1=e1.l===site?e1.r:e1.l,i<s0.i&&i<s1.i&&d3_geom_voronoiTriangleArea(site,s0,s1)<0&&triangles.push([data[i],data[s0.i],data[s1.i]])}),triangles},voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x},voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y},voronoi.clipExtent=function(_){return arguments.length?(clipExtent=null==_?d3_geom_voronoiClipExtent:_,voronoi):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent},voronoi.size=function(_){return arguments.length?voronoi.clipExtent(_&&[[0,0],_]):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1]},voronoi)};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)},d3.geom.quadtree=function(points,x1,y1,x2,y2){function quadtree(data){function insert(n,d,x,y,x1,y1,x2,y2){if(!isNaN(x)&&!isNaN(y))if(n.leaf){var nx=n.x,ny=n.y;if(null!=nx)if(abs(nx-x)+abs(ny-y)<.01)insertChild(n,d,x,y,x1,y1,x2,y2);else{var nPoint=n.point;n.x=n.y=n.point=null,insertChild(n,nPoint,nx,ny,x1,y1,x2,y2),insertChild(n,d,x,y,x1,y1,x2,y2)}else n.x=x,n.y=y,n.point=d}else insertChild(n,d,x,y,x1,y1,x2,y2)}function insertChild(n,d,x,y,x1,y1,x2,y2){var sx=.5*(x1+x2),sy=.5*(y1+y2),right=x>=sx,bottom=y>=sy,i=(bottom<<1)+right;n.leaf=!1,n=n.nodes[i]||(n.nodes[i]=d3_geom_quadtreeNode()),right?x1=sx:x2=sx,bottom?y1=sy:y2=sy,insert(n,d,x,y,x1,y1,x2,y2)}var d,xs,ys,i,n,x1_,y1_,x2_,y2_,fx=d3_functor(x),fy=d3_functor(y);if(null!=x1)x1_=x1,y1_=y1,x2_=x2,y2_=y2;else if(x2_=y2_=-(x1_=y1_=1/0),xs=[],ys=[],n=data.length,compat)for(i=0;n>i;++i)d=data[i],d.x<x1_&&(x1_=d.x),d.y<y1_&&(y1_=d.y),d.x>x2_&&(x2_=d.x),d.y>y2_&&(y2_=d.y),xs.push(d.x),ys.push(d.y);else for(i=0;n>i;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);x1_>x_&&(x1_=x_),y1_>y_&&(y1_=y_),x_>x2_&&(x2_=x_),y_>y2_&&(y2_=y_),xs.push(x_),ys.push(y_)}var dx=x2_-x1_,dy=y2_-y1_;dx>dy?y2_=y1_+dx:x2_=x1_+dy;var root=d3_geom_quadtreeNode();if(root.add=function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)},root.visit=function(f){d3_geom_quadtreeVisit(f,root,x1_,y1_,x2_,y2_)},i=-1,null==x1){for(;++i<n;)insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_);--i}else data.forEach(root.add);return xs=ys=data=d=null,root}var compat,x=d3_geom_pointX,y=d3_geom_pointY;return(compat=arguments.length)?(x=d3_geom_quadtreeCompatX,y=d3_geom_quadtreeCompatY,3===compat&&(y2=y1,x2=x1,y1=x1=0),quadtree(points)):(quadtree.x=function(_){return arguments.length?(x=_,quadtree):x},quadtree.y=function(_){return arguments.length?(y=_,quadtree):y},quadtree.extent=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1]),quadtree):null==x1?null:[[x1,y1],[x2,y2]]},quadtree.size=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=y1=0,x2=+_[0],y2=+_[1]),quadtree):null==x1?null:[x2-x1,y2-y1]},quadtree)},d3.interpolateRgb=d3_interpolateRgb,d3.interpolateObject=d3_interpolateObject,d3.interpolateNumber=d3_interpolateNumber,d3.interpolateString=d3_interpolateString;var d3_interpolate_number=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolate=d3_interpolate,d3.interpolators=[function(a,b){var t=typeof b;return("string"===t?d3_rgb_names.has(b)||/^(#|rgb\(|hsl\()/.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_Color?d3_interpolateRgb:"object"===t?Array.isArray(b)?d3_interpolateArray:d3_interpolateObject:d3_interpolateNumber)(a,b)}],d3.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}}),d3_ease_mode=d3.map({"in":d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.substring(0,i):name,m=i>=0?name.substring(i+1):"in";return t=d3_ease.get(t)||d3_ease_default,m=d3_ease_mode.get(m)||d3_identity,d3_ease_clamp(m(t.apply(null,d3_arraySlice.call(arguments,1))))},d3.interpolateHcl=d3_interpolateHcl,d3.interpolateHsl=d3_interpolateHsl,d3.interpolateLab=d3_interpolateLab,d3.interpolateRound=d3_interpolateRound,d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(null!=string){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolateTransform=d3_interpolateTransform,d3.layout={},d3.layout.bundle=function(){return function(links){for(var paths=[],i=-1,n=links.length;++i<n;)paths.push(d3_layout_bundlePath(links[i]));return paths}},d3.layout.chord=function(){function relayout(){var k,x,x0,i,j,subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[];for(chords=[],groups=[],k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(d3.range(n)),k+=x}for(sortGroups&&groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b])}),sortSubgroups&&subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])})}),k=(τ-padding*n)/k,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:(x-x0)/k},x+=padding}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}sortChords&&resort()}function resort(){chords.sort(function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var chords,groups,matrix,n,sortGroups,sortSubgroups,sortChords,chord={},padding=0;return chord.matrix=function(x){return arguments.length?(n=(matrix=x)&&matrix.length,chords=groups=null,chord):matrix},chord.padding=function(x){return arguments.length?(padding=x,chords=groups=null,chord):padding},chord.sortGroups=function(x){return arguments.length?(sortGroups=x,chords=groups=null,chord):sortGroups},chord.sortSubgroups=function(x){return arguments.length?(sortSubgroups=x,chords=null,chord):sortSubgroups},chord.sortChords=function(x){return arguments.length?(sortChords=x,chords&&resort(),chord):sortChords},chord.chords=function(){return chords||relayout(),chords},chord.groups=function(){return groups||relayout(),groups},chord},d3.layout.force=function(){function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dn=1/Math.sqrt(dx*dx+dy*dy);if(theta>(x2-x1)*dn){var k=quad.charge*dn*dn;return node.px-=dx*k,node.py-=dy*k,!0}if(quad.point&&isFinite(dn)){var k=quad.pointCharge*dn*dn;node.px-=dx*k,node.py-=dy*k}}return!quad.charge}}function dragmove(d){d.px=d3.event.x,d.py=d3.event.y,force.resume()}var drag,alpha,distances,strengths,charges,force={},event=d3.dispatch("start","tick","end"),size=[1,1],friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,gravity=.1,theta=.8,nodes=[],links=[];return force.tick=function(){if((alpha*=.99)<.005)return event.end({type:"end",alpha:alpha=0}),!0;var q,i,o,s,t,l,k,x,y,n=nodes.length,m=links.length;for(i=0;m>i;++i)o=links[i],s=o.source,t=o.target,x=t.x-s.x,y=t.y-s.y,(l=x*x+y*y)&&(l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l,x*=l,y*=l,t.x-=x*(k=s.weight/(t.weight+s.weight)),t.y-=y*k,s.x+=x*(k=1-k),s.y+=y*k);if((k=alpha*gravity)&&(x=size[0]/2,y=size[1]/2,i=-1,k))for(;++i<n;)o=nodes[i],o.x+=(x-o.x)*k,o.y+=(y-o.y)*k;if(charge)for(d3_layout_forceAccumulate(q=d3.geom.quadtree(nodes),alpha,charges),i=-1;++i<n;)(o=nodes[i]).fixed||q.visit(repulse(o));for(i=-1;++i<n;)o=nodes[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*friction,o.y-=(o.py-(o.py=o.y))*friction);event.tick({type:"tick",alpha:alpha})},force.nodes=function(x){return arguments.length?(nodes=x,force):nodes},force.links=function(x){return arguments.length?(links=x,force):links},force.size=function(x){return arguments.length?(size=x,force):size},force.linkDistance=function(x){return arguments.length?(linkDistance="function"==typeof x?x:+x,force):linkDistance},force.distance=force.linkDistance,force.linkStrength=function(x){return arguments.length?(linkStrength="function"==typeof x?x:+x,force):linkStrength},force.friction=function(x){return arguments.length?(friction=+x,force):friction},force.charge=function(x){return arguments.length?(charge="function"==typeof x?x:+x,force):charge},force.gravity=function(x){return arguments.length?(gravity=+x,force):gravity},force.theta=function(x){return arguments.length?(theta=+x,force):theta},force.alpha=function(x){return arguments.length?(x=+x,alpha?alpha=x>0?x:0:x>0&&(event.start({type:"start",alpha:alpha=x}),d3.timer(force.tick)),force):alpha},force.start=function(){function position(dimension,size){if(!neighbors){for(neighbors=new Array(n),j=0;n>j;++j)neighbors[j]=[];for(j=0;m>j;++j){var o=links[j];neighbors[o.source.index].push(o.target),neighbors[o.target.index].push(o.source)}}for(var x,candidates=neighbors[i],j=-1,m=candidates.length;++j<m;)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}var i,neighbors,o,n=nodes.length,m=links.length,w=size[0],h=size[1];for(i=0;n>i;++i)(o=nodes[i]).index=i,o.weight=0;for(i=0;m>i;++i)o=links[i],"number"==typeof o.source&&(o.source=nodes[o.source]),"number"==typeof o.target&&(o.target=nodes[o.target]),++o.source.weight,++o.target.weight;
for(i=0;n>i;++i)o=nodes[i],isNaN(o.x)&&(o.x=position("x",w)),isNaN(o.y)&&(o.y=position("y",h)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(distances=[],"function"==typeof linkDistance)for(i=0;m>i;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;m>i;++i)distances[i]=linkDistance;if(strengths=[],"function"==typeof linkStrength)for(i=0;m>i;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;m>i;++i)strengths[i]=linkStrength;if(charges=[],"function"==typeof charge)for(i=0;n>i;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;n>i;++i)charges[i]=charge;return force.resume()},force.resume=function(){return force.alpha(.1)},force.stop=function(){return force.alpha(0)},force.drag=function(){return drag||(drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),arguments.length?void this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag):drag},d3.rebind(force,event,"on")};var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1;d3.layout.hierarchy=function(){function recurse(node,depth,nodes){var childs=children.call(hierarchy,node,depth);if(node.depth=depth,nodes.push(node),childs&&(n=childs.length)){for(var n,d,i=-1,c=node.children=new Array(n),v=0,j=depth+1;++i<n;)d=c[i]=recurse(childs[i],j,nodes),d.parent=node,v+=d.value;sort&&c.sort(sort),value&&(node.value=v)}else delete node.children,value&&(node.value=+value.call(hierarchy,node,depth)||0);return node}function revalue(node,depth){var children=node.children,v=0;if(children&&(n=children.length))for(var n,i=-1,j=depth+1;++i<n;)v+=revalue(children[i],j);else value&&(v=+value.call(hierarchy,node,depth)||0);return value&&(node.value=v),v}function hierarchy(d){var nodes=[];return recurse(d,0,nodes),nodes}var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;return hierarchy.sort=function(x){return arguments.length?(sort=x,hierarchy):sort},hierarchy.children=function(x){return arguments.length?(children=x,hierarchy):children},hierarchy.value=function(x){return arguments.length?(value=x,hierarchy):value},hierarchy.revalue=function(root){return revalue(root,0),root},hierarchy},d3.layout.partition=function(){function position(node,x,dx,dy){var children=node.children;if(node.x=x,node.y=node.depth*dy,node.dx=dx,node.dy=dy,children&&(n=children.length)){var n,c,d,i=-1;for(dx=node.value?dx/node.value:0;++i<n;)position(c=children[i],x,d=c.value*dx,dy),x+=d}}function depth(node){var children=node.children,d=0;if(children&&(n=children.length))for(var n,i=-1;++i<n;)d=Math.max(d,depth(children[i]));return 1+d}function partition(d,i){var nodes=hierarchy.call(this,d,i);return position(nodes[0],0,size[0],size[1]/depth(nodes[0])),nodes}var hierarchy=d3.layout.hierarchy(),size=[1,1];return partition.size=function(x){return arguments.length?(size=x,partition):size},d3_layout_hierarchyRebind(partition,hierarchy)},d3.layout.pie=function(){function pie(data){var values=data.map(function(d,i){return+value.call(pie,d,i)}),a=+("function"==typeof startAngle?startAngle.apply(this,arguments):startAngle),k=(("function"==typeof endAngle?endAngle.apply(this,arguments):endAngle)-a)/d3.sum(values),index=d3.range(data.length);null!=sort&&index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])});var arcs=[];return index.forEach(function(i){var d;arcs[i]={data:data[i],value:d=values[i],startAngle:a,endAngle:a+=d*k}}),arcs}var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=τ;return pie.value=function(x){return arguments.length?(value=x,pie):value},pie.sort=function(x){return arguments.length?(sort=x,pie):sort},pie.startAngle=function(x){return arguments.length?(startAngle=x,pie):startAngle},pie.endAngle=function(x){return arguments.length?(endAngle=x,pie):endAngle},pie};var d3_layout_pieSortByValue={};d3.layout.stack=function(){function stack(data,index){var series=data.map(function(d,i){return values.call(stack,d,i)}),points=series.map(function(d){return d.map(function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]})}),orders=order.call(stack,points,index);series=d3.permute(series,orders),points=d3.permute(points,orders);var i,j,o,offsets=offset.call(stack,points,index),n=series.length,m=series[0].length;for(j=0;m>j;++j)for(out.call(stack,series[0][j],o=offsets[j],points[0][j][1]),i=1;n>i;++i)out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1]);return data}var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;return stack.values=function(x){return arguments.length?(values=x,stack):values},stack.order=function(x){return arguments.length?(order="function"==typeof x?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault,stack):order},stack.offset=function(x){return arguments.length?(offset="function"==typeof x?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero,stack):offset},stack.x=function(z){return arguments.length?(x=z,stack):x},stack.y=function(z){return arguments.length?(y=z,stack):y},stack.out=function(z){return arguments.length?(out=z,stack):out},stack};var d3_layout_stackOrders=d3.map({"inside-out":function(data){var i,j,n=data.length,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort(function(a,b){return max[a]-max[b]}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;n>i;++i)j=index[i],bottom>top?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},"default":d3_layout_stackOrderDefault}),d3_layout_stackOffsets=d3.map({silhouette:function(data){var i,j,o,n=data.length,m=data[0].length,sums=[],max=0,y0=[];for(j=0;m>j;++j){for(i=0,o=0;n>i;i++)o+=data[i][j][1];o>max&&(max=o),sums.push(o)}for(j=0;m>j;++j)y0[j]=(max-sums[j])/2;return y0},wiggle:function(data){var i,j,k,s1,s2,s3,dx,o,o0,n=data.length,x=data[0],m=x.length,y0=[];for(y0[0]=o=o0=0,j=1;m>j;++j){for(i=0,s1=0;n>i;++i)s1+=data[i][j][1];for(i=0,s2=0,dx=x[j][0]-x[j-1][0];n>i;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);i>k;++k)s3+=(data[k][j][1]-data[k][j-1][1])/dx;s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0,o0>o&&(o0=o)}for(j=0;m>j;++j)y0[j]-=o0;return y0},expand:function(data){var i,j,o,n=data.length,m=data[0].length,k=1/n,y0=[];for(j=0;m>j;++j){for(i=0,o=0;n>i;i++)o+=data[i][j][1];if(o)for(i=0;n>i;i++)data[i][j][1]/=o;else for(i=0;n>i;i++)data[i][j][1]=k}for(j=0;m>j;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});d3.layout.histogram=function(){function histogram(data,i){for(var bin,x,bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),i=-1,n=values.length,m=thresholds.length-1,k=frequency?1:1/n;++i<m;)bin=bins[i]=[],bin.dx=thresholds[i+1]-(bin.x=thresholds[i]),bin.y=0;if(m>0)for(i=-1;++i<n;)x=values[i],x>=range[0]&&x<=range[1]&&(bin=bins[d3.bisect(thresholds,x,1,m)-1],bin.y+=k,bin.push(data[i]));return bins}var frequency=!0,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;return histogram.value=function(x){return arguments.length?(valuer=x,histogram):valuer},histogram.range=function(x){return arguments.length?(ranger=d3_functor(x),histogram):ranger},histogram.bins=function(x){return arguments.length?(binner="number"==typeof x?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x),histogram):binner},histogram.frequency=function(x){return arguments.length?(frequency=!!x,histogram):frequency},histogram},d3.layout.tree=function(){function tree(d,i){function firstWalk(node,previousSibling){var children=node.children,layout=node._tree;if(children&&(n=children.length)){for(var n,previousChild,child,firstChild=children[0],ancestor=firstChild,i=-1;++i<n;)child=children[i],firstWalk(child,previousChild),ancestor=apportion(child,previousChild,ancestor),previousChild=child;d3_layout_treeShift(node);var midpoint=.5*(firstChild._tree.prelim+child._tree.prelim);previousSibling?(layout.prelim=previousSibling._tree.prelim+separation(node,previousSibling),layout.mod=layout.prelim-midpoint):layout.prelim=midpoint}else previousSibling&&(layout.prelim=previousSibling._tree.prelim+separation(node,previousSibling))}function secondWalk(node,x){node.x=node._tree.prelim+x;var children=node.children;if(children&&(n=children.length)){var n,i=-1;for(x+=node._tree.mod;++i<n;)secondWalk(children[i],x)}}function apportion(node,previousSibling,ancestor){if(previousSibling){for(var shift,vip=node,vop=node,vim=previousSibling,vom=node.parent.children[0],sip=vip._tree.mod,sop=vop._tree.mod,sim=vim._tree.mod,som=vom._tree.mod;vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip;)vom=d3_layout_treeLeft(vom),vop=d3_layout_treeRight(vop),vop._tree.ancestor=node,shift=vim._tree.prelim+sim-vip._tree.prelim-sip+separation(vim,vip),shift>0&&(d3_layout_treeMove(d3_layout_treeAncestor(vim,node,ancestor),node,shift),sip+=shift,sop+=shift),sim+=vim._tree.mod,sip+=vip._tree.mod,som+=vom._tree.mod,sop+=vop._tree.mod;vim&&!d3_layout_treeRight(vop)&&(vop._tree.thread=vim,vop._tree.mod+=sim-sop),vip&&!d3_layout_treeLeft(vom)&&(vom._tree.thread=vip,vom._tree.mod+=sip-som,ancestor=node)}return ancestor}var nodes=hierarchy.call(this,d,i),root=nodes[0];d3_layout_treeVisitAfter(root,function(node,previousSibling){node._tree={ancestor:node,prelim:0,mod:0,change:0,shift:0,number:previousSibling?previousSibling._tree.number+1:0}}),firstWalk(root),secondWalk(root,-root._tree.prelim);var left=d3_layout_treeSearch(root,d3_layout_treeLeftmost),right=d3_layout_treeSearch(root,d3_layout_treeRightmost),deep=d3_layout_treeSearch(root,d3_layout_treeDeepest),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2,y1=deep.depth||1;return d3_layout_treeVisitAfter(root,nodeSize?function(node){node.x*=size[0],node.y=node.depth*size[1],delete node._tree}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0],node.y=node.depth/y1*size[1],delete node._tree}),nodes}var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=!1;return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=null==(size=x),tree):nodeSize?null:size},tree.nodeSize=function(x){return arguments.length?(nodeSize=null!=(size=x),tree):nodeSize?size:null},d3_layout_hierarchyRebind(tree,hierarchy)},d3.layout.pack=function(){function pack(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],w=size[0],h=size[1],r=null==radius?Math.sqrt:"function"==typeof radius?radius:function(){return radius};if(root.x=root.y=0,d3_layout_treeVisitAfter(root,function(d){d.r=+r(d.value)}),d3_layout_treeVisitAfter(root,d3_layout_packSiblings),padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_treeVisitAfter(root,function(d){d.r+=dr}),d3_layout_treeVisitAfter(root,d3_layout_packSiblings),d3_layout_treeVisitAfter(root,function(d){d.r-=dr})}return d3_layout_packTransform(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h)),nodes}var radius,hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1];return pack.size=function(_){return arguments.length?(size=_,pack):size},pack.radius=function(_){return arguments.length?(radius=null==_||"function"==typeof _?_:+_,pack):radius},pack.padding=function(_){return arguments.length?(padding=+_,pack):padding},d3_layout_hierarchyRebind(pack,hierarchy)},d3.layout.cluster=function(){function cluster(d,i){var previousNode,nodes=hierarchy.call(this,d,i),root=nodes[0],x=0;d3_layout_treeVisitAfter(root,function(node){var children=node.children;children&&children.length?(node.x=d3_layout_clusterX(children),node.y=d3_layout_clusterY(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)});var left=d3_layout_clusterLeft(root),right=d3_layout_clusterRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return d3_layout_treeVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0],node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0],node.y=(1-(root.y?node.y/root.y:1))*size[1]}),nodes}var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=!1;return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=null==(size=x),cluster):nodeSize?null:size},cluster.nodeSize=function(x){return arguments.length?(nodeSize=null!=(size=x),cluster):nodeSize?size:null},d3_layout_hierarchyRebind(cluster,hierarchy)},d3.layout.treemap=function(){function scale(children,k){for(var child,area,i=-1,n=children.length;++i<n;)area=(child=children[i]).value*(0>k?0:k),child.area=isNaN(area)||0>=area?0:area}function squarify(node){var children=node.children;if(children&&children.length){var child,score,n,rect=pad(node),row=[],remaining=children.slice(),best=1/0,u="slice"===mode?rect.dx:"dice"===mode?rect.dy:"slice-dice"===mode?1&node.depth?rect.dy:rect.dx:Math.min(rect.dx,rect.dy);for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;(n=remaining.length)>0;)row.push(child=remaining[n-1]),row.area+=child.area,"squarify"!==mode||(score=worst(row,u))<=best?(remaining.pop(),best=score):(row.area-=row.pop().area,position(row,u,rect,!1),u=Math.min(rect.dx,rect.dy),row.length=row.area=0,best=1/0);row.length&&(position(row,u,rect,!0),row.length=row.area=0),children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var child,rect=pad(node),remaining=children.slice(),row=[];for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;child=remaining.pop();)row.push(child),row.area+=child.area,null!=child.z&&(position(row,child.z?rect.dx:rect.dy,rect,!remaining.length),row.length=row.area=0);children.forEach(stickify)}}function worst(row,u){for(var r,s=row.area,rmax=0,rmin=1/0,i=-1,n=row.length;++i<n;)(r=row[i].area)&&(rmin>r&&(rmin=r),r>rmax&&(rmax=r));return s*=s,u*=u,s?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):1/0}function position(row,u,rect,flush){var o,i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0;if(u==rect.dx){for((flush||v>rect.dy)&&(v=rect.dy);++i<n;)o=row[i],o.x=x,o.y=y,o.dy=v,x+=o.dx=Math.min(rect.x+rect.dx-x,v?round(o.area/v):0);o.z=!0,o.dx+=rect.x+rect.dx-x,rect.y+=v,rect.dy-=v}else{for((flush||v>rect.dx)&&(v=rect.dx);++i<n;)o=row[i],o.x=x,o.y=y,o.dx=v,y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0);o.z=!1,o.dy+=rect.y+rect.dy-y,rect.x+=v,rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];return root.x=0,root.y=0,root.dx=size[0],root.dy=size[1],stickies&&hierarchy.revalue(root),scale([root],root.dx*root.dy/root.value),(stickies?stickify:squarify)(root),sticky&&(stickies=nodes),nodes}var stickies,hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=!1,mode="squarify",ratio=.5*(1+Math.sqrt(5));return treemap.size=function(x){return arguments.length?(size=x,treemap):size},treemap.padding=function(x){function padFunction(node){var p=x.call(treemap,node,node.depth);return null==p?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,"number"==typeof p?[p,p,p,p]:p)}function padConstant(node){return d3_layout_treemapPad(node,x)}if(!arguments.length)return padding;var type;return pad=null==(padding=x)?d3_layout_treemapPadNull:"function"==(type=typeof x)?padFunction:"number"===type?(x=[x,x,x,x],padConstant):padConstant,treemap},treemap.round=function(x){return arguments.length?(round=x?Math.round:Number,treemap):round!=Number},treemap.sticky=function(x){return arguments.length?(sticky=x,stickies=null,treemap):sticky},treemap.ratio=function(x){return arguments.length?(ratio=x,treemap):ratio},treemap.mode=function(x){return arguments.length?(mode=x+"",treemap):mode},d3_layout_hierarchyRebind(treemap,hierarchy)},d3.random={normal:function(µ,σ){var n=arguments.length;return 2>n&&(σ=1),1>n&&(µ=0),function(){var x,y,r;do x=2*Math.random()-1,y=2*Math.random()-1,r=x*x+y*y;while(!r||r>1);return µ+σ*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;m>j;j++)s+=Math.random();return s}}},d3.scale={};var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,!1)};var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};d3.scale.log=function(){return d3_scale_log(d3.scale.linear().domain([0,1]),10,!0,[1,10])};var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};d3.scale.pow=function(){return d3_scale_pow(d3.scale.linear(),1,[0,1])},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)},d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)},d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)},d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);d3.scale.quantile=function(){return d3_scale_quantile([],[])},d3.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])},d3.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])},d3.scale.identity=function(){return d3_scale_identity([0,1])},d3.svg={},d3.svg.arc=function(){function arc(){var r0=innerRadius.apply(this,arguments),r1=outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)+d3_svg_arcOffset,a1=endAngle.apply(this,arguments)+d3_svg_arcOffset,da=(a0>a1&&(da=a0,a0=a1,a1=da),a1-a0),df=π>da?"0":"1",c0=Math.cos(a0),s0=Math.sin(a0),c1=Math.cos(a1),s1=Math.sin(a1);return da>=d3_svg_arcMax?r0?"M0,"+r1+"A"+r1+","+r1+" 0 1,1 0,"+-r1+"A"+r1+","+r1+" 0 1,1 0,"+r1+"M0,"+r0+"A"+r0+","+r0+" 0 1,0 0,"+-r0+"A"+r0+","+r0+" 0 1,0 0,"+r0+"Z":"M0,"+r1+"A"+r1+","+r1+" 0 1,1 0,"+-r1+"A"+r1+","+r1+" 0 1,1 0,"+r1+"Z":r0?"M"+r1*c0+","+r1*s0+"A"+r1+","+r1+" 0 "+df+",1 "+r1*c1+","+r1*s1+"L"+r0*c1+","+r0*s1+"A"+r0+","+r0+" 0 "+df+",0 "+r0*c0+","+r0*s0+"Z":"M"+r1*c0+","+r1*s0+"A"+r1+","+r1+" 0 "+df+",1 "+r1*c1+","+r1*s1+"L0,0Z"}var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;return arc.innerRadius=function(v){return arguments.length?(innerRadius=d3_functor(v),arc):innerRadius},arc.outerRadius=function(v){return arguments.length?(outerRadius=d3_functor(v),arc):outerRadius},arc.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),arc):startAngle},arc.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),arc):endAngle},arc.centroid=function(){var r=(innerRadius.apply(this,arguments)+outerRadius.apply(this,arguments))/2,a=(startAngle.apply(this,arguments)+endAngle.apply(this,arguments))/2+d3_svg_arcOffset;return[Math.cos(a)*r,Math.sin(a)*r]},arc};var d3_svg_arcOffset=-halfπ,d3_svg_arcMax=τ-ε;d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});d3_svg_lineInterpolators.forEach(function(key,value){value.key=key,value.closed=/-closed$/.test(key)});var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);return line.radius=line.x,delete line.x,line.angle=line.y,delete line.y,line},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,d3.svg.area=function(){return d3_svg_area(d3_identity)},d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);return area.radius=area.x,delete area.x,area.innerRadius=area.x0,delete area.x0,area.outerRadius=area.x1,delete area.x1,area.angle=area.y,delete area.y,area.startAngle=area.y0,delete area.y0,area.endAngle=area.y1,delete area.y1,area},d3.svg.chord=function(){function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)+d3_svg_arcOffset,a1=endAngle.call(self,subgroup,i)+d3_svg_arcOffset;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>π)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;return chord.radius=function(v){return arguments.length?(radius=d3_functor(v),chord):radius},chord.source=function(v){return arguments.length?(source=d3_functor(v),chord):source},chord.target=function(v){return arguments.length?(target=d3_functor(v),chord):target},chord.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),chord):startAngle},chord.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),chord):endAngle},chord},d3.svg.diagonal=function(){function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];return p=p.map(projection),"M"+p[0]+"C"+p[1]+" "+p[2]+" "+p[3]}var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;return diagonal.source=function(x){return arguments.length?(source=d3_functor(x),diagonal):source},diagonal.target=function(x){return arguments.length?(target=d3_functor(x),diagonal):target},diagonal.projection=function(x){return arguments.length?(projection=x,diagonal):projection},diagonal},d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;return diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection},diagonal},d3.svg.symbol=function(){function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}var type=d3_svg_symbolType,size=d3_svg_symbolSize;return symbol.type=function(x){return arguments.length?(type=d3_functor(x),symbol):type},symbol.size=function(x){return arguments.length?(size=d3_functor(x),symbol):size},symbol};var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0 0,"+ry+" "+-rx+",0Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_transitionInheritId,d3_transitionInherit,d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians),d3_transitionPrototype=[],d3_transitionId=0;d3_transitionPrototype.call=d3_selectionPrototype.call,d3_transitionPrototype.empty=d3_selectionPrototype.empty,d3_transitionPrototype.node=d3_selectionPrototype.node,d3_transitionPrototype.size=d3_selectionPrototype.size,d3.transition=function(selection){return arguments.length?d3_transitionInheritId?selection.transition():selection:d3_selectionRoot.transition()},d3.transition.prototype=d3_transitionPrototype,d3_transitionPrototype.select=function(selector){var subgroup,subnode,node,id=this.id,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))?("__data__"in node&&(subnode.__data__=node.__data__),d3_transitionNode(subnode,i,id,node.__transition__[id]),subgroup.push(subnode)):subgroup.push(null)}return d3_transition(subgroups,id)},d3_transitionPrototype.selectAll=function(selector){var subgroup,subnodes,node,subnode,transition,id=this.id,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)if(node=group[i]){transition=node.__transition__[id],subnodes=selector.call(node,node.__data__,i,j),subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;)(subnode=subnodes[k])&&d3_transitionNode(subnode,k,id,transition),subgroup.push(subnode)}return d3_transition(subgroups,id)},d3_transitionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;m>j;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;n>i;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_transition(subgroups,this.id)},d3_transitionPrototype.tween=function(name,tween){var id=this.id;return arguments.length<2?this.node().__transition__[id].tween.get(name):d3_selection_each(this,null==tween?function(node){node.__transition__[id].tween.remove(name)}:function(node){node.__transition__[id].tween.set(name,tween)})},d3_transitionPrototype.attr=function(nameNS,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return null==b?attrNull:(b+="",function(){var i,a=this.getAttribute(name);return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return null==b?attrNullNS:(b+="",function(){var i,a=this.getAttributeNS(name.space,name.local);return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate="transform"==nameNS?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.attrTween=function(nameNS,tween){function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}var name=d3.ns.qualify(nameNS);return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.style=function(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleString(b){return null==b?styleNull:(b+="",function(){var i,a=d3_window.getComputedStyle(this,null).getPropertyValue(name);return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}var n=arguments.length;if(3>n){if("string"!=typeof name){2>n&&(value="");for(priority in name)this.style(priority,name[priority],value);return this}priority=""}return d3_transition_tween(this,"style."+name,value,styleString)},d3_transitionPrototype.styleTween=function(name,tween,priority){function styleTween(d,i){var f=tween.call(this,d,i,d3_window.getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return arguments.length<3&&(priority=""),this.tween("style."+name,styleTween)},d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)},d3_transitionPrototype.remove=function(){return this.each("end.transition",function(){var p;this.__transition__.count<2&&(p=this.parentNode)&&p.removeChild(this)})},d3_transitionPrototype.ease=function(value){var id=this.id;return arguments.length<1?this.node().__transition__[id].ease:("function"!=typeof value&&(value=d3.ease.apply(d3,arguments)),d3_selection_each(this,function(node){node.__transition__[id].ease=value}))},d3_transitionPrototype.delay=function(value){var id=this.id;return d3_selection_each(this,"function"==typeof value?function(node,i,j){node.__transition__[id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node.__transition__[id].delay=value}))},d3_transitionPrototype.duration=function(value){var id=this.id;return d3_selection_each(this,"function"==typeof value?function(node,i,j){node.__transition__[id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node.__transition__[id].duration=value}))},d3_transitionPrototype.each=function(type,listener){var id=this.id;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;d3_transitionInheritId=id,d3_selection_each(this,function(node,i,j){d3_transitionInherit=node.__transition__[id],type.call(node,node.__data__,i,j)}),d3_transitionInherit=inherit,d3_transitionInheritId=inheritId}else d3_selection_each(this,function(node){var transition=node.__transition__[id];(transition.event||(transition.event=d3.dispatch("start","end"))).on(type,listener)});return this},d3_transitionPrototype.transition=function(){for(var subgroup,group,node,transition,id0=this.id,id1=++d3_transitionId,subgroups=[],j=0,m=this.length;m>j;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;n>i;i++)(node=group[i])&&(transition=Object.create(node.__transition__[id0]),transition.delay+=transition.duration,d3_transitionNode(node,i,id1,transition)),subgroup.push(node)}return d3_transition(subgroups,id1)},d3.svg.axis=function(){function axis(g){g.each(function(){var tickTransform,g=d3.select(this),scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy(),ticks=null==tickValues?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=null==tickFormat_?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",ε),tickExit=d3.transition(tick.exit()).style("opacity",ε).remove(),tickUpdate=d3.transition(tick).style("opacity",1),range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));
tickEnter.append("line"),tickEnter.append("text");var lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text");switch(orient){case"bottom":tickTransform=d3_svg_axisX,lineEnter.attr("y2",innerTickSize),textEnter.attr("y",Math.max(innerTickSize,0)+tickPadding),lineUpdate.attr("x2",0).attr("y2",innerTickSize),textUpdate.attr("x",0).attr("y",Math.max(innerTickSize,0)+tickPadding),text.attr("dy",".71em").style("text-anchor","middle"),pathUpdate.attr("d","M"+range[0]+","+outerTickSize+"V0H"+range[1]+"V"+outerTickSize);break;case"top":tickTransform=d3_svg_axisX,lineEnter.attr("y2",-innerTickSize),textEnter.attr("y",-(Math.max(innerTickSize,0)+tickPadding)),lineUpdate.attr("x2",0).attr("y2",-innerTickSize),textUpdate.attr("x",0).attr("y",-(Math.max(innerTickSize,0)+tickPadding)),text.attr("dy","0em").style("text-anchor","middle"),pathUpdate.attr("d","M"+range[0]+","+-outerTickSize+"V0H"+range[1]+"V"+-outerTickSize);break;case"left":tickTransform=d3_svg_axisY,lineEnter.attr("x2",-innerTickSize),textEnter.attr("x",-(Math.max(innerTickSize,0)+tickPadding)),lineUpdate.attr("x2",-innerTickSize).attr("y2",0),textUpdate.attr("x",-(Math.max(innerTickSize,0)+tickPadding)).attr("y",0),text.attr("dy",".32em").style("text-anchor","end"),pathUpdate.attr("d","M"+-outerTickSize+","+range[0]+"H0V"+range[1]+"H"+-outerTickSize);break;case"right":tickTransform=d3_svg_axisY,lineEnter.attr("x2",innerTickSize),textEnter.attr("x",Math.max(innerTickSize,0)+tickPadding),lineUpdate.attr("x2",innerTickSize).attr("y2",0),textUpdate.attr("x",Math.max(innerTickSize,0)+tickPadding).attr("y",0),text.attr("dy",".32em").style("text-anchor","start"),pathUpdate.attr("d","M"+outerTickSize+","+range[0]+"H0V"+range[1]+"H"+outerTickSize)}if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1);tickEnter.call(tickTransform,scale0),tickUpdate.call(tickTransform,scale1)})}var tickFormat_,scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null;return axis.scale=function(x){return arguments.length?(scale=x,axis):scale},axis.orient=function(x){return arguments.length?(orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient,axis):orient},axis.ticks=function(){return arguments.length?(tickArguments_=arguments,axis):tickArguments_},axis.tickValues=function(x){return arguments.length?(tickValues=x,axis):tickValues},axis.tickFormat=function(x){return arguments.length?(tickFormat_=x,axis):tickFormat_},axis.tickSize=function(x){var n=arguments.length;return n?(innerTickSize=+x,outerTickSize=+arguments[n-1],axis):innerTickSize},axis.innerTickSize=function(x){return arguments.length?(innerTickSize=+x,axis):innerTickSize},axis.outerTickSize=function(x){return arguments.length?(outerTickSize=+x,axis):outerTickSize},axis.tickPadding=function(x){return arguments.length?(tickPadding=+x,axis):tickPadding},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};d3.svg.brush=function(){function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove(),resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),resize.style("display",brush.empty()?"none":null);var range,gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background);x&&(range=d3_scaleRange(x),backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]),redrawX(gUpdate)),y&&(range=d3_scaleRange(y),backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]),redrawY(gUpdate)),redraw(gUpdate)})}function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]),g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]),g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){function keydown(){32==d3.event.keyCode&&(dragging||(center=null,origin[0]-=xExtent[1],origin[1]-=yExtent[1],dragging=2),d3_eventPreventDefault())}function keyup(){32==d3.event.keyCode&&2==dragging&&(origin[0]+=xExtent[1],origin[1]+=yExtent[1],dragging=0,d3_eventPreventDefault())}function brushmove(){var point=d3.mouse(target),moved=!1;offset&&(point[0]+=offset[0],point[1]+=offset[1]),dragging||(d3.event.altKey?(center||(center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2]),origin[0]=xExtent[+(point[0]<center[0])],origin[1]=yExtent[+(point[1]<center[1])]):center=null),resizingX&&move1(point,x,0)&&(redrawX(g),moved=!0),resizingY&&move1(point,y,1)&&(redrawY(g),moved=!0),moved&&(redraw(g),event_({type:"brush",mode:dragging?"move":"resize"}))}function move1(point,scale,i){var min,max,range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0];return dragging&&(r0-=position,r1-=size+position),min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i],dragging?max=(min+=position)+size:(center&&(position=Math.max(r0,Math.min(r1,2*center[i]-min))),min>position?(max=min,min=position):max=position),extent[0]!=min||extent[1]!=max?(i?yExtentDomain=null:xExtentDomain=null,extent[0]=min,extent[1]=max,!0):void 0}function brushend(){brushmove(),g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),d3.select("body").style("cursor",null),w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),dragRestore(),event_({type:"brushend"})}var center,offset,target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(),origin=d3.mouse(target),w=d3.select(d3_window).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches?w.on("touchmove.brush",brushmove).on("touchend.brush",brushend):w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),g.interrupt().selectAll("*").interrupt(),dragging)origin[0]=xExtent[0]-origin[0],origin[1]=yExtent[0]-origin[1];else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]],origin[0]=xExtent[ex],origin[1]=yExtent[ey]}else d3.event.altKey&&(center=origin.slice());g.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",eventTarget.style("cursor")),event_({type:"brushstart"}),brushmove()}var xExtentDomain,yExtentDomain,event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xClamp=!0,yClamp=!0,resizes=d3_svg_brushResizes[0];return brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1,d3_transitionInheritId?d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i,yExtentDomain=extent0.j,xExtent=extent0.x,yExtent=extent0.y,event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);return xExtentDomain=yExtentDomain=null,function(t){xExtent=extent1.x=xi(t),yExtent=extent1.y=yi(t),event_({type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i,yExtentDomain=extent1.j,event_({type:"brush",mode:"resize"}),event_({type:"brushend"})}):(event_({type:"brushstart"}),event_({type:"brush",mode:"resize"}),event_({type:"brushend"}))})},brush.x=function(z){return arguments.length?(x=z,resizes=d3_svg_brushResizes[!x<<1|!y],brush):x},brush.y=function(z){return arguments.length?(y=z,resizes=d3_svg_brushResizes[!x<<1|!y],brush):y},brush.clamp=function(z){return arguments.length?(x&&y?(xClamp=!!z[0],yClamp=!!z[1]):x?xClamp=!!z:y&&(yClamp=!!z),brush):x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null},brush.extent=function(z){var x0,x1,y0,y1,t;return arguments.length?(x&&(x0=z[0],x1=z[1],y&&(x0=x0[0],x1=x1[0]),xExtentDomain=[x0,x1],x.invert&&(x0=x(x0),x1=x(x1)),x0>x1&&(t=x0,x0=x1,x1=t),(x0!=xExtent[0]||x1!=xExtent[1])&&(xExtent=[x0,x1])),y&&(y0=z[0],y1=z[1],x&&(y0=y0[1],y1=y1[1]),yExtentDomain=[y0,y1],y.invert&&(y0=y(y0),y1=y(y1)),y0>y1&&(t=y0,y0=y1,y1=t),(y0!=yExtent[0]||y1!=yExtent[1])&&(yExtent=[y0,y1])),brush):(x&&(xExtentDomain?(x0=xExtentDomain[0],x1=xExtentDomain[1]):(x0=xExtent[0],x1=xExtent[1],x.invert&&(x0=x.invert(x0),x1=x.invert(x1)),x0>x1&&(t=x0,x0=x1,x1=t))),y&&(yExtentDomain?(y0=yExtentDomain[0],y1=yExtentDomain[1]):(y0=yExtent[0],y1=yExtent[1],y.invert&&(y0=y.invert(y0),y1=y.invert(y1)),y0>y1&&(t=y0,y0=y1,y1=t))),x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1])},brush.clear=function(){return brush.empty()||(xExtent=[0,0],yExtent=[0,0],xExtentDomain=yExtentDomain=null),brush},brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]},d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d3_time=d3.time={},d3_date=Date,d3_time_daySymbols=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype,d3_time_formatDateTime="%a %b %e %X %Y",d3_time_formatDate="%m/%d/%Y",d3_time_formatTime="%H:%M:%S",d3_time_days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d3_time_dayAbbreviations=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d3_time_months=["January","February","March","April","May","June","July","August","September","October","November","December"],d3_time_monthAbbreviations=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];d3_time.year=d3_time_interval(function(date){return date=d3_time.day(date),date.setMonth(0,1),date},function(date,offset){date.setFullYear(date.getFullYear()+offset)},function(date){return date.getFullYear()}),d3_time.years=d3_time.year.range,d3_time.years.utc=d3_time.year.utc.range,d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);return day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1}),d3_time.days=d3_time.day.range,d3_time.days.utc=d3_time.day.utc.range,d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-6e4*(date.getTimezoneOffset()-year.getTimezoneOffset()))/864e5)},d3_time_daySymbols.forEach(function(day,i){day=day.toLowerCase(),i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){return(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7),date},function(date,offset){date.setDate(date.getDate()+7*Math.floor(offset))},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range,d3_time[day+"s"].utc=interval.utc.range,d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}}),d3_time.week=d3_time.sunday,d3_time.weeks=d3_time.sunday.range,d3_time.weeks.utc=d3_time.sunday.utc.range,d3_time.weekOfYear=d3_time.sundayOfYear,d3_time.format=d3_time_format;var d3_time_dayRe=d3_time_formatRe(d3_time_days),d3_time_dayLookup=d3_time_formatLookup(d3_time_days),d3_time_dayAbbrevRe=d3_time_formatRe(d3_time_dayAbbreviations),d3_time_dayAbbrevLookup=d3_time_formatLookup(d3_time_dayAbbreviations),d3_time_monthRe=d3_time_formatRe(d3_time_months),d3_time_monthLookup=d3_time_formatLookup(d3_time_months),d3_time_monthAbbrevRe=d3_time_formatRe(d3_time_monthAbbreviations),d3_time_monthAbbrevLookup=d3_time_formatLookup(d3_time_monthAbbreviations),d3_time_percentRe=/^%/,d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_formats={a:function(d){return d3_time_dayAbbreviations[d.getDay()]},A:function(d){return d3_time_days[d.getDay()]},b:function(d){return d3_time_monthAbbreviations[d.getMonth()]},B:function(d){return d3_time_months[d.getMonth()]},c:d3_time_format(d3_time_formatDateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return d.getHours()>=12?"PM":"AM"},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(d3_time_formatDate),X:d3_time_format(d3_time_formatTime),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}},d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent},d3_time_numberRe=/^\s*\d+/,d3_time_amPmLookup=d3.map({am:0,pm:1});d3_time_format.utc=d3_time_formatUtc;var d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");d3_time_format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso,d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date},d3_time_formatIsoNative.toString=d3_time_formatIso.toString,d3_time.second=d3_time_interval(function(date){return new d3_date(1e3*Math.floor(date/1e3))},function(date,offset){date.setTime(date.getTime()+1e3*Math.floor(offset))},function(date){return date.getSeconds()}),d3_time.seconds=d3_time.second.range,d3_time.seconds.utc=d3_time.second.utc.range,d3_time.minute=d3_time_interval(function(date){return new d3_date(6e4*Math.floor(date/6e4))},function(date,offset){date.setTime(date.getTime()+6e4*Math.floor(offset))},function(date){return date.getMinutes()}),d3_time.minutes=d3_time.minute.range,d3_time.minutes.utc=d3_time.minute.utc.range,d3_time.hour=d3_time_interval(function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date(36e5*(Math.floor(date/36e5-timezone)+timezone))},function(date,offset){date.setTime(date.getTime()+36e5*Math.floor(offset))},function(date){return date.getHours()}),d3_time.hours=d3_time.hour.range,d3_time.hours.utc=d3_time.hour.utc.range,d3_time.month=d3_time_interval(function(date){return date=d3_time.day(date),date.setDate(1),date},function(date,offset){date.setMonth(date.getMonth()+offset)},function(date){return date.getMonth()}),d3_time.months=d3_time.month.range,d3_time.months.utc=d3_time.month.utc.range;var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]],d3_time_scaleLocalFormats=[[d3_time_format("%Y"),d3_true],[d3_time_format("%B"),function(d){return d.getMonth()}],[d3_time_format("%b %d"),function(d){return 1!=d.getDate()}],[d3_time_format("%a %d"),function(d){return d.getDay()&&1!=d.getDate()}],[d3_time_format("%I %p"),function(d){return d.getHours()}],[d3_time_format("%I:%M"),function(d){return d.getMinutes()}],[d3_time_format(":%S"),function(d){return d.getSeconds()}],[d3_time_format(".%L"),function(d){return d.getMilliseconds()}]],d3_time_scaleLocalFormat=d3_time_scaleFormat(d3_time_scaleLocalFormats);d3_time_scaleLocalMethods.year=d3_time.year,d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)};var d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(+start,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity},d3_time_scaleUTCMethods=d3_time_scaleLocalMethods.map(function(m){return[m[0].utc,m[1]]}),d3_time_scaleUTCFormats=[[d3_time_formatUtc("%Y"),d3_true],[d3_time_formatUtc("%B"),function(d){return d.getUTCMonth()}],[d3_time_formatUtc("%b %d"),function(d){return 1!=d.getUTCDate()}],[d3_time_formatUtc("%a %d"),function(d){return d.getUTCDay()&&1!=d.getUTCDate()}],[d3_time_formatUtc("%I %p"),function(d){return d.getUTCHours()}],[d3_time_formatUtc("%I:%M"),function(d){return d.getUTCMinutes()}],[d3_time_formatUtc(":%S"),function(d){return d.getUTCSeconds()}],[d3_time_formatUtc(".%L"),function(d){return d.getUTCMilliseconds()}]],d3_time_scaleUTCFormat=d3_time_scaleFormat(d3_time_scaleUTCFormats);return d3_time_scaleUTCMethods.year=d3_time.year.utc,d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUTCMethods,d3_time_scaleUTCFormat)},d3.text=d3_xhrType(function(request){return request.responseText}),d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)},d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)},d3.xml=d3_xhrType(function(request){return request.responseXML}),d3}(),function(){function daysInMonth(month,year){return new Date(year,month+1,0).getDate()}function d3_time_range(floor,step,number){return function(t0,t1,dt){var time=floor(t0),times=[];if(t0>time&&step(time),dt>1)for(;t1>time;){var date=new Date(+time);number(date)%dt===0&&times.push(date),step(time)}else for(;t1>time;)times.push(new Date(+time)),step(time);return times}}var nv=window.nv||{};nv.version="1.1.15b",nv.dev=!0,window.nv=nv,nv.tooltip=nv.tooltip||{},nv.utils=nv.utils||{},nv.models=nv.models||{},nv.charts={},nv.graphs=[],nv.logs={},nv.dispatch=d3.dispatch("render_start","render_end"),nv.dev&&(nv.dispatch.on("render_start",function(){nv.logs.startTime=+new Date}),nv.dispatch.on("render_end",function(){nv.logs.endTime=+new Date,nv.logs.totalTime=nv.logs.endTime-nv.logs.startTime,nv.log("total",nv.logs.totalTime)})),nv.log=function(){if(nv.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(nv.dev&&"function"==typeof console.log&&Function.prototype.bind){var log=Function.prototype.bind.call(console.log,console);log.apply(console,arguments)}return arguments[arguments.length-1]},nv.render=function(step){step=step||1,nv.render.active=!0,nv.dispatch.render_start(),setTimeout(function(){for(var chart,graph,i=0;step>i&&(graph=nv.render.queue[i]);i++)chart=graph.generate(),typeof graph.callback==typeof Function&&graph.callback(chart),nv.graphs.push(chart);nv.render.queue.splice(0,i),nv.render.queue.length?setTimeout(arguments.callee,0):(nv.dispatch.render_end(),nv.render.active=!1)},0)},nv.render.active=!1,nv.render.queue=[],nv.addGraph=function(obj){typeof arguments[0]==typeof Function&&(obj={generate:arguments[0],callback:arguments[1]}),nv.render.queue.push(obj),nv.render.active||nv.render()},nv.identity=function(d){return d},nv.strip=function(s){return s.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(date){return new Date(date.getFullYear(),date.getMonth(),0)},d3.time.monthEnds=d3_time_range(d3.time.monthEnd,function(date){date.setUTCDate(date.getUTCDate()+1),date.setDate(daysInMonth(date.getMonth()+1,date.getFullYear()))},function(date){return date.getMonth()}),nv.interactiveGuideline=function(){"use strict";function layer(selection){selection.each(function(data){function mouseHandler(){var d3mouse=d3.mouse(this),mouseX=d3mouse[0],mouseY=d3mouse[1],subtractMargin=!0,mouseOutAnyReason=!1;if(isMSIE&&(mouseX=d3.event.offsetX,mouseY=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(subtractMargin=!1),d3.event.target.className.baseVal.match("nv-legend")&&(mouseOutAnyReason=!0)),subtractMargin&&(mouseX-=margin.left,mouseY-=margin.top),0>mouseX||0>mouseY||mouseX>availableWidth||mouseY>availableHeight||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||mouseOutAnyReason){if(isMSIE&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(tooltip.nvPointerEventsClass))return;return dispatch.elementMouseout({mouseX:mouseX,mouseY:mouseY}),void layer.renderGuideLine(null)}var pointXValue=xScale.invert(mouseX);dispatch.elementMousemove({mouseX:mouseX,mouseY:mouseY,pointXValue:pointXValue}),"dblclick"===d3.event.type&&dispatch.elementDblclick({mouseX:mouseX,mouseY:mouseY,pointXValue:pointXValue})}var container=d3.select(this),availableWidth=width||960,availableHeight=height||400,wrap=container.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([data]),wrapEnter=wrap.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");wrapEnter.append("g").attr("class","nv-interactiveGuideLine"),svgContainer&&(svgContainer.on("mousemove",mouseHandler,!0).on("mouseout",mouseHandler,!0).on("dblclick",mouseHandler),layer.renderGuideLine=function(x){if(showGuideLine){var line=wrap.select(".nv-interactiveGuideLine").selectAll("line").data(null!=x?[nv.utils.NaNtoZero(x)]:[],String);line.enter().append("line").attr("class","nv-guideline").attr("x1",function(d){return d}).attr("x2",function(d){return d}).attr("y1",availableHeight).attr("y2",0),line.exit().remove()}})})}var tooltip=nv.models.tooltip(),width=null,height=null,margin={left:0,top:0},xScale=d3.scale.linear(),dispatch=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),showGuideLine=!0,svgContainer=null,isMSIE=-1!==navigator.userAgent.indexOf("MSIE");return layer.dispatch=dispatch,layer.tooltip=tooltip,layer.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.left="undefined"!=typeof _.left?_.left:margin.left,layer):margin},layer.width=function(_){return arguments.length?(width=_,layer):width},layer.height=function(_){return arguments.length?(height=_,layer):height},layer.xScale=function(_){return arguments.length?(xScale=_,layer):xScale},layer.showGuideLine=function(_){return arguments.length?(showGuideLine=_,layer):showGuideLine},layer.svgContainer=function(_){return arguments.length?(svgContainer=_,layer):svgContainer},layer},nv.interactiveBisect=function(values,searchVal,xAccessor){"use strict";if(!values instanceof Array)return null;"function"!=typeof xAccessor&&(xAccessor=function(d){return d.x});var bisect=d3.bisector(xAccessor).left,index=d3.max([0,bisect(values,searchVal)-1]),currentValue=xAccessor(values[index],index);if("undefined"==typeof currentValue&&(currentValue=index),currentValue===searchVal)return index;var nextIndex=d3.min([index+1,values.length-1]),nextValue=xAccessor(values[nextIndex],nextIndex);return"undefined"==typeof nextValue&&(nextValue=nextIndex),Math.abs(nextValue-searchVal)>=Math.abs(currentValue-searchVal)?index:nextIndex},nv.nearestValueIndex=function(values,searchVal,threshold){"use strict";var yDistMax=1/0,indexToHighlight=null;return values.forEach(function(d,i){var delta=Math.abs(searchVal-d);yDistMax>=delta&&threshold>delta&&(yDistMax=delta,indexToHighlight=i)}),indexToHighlight},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function convertViewBoxRatio(){if(chartContainer){var svg=d3.select(chartContainer);"svg"!==svg.node().tagName&&(svg=svg.select("svg"));var viewBox=svg.node()?svg.attr("viewBox"):null;if(viewBox){viewBox=viewBox.split(" ");var ratio=parseInt(svg.style("width"))/viewBox[2];position.left=position.left*ratio,position.top=position.top*ratio}}}function getTooltipContainer(newContent){var body;body=d3.select(chartContainer?chartContainer:"body");var container=body.select(".nvtooltip");return null===container.node()&&(container=body.append("div").attr("class","nvtooltip "+(classes?classes:"xy-tooltip")).attr("id",id)),container.node().innerHTML=newContent,container.style("top",0).style("left",0).style("opacity",0),container.selectAll("div, table, td, tr").classed(nvPointerEventsClass,!0),container.classed(nvPointerEventsClass,!0),container.node()}function nvtooltip(){if(enabled&&dataSeriesExists(data)){convertViewBoxRatio();var left=position.left,top=null!=fixedTop?fixedTop:position.top,container=getTooltipContainer(contentGenerator(data));if(tooltipElem=container,chartContainer){var svgComp=chartContainer.getElementsByTagName("svg")[0],svgOffset=(svgComp?svgComp.getBoundingClientRect():chartContainer.getBoundingClientRect(),{left:0,top:0});if(svgComp){var svgBound=svgComp.getBoundingClientRect(),chartBound=chartContainer.getBoundingClientRect(),svgBoundTop=svgBound.top;if(0>svgBoundTop){var containerBound=chartContainer.getBoundingClientRect();svgBoundTop=Math.abs(svgBoundTop)>containerBound.height?0:svgBoundTop}svgOffset.top=Math.abs(svgBoundTop-chartBound.top),svgOffset.left=Math.abs(svgBound.left-chartBound.left)}left+=chartContainer.offsetLeft+svgOffset.left-2*chartContainer.scrollLeft,top+=chartContainer.offsetTop+svgOffset.top-2*chartContainer.scrollTop}return snapDistance&&snapDistance>0&&(top=Math.floor(top/snapDistance)*snapDistance),nv.tooltip.calcTooltipPosition([left,top],gravity,distance,container),nvtooltip}}var content=null,data=null,gravity="w",distance=50,snapDistance=25,fixedTop=null,classes=null,chartContainer=null,tooltipElem=null,position={left:null,top:null},enabled=!0,id="nvtooltip-"+Math.floor(1e5*Math.random()),nvPointerEventsClass="nv-pointer-events-none",valueFormatter=function(d){return d},headerFormatter=function(d){return d},contentGenerator=function(d){if(null!=content)return content;if(null==d)return"";var table=d3.select(document.createElement("table")),theadEnter=table.selectAll("thead").data([d]).enter().append("thead");theadEnter.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(headerFormatter(d.value));var tbodyEnter=table.selectAll("tbody").data([d]).enter().append("tbody"),trowEnter=tbodyEnter.selectAll("tr").data(function(p){return p.series}).enter().append("tr").classed("highlight",function(p){return p.highlight});trowEnter.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(p){return p.color}),trowEnter.append("td").classed("key",!0).html(function(p){return p.key}),trowEnter.append("td").classed("value",!0).html(function(p,i){return valueFormatter(p.value,i)}),trowEnter.selectAll("td").each(function(p){if(p.highlight){var opacityScale=d3.scale.linear().domain([0,1]).range(["#fff",p.color]),opacity=.6;d3.select(this).style("border-bottom-color",opacityScale(opacity)).style("border-top-color",opacityScale(opacity))}});var html=table.node().outerHTML;return void 0!==d.footer&&(html+="<div class='footer'>"+d.footer+"</div>"),html},dataSeriesExists=function(d){return d&&d.series&&d.series.length>0?!0:!1};return nvtooltip.nvPointerEventsClass=nvPointerEventsClass,nvtooltip.content=function(_){return arguments.length?(content=_,nvtooltip):content},nvtooltip.tooltipElem=function(){return tooltipElem},nvtooltip.contentGenerator=function(_){return arguments.length?("function"==typeof _&&(contentGenerator=_),nvtooltip):contentGenerator},nvtooltip.data=function(_){return arguments.length?(data=_,nvtooltip):data},nvtooltip.gravity=function(_){return arguments.length?(gravity=_,nvtooltip):gravity},nvtooltip.distance=function(_){return arguments.length?(distance=_,nvtooltip):distance},nvtooltip.snapDistance=function(_){return arguments.length?(snapDistance=_,nvtooltip):snapDistance},nvtooltip.classes=function(_){return arguments.length?(classes=_,nvtooltip):classes},nvtooltip.chartContainer=function(_){return arguments.length?(chartContainer=_,nvtooltip):chartContainer},nvtooltip.position=function(_){return arguments.length?(position.left="undefined"!=typeof _.left?_.left:position.left,position.top="undefined"!=typeof _.top?_.top:position.top,nvtooltip):position},nvtooltip.fixedTop=function(_){return arguments.length?(fixedTop=_,nvtooltip):fixedTop},nvtooltip.enabled=function(_){return arguments.length?(enabled=_,nvtooltip):enabled},nvtooltip.valueFormatter=function(_){return arguments.length?("function"==typeof _&&(valueFormatter=_),nvtooltip):valueFormatter},nvtooltip.headerFormatter=function(_){return arguments.length?("function"==typeof _&&(headerFormatter=_),nvtooltip):headerFormatter},nvtooltip.id=function(){return id},nvtooltip},nv.tooltip.show=function(pos,content,gravity,dist,parentContainer,classes){var container=document.createElement("div");container.className="nvtooltip "+(classes?classes:"xy-tooltip");var body=parentContainer;(!parentContainer||parentContainer.tagName.match(/g|svg/i))&&(body=document.getElementsByTagName("body")[0]),container.style.left=0,container.style.top=0,container.style.opacity=0,container.innerHTML=content,body.appendChild(container),parentContainer&&(pos[0]=pos[0]-parentContainer.scrollLeft,pos[1]=pos[1]-parentContainer.scrollTop),nv.tooltip.calcTooltipPosition(pos,gravity,dist,container)
},nv.tooltip.findFirstNonSVGParent=function(Elem){for(;null!==Elem.tagName.match(/^g|svg$/i);)Elem=Elem.parentNode;return Elem},nv.tooltip.findTotalOffsetTop=function(Elem,initialTop){var offsetTop=initialTop;do isNaN(Elem.offsetTop)||(offsetTop+=Elem.offsetTop);while(Elem=Elem.offsetParent);return offsetTop},nv.tooltip.findTotalOffsetLeft=function(Elem,initialLeft){var offsetLeft=initialLeft;do isNaN(Elem.offsetLeft)||(offsetLeft+=Elem.offsetLeft);while(Elem=Elem.offsetParent);return offsetLeft},nv.tooltip.calcTooltipPosition=function(pos,gravity,dist,container){var left,top,height=parseInt(container.offsetHeight),width=parseInt(container.offsetWidth),windowWidth=nv.utils.windowSize().width,windowHeight=nv.utils.windowSize().height,scrollTop=window.pageYOffset,scrollLeft=window.pageXOffset;windowHeight=window.innerWidth>=document.body.scrollWidth?windowHeight:windowHeight-16,windowWidth=window.innerHeight>=document.body.scrollHeight?windowWidth:windowWidth-16,gravity=gravity||"s",dist=dist||20;var tooltipTop=function(Elem){return nv.tooltip.findTotalOffsetTop(Elem,top)},tooltipLeft=function(Elem){return nv.tooltip.findTotalOffsetLeft(Elem,left)};switch(gravity){case"e":left=pos[0]-width-dist,top=pos[1]-height/2;var tLeft=tooltipLeft(container),tTop=tooltipTop(container);scrollLeft>tLeft&&(left=pos[0]+dist>scrollLeft?pos[0]+dist:scrollLeft-tLeft+left),scrollTop>tTop&&(top=scrollTop-tTop+top),tTop+height>scrollTop+windowHeight&&(top=scrollTop+windowHeight-tTop+top-height);break;case"w":left=pos[0]+dist,top=pos[1]-height/2;var tLeft=tooltipLeft(container),tTop=tooltipTop(container);tLeft+width>windowWidth&&(left=pos[0]-width-dist),scrollTop>tTop&&(top=scrollTop+5),tTop+height>scrollTop+windowHeight&&(top=scrollTop+windowHeight-tTop+top-height);break;case"n":left=pos[0]-width/2-5,top=pos[1]+dist;var tLeft=tooltipLeft(container),tTop=tooltipTop(container);scrollLeft>tLeft&&(left=scrollLeft+5),tLeft+width>windowWidth&&(left=left-width/2+5),tTop+height>scrollTop+windowHeight&&(top=scrollTop+windowHeight-tTop+top-height);break;case"s":left=pos[0]-width/2,top=pos[1]-height-dist;var tLeft=tooltipLeft(container),tTop=tooltipTop(container);scrollLeft>tLeft&&(left=scrollLeft+5),tLeft+width>windowWidth&&(left=left-width/2+5),scrollTop>tTop&&(top=scrollTop);break;case"none":left=pos[0],top=pos[1]-dist;var tLeft=tooltipLeft(container),tTop=tooltipTop(container)}return container.style.left=left+"px",container.style.top=top+"px",container.style.opacity=1,container.style.position="absolute",container},nv.tooltip.cleanup=function(){for(var tooltips=document.getElementsByClassName("nvtooltip"),purging=[];tooltips.length;)purging.push(tooltips[0]),tooltips[0].style.transitionDelay="0 !important",tooltips[0].style.opacity=0,tooltips[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;purging.length;){var removeMe=purging.pop();removeMe.parentNode.removeChild(removeMe)}},500)}}(),nv.utils.windowSize=function(){var size={width:640,height:480};return document.body&&document.body.offsetWidth&&(size.width=document.body.offsetWidth,size.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(size.width=document.documentElement.offsetWidth,size.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(size.width=window.innerWidth,size.height=window.innerHeight),size},nv.utils.windowResize=function(fun){if(void 0!==fun){var oldresize=window.onresize;window.onresize=function(e){"function"==typeof oldresize&&oldresize(e),fun(e)}}},nv.utils.getColor=function(color){return arguments.length?"[object Array]"===Object.prototype.toString.call(color)?function(d,i){return d.color||color[i%color.length]}:color:nv.utils.defaultColor()},nv.utils.defaultColor=function(){var colors=d3.scale.category20().range();return function(d,i){return d.color||colors[i%colors.length]}},nv.utils.customTheme=function(dictionary,getKey,defaultColors){getKey=getKey||function(series){return series.key},defaultColors=defaultColors||d3.scale.category20().range();var defIndex=defaultColors.length;return function(series){var key=getKey(series);return defIndex||(defIndex=defaultColors.length),"undefined"!=typeof dictionary[key]?"function"==typeof dictionary[key]?dictionary[key]():dictionary[key]:defaultColors[--defIndex]}},nv.utils.pjax=function(links,content){function load(href){d3.html(href,function(fragment){var target=d3.select(content).node();target.parentNode.replaceChild(d3.select(fragment).select(content).node(),target),nv.utils.pjax(links,content)})}d3.selectAll(links).on("click",function(){history.pushState(this.href,this.textContent,this.href),load(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&load(d3.event.state)})},nv.utils.calcApproxTextWidth=function(svgTextElem){if(svgTextElem instanceof d3.selection){var fontSize=parseInt(svgTextElem.style("font-size").replace("px","")),textLength=svgTextElem.text().length;return textLength*fontSize*.5}return 0},nv.utils.NaNtoZero=function(n){return"number"!=typeof n||isNaN(n)||null===n||1/0===n?0:n},nv.utils.optionsFunc=function(args){return args&&d3.map(args).forEach(function(key,value){"function"==typeof this[key]&&this[key](value)}.bind(this)),this},nv.models.axis=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),wrap=container.selectAll("g.nv-wrap.nv-axis").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),g=(wrapEnter.append("g"),wrap.select("g"));null!==ticks?axis.ticks(ticks):("top"==axis.orient()||"bottom"==axis.orient())&&axis.ticks(Math.abs(scale.range()[1]-scale.range()[0])/100),g.transition().call(axis),scale0=scale0||axis.scale();var fmt=axis.tickFormat();null==fmt&&(fmt=scale0.tickFormat());var axisLabel=g.selectAll("text.nv-axislabel").data([axisLabelText||null]);switch(axisLabel.exit().remove(),axis.orient()){case"top":axisLabel.enter().append("text").attr("class","nv-axislabel");var w=2==scale.range().length?scale.range()[1]:scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]);if(axisLabel.attr("text-anchor","middle").attr("y",0).attr("x",w/2),showMaxMin){var axisMaxMin=wrap.selectAll("g.nv-axisMaxMin").data(scale.domain());axisMaxMin.enter().append("g").attr("class","nv-axisMaxMin").append("text"),axisMaxMin.exit().remove(),axisMaxMin.attr("transform",function(d){return"translate("+scale(d)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-axis.tickPadding()).attr("text-anchor","middle").text(function(d){var v=fmt(d);return(""+v).match("NaN")?"":v}),axisMaxMin.transition().attr("transform",function(d,i){return"translate("+scale.range()[i]+",0)"})}break;case"bottom":var xLabelMargin=36,maxTextWidth=30,xTicks=g.selectAll("g").select("text");if(rotateLabels%360){xTicks.each(function(){var width=this.getBBox().width;width>maxTextWidth&&(maxTextWidth=width)});var sin=Math.abs(Math.sin(rotateLabels*Math.PI/180)),xLabelMargin=(sin?sin*maxTextWidth:maxTextWidth)+30;xTicks.attr("transform",function(){return"rotate("+rotateLabels+" 0,0)"}).style("text-anchor",rotateLabels%360>0?"start":"end")}axisLabel.enter().append("text").attr("class","nv-axislabel");var w=2==scale.range().length?scale.range()[1]:scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]);if(axisLabel.attr("text-anchor","middle").attr("y",xLabelMargin).attr("x",w/2),showMaxMin){var axisMaxMin=wrap.selectAll("g.nv-axisMaxMin").data([scale.domain()[0],scale.domain()[scale.domain().length-1]]);axisMaxMin.enter().append("g").attr("class","nv-axisMaxMin").append("text"),axisMaxMin.exit().remove(),axisMaxMin.attr("transform",function(d){return"translate("+(scale(d)+(isOrdinal?scale.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",axis.tickPadding()).attr("transform",function(){return"rotate("+rotateLabels+" 0,0)"}).style("text-anchor",rotateLabels?rotateLabels%360>0?"start":"end":"middle").text(function(d){var v=fmt(d);return(""+v).match("NaN")?"":v}),axisMaxMin.transition().attr("transform",function(d){return"translate("+(scale(d)+(isOrdinal?scale.rangeBand()/2:0))+",0)"})}staggerLabels&&xTicks.attr("transform",function(d,i){return"translate(0,"+(i%2==0?"0":"12")+")"});break;case"right":if(axisLabel.enter().append("text").attr("class","nv-axislabel"),axisLabel.style("text-anchor",rotateYLabel?"middle":"begin").attr("transform",rotateYLabel?"rotate(90)":"").attr("y",rotateYLabel?-Math.max(margin.right,width)+12:-10).attr("x",rotateYLabel?scale.range()[0]/2:axis.tickPadding()),showMaxMin){var axisMaxMin=wrap.selectAll("g.nv-axisMaxMin").data(scale.domain());axisMaxMin.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),axisMaxMin.exit().remove(),axisMaxMin.attr("transform",function(d){return"translate(0,"+scale(d)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",axis.tickPadding()).style("text-anchor","start").text(function(d){var v=fmt(d);return(""+v).match("NaN")?"":v}),axisMaxMin.transition().attr("transform",function(d,i){return"translate(0,"+scale.range()[i]+")"}).select("text").style("opacity",1)}break;case"left":if(axisLabel.enter().append("text").attr("class","nv-axislabel"),axisLabel.style("text-anchor",rotateYLabel?"middle":"end").attr("transform",rotateYLabel?"rotate(-90)":"").attr("y",rotateYLabel?-Math.max(margin.left,width)+axisLabelDistance:-10).attr("x",rotateYLabel?-scale.range()[0]/2:-axis.tickPadding()),showMaxMin){var axisMaxMin=wrap.selectAll("g.nv-axisMaxMin").data(scale.domain());axisMaxMin.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),axisMaxMin.exit().remove(),axisMaxMin.attr("transform",function(d){return"translate(0,"+scale0(d)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-axis.tickPadding()).attr("text-anchor","end").text(function(d){var v=fmt(d);return(""+v).match("NaN")?"":v}),axisMaxMin.transition().attr("transform",function(d,i){return"translate(0,"+scale.range()[i]+")"}).select("text").style("opacity",1)}}if(axisLabel.text(function(d){return d}),!showMaxMin||"left"!==axis.orient()&&"right"!==axis.orient()||(g.selectAll("g").each(function(d){d3.select(this).select("text").attr("opacity",1),(scale(d)<scale.range()[1]+10||scale(d)>scale.range()[0]-10)&&((d>1e-10||-1e-10>d)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),scale.domain()[0]==scale.domain()[1]&&0==scale.domain()[0]&&wrap.selectAll("g.nv-axisMaxMin").style("opacity",function(d,i){return i?0:1})),showMaxMin&&("top"===axis.orient()||"bottom"===axis.orient())){var maxMinRange=[];wrap.selectAll("g.nv-axisMaxMin").each(function(d,i){try{maxMinRange.push(i?scale(d)-this.getBBox().width-4:scale(d)+this.getBBox().width+4)}catch(err){maxMinRange.push(i?scale(d)-4:scale(d)+4)}}),g.selectAll("g").each(function(d){(scale(d)<maxMinRange[0]||scale(d)>maxMinRange[1])&&(d>1e-10||-1e-10>d?d3.select(this).remove():d3.select(this).select("text").remove())})}highlightZero&&g.selectAll(".tick").filter(function(d){return!parseFloat(Math.round(1e5*d.__data__)/1e6)&&void 0!==d.__data__}).classed("zero",!0),scale0=scale.copy()}),chart}var axis=d3.svg.axis(),margin={top:0,right:0,bottom:0,left:0},width=75,height=60,scale=d3.scale.linear(),axisLabelText=null,showMaxMin=!0,highlightZero=!0,rotateLabels=0,rotateYLabel=!0,staggerLabels=!1,isOrdinal=!1,ticks=null,axisLabelDistance=12;axis.scale(scale).orient("bottom").tickFormat(function(d){return d});var scale0;return chart.axis=axis,d3.rebind(chart,axis,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(chart,scale,"domain","range","rangeBand","rangeBands"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.ticks=function(_){return arguments.length?(ticks=_,chart):ticks},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.axisLabel=function(_){return arguments.length?(axisLabelText=_,chart):axisLabelText},chart.showMaxMin=function(_){return arguments.length?(showMaxMin=_,chart):showMaxMin},chart.highlightZero=function(_){return arguments.length?(highlightZero=_,chart):highlightZero},chart.scale=function(_){return arguments.length?(scale=_,axis.scale(scale),isOrdinal="function"==typeof scale.rangeBands,d3.rebind(chart,scale,"domain","range","rangeBand","rangeBands"),chart):scale},chart.rotateYLabel=function(_){return arguments.length?(rotateYLabel=_,chart):rotateYLabel},chart.rotateLabels=function(_){return arguments.length?(rotateLabels=_,chart):rotateLabels},chart.staggerLabels=function(_){return arguments.length?(staggerLabels=_,chart):staggerLabels},chart.axisLabelDistance=function(_){return arguments.length?(axisLabelDistance=_,chart):axisLabelDistance},chart},nv.models.bullet=function(){"use strict";function chart(selection){return selection.each(function(d,i){{var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this),rangez=ranges.call(this,d,i).slice().sort(d3.descending),markerz=markers.call(this,d,i).slice().sort(d3.descending),measurez=measures.call(this,d,i).slice().sort(d3.descending),rangeLabelz=rangeLabels.call(this,d,i).slice(),markerLabelz=markerLabels.call(this,d,i).slice(),measureLabelz=measureLabels.call(this,d,i).slice(),x1=d3.scale.linear().domain(d3.extent(d3.merge([forceX,rangez]))).range(reverse?[availableWidth,0]:[0,availableWidth]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(x1.range())}this.__chart__=x1;var rangeMin=d3.min(rangez),rangeMax=d3.max(rangez),rangeAvg=rangez[1],wrap=container.selectAll("g.nv-wrap.nv-bullet").data([d]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("rect").attr("class","nv-range nv-rangeMax"),gEnter.append("rect").attr("class","nv-range nv-rangeAvg"),gEnter.append("rect").attr("class","nv-range nv-rangeMin"),gEnter.append("rect").attr("class","nv-measure"),gEnter.append("path").attr("class","nv-markerTriangle"),wrap.attr("transform","translate("+margin.left+","+margin.top+")");var w1=function(d){return Math.abs(x1(d)-x1(0))},xp1=function(d){return x1(0>d?d:0)};g.select("rect.nv-rangeMax").attr("height",availableHeight).attr("width",w1(rangeMax>0?rangeMax:rangeMin)).attr("x",xp1(rangeMax>0?rangeMax:rangeMin)).datum(rangeMax>0?rangeMax:rangeMin),g.select("rect.nv-rangeAvg").attr("height",availableHeight).attr("width",w1(rangeAvg)).attr("x",xp1(rangeAvg)).datum(rangeAvg),g.select("rect.nv-rangeMin").attr("height",availableHeight).attr("width",w1(rangeMax)).attr("x",xp1(rangeMax)).attr("width",w1(rangeMax>0?rangeMin:rangeMax)).attr("x",xp1(rangeMax>0?rangeMin:rangeMax)).datum(rangeMax>0?rangeMin:rangeMax),g.select("rect.nv-measure").style("fill",color).attr("height",availableHeight/3).attr("y",availableHeight/3).attr("width",0>measurez?x1(0)-x1(measurez[0]):x1(measurez[0])-x1(0)).attr("x",xp1(measurez)).on("mouseover",function(){dispatch.elementMouseover({value:measurez[0],label:measureLabelz[0]||"Current",pos:[x1(measurez[0]),availableHeight/2]})}).on("mouseout",function(){dispatch.elementMouseout({value:measurez[0],label:measureLabelz[0]||"Current"})});var h3=availableHeight/6;markerz[0]?g.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+x1(markerz[0])+","+availableHeight/2+")"}).attr("d","M0,"+h3+"L"+h3+","+-h3+" "+-h3+","+-h3+"Z").on("mouseover",function(){dispatch.elementMouseover({value:markerz[0],label:markerLabelz[0]||"Previous",pos:[x1(markerz[0]),availableHeight/2]})}).on("mouseout",function(){dispatch.elementMouseout({value:markerz[0],label:markerLabelz[0]||"Previous"})}):g.selectAll("path.nv-markerTriangle").remove(),wrap.selectAll(".nv-range").on("mouseover",function(d,i){var label=rangeLabelz[i]||(i?1==i?"Mean":"Minimum":"Maximum");dispatch.elementMouseover({value:d,label:label,pos:[x1(d),availableHeight/2]})}).on("mouseout",function(d,i){var label=rangeLabelz[i]||(i?1==i?"Mean":"Minimum":"Maximum");dispatch.elementMouseout({value:d,label:label})})}),chart}var margin={top:0,right:0,bottom:0,left:0},orient="left",reverse=!1,ranges=function(d){return d.ranges},markers=function(d){return d.markers},measures=function(d){return d.measures},rangeLabels=function(d){return d.rangeLabels?d.rangeLabels:[]},markerLabels=function(d){return d.markerLabels?d.markerLabels:[]},measureLabels=function(d){return d.measureLabels?d.measureLabels:[]},forceX=[0],width=380,height=30,tickFormat=null,color=nv.utils.getColor(["#1f77b4"]),dispatch=d3.dispatch("elementMouseover","elementMouseout");return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.orient=function(_){return arguments.length?(orient=_,reverse="right"==orient||"bottom"==orient,chart):orient},chart.ranges=function(_){return arguments.length?(ranges=_,chart):ranges},chart.markers=function(_){return arguments.length?(markers=_,chart):markers},chart.measures=function(_){return arguments.length?(measures=_,chart):measures},chart.forceX=function(_){return arguments.length?(forceX=_,chart):forceX},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.tickFormat=function(_){return arguments.length?(tickFormat=_,chart):tickFormat},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart},nv.models.bulletChart=function(){"use strict";function chart(selection){return selection.each(function(d,i){var container=d3.select(this),availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,that=this;if(chart.update=function(){chart(selection)},chart.container=this,!d||!ranges.call(this,d,i)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",18+margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove();var rangez=ranges.call(this,d,i).slice().sort(d3.descending),markerz=markers.call(this,d,i).slice().sort(d3.descending),measurez=measures.call(this,d,i).slice().sort(d3.descending),wrap=container.selectAll("g.nv-wrap.nv-bulletChart").data([d]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-bulletWrap"),gEnter.append("g").attr("class","nv-titles"),wrap.attr("transform","translate("+margin.left+","+margin.top+")");var x1=d3.scale.linear().domain([0,Math.max(rangez[0],markerz[0],measurez[0])]).range(reverse?[availableWidth,0]:[0,availableWidth]),x0=this.__chart__||d3.scale.linear().domain([0,1/0]).range(x1.range());this.__chart__=x1;var title=gEnter.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(height-margin.top-margin.bottom)/2+")");title.append("text").attr("class","nv-title").text(function(d){return d.title}),title.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(d){return d.subtitle}),bullet.width(availableWidth).height(availableHeight);var bulletWrap=g.select(".nv-bulletWrap");d3.transition(bulletWrap).call(bullet);var format=tickFormat||x1.tickFormat(availableWidth/100),tick=g.selectAll("g.nv-tick").data(x1.ticks(availableWidth/50),function(d){return this.textContent||format(d)}),tickEnter=tick.enter().append("g").attr("class","nv-tick").attr("transform",function(d){return"translate("+x0(d)+",0)"}).style("opacity",1e-6);tickEnter.append("line").attr("y1",availableHeight).attr("y2",7*availableHeight/6),tickEnter.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*availableHeight/6).text(format);var tickUpdate=d3.transition(tick).attr("transform",function(d){return"translate("+x1(d)+",0)"}).style("opacity",1);tickUpdate.select("line").attr("y1",availableHeight).attr("y2",7*availableHeight/6),tickUpdate.select("text").attr("y",7*availableHeight/6),d3.transition(tick.exit()).attr("transform",function(d){return"translate("+x1(d)+",0)"}).style("opacity",1e-6).remove(),dispatch.on("tooltipShow",function(e){e.key=d.title,tooltips&&showTooltip(e,that.parentNode)})}),d3.timer.flush(),chart}var bullet=nv.models.bullet(),orient="left",reverse=!1,margin={top:5,right:40,bottom:20,left:120},ranges=function(d){return d.ranges},markers=function(d){return d.markers},measures=function(d){return d.measures},width=null,height=55,tickFormat=null,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+x+"</h3><p>"+y+"</p>"},noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide"),showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0)+margin.left,top=e.pos[1]+(offsetElement.offsetTop||0)+margin.top,content=tooltip(e.key,e.label,e.value,e,chart);nv.tooltip.show([left,top],content,e.value<0?"e":"w",null,offsetElement)};return bullet.dispatch.on("elementMouseover.tooltip",function(e){dispatch.tooltipShow(e)}),bullet.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.bullet=bullet,d3.rebind(chart,bullet,"color"),chart.options=nv.utils.optionsFunc.bind(chart),chart.orient=function(x){return arguments.length?(orient=x,reverse="right"==orient||"bottom"==orient,chart):orient},chart.ranges=function(x){return arguments.length?(ranges=x,chart):ranges},chart.markers=function(x){return arguments.length?(markers=x,chart):markers},chart.measures=function(x){return arguments.length?(measures=x,chart):measures},chart.width=function(x){return arguments.length?(width=x,chart):width},chart.height=function(x){return arguments.length?(height=x,chart):height},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.tickFormat=function(x){return arguments.length?(tickFormat=x,chart):tickFormat},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart},nv.models.cumulativeLineChart=function(){"use strict";function chart(selection){return selection.each(function(data){function dragStart(){d3.select(chart.container).style("cursor","ew-resize")}function dragMove(){index.x=d3.event.x,index.i=Math.round(dx.invert(index.x)),updateZero()}function dragEnd(){d3.select(chart.container).style("cursor","auto"),state.index=index.i,dispatch.stateChange(state)}function updateZero(){indexLine.data([index]);var oldDuration=chart.transitionDuration();chart.transitionDuration(0),chart.update(),chart.transitionDuration(oldDuration)}var container=d3.select(this).classed("nv-chart-"+id,!0),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}var indexDrag=d3.behavior.drag().on("dragstart",dragStart).on("drag",dragMove).on("dragend",dragEnd);if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}if(container.selectAll(".nv-noData").remove(),x=lines.xScale(),y=lines.yScale(),rescaleY)lines.yDomain(null);else{var seriesDomains=data.filter(function(series){return!series.disabled}).map(function(series){var initialDomain=d3.extent(series.values,lines.y());return initialDomain[0]<-.95&&(initialDomain[0]=-.95),[(initialDomain[0]-initialDomain[1])/(1+initialDomain[1]),(initialDomain[1]-initialDomain[0])/(1+initialDomain[0])]}),completeDomain=[d3.min(seriesDomains,function(d){return d[0]}),d3.max(seriesDomains,function(d){return d[1]})];lines.yDomain(completeDomain)}dx.domain([0,data[0].values.length-1]).range([0,availableWidth]).clamp(!0);var data=indexify(index.i,data),interactivePointerEvents=useInteractiveGuideline?"none":"all",wrap=container.selectAll("g.nv-wrap.nv-cumulativeLine").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),g=wrap.select("g");if(gEnter.append("g").attr("class","nv-interactive"),gEnter.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-background"),gEnter.append("g").attr("class","nv-linesWrap").style("pointer-events",interactivePointerEvents),gEnter.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-controlsWrap"),showLegend&&(legend.width(availableWidth),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".nv-legendWrap").attr("transform","translate(0,"+-margin.top+")")),showControls){var controlsData=[{key:"Re-scale y-axis",disabled:!rescaleY}];controls.width(140).color(["#444","#444","#444"]),g.select(".nv-controlsWrap").datum(controlsData).attr("transform","translate(0,"+-margin.top+")").call(controls)}wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)");var tempDisabled=data.filter(function(d){return d.tempDisabled});wrap.select(".tempDisabled").remove(),tempDisabled.length&&wrap.append("text").attr("class","tempDisabled").attr("x",availableWidth/2).attr("y","-.71em").style("text-anchor","end").text(tempDisabled.map(function(d){return d.key}).join(", ")+" values cannot be calculated for this time period."),useInteractiveGuideline&&(interactiveLayer.width(availableWidth).height(availableHeight).margin({left:margin.left,top:margin.top}).svgContainer(container).xScale(x),wrap.select(".nv-interactive").call(interactiveLayer)),gEnter.select(".nv-background").append("rect"),g.select(".nv-background rect").attr("width",availableWidth).attr("height",availableHeight),lines.y(function(d){return d.display.y}).width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&!data[i].tempDisabled}));var linesWrap=g.select(".nv-linesWrap").datum(data.filter(function(d){return!d.disabled&&!d.tempDisabled}));linesWrap.call(lines),data.forEach(function(d,i){d.seriesIndex=i});var avgLineData=data.filter(function(d){return!d.disabled&&!!average(d)}),avgLines=g.select(".nv-avgLinesWrap").selectAll("line").data(avgLineData,function(d){return d.key}),getAvgLineY=function(d){var yVal=y(average(d));return 0>yVal?0:yVal>availableHeight?availableHeight:yVal};avgLines.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(d){return lines.color()(d,d.seriesIndex)}).attr("x1",0).attr("x2",availableWidth).attr("y1",getAvgLineY).attr("y2",getAvgLineY),avgLines.style("stroke-opacity",function(d){var yVal=y(average(d));return 0>yVal||yVal>availableHeight?0:1}).attr("x1",0).attr("x2",availableWidth).attr("y1",getAvgLineY).attr("y2",getAvgLineY),avgLines.exit().remove();var indexLine=linesWrap.selectAll(".nv-indexLine").data([index]);indexLine.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(indexDrag),indexLine.attr("transform",function(d){return"translate("+dx(d.i)+",0)"}).attr("height",availableHeight),showXAxis&&(xAxis.scale(x).ticks(Math.min(data[0].values.length,availableWidth/70)).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(g.select(".nv-x.nv-axis")).call(xAxis)),showYAxis&&(yAxis.scale(y).ticks(availableHeight/36).tickSize(-availableWidth,0),d3.transition(g.select(".nv-y.nv-axis")).call(yAxis)),g.select(".nv-background rect").on("click",function(){index.x=d3.mouse(this)[0],index.i=Math.round(dx.invert(index.x)),state.index=index.i,dispatch.stateChange(state),updateZero()}),lines.dispatch.on("elementClick",function(e){index.i=e.pointIndex,index.x=dx(index.i),state.index=index.i,dispatch.stateChange(state),updateZero()}),controls.dispatch.on("legendClick",function(d){d.disabled=!d.disabled,rescaleY=!d.disabled,state.rescaleY=rescaleY,dispatch.stateChange(state),chart.update()}),legend.dispatch.on("stateChange",function(newState){state.disabled=newState.disabled,dispatch.stateChange(state),chart.update()}),interactiveLayer.dispatch.on("elementMousemove",function(e){lines.clearHighlights();var singlePoint,pointIndex,pointXLocation,allData=[];if(data.filter(function(series,i){return series.seriesIndex=i,!series.disabled}).forEach(function(series,i){pointIndex=nv.interactiveBisect(series.values,e.pointXValue,chart.x()),lines.highlightPoint(i,pointIndex,!0);var point=series.values[pointIndex];"undefined"!=typeof point&&("undefined"==typeof singlePoint&&(singlePoint=point),"undefined"==typeof pointXLocation&&(pointXLocation=chart.xScale()(chart.x()(point,pointIndex))),allData.push({key:series.key,value:chart.y()(point,pointIndex),color:color(series,series.seriesIndex)}))}),allData.length>2){var yValue=chart.yScale().invert(e.mouseY),domainExtent=Math.abs(chart.yScale().domain()[0]-chart.yScale().domain()[1]),threshold=.03*domainExtent,indexToHighlight=nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);null!==indexToHighlight&&(allData[indexToHighlight].highlight=!0)}var xValue=xAxis.tickFormat()(chart.x()(singlePoint,pointIndex),pointIndex);interactiveLayer.tooltip.position({left:pointXLocation+margin.left,top:e.mouseY+margin.top}).chartContainer(that.parentNode).enabled(tooltips).valueFormatter(function(d){return yAxis.tickFormat()(d)}).data({value:xValue,series:allData})(),interactiveLayer.renderGuideLine(pointXLocation)}),interactiveLayer.dispatch.on("elementMouseout",function(){dispatch.tooltipHide(),lines.clearHighlights()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),"undefined"!=typeof e.index&&(index.i=e.index,index.x=dx(index.i),state.index=e.index,indexLine.data([index])),"undefined"!=typeof e.rescaleY&&(rescaleY=e.rescaleY),chart.update()
})}),chart}function indexify(idx,data){return data.map(function(line){if(!line.values)return line;var v=lines.y()(line.values[idx],idx);return-.95>v?(line.tempDisabled=!0,line):(line.tempDisabled=!1,line.values=line.values.map(function(point,pointIndex){return point.display={y:(lines.y()(point,pointIndex)-v)/(1+v)},point}),line)})}var x,y,lines=nv.models.line(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),controls=nv.models.legend(),interactiveLayer=nv.interactiveGuideline(),margin={top:30,right:30,bottom:50,left:60},color=nv.utils.defaultColor(),width=null,height=null,showLegend=!0,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,tooltips=!0,showControls=!0,useInteractiveGuideline=!1,rescaleY=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},id=lines.id(),state={index:0,rescaleY:rescaleY},defaultState=null,noData="No Data Available.",average=function(d){return d.average},dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),transitionDuration=250;xAxis.orient("bottom").tickPadding(7),yAxis.orient(rightAlignYAxis?"right":"left"),controls.updateState(!1);var dx=d3.scale.linear(),index={i:0,x:0},showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(lines.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(lines.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,null,null,offsetElement)};return lines.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.lines=lines,chart.legend=legend,chart.xAxis=xAxis,chart.yAxis=yAxis,chart.interactiveLayer=interactiveLayer,d3.rebind(chart,lines,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.rescaleY=function(_){return arguments.length?(rescaleY=_,chart):rescaleY},chart.showControls=function(_){return arguments.length?(showControls=_,chart):showControls},chart.useInteractiveGuideline=function(_){return arguments.length?(useInteractiveGuideline=_,_===!0&&(chart.interactive(!1),chart.useVoronoi(!1)),chart):useInteractiveGuideline},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.average=function(_){return arguments.length?(average=_,chart):average},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.discreteBar=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);data.forEach(function(series,i){series.values.forEach(function(point){point.series=i})});var seriesData=xDomain&&yDomain?[]:data.map(function(d){return d.values.map(function(d,i){return{x:getX(d,i),y:getY(d,i),y0:d.y0}})});x.domain(xDomain||d3.merge(seriesData).map(function(d){return d.x})).rangeBands(xRange||[0,availableWidth],.1),y.domain(yDomain||d3.extent(d3.merge(seriesData).map(function(d){return d.y}).concat(forceY))),y.range(showValues?yRange||[availableHeight-(y.domain()[0]<0?12:0),y.domain()[1]>0?12:0]:yRange||[availableHeight,0]),x0=x0||x,y0=y0||y.copy().range([y(0),y(0)]);{var wrap=container.selectAll("g.nv-wrap.nv-discretebar").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),gEnter=wrapEnter.append("g");wrap.select("g")}gEnter.append("g").attr("class","nv-groups"),wrap.attr("transform","translate("+margin.left+","+margin.top+")");var groups=wrap.select(".nv-groups").selectAll(".nv-group").data(function(d){return d},function(d){return d.key});groups.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),groups.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),groups.attr("class",function(d,i){return"nv-group nv-series-"+i}).classed("hover",function(d){return d.hover}),groups.transition().style("stroke-opacity",1).style("fill-opacity",.75);var bars=groups.selectAll("g.nv-bar").data(function(d){return d.values});bars.exit().remove();var barsEnter=bars.enter().append("g").attr("transform",function(d,i){return"translate("+(x(getX(d,i))+.05*x.rangeBand())+", "+y(0)+")"}).on("mouseover",function(d,i){d3.select(this).classed("hover",!0),dispatch.elementMouseover({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(d.series+.5)/data.length,y(getY(d,i))],pointIndex:i,seriesIndex:d.series,e:d3.event})}).on("mouseout",function(d,i){d3.select(this).classed("hover",!1),dispatch.elementMouseout({value:getY(d,i),point:d,series:data[d.series],pointIndex:i,seriesIndex:d.series,e:d3.event})}).on("click",function(d,i){dispatch.elementClick({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(d.series+.5)/data.length,y(getY(d,i))],pointIndex:i,seriesIndex:d.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(d,i){dispatch.elementDblClick({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(d.series+.5)/data.length,y(getY(d,i))],pointIndex:i,seriesIndex:d.series,e:d3.event}),d3.event.stopPropagation()});barsEnter.append("rect").attr("height",0).attr("width",.9*x.rangeBand()/data.length),showValues?(barsEnter.append("text").attr("text-anchor","middle"),bars.select("text").text(function(d,i){return valueFormat(getY(d,i))}).transition().attr("x",.9*x.rangeBand()/2).attr("y",function(d,i){return getY(d,i)<0?y(getY(d,i))-y(0)+12:-4})):bars.selectAll("text").remove(),bars.attr("class",function(d,i){return getY(d,i)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(d,i){return d.color||color(d,i)}).style("stroke",function(d,i){return d.color||color(d,i)}).select("rect").attr("class",rectClass).transition().attr("width",.9*x.rangeBand()/data.length),bars.transition().attr("transform",function(d,i){var left=x(getX(d,i))+.05*x.rangeBand(),top=getY(d,i)<0?y(0):y(0)-y(getY(d,i))<1?y(0)-1:y(getY(d,i));return"translate("+left+", "+top+")"}).select("rect").attr("height",function(d,i){return Math.max(Math.abs(y(getY(d,i))-y(yDomain&&yDomain[0]||0))||1)}),x0=x.copy(),y0=y.copy()}),chart}var xDomain,yDomain,xRange,yRange,x0,y0,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,id=Math.floor(1e4*Math.random()),x=d3.scale.ordinal(),y=d3.scale.linear(),getX=function(d){return d.x},getY=function(d){return d.y},forceY=[0],color=nv.utils.defaultColor(),showValues=!1,valueFormat=d3.format(",.2f"),dispatch=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),rectClass="discreteBar";return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,chart):getX},chart.y=function(_){return arguments.length?(getY=_,chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.forceY=function(_){return arguments.length?(forceY=_,chart):forceY},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.showValues=function(_){return arguments.length?(showValues=_,chart):showValues},chart.valueFormat=function(_){return arguments.length?(valueFormat=_,chart):valueFormat},chart.rectClass=function(_){return arguments.length?(rectClass=_,chart):rectClass},chart},nv.models.discreteBarChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){dispatch.beforeUpdate(),container.transition().duration(transitionDuration).call(chart)},chart.container=this,!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=discretebar.xScale(),y=discretebar.yScale().clamp(!0);var wrap=container.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),defsEnter=gEnter.append("defs"),g=wrap.select("g");gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),gEnter.append("g").attr("class","nv-barsWrap"),g.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),discretebar.width(availableWidth).height(availableHeight);var barsWrap=g.select(".nv-barsWrap").datum(data.filter(function(d){return!d.disabled}));if(barsWrap.transition().call(discretebar),defsEnter.append("clipPath").attr("id","nv-x-label-clip-"+discretebar.id()).append("rect"),g.select("#nv-x-label-clip-"+discretebar.id()+" rect").attr("width",x.rangeBand()*(staggerLabels?2:1)).attr("height",16).attr("x",-x.rangeBand()/(staggerLabels?1:2)),showXAxis){xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+(y.range()[0]+(discretebar.showValues()&&y.domain()[0]<0?16:0))+")"),g.select(".nv-x.nv-axis").transition().call(xAxis);var xTicks=g.select(".nv-x.nv-axis").selectAll("g");staggerLabels&&xTicks.selectAll("text").attr("transform",function(d,i,j){return"translate(0,"+(j%2==0?"5":"17")+")"})}showYAxis&&(yAxis.scale(y).ticks(availableHeight/36).tickSize(-availableWidth,0),g.select(".nv-y.nv-axis").transition().call(yAxis)),g.select(".nv-zeroLine line").attr("x1",0).attr("x2",availableWidth).attr("y1",y(0)).attr("y2",y(0)),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)})}),chart}var x,y,discretebar=nv.models.discreteBar(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),margin={top:15,right:10,bottom:50,left:60},width=null,height=null,color=nv.utils.getColor(),showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,staggerLabels=!1,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+x+"</h3><p>"+y+"</p>"},noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),transitionDuration=250;xAxis.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(d){return d}),yAxis.orient(rightAlignYAxis?"right":"left").tickFormat(d3.format(",.1f"));var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(discretebar.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(discretebar.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"n":"s",null,offsetElement)};return discretebar.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),discretebar.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.discretebar=discretebar,chart.xAxis=xAxis,chart.yAxis=yAxis,d3.rebind(chart,discretebar,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),discretebar.color(color),chart):color},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.staggerLabels=function(_){return arguments.length?(staggerLabels=_,chart):staggerLabels},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.distribution=function(){"use strict";function chart(selection){return selection.each(function(data){var naxis=(width-("x"===axis?margin.left+margin.right:margin.top+margin.bottom),"x"==axis?"y":"x"),container=d3.select(this);scale0=scale0||scale;var wrap=container.selectAll("g.nv-distribution").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-distribution"),g=(wrapEnter.append("g"),wrap.select("g"));wrap.attr("transform","translate("+margin.left+","+margin.top+")");var distWrap=g.selectAll("g.nv-dist").data(function(d){return d},function(d){return d.key});distWrap.enter().append("g"),distWrap.attr("class",function(d,i){return"nv-dist nv-series-"+i}).style("stroke",function(d,i){return color(d,i)});var dist=distWrap.selectAll("line.nv-dist"+axis).data(function(d){return d.values});dist.enter().append("line").attr(axis+"1",function(d,i){return scale0(getData(d,i))}).attr(axis+"2",function(d,i){return scale0(getData(d,i))}),distWrap.exit().selectAll("line.nv-dist"+axis).transition().attr(axis+"1",function(d,i){return scale(getData(d,i))}).attr(axis+"2",function(d,i){return scale(getData(d,i))}).style("stroke-opacity",0).remove(),dist.attr("class",function(d,i){return"nv-dist"+axis+" nv-dist"+axis+"-"+i}).attr(naxis+"1",0).attr(naxis+"2",size),dist.transition().attr(axis+"1",function(d,i){return scale(getData(d,i))}).attr(axis+"2",function(d,i){return scale(getData(d,i))}),scale0=scale.copy()}),chart}var scale0,margin={top:0,right:0,bottom:0,left:0},width=400,size=8,axis="x",getData=function(d){return d[axis]},color=nv.utils.defaultColor(),scale=d3.scale.linear();return chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.axis=function(_){return arguments.length?(axis=_,chart):axis},chart.size=function(_){return arguments.length?(size=_,chart):size},chart.getData=function(_){return arguments.length?(getData=d3.functor(_),chart):getData},chart.scale=function(_){return arguments.length?(scale=_,chart):scale},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart},nv.models.historicalBar=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);x.domain(xDomain||d3.extent(data[0].values.map(getX).concat(forceX))),x.range(padData?xRange||[.5*availableWidth/data[0].values.length,availableWidth*(data[0].values.length-.5)/data[0].values.length]:xRange||[0,availableWidth]),y.domain(yDomain||d3.extent(data[0].values.map(getY).concat(forceY))).range(yRange||[availableHeight,0]),x.domain()[0]===x.domain()[1]&&x.domain(x.domain()[0]?[x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]:[-1,1]),y.domain()[0]===y.domain()[1]&&y.domain(y.domain()[0]?[y.domain()[0]+.01*y.domain()[0],y.domain()[1]-.01*y.domain()[1]]:[-1,1]);var wrap=container.selectAll("g.nv-wrap.nv-historicalBar-"+id).data([data[0].values]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+id),defsEnter=wrapEnter.append("defs"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-bars"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),container.on("click",function(d,i){dispatch.chartClick({data:d,index:i,pos:d3.event,id:id})}),defsEnter.append("clipPath").attr("id","nv-chart-clip-path-"+id).append("rect"),wrap.select("#nv-chart-clip-path-"+id+" rect").attr("width",availableWidth).attr("height",availableHeight),g.attr("clip-path",clipEdge?"url(#nv-chart-clip-path-"+id+")":"");var bars=wrap.select(".nv-bars").selectAll(".nv-bar").data(function(d){return d},function(d,i){return getX(d,i)});bars.exit().remove();bars.enter().append("rect").attr("x",0).attr("y",function(d,i){return nv.utils.NaNtoZero(y(Math.max(0,getY(d,i))))}).attr("height",function(d,i){return nv.utils.NaNtoZero(Math.abs(y(getY(d,i))-y(0)))}).attr("transform",function(d,i){return"translate("+(x(getX(d,i))-availableWidth/data[0].values.length*.45)+",0)"}).on("mouseover",function(d,i){interactive&&(d3.select(this).classed("hover",!0),dispatch.elementMouseover({point:d,series:data[0],pos:[x(getX(d,i)),y(getY(d,i))],pointIndex:i,seriesIndex:0,e:d3.event}))}).on("mouseout",function(d,i){interactive&&(d3.select(this).classed("hover",!1),dispatch.elementMouseout({point:d,series:data[0],pointIndex:i,seriesIndex:0,e:d3.event}))}).on("click",function(d,i){interactive&&(dispatch.elementClick({value:getY(d,i),data:d,index:i,pos:[x(getX(d,i)),y(getY(d,i))],e:d3.event,id:id}),d3.event.stopPropagation())}).on("dblclick",function(d,i){interactive&&(dispatch.elementDblClick({value:getY(d,i),data:d,index:i,pos:[x(getX(d,i)),y(getY(d,i))],e:d3.event,id:id}),d3.event.stopPropagation())});bars.attr("fill",function(d,i){return color(d,i)}).attr("class",function(d,i,j){return(getY(d,i)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+j+"-"+i}).transition().attr("transform",function(d,i){return"translate("+(x(getX(d,i))-availableWidth/data[0].values.length*.45)+",0)"}).attr("width",availableWidth/data[0].values.length*.9),bars.transition().attr("y",function(d,i){var rval=getY(d,i)<0?y(0):y(0)-y(getY(d,i))<1?y(0)-1:y(getY(d,i));return nv.utils.NaNtoZero(rval)}).attr("height",function(d,i){return nv.utils.NaNtoZero(Math.max(Math.abs(y(getY(d,i))-y(0)),1))})}),chart}var xDomain,yDomain,xRange,yRange,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,id=Math.floor(1e4*Math.random()),x=d3.scale.linear(),y=d3.scale.linear(),getX=function(d){return d.x},getY=function(d){return d.y},forceX=[],forceY=[0],padData=!1,clipEdge=!0,color=nv.utils.defaultColor(),dispatch=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),interactive=!0;return chart.highlightPoint=function(pointIndex,isHoverOver){d3.select(".nv-historicalBar-"+id).select(".nv-bars .nv-bar-0-"+pointIndex).classed("hover",isHoverOver)},chart.clearHighlights=function(){d3.select(".nv-historicalBar-"+id).select(".nv-bars .nv-bar.hover").classed("hover",!1)},chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,chart):getX},chart.y=function(_){return arguments.length?(getY=_,chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.forceX=function(_){return arguments.length?(forceX=_,chart):forceX},chart.forceY=function(_){return arguments.length?(forceY=_,chart):forceY},chart.padData=function(_){return arguments.length?(padData=_,chart):padData},chart.clipEdge=function(_){return arguments.length?(clipEdge=_,chart):clipEdge},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.interactive=function(){return arguments.length?(interactive=!1,chart):interactive},chart},nv.models.historicalBarChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=bars.xScale(),y=bars.yScale();var wrap=container.selectAll("g.nv-wrap.nv-historicalBarChart").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-barsWrap"),gEnter.append("g").attr("class","nv-legendWrap"),showLegend&&(legend.width(availableWidth),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),wrap.select(".nv-legendWrap").attr("transform","translate(0,"+-margin.top+")")),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),bars.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled}));var barsWrap=g.select(".nv-barsWrap").datum(data.filter(function(d){return!d.disabled}));barsWrap.transition().call(bars),showXAxis&&(xAxis.scale(x).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),g.select(".nv-x.nv-axis").transition().call(xAxis)),showYAxis&&(yAxis.scale(y).ticks(availableHeight/36).tickSize(-availableWidth,0),g.select(".nv-y.nv-axis").transition().call(yAxis)),legend.dispatch.on("legendClick",function(d){d.disabled=!d.disabled,data.filter(function(d){return!d.disabled}).length||data.map(function(d){return d.disabled=!1,wrap.selectAll(".nv-series").classed("disabled",!1),d}),state.disabled=data.map(function(d){return!!d.disabled}),dispatch.stateChange(state),selection.transition().call(chart)}),legend.dispatch.on("legendDblclick",function(d){data.forEach(function(d){d.disabled=!0}),d.disabled=!1,state.disabled=data.map(function(d){return!!d.disabled}),dispatch.stateChange(state),chart.update()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),chart.update()})}),chart}var x,y,bars=nv.models.historicalBar(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),margin={top:30,right:90,bottom:50,left:90},color=nv.utils.defaultColor(),width=null,height=null,showLegend=!1,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},state={},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),transitionDuration=250;xAxis.orient("bottom").tickPadding(7),yAxis.orient(rightAlignYAxis?"right":"left");var showTooltip=function(e,offsetElement){if(offsetElement){var svg=d3.select(offsetElement).select("svg"),viewBox=svg.node()?svg.attr("viewBox"):null;if(viewBox){viewBox=viewBox.split(" ");var ratio=parseInt(svg.style("width"))/viewBox[2];e.pos[0]=e.pos[0]*ratio,e.pos[1]=e.pos[1]*ratio}}var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(bars.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(bars.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,null,null,offsetElement)};return bars.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),bars.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.bars=bars,chart.legend=legend,chart.xAxis=xAxis,chart.yAxis=yAxis,d3.rebind(chart,bars,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.indentedTree=function(){"use strict";function chart(selection){return selection.each(function(data){function click(d,_,unshift){return d3.event.stopPropagation(),d3.event.shiftKey&&!unshift?(d3.event.shiftKey=!1,d.values&&d.values.forEach(function(node){(node.values||node._values)&&click(node,0,!0)}),!0):hasChildren(d)?(d.values?(d._values=d.values,d.values=null):(d.values=d._values,d._values=null),void chart.update()):!0}function icon(d){return d._values&&d._values.length?iconOpen:d.values&&d.values.length?iconClose:""}function folded(d){return d._values&&d._values.length}function hasChildren(d){var values=d.values||d._values;return values&&values.length}var depth=1,container=d3.select(this),tree=d3.layout.tree().children(function(d){return d.values}).size([height,childIndent]);chart.update=function(){container.transition().duration(600).call(chart)},data[0]||(data[0]={key:noData});var nodes=tree.nodes(data[0]),wrap=d3.select(this).selectAll("div").data([[nodes]]),wrapEnter=wrap.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),tableEnter=wrapEnter.append("table"),table=wrap.select("table").attr("width","100%").attr("class",tableClass);if(header){var thead=tableEnter.append("thead"),theadRow1=thead.append("tr");columns.forEach(function(column){theadRow1.append("th").attr("width",column.width?column.width:"10%").style("text-align","numeric"==column.type?"right":"left").append("span").text(column.label)})}var tbody=table.selectAll("tbody").data(function(d){return d});tbody.enter().append("tbody"),depth=d3.max(nodes,function(node){return node.depth}),tree.size([height,depth*childIndent]);var node=tbody.selectAll("tr").data(function(d){return d.filter(function(d){return filterZero&&!d.children?filterZero(d):!0})},function(d){return d.id||d.id||++idx
});node.exit().remove(),node.select("img.nv-treeicon").attr("src",icon).classed("folded",folded);var nodeEnter=node.enter().append("tr");columns.forEach(function(column,index){var nodeName=nodeEnter.append("td").style("padding-left",function(d){return(index?0:d.depth*childIndent+12+(icon(d)?0:16))+"px"},"important").style("text-align","numeric"==column.type?"right":"left");0==index&&nodeName.append("img").classed("nv-treeicon",!0).classed("nv-folded",folded).attr("src",icon).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(d){return icon(d)?"inline-block":"none"}).on("click",click),nodeName.each(function(d){!index&&getUrl(d)?d3.select(this).append("a").attr("href",getUrl).attr("class",d3.functor(column.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(column.classes)).text(function(d){return column.format?column.format(d):d[column.key]||"-"})}),column.showCount&&(nodeName.append("span").attr("class","nv-childrenCount"),node.selectAll("span.nv-childrenCount").text(function(d){return d.values&&d.values.length||d._values&&d._values.length?"("+(d.values&&d.values.filter(function(d){return filterZero?filterZero(d):!0}).length||d._values&&d._values.filter(function(d){return filterZero?filterZero(d):!0}).length||0)+")":""}))}),node.order().on("click",function(d){dispatch.elementClick({row:this,data:d,pos:[d.x,d.y]})}).on("dblclick",function(d){dispatch.elementDblclick({row:this,data:d,pos:[d.x,d.y]})}).on("mouseover",function(d){dispatch.elementMouseover({row:this,data:d,pos:[d.x,d.y]})}).on("mouseout",function(d){dispatch.elementMouseout({row:this,data:d,pos:[d.x,d.y]})})}),chart}var margin={top:0,right:0,bottom:0,left:0},width=960,height=500,color=nv.utils.defaultColor(),id=Math.floor(1e4*Math.random()),header=!0,filterZero=!1,noData="No Data Available.",childIndent=20,columns=[{key:"key",label:"Name",type:"text"}],tableClass=null,iconOpen="images/grey-plus.png",iconClose="images/grey-minus.png",dispatch=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),getUrl=function(d){return d.url},idx=0;return chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),scatter.color(color),chart):color},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.header=function(_){return arguments.length?(header=_,chart):header},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.filterZero=function(_){return arguments.length?(filterZero=_,chart):filterZero},chart.columns=function(_){return arguments.length?(columns=_,chart):columns},chart.tableClass=function(_){return arguments.length?(tableClass=_,chart):tableClass},chart.iconOpen=function(_){return arguments.length?(iconOpen=_,chart):iconOpen},chart.iconClose=function(_){return arguments.length?(iconClose=_,chart):iconClose},chart.getUrl=function(_){return arguments.length?(getUrl=_,chart):getUrl},chart},nv.models.legend=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,container=d3.select(this),wrap=container.selectAll("g.nv-legend").data([data]),g=(wrap.enter().append("g").attr("class","nvd3 nv-legend").append("g"),wrap.select("g"));wrap.attr("transform","translate("+margin.left+","+margin.top+")");var series=g.selectAll(".nv-series").data(function(d){return d}),seriesEnter=series.enter().append("g").attr("class","nv-series").on("mouseover",function(d,i){dispatch.legendMouseover(d,i)}).on("mouseout",function(d,i){dispatch.legendMouseout(d,i)}).on("click",function(d,i){dispatch.legendClick(d,i),updateState&&(radioButtonMode?(data.forEach(function(series){series.disabled=!0}),d.disabled=!1):(d.disabled=!d.disabled,data.every(function(series){return series.disabled})&&data.forEach(function(series){series.disabled=!1})),dispatch.stateChange({disabled:data.map(function(d){return!!d.disabled})}))}).on("dblclick",function(d,i){dispatch.legendDblclick(d,i),updateState&&(data.forEach(function(series){series.disabled=!0}),d.disabled=!1,dispatch.stateChange({disabled:data.map(function(d){return!!d.disabled})}))});if(seriesEnter.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),seriesEnter.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),series.classed("disabled",function(d){return d.disabled}),series.exit().remove(),series.select("circle").style("fill",function(d,i){return d.color||color(d,i)}).style("stroke",function(d,i){return d.color||color(d,i)}),series.select("text").text(getKey),align){var seriesWidths=[];series.each(function(){var nodeTextLength,legendText=d3.select(this).select("text");try{nodeTextLength=legendText.node().getComputedTextLength()}catch(e){nodeTextLength=nv.utils.calcApproxTextWidth(legendText)}seriesWidths.push(nodeTextLength+28)});for(var seriesPerRow=0,legendWidth=0,columnWidths=[];availableWidth>legendWidth&&seriesPerRow<seriesWidths.length;)columnWidths[seriesPerRow]=seriesWidths[seriesPerRow],legendWidth+=seriesWidths[seriesPerRow++];for(0===seriesPerRow&&(seriesPerRow=1);legendWidth>availableWidth&&seriesPerRow>1;){columnWidths=[],seriesPerRow--;for(var k=0;k<seriesWidths.length;k++)seriesWidths[k]>(columnWidths[k%seriesPerRow]||0)&&(columnWidths[k%seriesPerRow]=seriesWidths[k]);legendWidth=columnWidths.reduce(function(prev,cur){return prev+cur})}for(var xPositions=[],i=0,curX=0;seriesPerRow>i;i++)xPositions[i]=curX,curX+=columnWidths[i];series.attr("transform",function(d,i){return"translate("+xPositions[i%seriesPerRow]+","+(5+20*Math.floor(i/seriesPerRow))+")"}),rightAlign?g.attr("transform","translate("+(width-margin.right-legendWidth)+","+margin.top+")"):g.attr("transform","translate(0,"+margin.top+")"),height=margin.top+margin.bottom+20*Math.ceil(seriesWidths.length/seriesPerRow)}else{var xpos,ypos=5,newxpos=5,maxwidth=0;series.attr("transform",function(){var length=d3.select(this).select("text").node().getComputedTextLength()+28;return xpos=newxpos,width<margin.left+margin.right+xpos+length&&(newxpos=xpos=5,ypos+=20),newxpos+=length,newxpos>maxwidth&&(maxwidth=newxpos),"translate("+xpos+","+ypos+")"}),g.attr("transform","translate("+(width-margin.right-maxwidth)+","+margin.top+")"),height=margin.top+margin.bottom+ypos+15}}),chart}var margin={top:5,right:0,bottom:5,left:0},width=400,height=20,getKey=function(d){return d.key},color=nv.utils.defaultColor(),align=!0,rightAlign=!0,updateState=!0,radioButtonMode=!1,dispatch=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.key=function(_){return arguments.length?(getKey=_,chart):getKey},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.align=function(_){return arguments.length?(align=_,chart):align},chart.rightAlign=function(_){return arguments.length?(rightAlign=_,chart):rightAlign},chart.updateState=function(_){return arguments.length?(updateState=_,chart):updateState},chart.radioButtonMode=function(_){return arguments.length?(radioButtonMode=_,chart):radioButtonMode},chart},nv.models.line=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);x=scatter.xScale(),y=scatter.yScale(),x0=x0||x,y0=y0||y;var wrap=container.selectAll("g.nv-wrap.nv-line").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),defsEnter=wrapEnter.append("defs"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-groups"),gEnter.append("g").attr("class","nv-scatterWrap"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),scatter.width(availableWidth).height(availableHeight);var scatterWrap=wrap.select(".nv-scatterWrap");scatterWrap.transition().call(scatter),defsEnter.append("clipPath").attr("id","nv-edge-clip-"+scatter.id()).append("rect"),wrap.select("#nv-edge-clip-"+scatter.id()+" rect").attr("width",availableWidth).attr("height",availableHeight),g.attr("clip-path",clipEdge?"url(#nv-edge-clip-"+scatter.id()+")":""),scatterWrap.attr("clip-path",clipEdge?"url(#nv-edge-clip-"+scatter.id()+")":"");var groups=wrap.select(".nv-groups").selectAll(".nv-group").data(function(d){return d},function(d){return d.key});groups.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),groups.exit().remove(),groups.attr("class",function(d,i){return"nv-group nv-series-"+i}).classed("hover",function(d){return d.hover}).style("fill",function(d,i){return color(d,i)}).style("stroke",function(d,i){return color(d,i)}),groups.transition().style("stroke-opacity",1).style("fill-opacity",.5);var areaPaths=groups.selectAll("path.nv-area").data(function(d){return isArea(d)?[d]:[]});areaPaths.enter().append("path").attr("class","nv-area").attr("d",function(d){return d3.svg.area().interpolate(interpolate).defined(defined).x(function(d,i){return nv.utils.NaNtoZero(x0(getX(d,i)))}).y0(function(d,i){return nv.utils.NaNtoZero(y0(getY(d,i)))}).y1(function(){return y0(y.domain()[0]<=0?y.domain()[1]>=0?0:y.domain()[1]:y.domain()[0])}).apply(this,[d.values])}),groups.exit().selectAll("path.nv-area").remove(),areaPaths.transition().attr("d",function(d){return d3.svg.area().interpolate(interpolate).defined(defined).x(function(d,i){return nv.utils.NaNtoZero(x(getX(d,i)))}).y0(function(d,i){return nv.utils.NaNtoZero(y(getY(d,i)))}).y1(function(){return y(y.domain()[0]<=0?y.domain()[1]>=0?0:y.domain()[1]:y.domain()[0])}).apply(this,[d.values])});var linePaths=groups.selectAll("path.nv-line").data(function(d){return[d.values]});linePaths.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(interpolate).defined(defined).x(function(d,i){return nv.utils.NaNtoZero(x0(getX(d,i)))}).y(function(d,i){return nv.utils.NaNtoZero(y0(getY(d,i)))})),linePaths.transition().attr("d",d3.svg.line().interpolate(interpolate).defined(defined).x(function(d,i){return nv.utils.NaNtoZero(x(getX(d,i)))}).y(function(d,i){return nv.utils.NaNtoZero(y(getY(d,i)))})),x0=x.copy(),y0=y.copy()}),chart}var x,y,scatter=nv.models.scatter(),margin={top:0,right:0,bottom:0,left:0},width=960,height=500,color=nv.utils.defaultColor(),getX=function(d){return d.x},getY=function(d){return d.y},defined=function(d,i){return!isNaN(getY(d,i))&&null!==getY(d,i)},isArea=function(d){return d.area},clipEdge=!1,interpolate="linear";scatter.size(16).sizeDomain([16,256]);var x0,y0;return chart.dispatch=scatter.dispatch,chart.scatter=scatter,d3.rebind(chart,scatter,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.x=function(_){return arguments.length?(getX=_,scatter.x(_),chart):getX},chart.y=function(_){return arguments.length?(getY=_,scatter.y(_),chart):getY},chart.clipEdge=function(_){return arguments.length?(clipEdge=_,chart):clipEdge},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),scatter.color(color),chart):color},chart.interpolate=function(_){return arguments.length?(interpolate=_,chart):interpolate},chart.defined=function(_){return arguments.length?(defined=_,chart):defined},chart.isArea=function(_){return arguments.length?(isArea=d3.functor(_),chart):isArea},chart},nv.models.lineChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=lines.xScale(),y=lines.yScale();var wrap=container.selectAll("g.nv-wrap.nv-lineChart").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),g=wrap.select("g");gEnter.append("rect").style("opacity",0),gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-linesWrap"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-interactive"),g.select("rect").attr("width",availableWidth).attr("height",availableHeight),showLegend&&(legend.width(availableWidth),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),wrap.select(".nv-legendWrap").attr("transform","translate(0,"+-margin.top+")")),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),useInteractiveGuideline&&(interactiveLayer.width(availableWidth).height(availableHeight).margin({left:margin.left,top:margin.top}).svgContainer(container).xScale(x),wrap.select(".nv-interactive").call(interactiveLayer)),lines.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled}));var linesWrap=g.select(".nv-linesWrap").datum(data.filter(function(d){return!d.disabled}));linesWrap.transition().call(lines),showXAxis&&(xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),g.select(".nv-x.nv-axis").transition().call(xAxis)),showYAxis&&(yAxis.scale(y).ticks(availableHeight/36).tickSize(-availableWidth,0),g.select(".nv-y.nv-axis").transition().call(yAxis)),legend.dispatch.on("stateChange",function(newState){state=newState,dispatch.stateChange(state),chart.update()}),interactiveLayer.dispatch.on("elementMousemove",function(e){lines.clearHighlights();var singlePoint,pointIndex,pointXLocation,allData=[];if(data.filter(function(series,i){return series.seriesIndex=i,!series.disabled}).forEach(function(series,i){pointIndex=nv.interactiveBisect(series.values,e.pointXValue,chart.x()),lines.highlightPoint(i,pointIndex,!0);var point=series.values[pointIndex];"undefined"!=typeof point&&("undefined"==typeof singlePoint&&(singlePoint=point),"undefined"==typeof pointXLocation&&(pointXLocation=chart.xScale()(chart.x()(point,pointIndex))),allData.push({key:series.key,value:chart.y()(point,pointIndex),color:color(series,series.seriesIndex)}))}),allData.length>2){var yValue=chart.yScale().invert(e.mouseY),domainExtent=Math.abs(chart.yScale().domain()[0]-chart.yScale().domain()[1]),threshold=.03*domainExtent,indexToHighlight=nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);null!==indexToHighlight&&(allData[indexToHighlight].highlight=!0)}var xValue=xAxis.tickFormat()(chart.x()(singlePoint,pointIndex));interactiveLayer.tooltip.position({left:pointXLocation+margin.left,top:e.mouseY+margin.top}).chartContainer(that.parentNode).enabled(tooltips).valueFormatter(function(d){return yAxis.tickFormat()(d)}).data({value:xValue,series:allData})(),interactiveLayer.renderGuideLine(pointXLocation)}),interactiveLayer.dispatch.on("elementMouseout",function(){dispatch.tooltipHide(),lines.clearHighlights()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),chart.update()})}),chart}var x,y,lines=nv.models.line(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),interactiveLayer=nv.interactiveGuideline(),margin={top:30,right:20,bottom:50,left:60},color=nv.utils.defaultColor(),width=null,height=null,showLegend=!0,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,useInteractiveGuideline=!1,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},state={},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),transitionDuration=250;xAxis.orient("bottom").tickPadding(7),yAxis.orient(rightAlignYAxis?"right":"left");var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(lines.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(lines.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,null,null,offsetElement)};return lines.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.lines=lines,chart.legend=legend,chart.xAxis=xAxis,chart.yAxis=yAxis,chart.interactiveLayer=interactiveLayer,d3.rebind(chart,lines,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.useInteractiveGuideline=function(_){return arguments.length?(useInteractiveGuideline=_,_===!0&&(chart.interactive(!1),chart.useVoronoi(!1)),chart):useInteractiveGuideline},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.linePlusBarChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().call(chart)},state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove();var dataBars=data.filter(function(d){return!d.disabled&&d.bar}),dataLines=data.filter(function(d){return!d.bar});x=dataLines.filter(function(d){return!d.disabled}).length&&dataLines.filter(function(d){return!d.disabled})[0].values.length?lines.xScale():bars.xScale(),y1=bars.yScale(),y2=lines.yScale();var wrap=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y1 nv-axis"),gEnter.append("g").attr("class","nv-y2 nv-axis"),gEnter.append("g").attr("class","nv-barsWrap"),gEnter.append("g").attr("class","nv-linesWrap"),gEnter.append("g").attr("class","nv-legendWrap"),showLegend&&(legend.width(availableWidth/2),g.select(".nv-legendWrap").datum(data.map(function(series){return series.originalKey=void 0===series.originalKey?series.key:series.originalKey,series.key=series.originalKey+(series.bar?" (left axis)":" (right axis)"),series})).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".nv-legendWrap").attr("transform","translate("+availableWidth/2+","+-margin.top+")")),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),lines.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&!data[i].bar})),bars.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&data[i].bar}));var barsWrap=g.select(".nv-barsWrap").datum(dataBars.length?dataBars:[{values:[]}]),linesWrap=g.select(".nv-linesWrap").datum(dataLines[0]&&!dataLines[0].disabled?dataLines:[{values:[]}]);d3.transition(barsWrap).call(bars),d3.transition(linesWrap).call(lines),xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y1.range()[0]+")"),d3.transition(g.select(".nv-x.nv-axis")).call(xAxis),y1Axis.scale(y1).ticks(availableHeight/36).tickSize(-availableWidth,0),d3.transition(g.select(".nv-y1.nv-axis")).style("opacity",dataBars.length?1:0).call(y1Axis),y2Axis.scale(y2).ticks(availableHeight/36).tickSize(dataBars.length?0:-availableWidth,0),g.select(".nv-y2.nv-axis").style("opacity",dataLines.length?1:0).attr("transform","translate("+availableWidth+",0)"),d3.transition(g.select(".nv-y2.nv-axis")).call(y2Axis),legend.dispatch.on("stateChange",function(newState){state=newState,dispatch.stateChange(state),chart.update()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),chart.update()})}),chart}var x,y1,y2,lines=nv.models.line(),bars=nv.models.historicalBar(),xAxis=nv.models.axis(),y1Axis=nv.models.axis(),y2Axis=nv.models.axis(),legend=nv.models.legend(),margin={top:30,right:60,bottom:50,left:60},width=null,height=null,getX=function(d){return d.x},getY=function(d){return d.y},color=nv.utils.defaultColor(),showLegend=!0,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},state={},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");bars.padData(!0),lines.clipEdge(!1).padData(!0),xAxis.orient("bottom").tickPadding(7).highlightZero(!1),y1Axis.orient("left"),y2Axis.orient("right");var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(lines.x()(e.point,e.pointIndex)),y=(e.series.bar?y1Axis:y2Axis).tickFormat()(lines.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"n":"s",null,offsetElement)};return lines.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),bars.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),bars.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.legend=legend,chart.lines=lines,chart.bars=bars,chart.xAxis=xAxis,chart.y1Axis=y1Axis,chart.y2Axis=y2Axis,d3.rebind(chart,lines,"defined","size","clipVoronoi","interpolate"),chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,lines.x(_),bars.x(_),chart):getX},chart.y=function(_){return arguments.length?(getY=_,lines.y(_),bars.y(_),chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart},nv.models.lineWithFocusChart=function(){"use strict";function chart(selection){return selection.each(function(data){function resizePath(d){var e=+("e"==d),x=e?1:-1,y=availableHeight2/3;return"M"+.5*x+","+y+"A6,6 0 0 "+e+" "+6.5*x+","+(y+6)+"V"+(2*y-6)+"A6,6 0 0 "+e+" "+.5*x+","+2*y+"ZM"+2.5*x+","+(y+8)+"V"+(2*y-8)+"M"+4.5*x+","+(y+8)+"V"+(2*y-8)}function updateBrushBG(){brush.empty()||brush.extent(brushExtent),brushBG.data([brush.empty()?x2.domain():brushExtent]).each(function(d){var leftWidth=x2(d[0])-x.range()[0],rightWidth=x.range()[1]-x2(d[1]);d3.select(this).select(".left").attr("width",0>leftWidth?0:leftWidth),d3.select(this).select(".right").attr("x",x2(d[1])).attr("width",0>rightWidth?0:rightWidth)})}function onBrush(){brushExtent=brush.empty()?null:brush.extent();var extent=brush.empty()?x2.domain():brush.extent();if(!(Math.abs(extent[0]-extent[1])<=1)){dispatch.brush({extent:extent,brush:brush}),updateBrushBG();var focusLinesWrap=g.select(".nv-focus .nv-linesWrap").datum(data.filter(function(d){return!d.disabled}).map(function(d){return{key:d.key,values:d.values.filter(function(d,i){return lines.x()(d,i)>=extent[0]&&lines.x()(d,i)<=extent[1]})}}));focusLinesWrap.transition().duration(transitionDuration).call(lines),g.select(".nv-focus .nv-x.nv-axis").transition().duration(transitionDuration).call(xAxis),g.select(".nv-focus .nv-y.nv-axis").transition().duration(transitionDuration).call(yAxis)}}var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight1=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom-height2,availableHeight2=height2-margin2.top-margin2.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight1/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=lines.xScale(),y=lines.yScale(),x2=lines2.xScale(),y2=lines2.yScale();var wrap=container.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-legendWrap");var focusEnter=gEnter.append("g").attr("class","nv-focus");focusEnter.append("g").attr("class","nv-x nv-axis"),focusEnter.append("g").attr("class","nv-y nv-axis"),focusEnter.append("g").attr("class","nv-linesWrap");var contextEnter=gEnter.append("g").attr("class","nv-context");contextEnter.append("g").attr("class","nv-x nv-axis"),contextEnter.append("g").attr("class","nv-y nv-axis"),contextEnter.append("g").attr("class","nv-linesWrap"),contextEnter.append("g").attr("class","nv-brushBackground"),contextEnter.append("g").attr("class","nv-x nv-brush"),showLegend&&(legend.width(availableWidth),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight1=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom-height2),g.select(".nv-legendWrap").attr("transform","translate(0,"+-margin.top+")")),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),lines.width(availableWidth).height(availableHeight1).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),lines2.defined(lines.defined()).width(availableWidth).height(availableHeight2).color(data.map(function(d,i){return d.color||color(d,i)
}).filter(function(d,i){return!data[i].disabled})),g.select(".nv-context").attr("transform","translate(0,"+(availableHeight1+margin.bottom+margin2.top)+")");var contextLinesWrap=g.select(".nv-context .nv-linesWrap").datum(data.filter(function(d){return!d.disabled}));d3.transition(contextLinesWrap).call(lines2),xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight1,0),yAxis.scale(y).ticks(availableHeight1/36).tickSize(-availableWidth,0),g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+availableHeight1+")"),brush.x(x2).on("brush",function(){var oldTransition=chart.transitionDuration();chart.transitionDuration(0),onBrush(),chart.transitionDuration(oldTransition)}),brushExtent&&brush.extent(brushExtent);var brushBG=g.select(".nv-brushBackground").selectAll("g").data([brushExtent||brush.extent()]),brushBGenter=brushBG.enter().append("g");brushBGenter.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",availableHeight2),brushBGenter.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",availableHeight2);var gBrush=g.select(".nv-x.nv-brush").call(brush);gBrush.selectAll("rect").attr("height",availableHeight2),gBrush.selectAll(".resize").append("path").attr("d",resizePath),onBrush(),x2Axis.scale(x2).ticks(availableWidth/100).tickSize(-availableHeight2,0),g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y2.range()[0]+")"),d3.transition(g.select(".nv-context .nv-x.nv-axis")).call(x2Axis),y2Axis.scale(y2).ticks(availableHeight2/36).tickSize(-availableWidth,0),d3.transition(g.select(".nv-context .nv-y.nv-axis")).call(y2Axis),g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y2.range()[0]+")"),legend.dispatch.on("stateChange",function(){chart.update()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)})}),chart}var x,y,x2,y2,lines=nv.models.line(),lines2=nv.models.line(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),x2Axis=nv.models.axis(),y2Axis=nv.models.axis(),legend=nv.models.legend(),brush=d3.svg.brush(),margin={top:30,right:30,bottom:30,left:60},margin2={top:0,right:30,bottom:20,left:60},color=nv.utils.defaultColor(),width=null,height=null,height2=100,showLegend=!0,brushExtent=null,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","brush"),transitionDuration=250;lines.clipEdge(!0),lines2.interactive(!1),xAxis.orient("bottom").tickPadding(5),yAxis.orient("left"),x2Axis.orient("bottom").tickPadding(5),y2Axis.orient("left");var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(lines.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(lines.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,null,null,offsetElement)};return lines.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.legend=legend,chart.lines=lines,chart.lines2=lines2,chart.xAxis=xAxis,chart.yAxis=yAxis,chart.x2Axis=x2Axis,chart.y2Axis=y2Axis,d3.rebind(chart,lines,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(lines.x(_),lines2.x(_),chart):lines.x},chart.y=function(_){return arguments.length?(lines.y(_),lines2.y(_),chart):lines.y},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.margin2=function(_){return arguments.length?(margin2=_,chart):margin2},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.height2=function(_){return arguments.length?(height2=_,chart):height2},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.interpolate=function(_){return arguments.length?(lines.interpolate(_),lines2.interpolate(_),chart):lines.interpolate()},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.xTickFormat=function(_){return arguments.length?(xAxis.tickFormat(_),x2Axis.tickFormat(_),chart):xAxis.tickFormat()},chart.yTickFormat=function(_){return arguments.length?(yAxis.tickFormat(_),y2Axis.tickFormat(_),chart):yAxis.tickFormat()},chart.brushExtent=function(_){return arguments.length?(brushExtent=_,chart):brushExtent},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.linePlusBarWithFocusChart=function(){"use strict";function chart(selection){return selection.each(function(data){function resizePath(d){var e=+("e"==d),x=e?1:-1,y=availableHeight2/3;return"M"+.5*x+","+y+"A6,6 0 0 "+e+" "+6.5*x+","+(y+6)+"V"+(2*y-6)+"A6,6 0 0 "+e+" "+.5*x+","+2*y+"ZM"+2.5*x+","+(y+8)+"V"+(2*y-8)+"M"+4.5*x+","+(y+8)+"V"+(2*y-8)}function updateBrushBG(){brush.empty()||brush.extent(brushExtent),brushBG.data([brush.empty()?x2.domain():brushExtent]).each(function(d){var leftWidth=x2(d[0])-x2.range()[0],rightWidth=x2.range()[1]-x2(d[1]);d3.select(this).select(".left").attr("width",0>leftWidth?0:leftWidth),d3.select(this).select(".right").attr("x",x2(d[1])).attr("width",0>rightWidth?0:rightWidth)})}function onBrush(){brushExtent=brush.empty()?null:brush.extent(),extent=brush.empty()?x2.domain():brush.extent(),dispatch.brush({extent:extent,brush:brush}),updateBrushBG(),bars.width(availableWidth).height(availableHeight1).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&data[i].bar})),lines.width(availableWidth).height(availableHeight1).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&!data[i].bar}));var focusBarsWrap=g.select(".nv-focus .nv-barsWrap").datum(dataBars.length?dataBars.map(function(d){return{key:d.key,values:d.values.filter(function(d,i){return bars.x()(d,i)>=extent[0]&&bars.x()(d,i)<=extent[1]})}}):[{values:[]}]),focusLinesWrap=g.select(".nv-focus .nv-linesWrap").datum(dataLines[0].disabled?[{values:[]}]:dataLines.map(function(d){return{key:d.key,values:d.values.filter(function(d,i){return lines.x()(d,i)>=extent[0]&&lines.x()(d,i)<=extent[1]})}}));x=dataBars.length?bars.xScale():lines.xScale(),xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight1,0),xAxis.domain([Math.ceil(extent[0]),Math.floor(extent[1])]),g.select(".nv-x.nv-axis").transition().duration(transitionDuration).call(xAxis),focusBarsWrap.transition().duration(transitionDuration).call(bars),focusLinesWrap.transition().duration(transitionDuration).call(lines),g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+y1.range()[0]+")"),y1Axis.scale(y1).ticks(availableHeight1/36).tickSize(-availableWidth,0),g.select(".nv-focus .nv-y1.nv-axis").style("opacity",dataBars.length?1:0),y2Axis.scale(y2).ticks(availableHeight1/36).tickSize(dataBars.length?0:-availableWidth,0),g.select(".nv-focus .nv-y2.nv-axis").style("opacity",dataLines.length?1:0).attr("transform","translate("+x.range()[1]+",0)"),g.select(".nv-focus .nv-y1.nv-axis").transition().duration(transitionDuration).call(y1Axis),g.select(".nv-focus .nv-y2.nv-axis").transition().duration(transitionDuration).call(y2Axis)}var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight1=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom-height2,availableHeight2=height2-margin2.top-margin2.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight1/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove();var dataBars=data.filter(function(d){return!d.disabled&&d.bar}),dataLines=data.filter(function(d){return!d.bar});x=bars.xScale(),x2=x2Axis.scale(),y1=bars.yScale(),y2=lines.yScale(),y3=bars2.yScale(),y4=lines2.yScale();var series1=data.filter(function(d){return!d.disabled&&d.bar}).map(function(d){return d.values.map(function(d,i){return{x:getX(d,i),y:getY(d,i)}})}),series2=data.filter(function(d){return!d.disabled&&!d.bar}).map(function(d){return d.values.map(function(d,i){return{x:getX(d,i),y:getY(d,i)}})});x.range([0,availableWidth]),x2.domain(d3.extent(d3.merge(series1.concat(series2)),function(d){return d.x})).range([0,availableWidth]);var wrap=container.selectAll("g.nv-wrap.nv-linePlusBar").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-legendWrap");var focusEnter=gEnter.append("g").attr("class","nv-focus");focusEnter.append("g").attr("class","nv-x nv-axis"),focusEnter.append("g").attr("class","nv-y1 nv-axis"),focusEnter.append("g").attr("class","nv-y2 nv-axis"),focusEnter.append("g").attr("class","nv-barsWrap"),focusEnter.append("g").attr("class","nv-linesWrap");var contextEnter=gEnter.append("g").attr("class","nv-context");contextEnter.append("g").attr("class","nv-x nv-axis"),contextEnter.append("g").attr("class","nv-y1 nv-axis"),contextEnter.append("g").attr("class","nv-y2 nv-axis"),contextEnter.append("g").attr("class","nv-barsWrap"),contextEnter.append("g").attr("class","nv-linesWrap"),contextEnter.append("g").attr("class","nv-brushBackground"),contextEnter.append("g").attr("class","nv-x nv-brush"),showLegend&&(legend.width(availableWidth/2),g.select(".nv-legendWrap").datum(data.map(function(series){return series.originalKey=void 0===series.originalKey?series.key:series.originalKey,series.key=series.originalKey+(series.bar?" (left axis)":" (right axis)"),series})).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight1=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom-height2),g.select(".nv-legendWrap").attr("transform","translate("+availableWidth/2+","+-margin.top+")")),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),bars2.width(availableWidth).height(availableHeight2).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&data[i].bar})),lines2.width(availableWidth).height(availableHeight2).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled&&!data[i].bar}));var bars2Wrap=g.select(".nv-context .nv-barsWrap").datum(dataBars.length?dataBars:[{values:[]}]),lines2Wrap=g.select(".nv-context .nv-linesWrap").datum(dataLines[0].disabled?[{values:[]}]:dataLines);g.select(".nv-context").attr("transform","translate(0,"+(availableHeight1+margin.bottom+margin2.top)+")"),bars2Wrap.transition().call(bars2),lines2Wrap.transition().call(lines2),brush.x(x2).on("brush",onBrush),brushExtent&&brush.extent(brushExtent);var brushBG=g.select(".nv-brushBackground").selectAll("g").data([brushExtent||brush.extent()]),brushBGenter=brushBG.enter().append("g");brushBGenter.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",availableHeight2),brushBGenter.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",availableHeight2);var gBrush=g.select(".nv-x.nv-brush").call(brush);gBrush.selectAll("rect").attr("height",availableHeight2),gBrush.selectAll(".resize").append("path").attr("d",resizePath),x2Axis.ticks(availableWidth/100).tickSize(-availableHeight2,0),g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y3.range()[0]+")"),g.select(".nv-context .nv-x.nv-axis").transition().call(x2Axis),y3Axis.scale(y3).ticks(availableHeight2/36).tickSize(-availableWidth,0),g.select(".nv-context .nv-y1.nv-axis").style("opacity",dataBars.length?1:0).attr("transform","translate(0,"+x2.range()[0]+")"),g.select(".nv-context .nv-y1.nv-axis").transition().call(y3Axis),y4Axis.scale(y4).ticks(availableHeight2/36).tickSize(dataBars.length?0:-availableWidth,0),g.select(".nv-context .nv-y2.nv-axis").style("opacity",dataLines.length?1:0).attr("transform","translate("+x2.range()[1]+",0)"),g.select(".nv-context .nv-y2.nv-axis").transition().call(y4Axis),legend.dispatch.on("stateChange",function(){chart.update()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),onBrush()}),chart}var extent,x,x2,y1,y2,y3,y4,lines=nv.models.line(),lines2=nv.models.line(),bars=nv.models.historicalBar(),bars2=nv.models.historicalBar(),xAxis=nv.models.axis(),x2Axis=nv.models.axis(),y1Axis=nv.models.axis(),y2Axis=nv.models.axis(),y3Axis=nv.models.axis(),y4Axis=nv.models.axis(),legend=nv.models.legend(),brush=d3.svg.brush(),margin={top:30,right:30,bottom:30,left:60},margin2={top:0,right:30,bottom:20,left:60},width=null,height=null,height2=100,getX=function(d){return d.x},getY=function(d){return d.y},color=nv.utils.defaultColor(),showLegend=!0,brushExtent=null,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","brush"),transitionDuration=0;lines.clipEdge(!0),lines2.interactive(!1),xAxis.orient("bottom").tickPadding(5),y1Axis.orient("left"),y2Axis.orient("right"),x2Axis.orient("bottom").tickPadding(5),y3Axis.orient("left"),y4Axis.orient("right");var showTooltip=function(e,offsetElement){extent&&(e.pointIndex+=Math.ceil(extent[0]));var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(lines.x()(e.point,e.pointIndex)),y=(e.series.bar?y1Axis:y2Axis).tickFormat()(lines.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"n":"s",null,offsetElement)};return lines.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),bars.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),bars.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.legend=legend,chart.lines=lines,chart.lines2=lines2,chart.bars=bars,chart.bars2=bars2,chart.xAxis=xAxis,chart.x2Axis=x2Axis,chart.y1Axis=y1Axis,chart.y2Axis=y2Axis,chart.y3Axis=y3Axis,chart.y4Axis=y4Axis,d3.rebind(chart,lines,"defined","size","clipVoronoi","interpolate"),chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,lines.x(_),bars.x(_),chart):getX},chart.y=function(_){return arguments.length?(getY=_,lines.y(_),bars.y(_),chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.brushExtent=function(_){return arguments.length?(brushExtent=_,chart):brushExtent},chart},nv.models.multiBar=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);hideable&&data.length&&(hideable=[{values:data[0].values.map(function(d){return{x:d.x,y:0,series:d.series,size:.01}})}]),stacked&&(data=d3.layout.stack().offset(stackOffset).values(function(d){return d.values}).y(getY)(!data.length&&hideable?hideable:data)),data.forEach(function(series,i){series.values.forEach(function(point){point.series=i})}),stacked&&data[0].values.map(function(d,i){var posBase=0,negBase=0;data.map(function(d){var f=d.values[i];f.size=Math.abs(f.y),f.y<0?(f.y1=negBase,negBase-=f.size):(f.y1=f.size+posBase,posBase+=f.size)})});var seriesData=xDomain&&yDomain?[]:data.map(function(d){return d.values.map(function(d,i){return{x:getX(d,i),y:getY(d,i),y0:d.y0,y1:d.y1}})});x.domain(xDomain||d3.merge(seriesData).map(function(d){return d.x})).rangeBands(xRange||[0,availableWidth],groupSpacing),y.domain(yDomain||d3.extent(d3.merge(seriesData).map(function(d){return stacked?d.y>0?d.y1:d.y1+d.y:d.y}).concat(forceY))).range(yRange||[availableHeight,0]),x.domain()[0]===x.domain()[1]&&x.domain(x.domain()[0]?[x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]:[-1,1]),y.domain()[0]===y.domain()[1]&&y.domain(y.domain()[0]?[y.domain()[0]+.01*y.domain()[0],y.domain()[1]-.01*y.domain()[1]]:[-1,1]),x0=x0||x,y0=y0||y;var wrap=container.selectAll("g.nv-wrap.nv-multibar").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),defsEnter=wrapEnter.append("defs"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-groups"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),defsEnter.append("clipPath").attr("id","nv-edge-clip-"+id).append("rect"),wrap.select("#nv-edge-clip-"+id+" rect").attr("width",availableWidth).attr("height",availableHeight),g.attr("clip-path",clipEdge?"url(#nv-edge-clip-"+id+")":"");var groups=wrap.select(".nv-groups").selectAll(".nv-group").data(function(d){return d},function(d,i){return i});groups.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),groups.exit().transition().selectAll("rect.nv-bar").delay(function(d,i){return i*delay/data[0].values.length}).attr("y",function(d){return y0(stacked?d.y0:0)}).attr("height",0).remove(),groups.attr("class",function(d,i){return"nv-group nv-series-"+i}).classed("hover",function(d){return d.hover}).style("fill",function(d,i){return color(d,i)}).style("stroke",function(d,i){return color(d,i)}),groups.transition().style("stroke-opacity",1).style("fill-opacity",.75);var bars=groups.selectAll("rect.nv-bar").data(function(d){return hideable&&!data.length?hideable.values:d.values});bars.exit().remove();bars.enter().append("rect").attr("class",function(d,i){return getY(d,i)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(d,i,j){return stacked?0:j*x.rangeBand()/data.length}).attr("y",function(d){return y0(stacked?d.y0:0)}).attr("height",0).attr("width",x.rangeBand()/(stacked?1:data.length)).attr("transform",function(d,i){return"translate("+x(getX(d,i))+",0)"});bars.style("fill",function(d,i,j){return color(d,j,i)}).style("stroke",function(d,i,j){return color(d,j,i)}).on("mouseover",function(d,i){d3.select(this).classed("hover",!0),dispatch.elementMouseover({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(stacked?data.length/2:d.series+.5)/data.length,y(getY(d,i)+(stacked?d.y0:0))],pointIndex:i,seriesIndex:d.series,e:d3.event})}).on("mouseout",function(d,i){d3.select(this).classed("hover",!1),dispatch.elementMouseout({value:getY(d,i),point:d,series:data[d.series],pointIndex:i,seriesIndex:d.series,e:d3.event})}).on("click",function(d,i){dispatch.elementClick({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(stacked?data.length/2:d.series+.5)/data.length,y(getY(d,i)+(stacked?d.y0:0))],pointIndex:i,seriesIndex:d.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(d,i){dispatch.elementDblClick({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(stacked?data.length/2:d.series+.5)/data.length,y(getY(d,i)+(stacked?d.y0:0))],pointIndex:i,seriesIndex:d.series,e:d3.event}),d3.event.stopPropagation()}),bars.attr("class",function(d,i){return getY(d,i)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(d,i){return"translate("+x(getX(d,i))+",0)"}),barColor&&(disabled||(disabled=data.map(function(){return!0})),bars.style("fill",function(d,i,j){return d3.rgb(barColor(d,i)).darker(disabled.map(function(d,i){return i}).filter(function(d,i){return!disabled[i]})[j]).toString()}).style("stroke",function(d,i,j){return d3.rgb(barColor(d,i)).darker(disabled.map(function(d,i){return i}).filter(function(d,i){return!disabled[i]})[j]).toString()})),stacked?bars.transition().delay(function(d,i){return i*delay/data[0].values.length}).attr("y",function(d){return y(stacked?d.y1:0)}).attr("height",function(d){return Math.max(Math.abs(y(d.y+(stacked?d.y0:0))-y(stacked?d.y0:0)),1)}).attr("x",function(d){return stacked?0:d.series*x.rangeBand()/data.length}).attr("width",x.rangeBand()/(stacked?1:data.length)):bars.transition().delay(function(d,i){return i*delay/data[0].values.length}).attr("x",function(d){return d.series*x.rangeBand()/data.length}).attr("width",x.rangeBand()/data.length).attr("y",function(d,i){return getY(d,i)<0?y(0):y(0)-y(getY(d,i))<1?y(0)-1:y(getY(d,i))||0}).attr("height",function(d,i){return Math.max(Math.abs(y(getY(d,i))-y(0)),1)||0}),x0=x.copy(),y0=y.copy()}),chart}var disabled,xDomain,yDomain,xRange,yRange,x0,y0,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,x=d3.scale.ordinal(),y=d3.scale.linear(),id=Math.floor(1e4*Math.random()),getX=function(d){return d.x},getY=function(d){return d.y},forceY=[0],clipEdge=!0,stacked=!1,stackOffset="zero",color=nv.utils.defaultColor(),hideable=!1,barColor=null,delay=1200,groupSpacing=.1,dispatch=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,chart):getX},chart.y=function(_){return arguments.length?(getY=_,chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.forceY=function(_){return arguments.length?(forceY=_,chart):forceY},chart.stacked=function(_){return arguments.length?(stacked=_,chart):stacked},chart.stackOffset=function(_){return arguments.length?(stackOffset=_,chart):stackOffset},chart.clipEdge=function(_){return arguments.length?(clipEdge=_,chart):clipEdge},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.barColor=function(_){return arguments.length?(barColor=nv.utils.getColor(_),chart):barColor},chart.disabled=function(_){return arguments.length?(disabled=_,chart):disabled},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.hideable=function(_){return arguments.length?(hideable=_,chart):hideable},chart.delay=function(_){return arguments.length?(delay=_,chart):delay},chart.groupSpacing=function(_){return arguments.length?(groupSpacing=_,chart):groupSpacing},chart},nv.models.multiBarChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=multibar.xScale(),y=multibar.yScale();var wrap=container.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),g=wrap.select("g");if(gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-barsWrap"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-controlsWrap"),showLegend&&(legend.width(availableWidth-controlWidth()),multibar.barColor()&&data.forEach(function(series,i){series.color=d3.rgb("#ccc").darker(1.5*i).toString()}),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".nv-legendWrap").attr("transform","translate("+controlWidth()+","+-margin.top+")")),showControls){var controlsData=[{key:"Grouped",disabled:multibar.stacked()},{key:"Stacked",disabled:!multibar.stacked()}];controls.width(controlWidth()).color(["#444","#444","#444"]),g.select(".nv-controlsWrap").datum(controlsData).attr("transform","translate(0,"+-margin.top+")").call(controls)}wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),multibar.disabled(data.map(function(series){return series.disabled})).width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled}));var barsWrap=g.select(".nv-barsWrap").datum(data.filter(function(d){return!d.disabled}));if(barsWrap.transition().call(multibar),showXAxis){xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),g.select(".nv-x.nv-axis").transition().call(xAxis);var xTicks=g.select(".nv-x.nv-axis > g").selectAll("g");if(xTicks.selectAll("line, text").style("opacity",1),staggerLabels){var getTranslate=function(x,y){return"translate("+x+","+y+")"},staggerUp=5,staggerDown=17;xTicks.selectAll("text").attr("transform",function(d,i,j){return getTranslate(0,j%2==0?staggerUp:staggerDown)});var totalInBetweenTicks=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;g.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(d,i){return getTranslate(0,0===i||totalInBetweenTicks%2!==0?staggerDown:staggerUp)})}reduceXTicks&&xTicks.filter(function(d,i){return i%Math.ceil(data[0].values.length/(availableWidth/100))!==0}).selectAll("text, line").style("opacity",0),rotateLabels&&xTicks.selectAll(".tick text").attr("transform","rotate("+rotateLabels+" 0,0)").style("text-anchor",rotateLabels>0?"start":"end"),g.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}showYAxis&&(yAxis.scale(y).ticks(availableHeight/36).tickSize(-availableWidth,0),g.select(".nv-y.nv-axis").transition().call(yAxis)),legend.dispatch.on("stateChange",function(newState){state=newState,dispatch.stateChange(state),chart.update()}),controls.dispatch.on("legendClick",function(d){if(d.disabled){switch(controlsData=controlsData.map(function(s){return s.disabled=!0,s}),d.disabled=!1,d.key){case"Grouped":multibar.stacked(!1);break;case"Stacked":multibar.stacked(!0)}state.stacked=multibar.stacked(),dispatch.stateChange(state),chart.update()}}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),"undefined"!=typeof e.stacked&&(multibar.stacked(e.stacked),state.stacked=e.stacked),chart.update()})}),chart}var x,y,multibar=nv.models.multiBar(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),controls=nv.models.legend(),margin={top:30,right:20,bottom:50,left:60},width=null,height=null,color=nv.utils.defaultColor(),showControls=!0,showLegend=!0,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,reduceXTicks=!0,staggerLabels=!1,rotateLabels=0,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" on "+x+"</p>"},state={stacked:!1},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),controlWidth=function(){return showControls?180:0},transitionDuration=250;multibar.stacked(!1),xAxis.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(d){return d}),yAxis.orient(rightAlignYAxis?"right":"left").tickFormat(d3.format(",.1f")),controls.updateState(!1);var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(multibar.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(multibar.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"n":"s",null,offsetElement)};return multibar.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),multibar.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.multibar=multibar,chart.legend=legend,chart.xAxis=xAxis,chart.yAxis=yAxis,d3.rebind(chart,multibar,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin
},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showControls=function(_){return arguments.length?(showControls=_,chart):showControls},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.reduceXTicks=function(_){return arguments.length?(reduceXTicks=_,chart):reduceXTicks},chart.rotateLabels=function(_){return arguments.length?(rotateLabels=_,chart):rotateLabels},chart.staggerLabels=function(_){return arguments.length?(staggerLabels=_,chart):staggerLabels},chart.tooltip=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.multiBarHorizontal=function(){"use strict";function chart(selection){return selection.each(function(data){{var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom;d3.select(this)}stacked&&(data=d3.layout.stack().offset("zero").values(function(d){return d.values}).y(getY)(data)),data.forEach(function(series,i){series.values.forEach(function(point){point.series=i})}),stacked&&data[0].values.map(function(d,i){var posBase=0,negBase=0;data.map(function(d){var f=d.values[i];f.size=Math.abs(f.y),f.y<0?(f.y1=negBase-f.size,negBase-=f.size):(f.y1=posBase,posBase+=f.size)})});var seriesData=xDomain&&yDomain?[]:data.map(function(d){return d.values.map(function(d,i){return{x:getX(d,i),y:getY(d,i),y0:d.y0,y1:d.y1}})});x.domain(xDomain||d3.merge(seriesData).map(function(d){return d.x})).rangeBands(xRange||[0,availableHeight],.1),y.domain(yDomain||d3.extent(d3.merge(seriesData).map(function(d){return stacked?d.y>0?d.y1+d.y:d.y1:d.y}).concat(forceY))),y.range(showValues&&!stacked?yRange||[y.domain()[0]<0?valuePadding:0,availableWidth-(y.domain()[1]>0?valuePadding:0)]:yRange||[0,availableWidth]),x0=x0||x,y0=y0||d3.scale.linear().domain(y.domain()).range([y(0),y(0)]);{var wrap=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),gEnter=(wrapEnter.append("defs"),wrapEnter.append("g"));wrap.select("g")}gEnter.append("g").attr("class","nv-groups"),wrap.attr("transform","translate("+margin.left+","+margin.top+")");var groups=wrap.select(".nv-groups").selectAll(".nv-group").data(function(d){return d},function(d,i){return i});groups.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),groups.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),groups.attr("class",function(d,i){return"nv-group nv-series-"+i}).classed("hover",function(d){return d.hover}).style("fill",function(d,i){return color(d,i)}).style("stroke",function(d,i){return color(d,i)}),groups.transition().style("stroke-opacity",1).style("fill-opacity",.75);var bars=groups.selectAll("g.nv-bar").data(function(d){return d.values});bars.exit().remove();var barsEnter=bars.enter().append("g").attr("transform",function(d,i,j){return"translate("+y0(stacked?d.y0:0)+","+(stacked?0:j*x.rangeBand()/data.length+x(getX(d,i)))+")"});barsEnter.append("rect").attr("width",0).attr("height",x.rangeBand()/(stacked?1:data.length)),bars.on("mouseover",function(d,i){d3.select(this).classed("hover",!0),dispatch.elementMouseover({value:getY(d,i),point:d,series:data[d.series],pos:[y(getY(d,i)+(stacked?d.y0:0)),x(getX(d,i))+x.rangeBand()*(stacked?data.length/2:d.series+.5)/data.length],pointIndex:i,seriesIndex:d.series,e:d3.event})}).on("mouseout",function(d,i){d3.select(this).classed("hover",!1),dispatch.elementMouseout({value:getY(d,i),point:d,series:data[d.series],pointIndex:i,seriesIndex:d.series,e:d3.event})}).on("click",function(d,i){dispatch.elementClick({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(stacked?data.length/2:d.series+.5)/data.length,y(getY(d,i)+(stacked?d.y0:0))],pointIndex:i,seriesIndex:d.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(d,i){dispatch.elementDblClick({value:getY(d,i),point:d,series:data[d.series],pos:[x(getX(d,i))+x.rangeBand()*(stacked?data.length/2:d.series+.5)/data.length,y(getY(d,i)+(stacked?d.y0:0))],pointIndex:i,seriesIndex:d.series,e:d3.event}),d3.event.stopPropagation()}),barsEnter.append("text"),showValues&&!stacked?(bars.select("text").attr("text-anchor",function(d,i){return getY(d,i)<0?"end":"start"}).attr("y",x.rangeBand()/(2*data.length)).attr("dy",".32em").text(function(d,i){return valueFormat(getY(d,i))}),bars.transition().select("text").attr("x",function(d,i){return getY(d,i)<0?-4:y(getY(d,i))-y(0)+4})):bars.selectAll("text").text(""),showBarLabels&&!stacked?(barsEnter.append("text").classed("nv-bar-label",!0),bars.select("text.nv-bar-label").attr("text-anchor",function(d,i){return getY(d,i)<0?"start":"end"}).attr("y",x.rangeBand()/(2*data.length)).attr("dy",".32em").text(function(d,i){return getX(d,i)}),bars.transition().select("text.nv-bar-label").attr("x",function(d,i){return getY(d,i)<0?y(0)-y(getY(d,i))+4:-4})):bars.selectAll("text.nv-bar-label").text(""),bars.attr("class",function(d,i){return getY(d,i)<0?"nv-bar negative":"nv-bar positive"}),barColor&&(disabled||(disabled=data.map(function(){return!0})),bars.style("fill",function(d,i,j){return d3.rgb(barColor(d,i)).darker(disabled.map(function(d,i){return i}).filter(function(d,i){return!disabled[i]})[j]).toString()}).style("stroke",function(d,i,j){return d3.rgb(barColor(d,i)).darker(disabled.map(function(d,i){return i}).filter(function(d,i){return!disabled[i]})[j]).toString()})),stacked?bars.transition().attr("transform",function(d,i){return"translate("+y(d.y1)+","+x(getX(d,i))+")"}).select("rect").attr("width",function(d,i){return Math.abs(y(getY(d,i)+d.y0)-y(d.y0))}).attr("height",x.rangeBand()):bars.transition().attr("transform",function(d,i){return"translate("+y(getY(d,i)<0?getY(d,i):0)+","+(d.series*x.rangeBand()/data.length+x(getX(d,i)))+")"}).select("rect").attr("height",x.rangeBand()/data.length).attr("width",function(d,i){return Math.max(Math.abs(y(getY(d,i))-y(0)),1)}),x0=x.copy(),y0=y.copy()}),chart}var disabled,xDomain,yDomain,xRange,yRange,x0,y0,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,id=Math.floor(1e4*Math.random()),x=d3.scale.ordinal(),y=d3.scale.linear(),getX=function(d){return d.x},getY=function(d){return d.y},forceY=[0],color=nv.utils.defaultColor(),barColor=null,stacked=!1,showValues=!1,showBarLabels=!1,valuePadding=60,valueFormat=d3.format(",.2f"),delay=1200,dispatch=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,chart):getX},chart.y=function(_){return arguments.length?(getY=_,chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.forceY=function(_){return arguments.length?(forceY=_,chart):forceY},chart.stacked=function(_){return arguments.length?(stacked=_,chart):stacked},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.barColor=function(_){return arguments.length?(barColor=nv.utils.getColor(_),chart):barColor},chart.disabled=function(_){return arguments.length?(disabled=_,chart):disabled},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.delay=function(_){return arguments.length?(delay=_,chart):delay},chart.showValues=function(_){return arguments.length?(showValues=_,chart):showValues},chart.showBarLabels=function(_){return arguments.length?(showBarLabels=_,chart):showBarLabels},chart.valueFormat=function(_){return arguments.length?(valueFormat=_,chart):valueFormat},chart.valuePadding=function(_){return arguments.length?(valuePadding=_,chart):valuePadding},chart},nv.models.multiBarHorizontalChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=multibar.xScale(),y=multibar.yScale();var wrap=container.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),g=wrap.select("g");if(gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),gEnter.append("g").attr("class","nv-barsWrap"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-controlsWrap"),showLegend&&(legend.width(availableWidth-controlWidth()),multibar.barColor()&&data.forEach(function(series,i){series.color=d3.rgb("#ccc").darker(1.5*i).toString()}),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".nv-legendWrap").attr("transform","translate("+controlWidth()+","+-margin.top+")")),showControls){var controlsData=[{key:"Grouped",disabled:multibar.stacked()},{key:"Stacked",disabled:!multibar.stacked()}];controls.width(controlWidth()).color(["#444","#444","#444"]),g.select(".nv-controlsWrap").datum(controlsData).attr("transform","translate(0,"+-margin.top+")").call(controls)}wrap.attr("transform","translate("+margin.left+","+margin.top+")"),multibar.disabled(data.map(function(series){return series.disabled})).width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled}));var barsWrap=g.select(".nv-barsWrap").datum(data.filter(function(d){return!d.disabled}));if(barsWrap.transition().call(multibar),showXAxis){xAxis.scale(x).ticks(availableHeight/24).tickSize(-availableWidth,0),g.select(".nv-x.nv-axis").transition().call(xAxis);var xTicks=g.select(".nv-x.nv-axis").selectAll("g");xTicks.selectAll("line, text")}showYAxis&&(yAxis.scale(y).ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-y.nv-axis").attr("transform","translate(0,"+availableHeight+")"),g.select(".nv-y.nv-axis").transition().call(yAxis)),g.select(".nv-zeroLine line").attr("x1",y(0)).attr("x2",y(0)).attr("y1",0).attr("y2",-availableHeight),legend.dispatch.on("stateChange",function(newState){state=newState,dispatch.stateChange(state),chart.update()}),controls.dispatch.on("legendClick",function(d){if(d.disabled){switch(controlsData=controlsData.map(function(s){return s.disabled=!0,s}),d.disabled=!1,d.key){case"Grouped":multibar.stacked(!1);break;case"Stacked":multibar.stacked(!0)}state.stacked=multibar.stacked(),dispatch.stateChange(state),chart.update()}}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),"undefined"!=typeof e.stacked&&(multibar.stacked(e.stacked),state.stacked=e.stacked),chart.update()})}),chart}var x,y,multibar=nv.models.multiBarHorizontal(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend().height(30),controls=nv.models.legend().height(30),margin={top:30,right:20,bottom:50,left:60},width=null,height=null,color=nv.utils.defaultColor(),showControls=!0,showLegend=!0,showXAxis=!0,showYAxis=!0,stacked=!1,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+" - "+x+"</h3><p>"+y+"</p>"},state={stacked:stacked},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),controlWidth=function(){return showControls?180:0},transitionDuration=250;multibar.stacked(stacked),xAxis.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(d){return d}),yAxis.orient("bottom").tickFormat(d3.format(",.1f")),controls.updateState(!1);var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(multibar.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(multibar.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"e":"w",null,offsetElement)};return multibar.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),multibar.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.multibar=multibar,chart.legend=legend,chart.xAxis=xAxis,chart.yAxis=yAxis,d3.rebind(chart,multibar,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),chart):color},chart.showControls=function(_){return arguments.length?(showControls=_,chart):showControls},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.tooltip=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.multiChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this;chart.update=function(){container.transition().call(chart)},chart.container=this;var availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom,dataLines1=data.filter(function(d){return!d.disabled&&"line"==d.type&&1==d.yAxis}),dataLines2=data.filter(function(d){return!d.disabled&&"line"==d.type&&2==d.yAxis}),dataBars1=data.filter(function(d){return!d.disabled&&"bar"==d.type&&1==d.yAxis}),dataBars2=data.filter(function(d){return!d.disabled&&"bar"==d.type&&2==d.yAxis}),dataStack1=data.filter(function(d){return!d.disabled&&"area"==d.type&&1==d.yAxis}),dataStack2=data.filter(function(d){return!d.disabled&&"area"==d.type&&2==d.yAxis}),series1=data.filter(function(d){return!d.disabled&&1==d.yAxis}).map(function(d){return d.values.map(function(d){return{x:d.x,y:d.y}})}),series2=data.filter(function(d){return!d.disabled&&2==d.yAxis}).map(function(d){return d.values.map(function(d){return{x:d.x,y:d.y}})});x.domain(d3.extent(d3.merge(series1.concat(series2)),function(d){return d.x})).range([0,availableWidth]);var wrap=container.selectAll("g.wrap.multiChart").data([data]),gEnter=wrap.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");gEnter.append("g").attr("class","x axis"),gEnter.append("g").attr("class","y1 axis"),gEnter.append("g").attr("class","y2 axis"),gEnter.append("g").attr("class","lines1Wrap"),gEnter.append("g").attr("class","lines2Wrap"),gEnter.append("g").attr("class","bars1Wrap"),gEnter.append("g").attr("class","bars2Wrap"),gEnter.append("g").attr("class","stack1Wrap"),gEnter.append("g").attr("class","stack2Wrap"),gEnter.append("g").attr("class","legendWrap");var g=wrap.select("g");showLegend&&(legend.width(availableWidth/2),g.select(".legendWrap").datum(data.map(function(series){return series.originalKey=void 0===series.originalKey?series.key:series.originalKey,series.key=series.originalKey+(1==series.yAxis?"":" (right axis)"),series})).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".legendWrap").attr("transform","translate("+availableWidth/2+","+-margin.top+")")),lines1.width(availableWidth).height(availableHeight).interpolate("monotone").color(data.map(function(d,i){return d.color||color[i%color.length]}).filter(function(d,i){return!data[i].disabled&&1==data[i].yAxis&&"line"==data[i].type})),lines2.width(availableWidth).height(availableHeight).interpolate("monotone").color(data.map(function(d,i){return d.color||color[i%color.length]}).filter(function(d,i){return!data[i].disabled&&2==data[i].yAxis&&"line"==data[i].type})),bars1.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color[i%color.length]}).filter(function(d,i){return!data[i].disabled&&1==data[i].yAxis&&"bar"==data[i].type})),bars2.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color[i%color.length]}).filter(function(d,i){return!data[i].disabled&&2==data[i].yAxis&&"bar"==data[i].type})),stack1.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color[i%color.length]}).filter(function(d,i){return!data[i].disabled&&1==data[i].yAxis&&"area"==data[i].type})),stack2.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color[i%color.length]}).filter(function(d,i){return!data[i].disabled&&2==data[i].yAxis&&"area"==data[i].type})),g.attr("transform","translate("+margin.left+","+margin.top+")");var lines1Wrap=g.select(".lines1Wrap").datum(dataLines1),bars1Wrap=g.select(".bars1Wrap").datum(dataBars1),stack1Wrap=g.select(".stack1Wrap").datum(dataStack1),lines2Wrap=g.select(".lines2Wrap").datum(dataLines2),bars2Wrap=g.select(".bars2Wrap").datum(dataBars2),stack2Wrap=g.select(".stack2Wrap").datum(dataStack2),extraValue1=dataStack1.length?dataStack1.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(aVal,i){return{x:aVal.x,y:aVal.y+b[i].y}})}).concat([{x:0,y:0}]):[],extraValue2=dataStack2.length?dataStack2.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(aVal,i){return{x:aVal.x,y:aVal.y+b[i].y}})}).concat([{x:0,y:0}]):[];yScale1.domain(yDomain1||d3.extent(d3.merge(series1).concat(extraValue1),function(d){return d.y})).range([0,availableHeight]),yScale2.domain(yDomain2||d3.extent(d3.merge(series2).concat(extraValue2),function(d){return d.y})).range([0,availableHeight]),lines1.yDomain(yScale1.domain()),bars1.yDomain(yScale1.domain()),stack1.yDomain(yScale1.domain()),lines2.yDomain(yScale2.domain()),bars2.yDomain(yScale2.domain()),stack2.yDomain(yScale2.domain()),dataStack1.length&&d3.transition(stack1Wrap).call(stack1),dataStack2.length&&d3.transition(stack2Wrap).call(stack2),dataBars1.length&&d3.transition(bars1Wrap).call(bars1),dataBars2.length&&d3.transition(bars2Wrap).call(bars2),dataLines1.length&&d3.transition(lines1Wrap).call(lines1),dataLines2.length&&d3.transition(lines2Wrap).call(lines2),xAxis.ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".x.axis").attr("transform","translate(0,"+availableHeight+")"),d3.transition(g.select(".x.axis")).call(xAxis),yAxis1.ticks(availableHeight/36).tickSize(-availableWidth,0),d3.transition(g.select(".y1.axis")).call(yAxis1),yAxis2.ticks(availableHeight/36).tickSize(-availableWidth,0),d3.transition(g.select(".y2.axis")).call(yAxis2),g.select(".y2.axis").style("opacity",series2.length?1:0).attr("transform","translate("+x.range()[1]+",0)"),legend.dispatch.on("stateChange",function(){chart.update()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)})}),chart}var x,yDomain1,yDomain2,margin={top:30,right:20,bottom:50,left:60},color=d3.scale.category20().range(),width=null,height=null,showLegend=!0,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" at "+x+"</p>"},x=d3.scale.linear(),yScale1=d3.scale.linear(),yScale2=d3.scale.linear(),lines1=nv.models.line().yScale(yScale1),lines2=nv.models.line().yScale(yScale2),bars1=nv.models.multiBar().stacked(!1).yScale(yScale1),bars2=nv.models.multiBar().stacked(!1).yScale(yScale2),stack1=nv.models.stackedArea().yScale(yScale1),stack2=nv.models.stackedArea().yScale(yScale2),xAxis=nv.models.axis().scale(x).orient("bottom").tickPadding(5),yAxis1=nv.models.axis().scale(yScale1).orient("left"),yAxis2=nv.models.axis().scale(yScale2).orient("right"),legend=nv.models.legend().height(30),dispatch=d3.dispatch("tooltipShow","tooltipHide"),showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(lines1.x()(e.point,e.pointIndex)),y=(2==e.series.yAxis?yAxis2:yAxis1).tickFormat()(lines1.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,void 0,void 0,offsetElement.offsetParent)};return lines1.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines1.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),lines2.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines2.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),bars1.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),bars1.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),bars2.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),bars2.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),stack1.dispatch.on("tooltipShow",function(e){return Math.round(100*stack1.y()(e.point))?(e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],void dispatch.tooltipShow(e)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),stack1.dispatch.on("tooltipHide",function(e){dispatch.tooltipHide(e)}),stack2.dispatch.on("tooltipShow",function(e){return Math.round(100*stack2.y()(e.point))?(e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],void dispatch.tooltipShow(e)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),stack2.dispatch.on("tooltipHide",function(e){dispatch.tooltipHide(e)}),lines1.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines1.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),lines2.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),lines2.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.lines1=lines1,chart.lines2=lines2,chart.bars1=bars1,chart.bars2=bars2,chart.stack1=stack1,chart.stack2=stack2,chart.xAxis=xAxis,chart.yAxis1=yAxis1,chart.yAxis2=yAxis2,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,lines1.x(_),bars1.x(_),chart):getX},chart.y=function(_){return arguments.length?(getY=_,lines1.y(_),bars1.y(_),chart):getY},chart.yDomain1=function(_){return arguments.length?(yDomain1=_,chart):yDomain1},chart.yDomain2=function(_){return arguments.length?(yDomain2=_,chart):yDomain2},chart.margin=function(_){return arguments.length?(margin=_,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=_,legend.color(_),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart},nv.models.ohlcBar=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);x.domain(xDomain||d3.extent(data[0].values.map(getX).concat(forceX))),x.range(padData?xRange||[.5*availableWidth/data[0].values.length,availableWidth*(data[0].values.length-.5)/data[0].values.length]:xRange||[0,availableWidth]),y.domain(yDomain||[d3.min(data[0].values.map(getLow).concat(forceY)),d3.max(data[0].values.map(getHigh).concat(forceY))]).range(yRange||[availableHeight,0]),x.domain()[0]===x.domain()[1]&&x.domain(x.domain()[0]?[x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]:[-1,1]),y.domain()[0]===y.domain()[1]&&y.domain(y.domain()[0]?[y.domain()[0]+.01*y.domain()[0],y.domain()[1]-.01*y.domain()[1]]:[-1,1]);var wrap=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([data[0].values]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),defsEnter=wrapEnter.append("defs"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-ticks"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),container.on("click",function(d,i){dispatch.chartClick({data:d,index:i,pos:d3.event,id:id})}),defsEnter.append("clipPath").attr("id","nv-chart-clip-path-"+id).append("rect"),wrap.select("#nv-chart-clip-path-"+id+" rect").attr("width",availableWidth).attr("height",availableHeight),g.attr("clip-path",clipEdge?"url(#nv-chart-clip-path-"+id+")":"");var ticks=wrap.select(".nv-ticks").selectAll(".nv-tick").data(function(d){return d});ticks.exit().remove();ticks.enter().append("path").attr("class",function(d,i,j){return(getOpen(d,i)>getClose(d,i)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+j+"-"+i}).attr("d",function(d,i){var w=availableWidth/data[0].values.length*.9;return"m0,0l0,"+(y(getOpen(d,i))-y(getHigh(d,i)))+"l"+-w/2+",0l"+w/2+",0l0,"+(y(getLow(d,i))-y(getOpen(d,i)))+"l0,"+(y(getClose(d,i))-y(getLow(d,i)))+"l"+w/2+",0l"+-w/2+",0z"}).attr("transform",function(d,i){return"translate("+x(getX(d,i))+","+y(getHigh(d,i))+")"}).on("mouseover",function(d,i){d3.select(this).classed("hover",!0),dispatch.elementMouseover({point:d,series:data[0],pos:[x(getX(d,i)),y(getY(d,i))],pointIndex:i,seriesIndex:0,e:d3.event})}).on("mouseout",function(d,i){d3.select(this).classed("hover",!1),dispatch.elementMouseout({point:d,series:data[0],pointIndex:i,seriesIndex:0,e:d3.event})}).on("click",function(d,i){dispatch.elementClick({value:getY(d,i),data:d,index:i,pos:[x(getX(d,i)),y(getY(d,i))],e:d3.event,id:id}),d3.event.stopPropagation()}).on("dblclick",function(d,i){dispatch.elementDblClick({value:getY(d,i),data:d,index:i,pos:[x(getX(d,i)),y(getY(d,i))],e:d3.event,id:id}),d3.event.stopPropagation()});ticks.attr("class",function(d,i,j){return(getOpen(d,i)>getClose(d,i)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+j+"-"+i}),d3.transition(ticks).attr("transform",function(d,i){return"translate("+x(getX(d,i))+","+y(getHigh(d,i))+")"}).attr("d",function(d,i){var w=availableWidth/data[0].values.length*.9;return"m0,0l0,"+(y(getOpen(d,i))-y(getHigh(d,i)))+"l"+-w/2+",0l"+w/2+",0l0,"+(y(getLow(d,i))-y(getOpen(d,i)))+"l0,"+(y(getClose(d,i))-y(getLow(d,i)))+"l"+w/2+",0l"+-w/2+",0z"})}),chart}var xDomain,yDomain,xRange,yRange,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,id=Math.floor(1e4*Math.random()),x=d3.scale.linear(),y=d3.scale.linear(),getX=function(d){return d.x},getY=function(d){return d.y},getOpen=function(d){return d.open},getClose=function(d){return d.close},getHigh=function(d){return d.high},getLow=function(d){return d.low},forceX=[],forceY=[],padData=!1,clipEdge=!0,color=nv.utils.defaultColor(),dispatch=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=_,chart):getX},chart.y=function(_){return arguments.length?(getY=_,chart):getY},chart.open=function(_){return arguments.length?(getOpen=_,chart):getOpen},chart.close=function(_){return arguments.length?(getClose=_,chart):getClose},chart.high=function(_){return arguments.length?(getHigh=_,chart):getHigh},chart.low=function(_){return arguments.length?(getLow=_,chart):getLow},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height
},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.forceX=function(_){return arguments.length?(forceX=_,chart):forceX},chart.forceY=function(_){return arguments.length?(forceY=_,chart):forceY},chart.padData=function(_){return arguments.length?(padData=_,chart):padData},chart.clipEdge=function(_){return arguments.length?(clipEdge=_,chart):clipEdge},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.id=function(_){return arguments.length?(id=_,chart):id},chart},nv.models.pie=function(){"use strict";function chart(selection){return selection.each(function(data){function arcTween(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle,a.startAngle=isNaN(a.startAngle)?0:a.startAngle,donut||(a.innerRadius=0);var i=d3.interpolate(this._current,a);return this._current=i(0),function(t){return arc(i(t))}}var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,radius=Math.min(availableWidth,availableHeight)/2,arcRadius=radius-radius/5,container=d3.select(this),wrap=container.selectAll(".nv-wrap.nv-pie").data(data),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+id),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-pie"),gEnter.append("g").attr("class","nv-pieLabels"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),g.select(".nv-pie").attr("transform","translate("+availableWidth/2+","+availableHeight/2+")"),g.select(".nv-pieLabels").attr("transform","translate("+availableWidth/2+","+availableHeight/2+")"),container.on("click",function(d,i){dispatch.chartClick({data:d,index:i,pos:d3.event,id:id})});var arc=d3.svg.arc().outerRadius(arcRadius);startAngle&&arc.startAngle(startAngle),endAngle&&arc.endAngle(endAngle),donut&&arc.innerRadius(radius*donutRatio);var pie=d3.layout.pie().sort(null).value(function(d){return d.disabled?0:getY(d)}),slices=wrap.select(".nv-pie").selectAll(".nv-slice").data(pie),pieLabels=wrap.select(".nv-pieLabels").selectAll(".nv-label").data(pie);slices.exit().remove(),pieLabels.exit().remove();var ae=slices.enter().append("g").attr("class","nv-slice").on("mouseover",function(d,i){d3.select(this).classed("hover",!0),dispatch.elementMouseover({label:getX(d.data),value:getY(d.data),point:d.data,pointIndex:i,pos:[d3.event.pageX,d3.event.pageY],id:id})}).on("mouseout",function(d,i){d3.select(this).classed("hover",!1),dispatch.elementMouseout({label:getX(d.data),value:getY(d.data),point:d.data,index:i,id:id})}).on("click",function(d,i){dispatch.elementClick({label:getX(d.data),value:getY(d.data),point:d.data,index:i,pos:d3.event,id:id}),d3.event.stopPropagation()}).on("dblclick",function(d,i){dispatch.elementDblClick({label:getX(d.data),value:getY(d.data),point:d.data,index:i,pos:d3.event,id:id}),d3.event.stopPropagation()});slices.attr("fill",function(d,i){return color(d,i)}).attr("stroke",function(d,i){return color(d,i)});ae.append("path").each(function(d){this._current=d});if(slices.select("path").transition().attr("d",arc).attrTween("d",arcTween),showLabels){var labelsArc=d3.svg.arc().innerRadius(0);pieLabelsOutside&&(labelsArc=arc),donutLabelsOutside&&(labelsArc=d3.svg.arc().outerRadius(arc.outerRadius())),pieLabels.enter().append("g").classed("nv-label",!0).each(function(d){var group=d3.select(this);group.attr("transform",function(d){if(labelSunbeamLayout){d.outerRadius=arcRadius+10,d.innerRadius=arcRadius+15;var rotateAngle=(d.startAngle+d.endAngle)/2*(180/Math.PI);return(d.startAngle+d.endAngle)/2<Math.PI?rotateAngle-=90:rotateAngle+=90,"translate("+labelsArc.centroid(d)+") rotate("+rotateAngle+")"}return d.outerRadius=radius+10,d.innerRadius=radius+15,"translate("+labelsArc.centroid(d)+")"}),group.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),group.append("text").style("text-anchor",labelSunbeamLayout?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var labelLocationHash={},avgHeight=14,avgWidth=140,createHashKey=function(coordinates){return Math.floor(coordinates[0]/avgWidth)*avgWidth+","+Math.floor(coordinates[1]/avgHeight)*avgHeight};pieLabels.transition().attr("transform",function(d){if(labelSunbeamLayout){d.outerRadius=arcRadius+10,d.innerRadius=arcRadius+15;var rotateAngle=(d.startAngle+d.endAngle)/2*(180/Math.PI);return(d.startAngle+d.endAngle)/2<Math.PI?rotateAngle-=90:rotateAngle+=90,"translate("+labelsArc.centroid(d)+") rotate("+rotateAngle+")"}d.outerRadius=radius+10,d.innerRadius=radius+15;var center=labelsArc.centroid(d),hashKey=createHashKey(center);return labelLocationHash[hashKey]&&(center[1]-=avgHeight),labelLocationHash[createHashKey(center)]=!0,"translate("+center+")"}),pieLabels.select(".nv-label text").style("text-anchor",labelSunbeamLayout?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(d){var percent=(d.endAngle-d.startAngle)/(2*Math.PI),labelTypes={key:getX(d.data),value:getY(d.data),percent:d3.format("%")(percent)};return d.value&&percent>labelThreshold?labelTypes[labelType]:""})}}),chart}var margin={top:0,right:0,bottom:0,left:0},width=500,height=500,getX=function(d){return d.x},getY=function(d){return d.y},getDescription=function(d){return d.description},id=Math.floor(1e4*Math.random()),color=nv.utils.defaultColor(),valueFormat=d3.format(",.2f"),showLabels=!0,pieLabelsOutside=!0,donutLabelsOutside=!1,labelType="key",labelThreshold=.02,donut=!1,labelSunbeamLayout=!1,startAngle=!1,endAngle=!1,donutRatio=.5,dispatch=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.values=function(){return nv.log("pie.values() is no longer supported."),chart},chart.x=function(_){return arguments.length?(getX=_,chart):getX},chart.y=function(_){return arguments.length?(getY=d3.functor(_),chart):getY},chart.description=function(_){return arguments.length?(getDescription=_,chart):getDescription},chart.showLabels=function(_){return arguments.length?(showLabels=_,chart):showLabels},chart.labelSunbeamLayout=function(_){return arguments.length?(labelSunbeamLayout=_,chart):labelSunbeamLayout},chart.donutLabelsOutside=function(_){return arguments.length?(donutLabelsOutside=_,chart):donutLabelsOutside},chart.pieLabelsOutside=function(_){return arguments.length?(pieLabelsOutside=_,chart):pieLabelsOutside},chart.labelType=function(_){return arguments.length?(labelType=_,labelType=labelType||"key",chart):labelType},chart.donut=function(_){return arguments.length?(donut=_,chart):donut},chart.donutRatio=function(_){return arguments.length?(donutRatio=_,chart):donutRatio},chart.startAngle=function(_){return arguments.length?(startAngle=_,chart):startAngle},chart.endAngle=function(_){return arguments.length?(endAngle=_,chart):endAngle},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.valueFormat=function(_){return arguments.length?(valueFormat=_,chart):valueFormat},chart.labelThreshold=function(_){return arguments.length?(labelThreshold=_,chart):labelThreshold},chart},nv.models.pieChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!data||!data.length){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove();var wrap=container.selectAll("g.nv-wrap.nv-pieChart").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-pieWrap"),gEnter.append("g").attr("class","nv-legendWrap"),showLegend&&(legend.width(availableWidth).key(pie.x()),wrap.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),wrap.select(".nv-legendWrap").attr("transform","translate(0,"+-margin.top+")")),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),pie.width(availableWidth).height(availableHeight);var pieWrap=g.select(".nv-pieWrap").datum([data]);d3.transition(pieWrap).call(pie),legend.dispatch.on("stateChange",function(newState){state=newState,dispatch.stateChange(state),chart.update()}),pie.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),chart.update()})}),chart}var pie=nv.models.pie(),legend=nv.models.legend(),margin={top:30,right:20,bottom:20,left:20},width=null,height=null,showLegend=!0,color=nv.utils.defaultColor(),tooltips=!0,tooltip=function(key,y){return"<h3>"+key+"</h3><p>"+y+"</p>"},state={},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),showTooltip=function(e,offsetElement){var tooltipLabel=pie.description()(e.point)||pie.x()(e.point),left=e.pos[0]+(offsetElement&&offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement&&offsetElement.offsetTop||0),y=pie.valueFormat()(pie.y()(e.point)),content=tooltip(tooltipLabel,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"n":"s",null,offsetElement)};return pie.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.legend=legend,chart.dispatch=dispatch,chart.pie=pie,d3.rebind(chart,pie,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),pie.color(color),chart):color},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart},nv.models.scatter=function(){"use strict";function chart(selection){return selection.each(function(data){function updateInteractiveLayer(){if(!interactive)return!1;var vertices=d3.merge(data.map(function(group,groupIndex){return group.values.map(function(point,pointIndex){var pX=getX(point,pointIndex),pY=getY(point,pointIndex);return[x(pX)+1e-7*Math.random(),y(pY)+1e-7*Math.random(),groupIndex,pointIndex,point]}).filter(function(pointArray,pointIndex){return pointActive(pointArray[4],pointIndex)})}));if(useVoronoi===!0){if(clipVoronoi){var pointClipsEnter=wrap.select("defs").selectAll(".nv-point-clips").data([id]).enter();pointClipsEnter.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+id);var pointClips=wrap.select("#nv-points-clip-"+id).selectAll("circle").data(vertices);pointClips.enter().append("circle").attr("r",clipRadius),pointClips.exit().remove(),pointClips.attr("cx",function(d){return d[0]}).attr("cy",function(d){return d[1]}),wrap.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+id+")")}vertices.length&&(vertices.push([x.range()[0]-20,y.range()[0]-20,null,null]),vertices.push([x.range()[1]+20,y.range()[1]+20,null,null]),vertices.push([x.range()[0]-20,y.range()[0]+20,null,null]),vertices.push([x.range()[1]+20,y.range()[1]-20,null,null]));var bounds=d3.geom.polygon([[-10,-10],[-10,height+10],[width+10,height+10],[width+10,-10]]),voronoi=d3.geom.voronoi(vertices).map(function(d,i){return{data:bounds.clip(d),series:vertices[i][2],point:vertices[i][3]}}),pointPaths=wrap.select(".nv-point-paths").selectAll("path").data(voronoi);pointPaths.enter().append("path").attr("class",function(d,i){return"nv-path-"+i}),pointPaths.exit().remove(),pointPaths.attr("d",function(d){return 0===d.data.length?"M 0 0":"M"+d.data.join("L")+"Z"});var mouseEventCallback=function(d,mDispatch){if(needsUpdate)return 0;var series=data[d.series];if("undefined"!=typeof series){var point=series.values[d.point];mDispatch({point:point,series:series,pos:[x(getX(point,d.point))+margin.left,y(getY(point,d.point))+margin.top],seriesIndex:d.series,pointIndex:d.point})}};pointPaths.on("click",function(d){mouseEventCallback(d,dispatch.elementClick)}).on("mouseover",function(d){mouseEventCallback(d,dispatch.elementMouseover)}).on("mouseout",function(d){mouseEventCallback(d,dispatch.elementMouseout)})}else wrap.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(d,i){if(needsUpdate||!data[d.series])return 0;var series=data[d.series],point=series.values[i];dispatch.elementClick({point:point,series:series,pos:[x(getX(point,i))+margin.left,y(getY(point,i))+margin.top],seriesIndex:d.series,pointIndex:i})}).on("mouseover",function(d,i){if(needsUpdate||!data[d.series])return 0;var series=data[d.series],point=series.values[i];dispatch.elementMouseover({point:point,series:series,pos:[x(getX(point,i))+margin.left,y(getY(point,i))+margin.top],seriesIndex:d.series,pointIndex:i})}).on("mouseout",function(d,i){if(needsUpdate||!data[d.series])return 0;var series=data[d.series],point=series.values[i];dispatch.elementMouseout({point:point,series:series,seriesIndex:d.series,pointIndex:i})});needsUpdate=!1}var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);data.forEach(function(series,i){series.values.forEach(function(point){point.series=i})});var seriesData=xDomain&&yDomain&&sizeDomain?[]:d3.merge(data.map(function(d){return d.values.map(function(d,i){return{x:getX(d,i),y:getY(d,i),size:getSize(d,i)}})}));x.domain(xDomain||d3.extent(seriesData.map(function(d){return d.x}).concat(forceX))),x.range(padData&&data[0]?xRange||[(availableWidth*padDataOuter+availableWidth)/(2*data[0].values.length),availableWidth-availableWidth*(1+padDataOuter)/(2*data[0].values.length)]:xRange||[0,availableWidth]),y.domain(yDomain||d3.extent(seriesData.map(function(d){return d.y}).concat(forceY))).range(yRange||[availableHeight,0]),z.domain(sizeDomain||d3.extent(seriesData.map(function(d){return d.size}).concat(forceSize))).range(sizeRange||[16,256]),(x.domain()[0]===x.domain()[1]||y.domain()[0]===y.domain()[1])&&(singlePoint=!0),x.domain()[0]===x.domain()[1]&&x.domain(x.domain()[0]?[x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]:[-1,1]),y.domain()[0]===y.domain()[1]&&y.domain(y.domain()[0]?[y.domain()[0]-.01*y.domain()[0],y.domain()[1]+.01*y.domain()[1]]:[-1,1]),isNaN(x.domain()[0])&&x.domain([-1,1]),isNaN(y.domain()[0])&&y.domain([-1,1]),x0=x0||x,y0=y0||y,z0=z0||z;var wrap=container.selectAll("g.nv-wrap.nv-scatter").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+id+(singlePoint?" nv-single-point":"")),defsEnter=wrapEnter.append("defs"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-groups"),gEnter.append("g").attr("class","nv-point-paths"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),defsEnter.append("clipPath").attr("id","nv-edge-clip-"+id).append("rect"),wrap.select("#nv-edge-clip-"+id+" rect").attr("width",availableWidth).attr("height",availableHeight),g.attr("clip-path",clipEdge?"url(#nv-edge-clip-"+id+")":""),needsUpdate=!0;var groups=wrap.select(".nv-groups").selectAll(".nv-group").data(function(d){return d},function(d){return d.key});if(groups.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),groups.exit().remove(),groups.attr("class",function(d,i){return"nv-group nv-series-"+i}).classed("hover",function(d){return d.hover}),groups.transition().style("fill",function(d,i){return color(d,i)}).style("stroke",function(d,i){return color(d,i)}).style("stroke-opacity",1).style("fill-opacity",.5),onlyCircles){var points=groups.selectAll("circle.nv-point").data(function(d){return d.values},pointKey);points.enter().append("circle").style("fill",function(d){return d.color}).style("stroke",function(d){return d.color}).attr("cx",function(d,i){return nv.utils.NaNtoZero(x0(getX(d,i)))}).attr("cy",function(d,i){return nv.utils.NaNtoZero(y0(getY(d,i)))}).attr("r",function(d,i){return Math.sqrt(z(getSize(d,i))/Math.PI)}),points.exit().remove(),groups.exit().selectAll("path.nv-point").transition().attr("cx",function(d,i){return nv.utils.NaNtoZero(x(getX(d,i)))}).attr("cy",function(d,i){return nv.utils.NaNtoZero(y(getY(d,i)))}).remove(),points.each(function(d,i){d3.select(this).classed("nv-point",!0).classed("nv-point-"+i,!0).classed("hover",!1)}),points.transition().attr("cx",function(d,i){return nv.utils.NaNtoZero(x(getX(d,i)))}).attr("cy",function(d,i){return nv.utils.NaNtoZero(y(getY(d,i)))}).attr("r",function(d,i){return Math.sqrt(z(getSize(d,i))/Math.PI)})}else{var points=groups.selectAll("path.nv-point").data(function(d){return d.values});points.enter().append("path").style("fill",function(d){return d.color}).style("stroke",function(d){return d.color}).attr("transform",function(d,i){return"translate("+x0(getX(d,i))+","+y0(getY(d,i))+")"}).attr("d",d3.svg.symbol().type(getShape).size(function(d,i){return z(getSize(d,i))})),points.exit().remove(),groups.exit().selectAll("path.nv-point").transition().attr("transform",function(d,i){return"translate("+x(getX(d,i))+","+y(getY(d,i))+")"}).remove(),points.each(function(d,i){d3.select(this).classed("nv-point",!0).classed("nv-point-"+i,!0).classed("hover",!1)}),points.transition().attr("transform",function(d,i){return"translate("+x(getX(d,i))+","+y(getY(d,i))+")"}).attr("d",d3.svg.symbol().type(getShape).size(function(d,i){return z(getSize(d,i))}))}clearTimeout(timeoutID),timeoutID=setTimeout(updateInteractiveLayer,300),x0=x.copy(),y0=y.copy(),z0=z.copy()}),chart}var x0,y0,z0,timeoutID,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,color=nv.utils.defaultColor(),id=Math.floor(1e5*Math.random()),x=d3.scale.linear(),y=d3.scale.linear(),z=d3.scale.linear(),getX=function(d){return d.x},getY=function(d){return d.y},getSize=function(d){return d.size||1},getShape=function(d){return d.shape||"circle"},onlyCircles=!0,forceX=[],forceY=[],forceSize=[],interactive=!0,pointKey=null,pointActive=function(d){return!d.notActive},padData=!1,padDataOuter=.1,clipEdge=!1,clipVoronoi=!0,clipRadius=function(){return 25},xDomain=null,yDomain=null,xRange=null,yRange=null,sizeDomain=null,sizeRange=null,singlePoint=!1,dispatch=d3.dispatch("elementClick","elementMouseover","elementMouseout"),useVoronoi=!0,needsUpdate=!1;return chart.clearHighlights=function(){d3.selectAll(".nv-chart-"+id+" .nv-point.hover").classed("hover",!1)},chart.highlightPoint=function(seriesIndex,pointIndex,isHoverOver){d3.select(".nv-chart-"+id+" .nv-series-"+seriesIndex+" .nv-point-"+pointIndex).classed("hover",isHoverOver)},dispatch.on("elementMouseover.point",function(d){interactive&&chart.highlightPoint(d.seriesIndex,d.pointIndex,!0)}),dispatch.on("elementMouseout.point",function(d){interactive&&chart.highlightPoint(d.seriesIndex,d.pointIndex,!1)}),chart.dispatch=dispatch,chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=d3.functor(_),chart):getX},chart.y=function(_){return arguments.length?(getY=d3.functor(_),chart):getY},chart.size=function(_){return arguments.length?(getSize=d3.functor(_),chart):getSize},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.zScale=function(_){return arguments.length?(z=_,chart):z},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.sizeDomain=function(_){return arguments.length?(sizeDomain=_,chart):sizeDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.sizeRange=function(_){return arguments.length?(sizeRange=_,chart):sizeRange},chart.forceX=function(_){return arguments.length?(forceX=_,chart):forceX},chart.forceY=function(_){return arguments.length?(forceY=_,chart):forceY},chart.forceSize=function(_){return arguments.length?(forceSize=_,chart):forceSize},chart.interactive=function(_){return arguments.length?(interactive=_,chart):interactive},chart.pointKey=function(_){return arguments.length?(pointKey=_,chart):pointKey},chart.pointActive=function(_){return arguments.length?(pointActive=_,chart):pointActive},chart.padData=function(_){return arguments.length?(padData=_,chart):padData},chart.padDataOuter=function(_){return arguments.length?(padDataOuter=_,chart):padDataOuter},chart.clipEdge=function(_){return arguments.length?(clipEdge=_,chart):clipEdge},chart.clipVoronoi=function(_){return arguments.length?(clipVoronoi=_,chart):clipVoronoi},chart.useVoronoi=function(_){return arguments.length?(useVoronoi=_,useVoronoi===!1&&(clipVoronoi=!1),chart):useVoronoi},chart.clipRadius=function(_){return arguments.length?(clipRadius=_,chart):clipRadius},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.shape=function(_){return arguments.length?(getShape=_,chart):getShape},chart.onlyCircles=function(_){return arguments.length?(onlyCircles=_,chart):onlyCircles},chart.id=function(_){return arguments.length?(id=_,chart):id},chart.singlePoint=function(_){return arguments.length?(singlePoint=_,chart):singlePoint},chart},nv.models.scatterChart=function(){"use strict";function chart(selection){return selection.each(function(data){function updateFisheye(){if(pauseFisheye)return g.select(".nv-point-paths").style("pointer-events","all"),!1;g.select(".nv-point-paths").style("pointer-events","none");var mouse=d3.mouse(this);x.distortion(fisheye).focus(mouse[0]),y.distortion(fisheye).focus(mouse[1]),g.select(".nv-scatterWrap").call(scatter),showXAxis&&g.select(".nv-x.nv-axis").call(xAxis),showYAxis&&g.select(".nv-y.nv-axis").call(yAxis),g.select(".nv-distributionX").datum(data.filter(function(d){return!d.disabled})).call(distX),g.select(".nv-distributionY").datum(data.filter(function(d){return!d.disabled})).call(distY)}var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x0=x0||x,y0=y0||y;var wrap=container.selectAll("g.nv-wrap.nv-scatterChart").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+scatter.id()),gEnter=wrapEnter.append("g"),g=wrap.select("g");if(gEnter.append("rect").attr("class","nvd3 nv-background"),gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-scatterWrap"),gEnter.append("g").attr("class","nv-distWrap"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-controlsWrap"),showLegend){var legendWidth=showControls?availableWidth/2:availableWidth;legend.width(legendWidth),wrap.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),wrap.select(".nv-legendWrap").attr("transform","translate("+(availableWidth-legendWidth)+","+-margin.top+")")}if(showControls&&(controls.width(180).color(["#444"]),g.select(".nv-controlsWrap").datum(controlsData).attr("transform","translate(0,"+-margin.top+")").call(controls)),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),scatter.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),0!==xPadding&&scatter.xDomain(null),0!==yPadding&&scatter.yDomain(null),wrap.select(".nv-scatterWrap").datum(data.filter(function(d){return!d.disabled})).call(scatter),0!==xPadding){var xRange=x.domain()[1]-x.domain()[0];scatter.xDomain([x.domain()[0]-xPadding*xRange,x.domain()[1]+xPadding*xRange])}if(0!==yPadding){var yRange=y.domain()[1]-y.domain()[0];scatter.yDomain([y.domain()[0]-yPadding*yRange,y.domain()[1]+yPadding*yRange])}(0!==yPadding||0!==xPadding)&&wrap.select(".nv-scatterWrap").datum(data.filter(function(d){return!d.disabled})).call(scatter),showXAxis&&(xAxis.scale(x).ticks(xAxis.ticks()&&xAxis.ticks().length?xAxis.ticks():availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")").call(xAxis)),showYAxis&&(yAxis.scale(y).ticks(yAxis.ticks()&&yAxis.ticks().length?yAxis.ticks():availableHeight/36).tickSize(-availableWidth,0),g.select(".nv-y.nv-axis").call(yAxis)),showDistX&&(distX.getData(scatter.x()).scale(x).width(availableWidth).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),g.select(".nv-distributionX").attr("transform","translate(0,"+y.range()[0]+")").datum(data.filter(function(d){return!d.disabled})).call(distX)),showDistY&&(distY.getData(scatter.y()).scale(y).width(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),g.select(".nv-distributionY").attr("transform","translate("+(rightAlignYAxis?availableWidth:-distY.size())+",0)").datum(data.filter(function(d){return!d.disabled})).call(distY)),d3.fisheye&&(g.select(".nv-background").attr("width",availableWidth).attr("height",availableHeight),g.select(".nv-background").on("mousemove",updateFisheye),g.select(".nv-background").on("click",function(){pauseFisheye=!pauseFisheye}),scatter.dispatch.on("elementClick.freezeFisheye",function(){pauseFisheye=!pauseFisheye})),controls.dispatch.on("legendClick",function(d){d.disabled=!d.disabled,fisheye=d.disabled?0:2.5,g.select(".nv-background").style("pointer-events",d.disabled?"none":"all"),g.select(".nv-point-paths").style("pointer-events",d.disabled?"all":"none"),d.disabled?(x.distortion(fisheye).focus(0),y.distortion(fisheye).focus(0),g.select(".nv-scatterWrap").call(scatter),g.select(".nv-x.nv-axis").call(xAxis),g.select(".nv-y.nv-axis").call(yAxis)):pauseFisheye=!1,chart.update()}),legend.dispatch.on("stateChange",function(newState){state.disabled=newState.disabled,dispatch.stateChange(state),chart.update()}),scatter.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",function(){return e.pos[1]-availableHeight}),d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+distX.size()),e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),chart.update()}),x0=x.copy(),y0=y.copy()}),chart}var scatter=nv.models.scatter(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),controls=nv.models.legend(),distX=nv.models.distribution(),distY=nv.models.distribution(),margin={top:30,right:20,bottom:50,left:75},width=null,height=null,color=nv.utils.defaultColor(),x=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):scatter.xScale(),y=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):scatter.yScale(),xPadding=0,yPadding=0,showDistX=!1,showDistY=!1,showLegend=!0,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,showControls=!!d3.fisheye,fisheye=0,pauseFisheye=!1,tooltips=!0,tooltipX=function(key,x){return"<strong>"+x+"</strong>"},tooltipY=function(key,x,y){return"<strong>"+y+"</strong>"},tooltip=null,state={},defaultState=null,dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),noData="No Data Available.",transitionDuration=250;scatter.xScale(x).yScale(y),xAxis.orient("bottom").tickPadding(10),yAxis.orient(rightAlignYAxis?"right":"left").tickPadding(10),distX.axis("x"),distY.axis("y"),controls.updateState(!1);
var x0,y0,showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),leftX=e.pos[0]+(offsetElement.offsetLeft||0),topX=y.range()[0]+margin.top+(offsetElement.offsetTop||0),leftY=x.range()[0]+margin.left+(offsetElement.offsetLeft||0),topY=e.pos[1]+(offsetElement.offsetTop||0),xVal=xAxis.tickFormat()(scatter.x()(e.point,e.pointIndex)),yVal=yAxis.tickFormat()(scatter.y()(e.point,e.pointIndex));null!=tooltipX&&nv.tooltip.show([leftX,topX],tooltipX(e.series.key,xVal,yVal,e,chart),"n",1,offsetElement,"x-nvtooltip"),null!=tooltipY&&nv.tooltip.show([leftY,topY],tooltipY(e.series.key,xVal,yVal,e,chart),"e",1,offsetElement,"y-nvtooltip"),null!=tooltip&&nv.tooltip.show([left,top],tooltip(e.series.key,xVal,yVal,e,chart),e.value<0?"n":"s",null,offsetElement)},controlsData=[{key:"Magnify",disabled:!0}];return scatter.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e),d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",distY.size())}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.scatter=scatter,chart.legend=legend,chart.controls=controls,chart.xAxis=xAxis,chart.yAxis=yAxis,chart.distX=distX,chart.distY=distY,d3.rebind(chart,scatter,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),distX.color(color),distY.color(color),chart):color},chart.showDistX=function(_){return arguments.length?(showDistX=_,chart):showDistX},chart.showDistY=function(_){return arguments.length?(showDistY=_,chart):showDistY},chart.showControls=function(_){return arguments.length?(showControls=_,chart):showControls},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.fisheye=function(_){return arguments.length?(fisheye=_,chart):fisheye},chart.xPadding=function(_){return arguments.length?(xPadding=_,chart):xPadding},chart.yPadding=function(_){return arguments.length?(yPadding=_,chart):yPadding},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.tooltipXContent=function(_){return arguments.length?(tooltipX=_,chart):tooltipX},chart.tooltipYContent=function(_){return arguments.length?(tooltipY=_,chart):tooltipY},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.scatterPlusLineChart=function(){"use strict";function chart(selection){return selection.each(function(data){function updateFisheye(){if(pauseFisheye)return g.select(".nv-point-paths").style("pointer-events","all"),!1;g.select(".nv-point-paths").style("pointer-events","none");var mouse=d3.mouse(this);x.distortion(fisheye).focus(mouse[0]),y.distortion(fisheye).focus(mouse[1]),g.select(".nv-scatterWrap").datum(data.filter(function(d){return!d.disabled})).call(scatter),showXAxis&&g.select(".nv-x.nv-axis").call(xAxis),showYAxis&&g.select(".nv-y.nv-axis").call(yAxis),g.select(".nv-distributionX").datum(data.filter(function(d){return!d.disabled})).call(distX),g.select(".nv-distributionY").datum(data.filter(function(d){return!d.disabled})).call(distY)}var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=scatter.xScale(),y=scatter.yScale(),x0=x0||x,y0=y0||y;var wrap=container.selectAll("g.nv-wrap.nv-scatterChart").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+scatter.id()),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-scatterWrap"),gEnter.append("g").attr("class","nv-regressionLinesWrap"),gEnter.append("g").attr("class","nv-distWrap"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-controlsWrap"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),showLegend&&(legend.width(availableWidth/2),wrap.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),wrap.select(".nv-legendWrap").attr("transform","translate("+availableWidth/2+","+-margin.top+")")),showControls&&(controls.width(180).color(["#444"]),g.select(".nv-controlsWrap").datum(controlsData).attr("transform","translate(0,"+-margin.top+")").call(controls)),scatter.width(availableWidth).height(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),wrap.select(".nv-scatterWrap").datum(data.filter(function(d){return!d.disabled})).call(scatter),wrap.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+scatter.id()+")");var regWrap=wrap.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(d){return d});regWrap.enter().append("g").attr("class","nv-regLines");{var regLine=regWrap.selectAll(".nv-regLine").data(function(d){return[d]});regLine.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}regLine.transition().attr("x1",x.range()[0]).attr("x2",x.range()[1]).attr("y1",function(d){return y(x.domain()[0]*d.slope+d.intercept)}).attr("y2",function(d){return y(x.domain()[1]*d.slope+d.intercept)}).style("stroke",function(d,i,j){return color(d,j)}).style("stroke-opacity",function(d){return d.disabled||"undefined"==typeof d.slope||"undefined"==typeof d.intercept?0:1}),showXAxis&&(xAxis.scale(x).ticks(xAxis.ticks()?xAxis.ticks():availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")").call(xAxis)),showYAxis&&(yAxis.scale(y).ticks(yAxis.ticks()?yAxis.ticks():availableHeight/36).tickSize(-availableWidth,0),g.select(".nv-y.nv-axis").call(yAxis)),showDistX&&(distX.getData(scatter.x()).scale(x).width(availableWidth).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),g.select(".nv-distributionX").attr("transform","translate(0,"+y.range()[0]+")").datum(data.filter(function(d){return!d.disabled})).call(distX)),showDistY&&(distY.getData(scatter.y()).scale(y).width(availableHeight).color(data.map(function(d,i){return d.color||color(d,i)}).filter(function(d,i){return!data[i].disabled})),gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),g.select(".nv-distributionY").attr("transform","translate("+(rightAlignYAxis?availableWidth:-distY.size())+",0)").datum(data.filter(function(d){return!d.disabled})).call(distY)),d3.fisheye&&(g.select(".nv-background").attr("width",availableWidth).attr("height",availableHeight),g.select(".nv-background").on("mousemove",updateFisheye),g.select(".nv-background").on("click",function(){pauseFisheye=!pauseFisheye}),scatter.dispatch.on("elementClick.freezeFisheye",function(){pauseFisheye=!pauseFisheye})),controls.dispatch.on("legendClick",function(d){d.disabled=!d.disabled,fisheye=d.disabled?0:2.5,g.select(".nv-background").style("pointer-events",d.disabled?"none":"all"),g.select(".nv-point-paths").style("pointer-events",d.disabled?"all":"none"),d.disabled?(x.distortion(fisheye).focus(0),y.distortion(fisheye).focus(0),g.select(".nv-scatterWrap").call(scatter),g.select(".nv-x.nv-axis").call(xAxis),g.select(".nv-y.nv-axis").call(yAxis)):pauseFisheye=!1,chart.update()}),legend.dispatch.on("stateChange",function(newState){state=newState,dispatch.stateChange(state),chart.update()}),scatter.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.pos[1]-availableHeight),d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+distX.size()),e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),chart.update()}),x0=x.copy(),y0=y.copy()}),chart}var scatter=nv.models.scatter(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),controls=nv.models.legend(),distX=nv.models.distribution(),distY=nv.models.distribution(),margin={top:30,right:20,bottom:50,left:75},width=null,height=null,color=nv.utils.defaultColor(),x=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):scatter.xScale(),y=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):scatter.yScale(),showDistX=!1,showDistY=!1,showLegend=!0,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,showControls=!!d3.fisheye,fisheye=0,pauseFisheye=!1,tooltips=!0,tooltipX=function(key,x){return"<strong>"+x+"</strong>"},tooltipY=function(key,x,y){return"<strong>"+y+"</strong>"},tooltip=function(key,x,y,date){return"<h3>"+key+"</h3><p>"+date+"</p>"},state={},defaultState=null,dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),noData="No Data Available.",transitionDuration=250;scatter.xScale(x).yScale(y),xAxis.orient("bottom").tickPadding(10),yAxis.orient(rightAlignYAxis?"right":"left").tickPadding(10),distX.axis("x"),distY.axis("y"),controls.updateState(!1);var x0,y0,showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),leftX=e.pos[0]+(offsetElement.offsetLeft||0),topX=y.range()[0]+margin.top+(offsetElement.offsetTop||0),leftY=x.range()[0]+margin.left+(offsetElement.offsetLeft||0),topY=e.pos[1]+(offsetElement.offsetTop||0),xVal=xAxis.tickFormat()(scatter.x()(e.point,e.pointIndex)),yVal=yAxis.tickFormat()(scatter.y()(e.point,e.pointIndex));null!=tooltipX&&nv.tooltip.show([leftX,topX],tooltipX(e.series.key,xVal,yVal,e,chart),"n",1,offsetElement,"x-nvtooltip"),null!=tooltipY&&nv.tooltip.show([leftY,topY],tooltipY(e.series.key,xVal,yVal,e,chart),"e",1,offsetElement,"y-nvtooltip"),null!=tooltip&&nv.tooltip.show([left,top],tooltip(e.series.key,xVal,yVal,e.point.tooltip,e,chart),e.value<0?"n":"s",null,offsetElement)},controlsData=[{key:"Magnify",disabled:!0}];return scatter.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e),d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+scatter.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",distY.size())}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.scatter=scatter,chart.legend=legend,chart.controls=controls,chart.xAxis=xAxis,chart.yAxis=yAxis,chart.distX=distX,chart.distY=distY,d3.rebind(chart,scatter,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),distX.color(color),distY.color(color),chart):color},chart.showDistX=function(_){return arguments.length?(showDistX=_,chart):showDistX},chart.showDistY=function(_){return arguments.length?(showDistY=_,chart):showDistY},chart.showControls=function(_){return arguments.length?(showControls=_,chart):showControls},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.fisheye=function(_){return arguments.length?(fisheye=_,chart):fisheye},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.tooltipXContent=function(_){return arguments.length?(tooltipX=_,chart):tooltipX},chart.tooltipYContent=function(_){return arguments.length?(tooltipY=_,chart):tooltipY},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart},nv.models.sparkline=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);x.domain(xDomain||d3.extent(data,getX)).range(xRange||[0,availableWidth]),y.domain(yDomain||d3.extent(data,getY)).range(yRange||[availableHeight,0]);{var wrap=container.selectAll("g.nv-wrap.nv-sparkline").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");wrapEnter.append("g"),wrap.select("g")}wrap.attr("transform","translate("+margin.left+","+margin.top+")");var paths=wrap.selectAll("path").data(function(d){return[d]});paths.enter().append("path"),paths.exit().remove(),paths.style("stroke",function(d,i){return d.color||color(d,i)}).attr("d",d3.svg.line().x(function(d,i){return x(getX(d,i))}).y(function(d,i){return y(getY(d,i))}));var points=wrap.selectAll("circle.nv-point").data(function(data){function pointIndex(index){if(-1!=index){var result=data[index];return result.pointIndex=index,result}return null}var yValues=data.map(function(d,i){return getY(d,i)}),maxPoint=pointIndex(yValues.lastIndexOf(y.domain()[1])),minPoint=pointIndex(yValues.indexOf(y.domain()[0])),currentPoint=pointIndex(yValues.length-1);return[minPoint,maxPoint,currentPoint].filter(function(d){return null!=d})});points.enter().append("circle"),points.exit().remove(),points.attr("cx",function(d){return x(getX(d,d.pointIndex))}).attr("cy",function(d){return y(getY(d,d.pointIndex))}).attr("r",2).attr("class",function(d){return getX(d,d.pointIndex)==x.domain()[1]?"nv-point nv-currentValue":getY(d,d.pointIndex)==y.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),chart}var xDomain,yDomain,xRange,yRange,margin={top:2,right:0,bottom:2,left:0},width=400,height=32,animate=!0,x=d3.scale.linear(),y=d3.scale.linear(),getX=function(d){return d.x},getY=function(d){return d.y},color=nv.utils.getColor(["#000"]);return chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.x=function(_){return arguments.length?(getX=d3.functor(_),chart):getX},chart.y=function(_){return arguments.length?(getY=d3.functor(_),chart):getY},chart.xScale=function(_){return arguments.length?(x=_,chart):x},chart.yScale=function(_){return arguments.length?(y=_,chart):y},chart.xDomain=function(_){return arguments.length?(xDomain=_,chart):xDomain},chart.yDomain=function(_){return arguments.length?(yDomain=_,chart):yDomain},chart.xRange=function(_){return arguments.length?(xRange=_,chart):xRange},chart.yRange=function(_){return arguments.length?(yRange=_,chart):yRange},chart.animate=function(_){return arguments.length?(animate=_,chart):animate},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart},nv.models.sparklinePlus=function(){"use strict";function chart(selection){return selection.each(function(data){function updateValueLine(){if(!paused){var hoverValue=g.selectAll(".nv-hoverValue").data(index),hoverEnter=hoverValue.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);hoverValue.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),hoverValue.attr("transform",function(d){return"translate("+x(sparkline.x()(data[d],d))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),index.length&&(hoverEnter.append("line").attr("x1",0).attr("y1",-margin.top).attr("x2",0).attr("y2",availableHeight),hoverEnter.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-margin.top).attr("text-anchor","end").attr("dy",".9em"),g.select(".nv-hoverValue .nv-xValue").text(xTickFormat(sparkline.x()(data[index[0]],index[0]))),hoverEnter.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-margin.top).attr("text-anchor","start").attr("dy",".9em"),g.select(".nv-hoverValue .nv-yValue").text(yTickFormat(sparkline.y()(data[index[0]],index[0]))))}}function sparklineHover(){function getClosestIndex(data,x){for(var distance=Math.abs(sparkline.x()(data[0],0)-x),closestIndex=0,i=0;i<data.length;i++)Math.abs(sparkline.x()(data[i],i)-x)<distance&&(distance=Math.abs(sparkline.x()(data[i],i)-x),closestIndex=i);return closestIndex}if(!paused){var pos=d3.mouse(this)[0]-margin.left;index=[getClosestIndex(data,Math.round(x.invert(pos)))],updateValueLine()}}var container=d3.select(this),availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){chart(selection)},chart.container=this,!data||!data.length){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove();var currentValue=sparkline.y()(data[data.length-1],data.length-1);x=sparkline.xScale(),y=sparkline.yScale();var wrap=container.selectAll("g.nv-wrap.nv-sparklineplus").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-sparklineWrap"),gEnter.append("g").attr("class","nv-valueWrap"),gEnter.append("g").attr("class","nv-hoverArea"),wrap.attr("transform","translate("+margin.left+","+margin.top+")");var sparklineWrap=g.select(".nv-sparklineWrap");sparkline.width(availableWidth).height(availableHeight),sparklineWrap.call(sparkline);var valueWrap=g.select(".nv-valueWrap"),value=valueWrap.selectAll(".nv-currentValue").data([currentValue]);value.enter().append("text").attr("class","nv-currentValue").attr("dx",rightAlignValue?-8:8).attr("dy",".9em").style("text-anchor",rightAlignValue?"end":"start"),value.attr("x",availableWidth+(rightAlignValue?margin.right:0)).attr("y",alignValue?function(d){return y(d)}:0).style("fill",sparkline.color()(data[data.length-1],data.length-1)).text(yTickFormat(currentValue)),gEnter.select(".nv-hoverArea").append("rect").on("mousemove",sparklineHover).on("click",function(){paused=!paused}).on("mouseout",function(){index=[],updateValueLine()}),g.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-margin.left+","+-margin.top+")"}).attr("width",availableWidth+margin.left+margin.right).attr("height",availableHeight+margin.top)}),chart}var x,y,sparkline=nv.models.sparkline(),margin={top:15,right:100,bottom:10,left:50},width=null,height=null,index=[],paused=!1,xTickFormat=d3.format(",r"),yTickFormat=d3.format(",.2f"),showValue=!0,alignValue=!0,rightAlignValue=!1,noData="No Data Available.";return chart.sparkline=sparkline,d3.rebind(chart,sparkline,"x","y","xScale","yScale","color"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.xTickFormat=function(_){return arguments.length?(xTickFormat=_,chart):xTickFormat},chart.yTickFormat=function(_){return arguments.length?(yTickFormat=_,chart):yTickFormat},chart.showValue=function(_){return arguments.length?(showValue=_,chart):showValue},chart.alignValue=function(_){return arguments.length?(alignValue=_,chart):alignValue},chart.rightAlignValue=function(_){return arguments.length?(rightAlignValue=_,chart):rightAlignValue},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart},nv.models.stackedArea=function(){"use strict";function chart(selection){return selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);x=scatter.xScale(),y=scatter.yScale();var dataRaw=data;data.forEach(function(aseries,i){aseries.seriesIndex=i,aseries.values=aseries.values.map(function(d,j){return d.index=j,d.seriesIndex=i,d})});var dataFiltered=data.filter(function(series){return!series.disabled});data=d3.layout.stack().order(order).offset(offset).values(function(d){return d.values}).x(getX).y(getY).out(function(d,y0,y){var yHeight=0===getY(d)?0:y;d.display={y:yHeight,y0:y0}})(dataFiltered);var wrap=container.selectAll("g.nv-wrap.nv-stackedarea").data([data]),wrapEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),defsEnter=wrapEnter.append("defs"),gEnter=wrapEnter.append("g"),g=wrap.select("g");gEnter.append("g").attr("class","nv-areaWrap"),gEnter.append("g").attr("class","nv-scatterWrap"),wrap.attr("transform","translate("+margin.left+","+margin.top+")"),scatter.width(availableWidth).height(availableHeight).x(getX).y(function(d){return d.display.y+d.display.y0}).forceY([0]).color(data.map(function(d){return d.color||color(d,d.seriesIndex)}));var scatterWrap=g.select(".nv-scatterWrap").datum(data);scatterWrap.call(scatter),defsEnter.append("clipPath").attr("id","nv-edge-clip-"+id).append("rect"),wrap.select("#nv-edge-clip-"+id+" rect").attr("width",availableWidth).attr("height",availableHeight),g.attr("clip-path",clipEdge?"url(#nv-edge-clip-"+id+")":"");var area=d3.svg.area().x(function(d,i){return x(getX(d,i))}).y0(function(d){return y(d.display.y0)}).y1(function(d){return y(d.display.y+d.display.y0)}).interpolate(interpolate),zeroArea=d3.svg.area().x(function(d,i){return x(getX(d,i))}).y0(function(d){return y(d.display.y0)}).y1(function(d){return y(d.display.y0)}),path=g.select(".nv-areaWrap").selectAll("path.nv-area").data(function(d){return d});path.enter().append("path").attr("class",function(d,i){return"nv-area nv-area-"+i}).attr("d",function(d){return zeroArea(d.values,d.seriesIndex)}).on("mouseover",function(d){d3.select(this).classed("hover",!0),dispatch.areaMouseover({point:d,series:d.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:d.seriesIndex})}).on("mouseout",function(d){d3.select(this).classed("hover",!1),dispatch.areaMouseout({point:d,series:d.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:d.seriesIndex})}).on("click",function(d){d3.select(this).classed("hover",!1),dispatch.areaClick({point:d,series:d.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:d.seriesIndex})}),path.exit().remove(),path.style("fill",function(d){return d.color||color(d,d.seriesIndex)}).style("stroke",function(d){return d.color||color(d,d.seriesIndex)}),path.transition().attr("d",function(d,i){return area(d.values,i)}),scatter.dispatch.on("elementMouseover.area",function(e){g.select(".nv-chart-"+id+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),scatter.dispatch.on("elementMouseout.area",function(e){g.select(".nv-chart-"+id+" .nv-area-"+e.seriesIndex).classed("hover",!1)}),chart.d3_stackedOffset_stackPercent=function(stackData){var i,j,o,n=stackData.length,m=stackData[0].length,k=1/n,y0=[];for(j=0;m>j;++j){for(i=0,o=0;i<dataRaw.length;i++)o+=getY(dataRaw[i].values[j]);if(o)for(i=0;n>i;i++)stackData[i][j][1]/=o;else for(i=0;n>i;i++)stackData[i][j][1]=k}for(j=0;m>j;++j)y0[j]=0;return y0}}),chart}var x,y,margin={top:0,right:0,bottom:0,left:0},width=960,height=500,color=nv.utils.defaultColor(),id=Math.floor(1e5*Math.random()),getX=function(d){return d.x},getY=function(d){return d.y},style="stack",offset="zero",order="default",interpolate="linear",clipEdge=!1,scatter=nv.models.scatter(),dispatch=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return scatter.size(2.2).sizeDomain([2.2,2.2]),scatter.dispatch.on("elementClick.area",function(e){dispatch.areaClick(e)}),scatter.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),scatter.dispatch.on("elementMouseout.tooltip",function(e){dispatch.tooltipHide(e)}),chart.dispatch=dispatch,chart.scatter=scatter,d3.rebind(chart,scatter,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),chart.options=nv.utils.optionsFunc.bind(chart),chart.x=function(_){return arguments.length?(getX=d3.functor(_),chart):getX},chart.y=function(_){return arguments.length?(getY=d3.functor(_),chart):getY},chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.clipEdge=function(_){return arguments.length?(clipEdge=_,chart):clipEdge},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),chart):color},chart.offset=function(_){return arguments.length?(offset=_,chart):offset},chart.order=function(_){return arguments.length?(order=_,chart):order},chart.style=function(_){if(!arguments.length)return style;switch(style=_){case"stack":chart.offset("zero"),chart.order("default");break;case"stream":chart.offset("wiggle"),chart.order("inside-out");break;case"stream-center":chart.offset("silhouette"),chart.order("inside-out");break;case"expand":chart.offset("expand"),chart.order("default");break;case"stack_percent":chart.offset(chart.d3_stackedOffset_stackPercent),chart.order("default")}return chart},chart.interpolate=function(_){return arguments.length?(interpolate=_,chart):interpolate},chart},nv.models.stackedAreaChart=function(){"use strict";function chart(selection){return selection.each(function(data){var container=d3.select(this),that=this,availableWidth=(width||parseInt(container.style("width"))||960)-margin.left-margin.right,availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom;if(chart.update=function(){container.transition().duration(transitionDuration).call(chart)},chart.container=this,state.disabled=data.map(function(d){return!!d.disabled}),!defaultState){var key;defaultState={};for(key in state)defaultState[key]=state[key]instanceof Array?state[key].slice(0):state[key]}if(!(data&&data.length&&data.filter(function(d){return d.values.length}).length)){var noDataText=container.selectAll(".nv-noData").data([noData]);return noDataText.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),noDataText.attr("x",margin.left+availableWidth/2).attr("y",margin.top+availableHeight/2).text(function(d){return d}),chart}container.selectAll(".nv-noData").remove(),x=stacked.xScale(),y=stacked.yScale();var wrap=container.selectAll("g.nv-wrap.nv-stackedAreaChart").data([data]),gEnter=wrap.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),g=wrap.select("g");if(gEnter.append("rect").style("opacity",0),gEnter.append("g").attr("class","nv-x nv-axis"),gEnter.append("g").attr("class","nv-y nv-axis"),gEnter.append("g").attr("class","nv-stackedWrap"),gEnter.append("g").attr("class","nv-legendWrap"),gEnter.append("g").attr("class","nv-controlsWrap"),gEnter.append("g").attr("class","nv-interactive"),g.select("rect").attr("width",availableWidth).attr("height",availableHeight),showLegend){var legendWidth=showControls?availableWidth-controlWidth:availableWidth;legend.width(legendWidth),g.select(".nv-legendWrap").datum(data).call(legend),margin.top!=legend.height()&&(margin.top=legend.height(),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".nv-legendWrap").attr("transform","translate("+(availableWidth-legendWidth)+","+-margin.top+")")
}if(showControls){var controlsData=[{key:controlLabels.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=stacked.style(),style:"stack"},{key:controlLabels.stream||"Stream",metaKey:"Stream",disabled:"stream"!=stacked.style(),style:"stream"},{key:controlLabels.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=stacked.style(),style:"expand"},{key:controlLabels.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=stacked.style(),style:"stack_percent"}];controlWidth=cData.length/3*260,controlsData=controlsData.filter(function(d){return-1!==cData.indexOf(d.metaKey)}),controls.width(controlWidth).color(["#444","#444","#444"]),g.select(".nv-controlsWrap").datum(controlsData).call(controls),margin.top!=Math.max(controls.height(),legend.height())&&(margin.top=Math.max(controls.height(),legend.height()),availableHeight=(height||parseInt(container.style("height"))||400)-margin.top-margin.bottom),g.select(".nv-controlsWrap").attr("transform","translate(0,"+-margin.top+")")}wrap.attr("transform","translate("+margin.left+","+margin.top+")"),rightAlignYAxis&&g.select(".nv-y.nv-axis").attr("transform","translate("+availableWidth+",0)"),useInteractiveGuideline&&(interactiveLayer.width(availableWidth).height(availableHeight).margin({left:margin.left,top:margin.top}).svgContainer(container).xScale(x),wrap.select(".nv-interactive").call(interactiveLayer)),stacked.width(availableWidth).height(availableHeight);var stackedWrap=g.select(".nv-stackedWrap").datum(data);stackedWrap.transition().call(stacked),showXAxis&&(xAxis.scale(x).ticks(availableWidth/100).tickSize(-availableHeight,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+availableHeight+")"),g.select(".nv-x.nv-axis").transition().duration(0).call(xAxis)),showYAxis&&(yAxis.scale(y).ticks("wiggle"==stacked.offset()?0:availableHeight/36).tickSize(-availableWidth,0).setTickFormat("expand"==stacked.style()||"stack_percent"==stacked.style()?d3.format("%"):yAxisTickFormat),g.select(".nv-y.nv-axis").transition().duration(0).call(yAxis)),stacked.dispatch.on("areaClick.toggle",function(e){data.forEach(1===data.filter(function(d){return!d.disabled}).length?function(d){d.disabled=!1}:function(d,i){d.disabled=i!=e.seriesIndex}),state.disabled=data.map(function(d){return!!d.disabled}),dispatch.stateChange(state),chart.update()}),legend.dispatch.on("stateChange",function(newState){state.disabled=newState.disabled,dispatch.stateChange(state),chart.update()}),controls.dispatch.on("legendClick",function(d){d.disabled&&(controlsData=controlsData.map(function(s){return s.disabled=!0,s}),d.disabled=!1,stacked.style(d.style),state.style=stacked.style(),dispatch.stateChange(state),chart.update())}),interactiveLayer.dispatch.on("elementMousemove",function(e){stacked.clearHighlights();var singlePoint,pointIndex,pointXLocation,allData=[];if(data.filter(function(series,i){return series.seriesIndex=i,!series.disabled}).forEach(function(series,i){pointIndex=nv.interactiveBisect(series.values,e.pointXValue,chart.x()),stacked.highlightPoint(i,pointIndex,!0);var point=series.values[pointIndex];if("undefined"!=typeof point){"undefined"==typeof singlePoint&&(singlePoint=point),"undefined"==typeof pointXLocation&&(pointXLocation=chart.xScale()(chart.x()(point,pointIndex)));var tooltipValue="expand"==stacked.style()?point.display.y:chart.y()(point,pointIndex);allData.push({key:series.key,value:tooltipValue,color:color(series,series.seriesIndex),stackedValue:point.display})}}),allData.reverse(),allData.length>2){var yValue=chart.yScale().invert(e.mouseY),indexToHighlight=null;allData.forEach(function(series,i){yValue=Math.abs(yValue);var stackedY0=Math.abs(series.stackedValue.y0),stackedY=Math.abs(series.stackedValue.y);return yValue>=stackedY0&&stackedY+stackedY0>=yValue?void(indexToHighlight=i):void 0}),null!=indexToHighlight&&(allData[indexToHighlight].highlight=!0)}var xValue=xAxis.tickFormat()(chart.x()(singlePoint,pointIndex)),valueFormatter="expand"==stacked.style()?function(d){return d3.format(".1%")(d)}:function(d){return yAxis.tickFormat()(d)};interactiveLayer.tooltip.position({left:pointXLocation+margin.left,top:e.mouseY+margin.top}).chartContainer(that.parentNode).enabled(tooltips).valueFormatter(valueFormatter).data({value:xValue,series:allData})(),interactiveLayer.renderGuideLine(pointXLocation)}),interactiveLayer.dispatch.on("elementMouseout",function(){dispatch.tooltipHide(),stacked.clearHighlights()}),dispatch.on("tooltipShow",function(e){tooltips&&showTooltip(e,that.parentNode)}),dispatch.on("changeState",function(e){"undefined"!=typeof e.disabled&&(data.forEach(function(series,i){series.disabled=e.disabled[i]}),state.disabled=e.disabled),"undefined"!=typeof e.style&&stacked.style(e.style),chart.update()})}),chart}var x,y,stacked=nv.models.stackedArea(),xAxis=nv.models.axis(),yAxis=nv.models.axis(),legend=nv.models.legend(),controls=nv.models.legend(),interactiveLayer=nv.interactiveGuideline(),margin={top:30,right:25,bottom:50,left:60},width=null,height=null,color=nv.utils.defaultColor(),showControls=!0,showLegend=!0,showXAxis=!0,showYAxis=!0,rightAlignYAxis=!1,useInteractiveGuideline=!1,tooltips=!0,tooltip=function(key,x,y){return"<h3>"+key+"</h3><p>"+y+" on "+x+"</p>"},yAxisTickFormat=d3.format(",.2f"),state={style:stacked.style()},defaultState=null,noData="No Data Available.",dispatch=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),controlWidth=250,cData=["Stacked","Stream","Expanded"],controlLabels={},transitionDuration=250;xAxis.orient("bottom").tickPadding(7),yAxis.orient(rightAlignYAxis?"right":"left"),controls.updateState(!1);var showTooltip=function(e,offsetElement){var left=e.pos[0]+(offsetElement.offsetLeft||0),top=e.pos[1]+(offsetElement.offsetTop||0),x=xAxis.tickFormat()(stacked.x()(e.point,e.pointIndex)),y=yAxis.tickFormat()(stacked.y()(e.point,e.pointIndex)),content=tooltip(e.series.key,x,y,e,chart);nv.tooltip.show([left,top],content,e.value<0?"n":"s",null,offsetElement)};return stacked.dispatch.on("tooltipShow",function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e)}),stacked.dispatch.on("tooltipHide",function(e){dispatch.tooltipHide(e)}),dispatch.on("tooltipHide",function(){tooltips&&nv.tooltip.cleanup()}),chart.dispatch=dispatch,chart.stacked=stacked,chart.legend=legend,chart.controls=controls,chart.xAxis=xAxis,chart.yAxis=yAxis,chart.interactiveLayer=interactiveLayer,d3.rebind(chart,stacked,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),chart.options=nv.utils.optionsFunc.bind(chart),chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.color=function(_){return arguments.length?(color=nv.utils.getColor(_),legend.color(color),stacked.color(color),chart):color},chart.showControls=function(_){return arguments.length?(showControls=_,chart):showControls},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.showXAxis=function(_){return arguments.length?(showXAxis=_,chart):showXAxis},chart.showYAxis=function(_){return arguments.length?(showYAxis=_,chart):showYAxis},chart.rightAlignYAxis=function(_){return arguments.length?(rightAlignYAxis=_,yAxis.orient(_?"right":"left"),chart):rightAlignYAxis},chart.useInteractiveGuideline=function(_){return arguments.length?(useInteractiveGuideline=_,_===!0&&(chart.interactive(!1),chart.useVoronoi(!1)),chart):useInteractiveGuideline},chart.tooltip=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.tooltips=function(_){return arguments.length?(tooltips=_,chart):tooltips},chart.tooltipContent=function(_){return arguments.length?(tooltip=_,chart):tooltip},chart.state=function(_){return arguments.length?(state=_,chart):state},chart.defaultState=function(_){return arguments.length?(defaultState=_,chart):defaultState},chart.noData=function(_){return arguments.length?(noData=_,chart):noData},chart.transitionDuration=function(_){return arguments.length?(transitionDuration=_,chart):transitionDuration},chart.controlsData=function(_){return arguments.length?(cData=_,chart):cData},chart.controlLabels=function(_){return arguments.length?"object"!=typeof _?controlLabels:(controlLabels=_,chart):controlLabels},yAxis.setTickFormat=yAxis.tickFormat,yAxis.tickFormat=function(_){return arguments.length?(yAxisTickFormat=_,yAxis):yAxisTickFormat},chart}}(),function(){var AP,_ref,_ref1,_ref10,_ref11,_ref12,_ref13,_ref14,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__slice=[].slice;AP=function(){function AP(){}return AP.activeAppName=null,AP.auth={},AP.utility={},AP.model={},AP.collection={},AP.relationship={},AP.apps={},AP.baseUrl=null,AP.useMockServer=!1,AP.useOfflineCache=!0,AP.offlineStorageCapacity=5242880,AP.registerApp=function(app,name){return app&&name?this.apps[name]=app:void 0},AP.getApp=function(name){return this.apps[name]},AP.getActiveApp=function(){return AP.getApp(this.activeAppName)},AP}(),window.AP=AP,AP.utility.Base64=function(){function Base64(){}return Base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64.encode=function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,i,output;for(output="",i=0,input=Base64._utf8_encode(input);i<input.length;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},Base64.decode=function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,i,output;for(output="",i=0,input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)enc1=this._keyStr.indexOf(input.charAt(i++)),enc2=this._keyStr.indexOf(input.charAt(i++)),enc3=this._keyStr.indexOf(input.charAt(i++)),enc4=this._keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!==enc3&&(output+=String.fromCharCode(chr2)),64!==enc4&&(output+=String.fromCharCode(chr3));return output=Base64._utf8_decode(output)},Base64._utf8_encode=function(string){var c,n,utftext;for(string=string.replace(/\r\n/g,"\n"),utftext="",n=0;n<string.length;)c=string.charCodeAt(n),128>c?utftext+=String.fromCharCode(c):c>127&&2048>c?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128)),n++;return utftext},Base64._utf8_decode=function(utftext){var c,c1,c2,c3,i,string;for(string="",i=0,c=c1=c2=0;i<utftext.length;)c=utftext.charCodeAt(i),128>c?(string+=String.fromCharCode(c),i++):c>191&&224>c?(c2=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return string},Base64}(),AP.utility.Cookie=function(){function Cookie(){}return Cookie.getFromCookieStorage=function(){return document.cookie.toString()},Cookie.saveToCookieStorage=function(cookie){return document.cookie=cookie},Cookie.formatCookieStorageDate=function(expiration){var d;return _.isNumber(expiration)&&(d=new Date,d.setTime(d.getTime()+864e5*expiration),expiration=d),_.isDate(expiration)?expiration.toGMTString():void 0},Cookie.buildCookieStorageString=function(n,v,expiration){var e;return e="",expiration&&(e="; expires="+this.formatCookieStorageDate(expiration)),n+"="+v+e+"; path=/"},Cookie.set=function(n,v,expiration){var cookie;return cookie=this.buildCookieStorageString(n,v,expiration),this.saveToCookieStorage(cookie)},Cookie.get=function(n){var c,ca,i,match;for(ca=this.getFromCookieStorage().split(";"),match=n+"=",c="",i=0;i<ca.length;){if(c=ca[i].replace(/^\s*/,""),0===c.indexOf(match))return c.substring(match.length,c.length);i++}return null},Cookie.del=function(n){return this.set(n,"",-1)},Cookie}(),AP.utility.Url=function(){function Url(){}return Url.parseUrl=function(url){var matches,path;return path={urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(url){var hash,uri;return uri=url?this.parseUrl(url):location,hash=this.parseUrl(url||location.href).hash,hash="#"===hash?"":hash,uri.protocol+"//"+uri.host+uri.pathname+uri.search+hash}},"object"===$.type(url)?url:(matches=path.urlParseRE.exec(url||"")||[],{href:matches[0]||"",hrefNoHash:matches[1]||"",hrefNoSearch:matches[2]||"",domain:matches[3]||"",protocol:matches[4]||"",doubleSlash:matches[5]||"",authority:matches[6]||"",username:matches[8]||"",password:matches[9]||"",host:matches[10]||"",hostname:matches[11]||"",port:matches[12]||"",pathname:matches[13]||"",directory:matches[14]||"",filename:matches[15]||"",search:matches[16]||"",hash:matches[17]||""})},Url}(),AP.utility.MockServer=function(){function MockServer(){this.initialize.apply(this,arguments)}return MockServer.Collections=function(){function Collections(){}return Collections.instancesPerCollection=3,Collections.createCollectionInstanceFor=function(collectionClass){var collection,instances;return collection=new collectionClass,instances=this.createInstancesFor(collectionClass.prototype.model),collection.add(instances),collection},Collections.createInstancesFor=function(modelClass){var idAttribute,instance,num,_i,_ref,_results;for(_results=[],num=_i=0,_ref=this.instancesPerCollection;_ref>=0?_ref>_i:_i>_ref;num=_ref>=0?++_i:--_i)instance=this.createInstanceFor(modelClass,num),idAttribute=modelClass.prototype.idAttribute,instance.set(idAttribute,""+modelClass.name+"-"+num),_results.push(instance);return _results},Collections.createInstanceFor=function(modelClass){var instanceData;return instanceData=AP.utility.MockServer.Models.generateRandomInstanceDataFor(modelClass),new modelClass(instanceData)},Collections}(),MockServer.Models=function(){function Models(){}return Models.generateRandomInstanceDataFor=function(modelClass){var _this=this;return _.object(_.map(modelClass.prototype.fieldDefinitions,function(fieldDef){var name,value;return name=fieldDef.name,value=_this.generateRandomFieldDataFor(fieldDef),[name,value]}))},Models.generateRandomFieldDataFor=function(fieldDef){switch(fieldDef.type){case"string":return _.uniqueId(""+fieldDef.name+"_");case"boolean":return 100*Math.random()<50;case"integer":return _.random(0,1e9);case"float":return 1e9*Math.random();case"date":case"time":return(new Date).toISOString();case"array":return[_.random(0,1e9),_.random(0,1e9),_.random(0,1e9)];case"hash":return{field1:_.uniqueId("field1"),field2:_.uniqueId("field2"),field3:_.uniqueId("field3")}}},Models}(),MockServer.prototype.application=null,MockServer.prototype.server=null,MockServer.prototype.collections=null,MockServer.prototype.initialize=function(application){return this.application=application,this.server=sinon.fakeServer.create(),this.server.autoRespond=!0,this.collections=new Backbone.Collection,this.initResponses()},MockServer.prototype.initResponses=function(){var responseUrls,_this=this;return responseUrls=[],_.each(this.application.collections,function(collectionClass){var url,urlWithQueryString;return url=_this.getEndpointUrlFor(collectionClass),urlWithQueryString=_this.getEndpointRegexWithQueryStringFor(collectionClass),_this.server.respondWith("GET",urlWithQueryString,function(xhr){return _this.handleRequest(xhr,collectionClass)}),_.indexOf(responseUrls,url)<0?(responseUrls.push(url),url=_this.getEndpointRegexFor(collectionClass),_this.server.respondWith("POST",url,function(xhr){return _this.handleRequest(xhr,collectionClass)}),_this.server.respondWith("PUT",url,function(xhr){return _this.handleRequest(xhr,collectionClass)}),_this.server.respondWith("DELETE",url,function(xhr){return _this.handleRequest(xhr,collectionClass)})):void 0})},MockServer.prototype.getEndpointUrlFor=function(collectionClass){return collectionClass.prototype.apiEndpoint},MockServer.prototype.getEndpointRegexFor=function(collectionClass){return new RegExp((""+this.getEndpointUrlFor(collectionClass).replace(".json","")).replace(".","\\."))},MockServer.prototype.getEndpointRegexWithQueryStringFor=function(collectionClass){return new RegExp((""+this.getEndpointUrlFor(collectionClass)+"?"+$.param(collectionClass.prototype.extraParams)).replace("?","\\?").replace("&","\\&").replace(".","\\."))},MockServer.prototype.getOrCreateCollectionInstanceFor=function(collectionClass){var collection,name;return name=collectionClass.prototype.model.name,collection=this.collections.findWhere({name:name}),collection||(collection=AP.utility.MockServer.Collections.createCollectionInstanceFor(collectionClass),this.collections.add({id:collectionClass.prototype.collectionId,name:name,instance:collection})),(null!=collection?collection.get("instance"):void 0)||collection},MockServer.prototype.resetDatastore=function(){return this.collections.reset([])},MockServer.prototype.parseQuery=function(url,collectionClass){var modelClass,parsed,query,queryFields,_this=this;return modelClass=collectionClass.prototype.model,queryFields=collectionClass.prototype.queryFields,parsed=_.map(url.split("?")[1].split("&"),function(bits){return bits=bits.split("="),[decodeURIComponent(bits[0]),decodeURIComponent(bits[1])]}),query=_.filter(parsed,function(pair){return 0===pair[0].indexOf("query")}),query.length?(query=_.map(query,function(pair){var key,value;return key=pair[0].replace(/query\[(.*)\]/,"$1"),value=pair[1],[key,value]}),query=_.map(query,function(pair){var queryField;return queryField=_.findWhere(queryFields,{paramName:pair[0]}),queryField&&(pair[0]=queryField.fieldName),pair}),query=_.map(query,function(pair){var key,value;return key=pair[0],value=_this.castValue(modelClass,key,pair[1]),[key,value]}),_.object(query)):null},MockServer.prototype.castValue=function(modelClass,fieldName,fieldValue){var fieldDef;if(fieldDef=_.findWhere(modelClass.prototype.fieldDefinitions,{name:fieldName}),fieldDef.name===modelClass.prototype.idAttribute)return fieldValue;switch(fieldDef.type){case"integer":return parseInt(fieldValue,10);case"float":return parseFloat(fieldValue);default:return fieldValue}},MockServer.prototype.handleRequest=function(xhr,collectionClass){switch(xhr.method.toLowerCase()){case"get":return this.handleGetRequest(xhr,collectionClass);case"post":return this.handlePostRequest(xhr,collectionClass);case"put":return this.handlePutRequest(xhr,collectionClass);case"delete":return this.handleDeleteRequest(xhr,collectionClass)}},MockServer.prototype.handleGetRequest=function(xhr,collectionClass){var collectionInstance,query,responseBody,results;return query=this.parseQuery(xhr.url,collectionClass),collectionInstance=this.getOrCreateCollectionInstanceFor(collectionClass),query&&(results=collectionInstance.where(query)),responseBody=JSON.stringify(results||collectionInstance.toJSON()),xhr.respond(200,{"Content-Type":"application/json"},responseBody)},MockServer.prototype.handlePostRequest=function(xhr,collectionClass){var collectionInstance,data,idFieldDef,instance,model,responseBody;return collectionInstance=this.getOrCreateCollectionInstanceFor(collectionClass),model=collectionInstance.model,data=JSON.parse(xhr.requestBody),instance=new model(data),idFieldDef=_.findWhere(instance.fieldDefinitions,{name:model.prototype.idAttribute}),instance.set(model.prototype.idAttribute,AP.utility.MockServer.Models.generateRandomFieldDataFor(idFieldDef)),collectionInstance.add(instance),responseBody=JSON.stringify(instance.toJSON()),xhr.respond(201,{"Content-Type":"application/json"},responseBody)},MockServer.prototype.handlePutRequest=function(xhr,collectionClass){var collectionInstance,data,id,idAttribute,instance,model,responseBody,whereClause;return collectionInstance=this.getOrCreateCollectionInstanceFor(collectionClass),model=collectionInstance.model,data=JSON.parse(xhr.requestBody),id=xhr.url.split("/").reverse()[0].replace(".json",""),idAttribute=model.prototype.idAttribute,whereClause={},whereClause[idAttribute]=this.castValue(model,idAttribute,id),instance=collectionInstance.findWhere(whereClause),instance?(instance.set(data),responseBody=JSON.stringify(instance.toJSON()),xhr.respond(200,{"Content-Type":"application/json"},responseBody)):xhr.respond(404)},MockServer.prototype.handleDeleteRequest=function(xhr,collectionClass){var collectionInstance,id,idAttribute,instance,model,responseBody,whereClause;return collectionInstance=this.getOrCreateCollectionInstanceFor(collectionClass),model=collectionInstance.model,id=xhr.url.split("/").reverse()[0].replace(".json",""),idAttribute=model.prototype.idAttribute,whereClause={},whereClause[idAttribute]=this.castValue(model,idAttribute,id),instance=collectionInstance.findWhere(whereClause),instance?(collectionInstance.remove(instance),responseBody="",xhr.respond(204,{"Content-Type":"application/json"},responseBody)):xhr.respond(404)},MockServer}.call(this),AP.utility.Validator=function(){function Validator(data,validations){this.data=data,this.validations=validations,this._errors=[],this.data=_.clone(this.data),this.validations=_.clone(this.validations)}return Validator.prototype._errors=[],Validator.prototype._errorMessages={required:"this field is required",numericality:"this field must resemble a number",booleanType:"this field must be a boolean",stringType:"this field must be a string",numberType:"this field must be a number",integer:"this field must be an integer","float":"this field must be a float",missingType:"this field cannot be validated as type {0}"},Validator.prototype.data={},Validator.prototype.validations=[],Validator.prototype.isValid=function(){return!this.errors().length},Validator.prototype.validate=function(){var validation,_i,_len,_ref;for(this._errors=[],_ref=this.validations,_i=0,_len=_ref.length;_len>_i;_i++)validation=_ref[_i],this[validation.validate]&&this[validation.validate](this.data[validation.field],validation);return this.isValid()},Validator.prototype.addError=function(fieldName,type,extra){var i,message,value,_i,_len;if(message=this._errorMessages[type]||"is invalid",extra)for(i=_i=0,_len=extra.length;_len>_i;i=++_i)value=extra[i],message=message.replace("{"+i+"}",value);return this._errors.push({field:fieldName,message:message})},Validator.prototype.errors=function(){return this._errors},Validator.prototype.required=function(value,options){return null===value||void 0===value?this.addError(options.field,"required"):void 0},Validator.prototype.numericality=function(value,options){return null==value||value.toString().match(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/)?void 0:this.addError(options.field,"numericality")},Validator.prototype.type=function(value,options){var type;return type=options.is.toLowerCase(),this[""+type+"Type"]?this[""+type+"Type"](value,options):this.addError(options.field,"missingType",[type])},Validator.prototype.booleanType=function(value,options){return"boolean"!=typeof value&&null!==value&&void 0!==value?this.addError(options.field,"booleanType"):void 0},Validator.prototype.stringType=function(value,options){return"string"!=typeof value&&null!==value&&void 0!==value?this.addError(options.field,"stringType"):void 0},Validator.prototype.numberType=function(value,options){return"number"!=typeof value&&null!==value&&void 0!==value?this.addError(options.field,"numberType"):void 0},Validator.prototype.floatType=function(value,options){return"number"!=typeof value&&null!==value&&void 0!==value?this.addError(options.field,"floatType"):void 0},Validator.prototype.integerType=function(value,options){return null===value||void 0===value||"number"==typeof value&&-1===value.toString().indexOf(".")?void 0:this.addError(options.field,"integerType")},Validator.prototype.dateType=function(){},Validator.prototype.timeType=function(){},Validator}(),AP.utility.TransientStore=function(){function TransientStore(options){null==options&&(options={}),this.namespace=(null!=options?options.namespace:void 0)||this.namespace,this.expiresAfter=(null!=options?options.expiresAfter:void 0)||this.expiresAfter,this._data={}}return TransientStore.prototype.namespace="ap",TransientStore.prototype.expiresAfter=7,TransientStore.prototype._data=null,TransientStore.prototype.getFromUnderlayingStorage=function(qualifiedKey){return this._data[qualifiedKey]},TransientStore.prototype.setToUnderlayingStorage=function(qualifiedKey,value){return this._data[qualifiedKey]=value},TransientStore.prototype.removeFromUnderlayingStorage=function(qualifiedKey){return delete this._data[qualifiedKey]},TransientStore.prototype.encodeValue=function(value){var encoded;return encoded=JSON.stringify([value]),AP.utility.Base64.encode(encoded)},TransientStore.prototype.decodeValue=function(value){var decoded,error;value&&(decoded=AP.utility.Base64.decode(value));try{decoded=JSON.parse(decoded)}catch(_error){error=_error}return null!=decoded?decoded[0]:void 0},TransientStore.prototype.getKeyString=function(key){var strKey;return strKey=this.encodeValue(key)},TransientStore.prototype.getQualifiedKey=function(key){var strKey;return strKey=this.getKeyString(key),""+this.namespace+"-"+strKey},TransientStore.prototype.getQualifiedExpireKey=function(key){var strKey;return strKey=this.getKeyString(key),""+this.namespace+"-expire-"+strKey},TransientStore.prototype.getExpirationDate=function(days){var d;return d=new Date,d.setTime(d.getTime()+864e5*days),d},TransientStore.prototype.get=function(key){var expire,expireKey,qKey,record;return qKey=this.getQualifiedKey(key),expireKey=this.getQualifiedExpireKey(key),record=this.getFromUnderlayingStorage(qKey),this.getFromUnderlayingStorage(expireKey)&&(expire=parseInt(this.decodeValue(this.getFromUnderlayingStorage(expireKey)),10)),_.isNumber(expire)&&expire<=Date.now()&&(this.remove(key),record=this.getFromUnderlayingStorage(qKey)),this.decodeValue(record)},TransientStore.prototype.set=function(key,value,expiresAfter){var expirationDate,expireKey,qKey;return qKey=this.getQualifiedKey(key),expireKey=this.getQualifiedExpireKey(key),expirationDate=this.getExpirationDate(expiresAfter||this.expiresAfter),this.setToUnderlayingStorage(qKey,this.encodeValue(value),expirationDate),this.setToUnderlayingStorage(expireKey,this.encodeValue(expirationDate.getTime()),expirationDate)},TransientStore.prototype.remove=function(key){var expireKey,qKey;return qKey=this.getQualifiedKey(key),expireKey=this.getQualifiedExpireKey(key),this.removeFromUnderlayingStorage(qKey),this.removeFromUnderlayingStorage(expireKey)},TransientStore}(),AP.utility.TransientCookieStore=function(_super){function TransientCookieStore(){return _ref=TransientCookieStore.__super__.constructor.apply(this,arguments)}return __extends(TransientCookieStore,_super),TransientCookieStore.supported=function(){var actualValue,key,supported,value;return supported=null!=window.document.cookie,supported&&(key=_.uniqueId("ap-cookie-support-test"),value="success",AP.utility.Cookie.set(key,value),actualValue=AP.utility.Cookie.get(key),value!==actualValue&&(supported=!1)),supported}(),TransientCookieStore.prototype.getFromUnderlayingStorage=function(qualifiedKey){var value;return value=TransientCookieStore.__super__.getFromUnderlayingStorage.apply(this,arguments),AP.utility.TransientCookieStore.supported&&(value=AP.utility.Cookie.get(qualifiedKey)),value},TransientCookieStore.prototype.setToUnderlayingStorage=function(qualifiedKey,value,expirationDate){return TransientCookieStore.__super__.setToUnderlayingStorage.apply(this,arguments),AP.utility.TransientCookieStore.supported?AP.utility.Cookie.set(qualifiedKey,value,expirationDate):void 0},TransientCookieStore.prototype.removeFromUnderlayingStorage=function(qualifiedKey){return TransientCookieStore.__super__.removeFromUnderlayingStorage.apply(this,arguments),AP.utility.TransientCookieStore.supported?AP.utility.Cookie.del(qualifiedKey):void 0},TransientCookieStore}(AP.utility.TransientStore),AP.utility.TransientLocalStore=function(_super){function TransientLocalStore(){return _ref1=TransientLocalStore.__super__.constructor.apply(this,arguments)}return __extends(TransientLocalStore,_super),TransientLocalStore.supported=null!=window.localStorage,TransientLocalStore.prototype.storage=window.localStorage,TransientLocalStore.prototype.getFromUnderlayingStorage=function(qualifiedKey){var value;return value=TransientLocalStore.__super__.getFromUnderlayingStorage.apply(this,arguments),AP.utility.TransientLocalStore.supported&&(value=this.storage.getItem(qualifiedKey)),value},TransientLocalStore.prototype.setToUnderlayingStorage=function(qualifiedKey,value){return TransientLocalStore.__super__.setToUnderlayingStorage.apply(this,arguments),AP.utility.TransientLocalStore.supported?this.storage.setItem(qualifiedKey,value):void 0},TransientLocalStore.prototype.removeFromUnderlayingStorage=function(qualifiedKey){return TransientLocalStore.__super__.removeFromUnderlayingStorage.apply(this,arguments),AP.utility.TransientLocalStore.supported?this.storage.removeItem(qualifiedKey):void 0},TransientLocalStore}(AP.utility.TransientStore),AP.utility.TransientLargeLocalStore=function(_super){function TransientLargeLocalStore(){TransientLargeLocalStore.__super__.constructor.apply(this,arguments),AP.utility.TransientLargeLocalStore.supported&&(this.storage=new LargeLocalStorage({size:this.storageCapacity,name:""+this.namespace+"-"+this.storageName}))}return __extends(TransientLargeLocalStore,_super),TransientLargeLocalStore.supported=null!=window.LargeLocalStorage,TransientLargeLocalStore.prototype.storage=null,TransientLargeLocalStore.prototype.storageCapacity=67108864,TransientLargeLocalStore.prototype.storageName="large-local-storage",TransientLargeLocalStore.prototype.getFromUnderlayingStorage=function(qualifiedKey){var _this=this;return null!=this.storage&&AP.utility.TransientLargeLocalStore.supported?this.storage.initialized.then(function(){return _this.storage.getContents(qualifiedKey)}):TransientLargeLocalStore.__super__.getFromUnderlayingStorage.apply(this,arguments)},TransientLargeLocalStore.prototype.setToUnderlayingStorage=function(qualifiedKey,value){var _this=this;return null!=this.storage&&AP.utility.TransientLargeLocalStore.supported?this.storage.initialized.then(function(){return _this.storage.setContents(qualifiedKey,value)}):TransientLargeLocalStore.__super__.setToUnderlayingStorage.apply(this,arguments)},TransientLargeLocalStore.prototype.removeFromUnderlayingStorage=function(qualifiedKey){var _this=this;return null!=this.storage&&AP.utility.TransientLargeLocalStore.supported?this.storage.initialized.then(function(){return _this.storage.rm(qualifiedKey)}):TransientLargeLocalStore.__super__.removeFromUnderlayingStorage.apply(this,arguments)},TransientLargeLocalStore.prototype.get=function(key,options){var callback,expireKey,qKey,_ref2,_this=this;return null==options&&(options={}),qKey=this.getQualifiedKey(key),expireKey=this.getQualifiedExpireKey(key),callback=function(value){if(null!=value){if(_.isFunction(options.success))return options.success(value)}else if(_.isFunction(options.error))return options.error()},null!=this.storage&&_.isFunction(options.success||_.isFunction(options.error))?null!=(_ref2=this.storage)?_ref2.initialized.then(function(){return _this.getFromUnderlayingStorage(qKey).then(function(record){return _this.getFromUnderlayingStorage(expireKey).then(function(expireRecord){var expire,value;
return expireRecord&&(expire=+_this.decodeValue(expireRecord)),_.isNumber(expire)&&expire<=Date.now()&&(_this.remove(key),record=null),value=_this.decodeValue(record),callback(value)})})}):void 0:callback(TransientLargeLocalStore.__super__.get.apply(this,arguments))},TransientLargeLocalStore}(AP.utility.TransientStore),null==AP.auth&&(AP.auth={}),AP.auth.Authentication=function(){function Authentication(){}return _.extend(Authentication,Backbone.Events),$.ajaxSetup({complete:_.debounce(function(xhr,result){return 401===xhr.status&&"error"===result?Authentication.destroySession():void 0},150)}),Authentication._authSessionIdHeaderName="X-Session-Id",Authentication.store=AP.utility.TransientLocalStore.supported?new AP.utility.TransientLocalStore({namespace:"ap-auth"}):new AP.utility.TransientCookieStore({namespace:"ap-auth"}),Authentication.login=function(credentials){return this.isAuthenticated()?void 0:this.authenticate(credentials)},Authentication.logout=function(){return this.isAuthenticated()?this.deauthenticate():void 0},Authentication.isAuthenticatable=function(){return!!this.authenticationSettings},Authentication.isAuthenticated=function(){return!(!this.getAuthSessionData()||!this.getAuthSessionId())},Authentication.authenticate=function(credentials){var settings,_this=this;return AP=window.AP,settings=this.getAuthenticationSettings(),$.ajax({url:settings.authentication_url,type:"POST",dataType:"json",data:credentials,beforeSend:function(request,settings){var baseUrl,hasNoRequestServer,isRequestUrlSameAsBaseUrlServer,requestUrl;return baseUrl=AP.utility.Url.parseUrl(AP.baseUrl),requestUrl=AP.utility.Url.parseUrl(settings.url),hasNoRequestServer=!(requestUrl.host&&requestUrl.protocol),isRequestUrlSameAsBaseUrlServer=baseUrl.protocol===requestUrl.protocol&&baseUrl.host===requestUrl.host&&baseUrl.port===requestUrl.port||hasNoRequestServer,isRequestUrlSameAsBaseUrlServer&&request.setRequestHeader("Authorization",_this.makeHTTPBasicAuthHeader(credentials)),!AP.useMockServer&&AP.baseUrl&&hasNoRequestServer?_.extend(settings,{crossDomain:!0,url:""+AP.baseUrl+settings.url,xhrFields:_.extend({},settings.xhrFields,{withCredentials:!0})}):void 0},success:function(response,status,xhr){var sessionId;return response&&_this.store.set(_this.getAuthSessionDataKey(),response,7),sessionId=xhr.getResponseHeader(_this.getAuthSessionIdHeaderName()),sessionId||null==settings.session_id_field||(sessionId=null!=response?response[settings.session_id_field]:void 0),sessionId&&_this.store.set(_this.getAuthSessionIdKey(),sessionId,7),_this.trigger(response&&sessionId?"auth:authenticated":"auth:error")},error:function(){return _this.trigger("auth:error")}})},Authentication.deauthenticate=function(){var settings,_this=this;return AP=window.AP,settings=this.getAuthenticationSettings(),$.ajax({url:settings.deauthentication_url,type:"POST",dataType:"text",beforeSend:function(request,settings){var authSessionId,authSessionIdHeader,baseUrl,hasNoRequestServer,isRequestUrlSameAsBaseUrlServer,requestUrl;return baseUrl=AP.utility.Url.parseUrl(AP.baseUrl),requestUrl=AP.utility.Url.parseUrl(settings.url),hasNoRequestServer=!(requestUrl.host&&requestUrl.protocol),isRequestUrlSameAsBaseUrlServer=baseUrl.protocol===requestUrl.protocol&&baseUrl.host===requestUrl.host&&baseUrl.port===requestUrl.port||hasNoRequestServer,isRequestUrlSameAsBaseUrlServer&&(authSessionIdHeader=_this.getAuthSessionIdHeaderName(),authSessionId=_this.getAuthSessionId(),authSessionId&&request.setRequestHeader(authSessionIdHeader,authSessionId)),!AP.useMockServer&&AP.baseUrl&&hasNoRequestServer?_.extend(settings,{crossDomain:!0,url:""+AP.baseUrl+settings.url,xhrFields:_.extend({},settings.xhrFields,{withCredentials:!0})}):void 0},complete:function(){return _this.destroySession()}})},Authentication.destroySession=function(){return this.store.remove(this.getAuthSessionDataKey()),this.store.remove(this.getAuthSessionIdKey()),this.trigger("auth:deauthenticated")},Authentication.getAuthSessionIdHeaderName=function(){return this._authSessionIdHeaderName},Authentication.getAuthSessionDataKey=function(){var baseName,baseUrl;return baseName="session",AP.baseUrl&&(baseUrl=AP.baseUrl.replace(/[^a-zA-Z\-0-9]/g,"")),baseUrl?""+baseName+"-"+baseUrl:baseName},Authentication.getAuthSessionIdKey=function(){return""+this.getAuthSessionDataKey()+"-id"},Authentication.getAuthSessionData=function(){return this.store.get(this.getAuthSessionDataKey())},Authentication.getUsername=function(){var credentials,settings;return settings=this.getAuthenticationSettings(),credentials=this.getAuthSessionData(),null!=credentials?credentials[null!=settings?settings.lookup_field:void 0]:void 0},Authentication.getUserRole=function(){var credentials,settings;return settings=this.getAuthenticationSettings(),credentials=this.getAuthSessionData(),null!=credentials?credentials[null!=settings?settings.role_field:void 0]:void 0},Authentication.getAuthSessionId=function(){var data;return data=this.store.get(this.getAuthSessionIdKey())},Authentication.getAuthenticationSettings=function(){return this.authenticationSettings||null},Authentication.getAuthenticatableObject=function(){var _ref2;return window.AP.getActiveApp().getModel(null!=(_ref2=this.getAuthenticationSettings())?_ref2.object_definition_id:void 0)},Authentication.makeHTTPBasicAuthHeader=function(credentials){var lookup,match,settings;return settings=this.getAuthenticationSettings(),lookup=credentials[settings.lookup_field],match=credentials[settings.match_field],"Basic "+AP.utility.Base64.encode([lookup,match].join(":"))},Authentication}.call(this),null==AP.auth&&(AP.auth={}),AP.auth.Authorization=function(){function Authorization(){}return Authorization.isAuthorized=function(rules){return null==rules||0===rules.length?!0:this._passesAnyRule(rules)},Authorization._passesAnyRule=function(rules){var rule,_i,_len;for(_i=0,_len=rules.length;_len>_i;_i++)if(rule=rules[_i],this._passesRule(rule))return!0;return!1},Authorization._passesRule=function(rule){return this._ruleHasNoRoles(rule)||this._hasAnyRole(rule.roles)},Authorization._ruleHasNoRoles=function(rule){return!rule.hasOwnProperty("roles")},Authorization._hasAnyRole=function(roles_string){var role,user_roles,_i,_len,_ref2;for(user_roles=this._getRoles(),_ref2=roles_string.split(","),_i=0,_len=_ref2.length;_len>_i;_i++)if(role=_ref2[_i],user_roles.indexOf($.trim(role))>=0)return!0;return!roles_string&&AP.auth.Authentication.isAuthenticated()?!0:!1},Authorization._getRoles=function(){var authSettings,data,roles,rolesField;return authSettings=AP.auth.Authentication.getAuthenticationSettings(),rolesField=authSettings.role_field,data=AP.auth.Authentication.getUserRole(),roles=null!=data?data.split(","):[],roles.map(function(x){return $.trim(x)}),roles},Authorization}(),AP.model.Model=function(_super){function Model(){return _ref2=Model.__super__.constructor.apply(this,arguments)}return __extends(Model,_super),Model.prototype._relationships=null,Model.prototype._validator=null,Model.prototype.validations=[],Model.prototype.initialize=function(){var _this=this;return this.initializeRelationships(),this.initializeValidations(),this.on("sync",function(){var _ref3;return null!=(_ref3=_this.constructor.trigger)?_ref3.apply(_this.constructor,["sync"].concat(_.toArray(arguments))):void 0})},Model.prototype.initializeRelationships=function(){var _this=this;return this._relationships=[],_.each(this.relationshipDefinitions,function(definition){var relationship;return relationship=new AP.relationship[definition.type](_this,definition),_this._relationships.push(relationship)})},Model.prototype.initializeValidations=function(){return this.validations=_.clone(this.validations),this._validator=new AP.utility.Validator},Model.prototype.getRelationship=function(name){return _.where(this._relationships,{name:name})[0]},Model.prototype.fetchRelated=function(name,callback){var _ref3;return null!=(_ref3=this.getRelationship(name))?_ref3.fetch(callback):void 0},Model.prototype.url=function(){return""+Model.__super__.url.apply(this,arguments)+".json"},Model.prototype.reload=function(){return this.fetch.apply(this,arguments)},Model.prototype.destroy=function(){return this.trigger("before_delete"),Model.__super__.destroy.apply(this,arguments)},Model.prototype["delete"]=function(){return this.destroy.apply(this,arguments)},Model.prototype.set=function(key,val,options){var attrs;return null==options&&(options={}),_.isObject(key)?(attrs=key,options=val||{}):(attrs={},attrs[key]=val),attrs&&this.trigger("before_change",this,attrs),Model.__super__.set.apply(this,arguments)},Model.prototype.save=function(){return this.trigger("before_save"),Model.__super__.save.apply(this,arguments)},Model.prototype.errors=function(){return this.validate(),this._validator.errors()},Model.prototype.isValid=function(){return this.validate(),this._validator.isValid()},Model.prototype.validate=function(values){return this._validator.data=_.extend({},values||this.attributes),this._validator.validations=this.validations.slice(),this._validator.validate()?void 0:this._validator.errors()},Model.prototype.toJSON=function(){var json,key,value;json=Model.__super__.toJSON.apply(this,arguments);for(key in json)value=json[key],_.isFunction(null!=value?value.toJSON:void 0)&&(json[key]=value.toJSON());return json},Model}(Backbone.Model),AP.relationship.Relationship=function(){function Relationship(){this.initialize.apply(this,arguments)}return _.extend(Relationship.prototype,Backbone.Events),Relationship.prototype.owner=null,Relationship.prototype.name=null,Relationship.prototype.foreignKey=null,Relationship.prototype.model=null,Relationship.prototype.collection=null,Relationship.prototype.initialize=function(owner,options){var _base;return this.options=null!=options?options:{},this.app="function"==typeof(_base=window.AP).getActiveApp?_base.getActiveApp():void 0,this.owner=owner||this.owner,this.name=this.options.name||this.name,this.foreignKey=this.options.foreignKey||this.foreignKey,this.initializeModel(),this.initializeCollection(),this.initializeDefault(),this.initializeEvents()},Relationship.prototype.initializeModel=function(){var _ref3;return this.model=this.options.model||this.model,this.model=(null!=(_ref3=this.app)?_ref3.getModel(this.model):void 0)||this.model},Relationship.prototype.initializeCollection=function(){var _ref3;return this.collection=this.options.collection||this.collection,this.collection=new((null!=(_ref3=this.app)?_ref3.getCollection(this.collection):void 0)||this.collection)},Relationship.prototype.initializeEvents=function(){return this.listenTo(this.collection,"add",this.onCollectionAdd),this.listenTo(this.collection,"remove",this.onCollectionRemove),this.listenTo(this.collection,"sync",this.onCollectionSync),this.listenTo(this.collection,"change",this.onRelatedChange)},Relationship.prototype.initializeDefault=function(){return this.owner.set(this.name,this.getDefault(),{silent:!0})},Relationship.prototype.onCollectionAdd=function(){},Relationship.prototype.onCollectionRemove=function(){},Relationship.prototype.onCollectionSync=function(){},Relationship.prototype.onRelatedChange=function(){return this.owner.trigger("change:"+this.name)},Relationship.prototype.getDefault=function(){return null},Relationship.prototype.getQuery=function(){return{}},Relationship.prototype.fetch=function(){return null},Relationship}(),AP.relationship.BelongsTo=function(_super){function BelongsTo(){return _ref3=BelongsTo.__super__.constructor.apply(this,arguments)}return __extends(BelongsTo,_super),BelongsTo.prototype.initialize=function(){return BelongsTo.__super__.initialize.apply(this,arguments),this.listenTo(this.owner,"change:"+this.foreignKey,this.onForeignKeyChange),this.listenTo(this.owner,"change:"+this.name,this.onFieldForRelatedInstanceChange)},BelongsTo.prototype.onCollectionSync=function(){return this.owner.set(this.name,this.collection.first())},BelongsTo.prototype.onForeignKeyChange=function(){var _ref4;return this.owner.get(this.foreignKey)!==(null!=(_ref4=this.owner.get(this.name))?_ref4.get(this.model.prototype.idAttribute):void 0)?this.owner.set(this.name,null):void 0},BelongsTo.prototype.onFieldForRelatedInstanceChange=function(){var relatedId,_ref4;return relatedId=null!=(_ref4=this.owner.get(this.name))?_ref4.get(this.model.prototype.idAttribute):void 0,relatedId&&this.owner.get(this.foreignKey)!==relatedId?this.owner.set(this.foreignKey,relatedId):void 0},BelongsTo.prototype.getQuery=function(){var query;return query=BelongsTo.__super__.getQuery.apply(this,arguments),query[this.model.prototype.idAttribute]=this.owner.get(this.foreignKey),query},BelongsTo.prototype.fetch=function(callback){var _this=this;return this.collection.query(this.getQuery(),{reset:!0,success:function(){return _.isFunction(callback)?callback(_this.owner,_this.collection.first()):void 0}})},BelongsTo}(AP.relationship.Relationship),AP.relationship.HasMany=function(_super){function HasMany(){return _ref4=HasMany.__super__.constructor.apply(this,arguments)}return __extends(HasMany,_super),HasMany.prototype.initialize=function(){return HasMany.__super__.initialize.apply(this,arguments),this.listenTo(this.collection,"reset",this.onCollectionReset),this.listenTo(this.collection,"change:"+this.foreignKey,this.onRelatedInstanceForeignKeyChange)},HasMany.prototype.onCollectionAdd=function(record){return record.set(this.foreignKey,this.owner.get(this.owner.idAttribute)),this.owner.trigger("change:"+this.name)},HasMany.prototype.onCollectionRemove=function(record){return record.get(this.foreignKey)===this.owner.get(this.owner.idAttribute)&&record.set(this.foreignKey,null),this.owner.trigger("change:"+this.name)},HasMany.prototype.onCollectionReset=function(){return this.owner.trigger("change:"+this.name)},HasMany.prototype.onRelatedInstanceForeignKeyChange=function(){return this.filterCollection()},HasMany.prototype.filterCollection=function(){var filtered,whereClause;return whereClause={},whereClause[this.foreignKey]=this.owner.get(this.owner.idAttribute),filtered=this.collection.where(whereClause),this.collection.reset(filtered,{reset:!0})},HasMany.prototype.getDefault=function(){return this.collection},HasMany.prototype.getQuery=function(){var query;return query=HasMany.__super__.getQuery.apply(this,arguments),query[this.foreignKey]=this.owner.get(this.owner.idAttribute),query},HasMany.prototype.fetch=function(callback){var _this=this;return this.collection.query(this.getQuery(),{reset:!0,success:function(){return _.isFunction(callback)?callback(_this.owner,_this.collection):void 0}})},HasMany}(AP.relationship.Relationship),AP.relationship.HasOne=function(_super){function HasOne(){return _ref5=HasOne.__super__.constructor.apply(this,arguments)}return __extends(HasOne,_super),HasOne.prototype.initializeEvents=function(){return this.listenTo(this.collection,"change:"+this.foreignKey,this.onForeignKeyChange),this.listenTo(this.owner,"change:"+this.name,this.onFieldForRelatedInstanceChange),HasOne.__super__.initializeEvents.apply(this,arguments)},HasOne.prototype.onCollectionSync=function(){return this.owner.set(this.name,this.collection.first())},HasOne.prototype.onForeignKeyChange=function(){var related;return related=this.owner.get(this.name),related&&related.get(this.foreignKey)!==this.owner.get(this.owner.idAttribute)?this.owner.set(this.name,null):void 0},HasOne.prototype.onFieldForRelatedInstanceChange=function(){var ownerId,related;return related=this.owner.get(this.name),ownerId=this.owner.get(this.owner.idAttribute),related&&related.get(this.foreignKey)!==ownerId?related.set(this.foreignKey,ownerId):void 0},HasOne.prototype.getDefault=function(){return null},HasOne.prototype.fetch=function(callback){var _this=this;return this.collection.query(this.getQuery(),{reset:!0,success:function(){return _.isFunction(callback)?callback(_this.owner,_this.collection.first()):void 0}})},HasOne}(AP.relationship.HasMany),AP.collection.Collection=function(_super){function Collection(){return _ref6=Collection.__super__.constructor.apply(this,arguments)}return __extends(Collection,_super),Collection.prototype.extraParams={},Collection.prototype.initialize=function(){return this.extraParams=_.clone(this.extraParams||{})},Collection.prototype.url=function(){return this.apiEndpoint},Collection.prototype.mapQueryParams=function(data){var key,query,value;query={};for(key in data)value=data[key],value&&(query["query["+key+"]"]=value);return query},Collection.prototype.fetch=function(){var args,options,query;return options=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],null==options&&(options={}),(null!=options?options.query:void 0)&&(query=this.mapQueryParams(options.query)),options.data=_.extend({},this.extraParams,options.data,query),Backbone.Collection.prototype.fetch.apply(this,[options].concat(args))},Collection.prototype.query=function(query,options){return this.fetch(_.extend({query:query},options))},Collection}(Backbone.Collection),AP.collection.ScopeCollection=function(_super){function ScopeCollection(){return _ref7=ScopeCollection.__super__.constructor.apply(this,arguments)}return __extends(ScopeCollection,_super),ScopeCollection.prototype.mapQueryFieldKeys=function(data){"Maps key names in data to equivalent param names in @queryFields if\nany match.  On match, original key names are not retained.  Returns a new\nobject leaving original intact.";var key,mapped,mappedKey,paramName,value;mapped={};for(key in data)value=data[key],paramName=(_.find(this.queryFields,function(field){return field.fieldName===key})||{}).paramName,mappedKey=paramName||key,value&&(mapped[mappedKey]=value);return mapped},ScopeCollection.prototype.fetch=function(){var args,options,query;return options=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],null==options&&(options={}),(null!=options?options.query:void 0)&&(query=this.mapQueryFieldKeys(options.query)),query&&(options.query=query),AP.collection.Collection.prototype.fetch.apply(this,[options].concat(args))},ScopeCollection}(AP.collection.Collection),AP.collection.AggregateCollection=function(_super){function AggregateCollection(){return _ref8=AggregateCollection.__super__.constructor.apply(this,arguments)}return __extends(AggregateCollection,_super),AggregateCollection.prototype.value=null,AggregateCollection.prototype.valueOf=function(){return this.value},AggregateCollection.prototype.parse=function(response){return this.value=parseInt(response,10),[]},AggregateCollection}(AP.collection.ScopeCollection),AP.Application=function(){function Application(){}return Application.setup=function(){return this.name=this.name||"",this.description=this.description||"",this.models={},this.collections={},this.mockServer=null},Application.init=function(){return AP=window.AP,AP.useMockServer&&(this.mockServer=new AP.utility.MockServer(this)),AP.useOfflineCache&&this.initOfflineCache(),this.initAjaxSetup()},Application.initOfflineCache=function(){return AP=window.AP,AP.offlineDataStore=new AP.utility.TransientLargeLocalStore({storageName:"ap-offline-data-store",storageCapacity:AP.offlineStorageCapacity}),Backbone._sync=Backbone.sync,Backbone.sync=function(method,obj,options){var cacheKey,data,oldError,oldSuccess,url,user,_this=this;return url=options.url||_.result(obj,"url"),url&&"read"===method&&(data=options.data||JSON.stringify(options.attrs||(null!=obj?obj.toJSON(options):void 0)),oldSuccess=options.success,oldError=options.error,user=null,AP.auth.Authentication.isAuthenticated()&&(user={username:AP.auth.Authentication.getUsername(),role:AP.auth.Authentication.getUserRole()}),cacheKey=[AP.baseUrl,url,data,user],options.success=function(response){return AP.offlineDataStore.set(cacheKey,response),oldSuccess.apply(_this,arguments)},options.error=function(xhr){var status;return status=+xhr.status,400>status||status>=500?AP.offlineDataStore.get(cacheKey,{success:function(cached){return oldSuccess.apply(_this,[cached])},error:function(){return oldError.apply(_this,arguments)}}):oldError.apply(_this,arguments)}),Backbone._sync.apply(this,arguments)}},Application.initAjaxSetup=function(){return AP=window.AP,$.ajaxSetup({beforeSend:function(request,settings){var authSessionId,authSessionIdHeader,baseUrl,hasNoRequestServer,isRequestUrlSameAsBaseUrlServer,requestUrl;return baseUrl=AP.utility.Url.parseUrl(AP.baseUrl),requestUrl=AP.utility.Url.parseUrl(settings.url),hasNoRequestServer=!(requestUrl.host&&requestUrl.protocol),isRequestUrlSameAsBaseUrlServer=baseUrl.protocol===requestUrl.protocol&&baseUrl.host===requestUrl.host&&baseUrl.port===requestUrl.port||hasNoRequestServer,isRequestUrlSameAsBaseUrlServer&&(authSessionIdHeader=AP.auth.Authentication.getAuthSessionIdHeaderName(),authSessionId=AP.auth.Authentication.getAuthSessionId(),authSessionId&&request.setRequestHeader(authSessionIdHeader,authSessionId)),!AP.useMockServer&&AP.baseUrl&&hasNoRequestServer?_.extend(settings,{crossDomain:!0,url:""+AP.baseUrl+settings.url,xhrFields:_.extend({},settings.xhrFields,{withCredentials:!0})}):void 0}})},Application.proxy=function(fn){var _this=this;return function(){return fn.apply(_this,arguments)}},Application.getModel=function(str){return _.find(this.models,function(val,key){return key===str||val.modelId===str||val.name===str})},Application.getCollection=function(str){return _.find(this.collections,function(val,key){return key===str||val.collectionId===str||val.name===str})},Application}(),window.WeatherSoapAppSdk=function(_super){function WeatherSoapAppSdk(){return _ref9=WeatherSoapAppSdk.__super__.constructor.apply(this,arguments)}return __extends(WeatherSoapAppSdk,_super),WeatherSoapAppSdk.setup(),WeatherSoapAppSdk.name="WeatherSoapAppSdk",WeatherSoapAppSdk.description="",WeatherSoapAppSdk.init=function(){return window.AP.activeAppName="WeatherSoapApp",WeatherSoapAppSdk.__super__.constructor.init.apply(this,arguments)},WeatherSoapAppSdk}(AP.Application),AP.registerApp(WeatherSoapAppSdk,"WeatherSoapApp"),WeatherSoapAppSdk.models.WeatherByZip=function(_super){function WeatherByZip(){return _ref10=WeatherByZip.__super__.constructor.apply(this,arguments)}return __extends(WeatherByZip,_super),_.extend(WeatherByZip,Backbone.Events),WeatherByZip.modelId="",WeatherByZip.prototype.name="WeatherByZip",WeatherByZip.prototype.urlRoot="/api/v5/weather_by_zips",WeatherByZip.prototype.fieldDefinitions=[{name:"id",label:"id",type:"integer",required:!1,file_url:!1,file_type:"Image"},{name:"get_city_weather_by_zip",label:"get_city_weather_by_zip",type:"string",required:!1,file_url:!1,file_type:"Image"},{name:"get_city_weather_by_zip_response",label:"get_city_weather_by_zip_response",type:"string",required:!1,file_url:!1,file_type:"Image"}],WeatherByZip.prototype.nonAutoKeyFields=[],WeatherByZip.prototype.relationshipDefinitions=[],WeatherByZip.prototype.validations=[],WeatherByZip}(AP.model.Model),WeatherSoapAppSdk.collections.WeatherByZipAll=function(_super){function WeatherByZipAll(){return _ref11=WeatherByZipAll.__super__.constructor.apply(this,arguments)}return __extends(WeatherByZipAll,_super),WeatherByZipAll.collectionId="",WeatherByZipAll.prototype.model=WeatherSoapAppSdk.models.WeatherByZip,WeatherByZipAll.prototype.apiEndpoint="/api/v5/weather_by_zips.json",WeatherByZipAll.prototype.extraParams={scope:"all"},WeatherByZipAll.prototype.queryFields=[],WeatherByZipAll}(AP.collection.ScopeCollection),WeatherSoapAppSdk.collections.WeatherByZipCount=function(_super){function WeatherByZipCount(){return _ref12=WeatherByZipCount.__super__.constructor.apply(this,arguments)}return __extends(WeatherByZipCount,_super),WeatherByZipCount.collectionId="",WeatherByZipCount.prototype.model=WeatherSoapAppSdk.models.WeatherByZip,WeatherByZipCount.prototype.apiEndpoint="/api/v5/weather_by_zips.json",WeatherByZipCount.prototype.extraParams={scope:"count"},WeatherByZipCount.prototype.queryFields=[],WeatherByZipCount}(AP.collection.AggregateCollection),WeatherSoapAppSdk.collections.WeatherByZipCountExactMatch=function(_super){function WeatherByZipCountExactMatch(){return _ref13=WeatherByZipCountExactMatch.__super__.constructor.apply(this,arguments)}return __extends(WeatherByZipCountExactMatch,_super),WeatherByZipCountExactMatch.collectionId="",WeatherByZipCountExactMatch.prototype.model=WeatherSoapAppSdk.models.WeatherByZip,WeatherByZipCountExactMatch.prototype.apiEndpoint="/api/v5/weather_by_zips.json",WeatherByZipCountExactMatch.prototype.extraParams={scope:"count_exact_match"},WeatherByZipCountExactMatch.prototype.queryFields=[],WeatherByZipCountExactMatch}(AP.collection.AggregateCollection),WeatherSoapAppSdk.collections.WeatherByZipExactMatch=function(_super){function WeatherByZipExactMatch(){return _ref14=WeatherByZipExactMatch.__super__.constructor.apply(this,arguments)}return __extends(WeatherByZipExactMatch,_super),WeatherByZipExactMatch.collectionId="",WeatherByZipExactMatch.prototype.model=WeatherSoapAppSdk.models.WeatherByZip,WeatherByZipExactMatch.prototype.apiEndpoint="/api/v5/weather_by_zips.json",WeatherByZipExactMatch.prototype.extraParams={scope:"exact_match"},WeatherByZipExactMatch.prototype.queryFields=[],WeatherByZipExactMatch}(AP.collection.ScopeCollection),WeatherSoapAppSdk.ExampleCustomClass=function(){function ExampleCustomClass(){this.message="This is a custom class."}return ExampleCustomClass.prototype.message=null,ExampleCustomClass.prototype.getMessage=function(){return this.message},ExampleCustomClass}()}.call(this),function(){$(document).on("mobileinit",function(){return $.extend($.mobile,{linkBindingEnabled:!1,pushStateEnabled:!1,hashListeningEnabled:!1,ajaxEnabled:!1,defaultPageTransition:"none","buttonMarkup.hoverDelay":50})})}.call(this),function(root,doc,factory){"function"==typeof define&&define.amd?define(["jquery"],function($){return factory($,root,doc),$.mobile}):factory(root.jQuery,root,doc)}(this,document,function(jQuery,window,document){!function($){$.mobile={}}(jQuery),function($){$.extend($.mobile,{version:"1.4.2",subPageUrlKey:"ui-page",hideUrlBar:!0,keepNative:":jqmData(role='none'), :jqmData(role='nojs')",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:0,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"a",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,buttonMarkup:{hoverDelay:200},dynamicBaseEnabled:!0,pageContainer:$(),allowCrossDomainPages:!1,dialogHashKey:"&ui-state=dialog"})}(jQuery,this),function($,window,undefined){var nsNormalizeDict={},oldFind=$.find,rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,jqmDataRE=/:jqmData\(([^)]*)\)/g;$.extend($.mobile,{ns:"",getAttribute:function(element,key){var data;element=element.jquery?element[0]:element,element&&element.getAttribute&&(data=element.getAttribute("data-"+$.mobile.ns+key));try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?JSON.parse(data):data}catch(err){}return data},nsNormalizeDict:nsNormalizeDict,nsNormalize:function(prop){return nsNormalizeDict[prop]||(nsNormalizeDict[prop]=$.camelCase($.mobile.ns+prop))},closestPageData:function($target){return $target.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")}}),$.fn.jqmData=function(prop,value){var result;return"undefined"!=typeof prop&&(prop&&(prop=$.mobile.nsNormalize(prop)),result=arguments.length<2||value===undefined?this.data(prop):this.data(prop,value)),result},$.jqmData=function(elem,prop,value){var result;return"undefined"!=typeof prop&&(result=$.data(elem,prop?$.mobile.nsNormalize(prop):prop,value)),result},$.fn.jqmRemoveData=function(prop){return this.removeData($.mobile.nsNormalize(prop))},$.jqmRemoveData=function(elem,prop){return $.removeData(elem,$.mobile.nsNormalize(prop))},$.find=function(selector,context,ret,extra){return selector.indexOf(":jqmData")>-1&&(selector=selector.replace(jqmDataRE,"[data-"+($.mobile.ns||"")+"$1]")),oldFind.call(this,selector,context,ret,extra)},$.extend($.find,oldFind)}(jQuery,this),function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{},$.extend($.ui,{version:"c0ab71056b936627e8a7821f03c044aec6280a40",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.support.selectstart="onselectstart"in document.createElement("div"),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()
})},enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}}),$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(set&&(allowDisconnected||instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType))for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}}}(jQuery),function($,window){var compensateToolbars=function(page,desiredHeight){var pageParent=page.parent(),toolbarsAffectingHeight=[],externalHeaders=pageParent.children(":jqmData(role='header')"),internalHeaders=page.children(":jqmData(role='header')"),externalFooters=pageParent.children(":jqmData(role='footer')"),internalFooters=page.children(":jqmData(role='footer')");return 0===internalHeaders.length&&externalHeaders.length>0&&(toolbarsAffectingHeight=toolbarsAffectingHeight.concat(externalHeaders.toArray())),0===internalFooters.length&&externalFooters.length>0&&(toolbarsAffectingHeight=toolbarsAffectingHeight.concat(externalFooters.toArray())),$.each(toolbarsAffectingHeight,function(index,value){desiredHeight-=$(value).outerHeight()}),Math.max(0,desiredHeight)};$.extend($.mobile,{window:$(window),document:$(document),keyCode:$.ui.keyCode,behaviors:{},silentScroll:function(ypos){"number"!==$.type(ypos)&&(ypos=$.mobile.defaultHomeScroll),$.event.special.scrollstart.enabled=!1,setTimeout(function(){window.scrollTo(0,ypos),$.mobile.document.trigger("silentscroll",{x:0,y:ypos})},20),setTimeout(function(){$.event.special.scrollstart.enabled=!0},150)},getClosestBaseUrl:function(ele){var url=$(ele).closest(".ui-page").jqmData("url"),base=$.mobile.path.documentBase.hrefNoHash;return $.mobile.dynamicBaseEnabled&&url&&$.mobile.path.isPath(url)||(url=base),$.mobile.path.makeUrlAbsolute(url,base)},removeActiveLinkClass:function(forceRemoval){!$.mobile.activeClickedLink||$.mobile.activeClickedLink.closest("."+$.mobile.activePageClass).length&&!forceRemoval||$.mobile.activeClickedLink.removeClass($.mobile.activeBtnClass),$.mobile.activeClickedLink=null},getInheritedTheme:function(el,defaultTheme){for(var c,m,e=el[0],ltr="",re=/ui-(bar|body|overlay)-([a-z])\b/;e&&(c=e.className||"",!(c&&(m=re.exec(c))&&(ltr=m[2])));)e=e.parentNode;return ltr||defaultTheme||"a"},enhanceable:function(elements){return this.haveParents(elements,"enhance")},hijackable:function(elements){return this.haveParents(elements,"ajax")},haveParents:function(elements,attr){if(!$.mobile.ignoreContentEnabled)return elements;var e,$element,excluded,i,c,count=elements.length,$newSet=$();for(i=0;count>i;i++){for($element=elements.eq(i),excluded=!1,e=elements[i];e;){if(c=e.getAttribute?e.getAttribute("data-"+$.mobile.ns+attr):"","false"===c){excluded=!0;break}e=e.parentNode}excluded||($newSet=$newSet.add($element))}return $newSet},getScreenHeight:function(){return window.innerHeight||$.mobile.window.height()},resetActivePageHeight:function(height){var page=$("."+$.mobile.activePageClass),pageHeight=page.height(),pageOuterHeight=page.outerHeight(!0);height=compensateToolbars(page,"number"==typeof height?height:$.mobile.getScreenHeight()),page.css("min-height",height-(pageOuterHeight-pageHeight))},loading:function(){var loader=this.loading._widget||$($.mobile.loader.prototype.defaultHtml).loader(),returnValue=loader.loader.apply(loader,arguments);return this.loading._widget=loader,returnValue}}),$.addDependents=function(elem,newDependents){var $elem=$(elem),dependents=$elem.jqmData("dependents")||$();$elem.jqmData("dependents",$(dependents).add(newDependents))},$.fn.extend({removeWithDependents:function(){$.removeWithDependents(this)},enhanceWithin:function(){var index,widgetElements={},keepNative=$.mobile.page.prototype.keepNativeSelector(),that=this;$.mobile.nojs&&$.mobile.nojs(this),$.mobile.links&&$.mobile.links(this),$.mobile.degradeInputsWithin&&$.mobile.degradeInputsWithin(this),$.fn.buttonMarkup&&this.find($.fn.buttonMarkup.initSelector).not(keepNative).jqmEnhanceable().buttonMarkup(),$.fn.fieldcontain&&this.find(":jqmData(role='fieldcontain')").not(keepNative).jqmEnhanceable().fieldcontain(),$.each($.mobile.widgets,function(name,constructor){if(constructor.initSelector){var elements=$.mobile.enhanceable(that.find(constructor.initSelector));elements.length>0&&(elements=elements.not(keepNative)),elements.length>0&&(widgetElements[constructor.prototype.widgetName]=elements)}});for(index in widgetElements)widgetElements[index][index]();return this},addDependents:function(newDependents){$.addDependents(this,newDependents)},getEncodedText:function(){return $("<a>").text(this.text()).html()},jqmEnhanceable:function(){return $.mobile.enhanceable(this)},jqmHijackable:function(){return $.mobile.hijackable(this)}}),$.removeWithDependents=function(nativeElement){var element=$(nativeElement);(element.jqmData("dependents")||$()).remove(),element.remove()},$.addDependents=function(nativeElement,newDependents){var element=$(nativeElement),dependents=element.jqmData("dependents")||$();element.jqmData("dependents",$(dependents).add(newDependents))},$.find.matches=function(expr,set){return $.find(expr,null,null,set)},$.find.matchesSelector=function(node,expr){return $.find(expr,null,null,[node]).length>0}}(jQuery,this),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&(target[key]=$.isPlainObject(value)?$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,this.each(isMethodCall?function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}:function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}(jQuery),function($){var rcapitals=/[A-Z]/g,replaceFunction=function(c){return"-"+c.toLowerCase()};$.extend($.Widget.prototype,{_getCreateOptions:function(){var option,value,elem=this.element[0],options={};if(!$.mobile.getAttribute(elem,"defaults"))for(option in this.options)value=$.mobile.getAttribute(elem,option.replace(rcapitals,replaceFunction)),null!=value&&(options[option]=value);return options}}),$.mobile.widget=$.Widget}(jQuery),function($){var loaderClass="ui-loader",$html=$("html");$.widget("mobile.loader",{options:{theme:"a",textVisible:!1,html:"",text:"loading"},defaultHtml:"<div class='"+loaderClass+"'><span class='ui-icon-loading'></span><h1></h1></div>",fakeFixLoader:function(){var activeBtn=$("."+$.mobile.activeBtnClass).first();this.element.css({top:$.support.scrollTop&&this.window.scrollTop()+this.window.height()/2||activeBtn.length&&activeBtn.offset().top||100})},checkLoaderPosition:function(){var offset=this.element.offset(),scrollTop=this.window.scrollTop(),screenHeight=$.mobile.getScreenHeight();(offset.top<scrollTop||offset.top-scrollTop>screenHeight)&&(this.element.addClass("ui-loader-fakefix"),this.fakeFixLoader(),this.window.unbind("scroll",this.checkLoaderPosition).bind("scroll",$.proxy(this.fakeFixLoader,this)))},resetHtml:function(){this.element.html($(this.defaultHtml).html())},show:function(theme,msgText,textonly){var textVisible,message,loadSettings;this.resetHtml(),"object"===$.type(theme)?(loadSettings=$.extend({},this.options,theme),theme=loadSettings.theme):(loadSettings=this.options,theme=theme||loadSettings.theme),message=msgText||(loadSettings.text===!1?"":loadSettings.text),$html.addClass("ui-loading"),textVisible=loadSettings.textVisible,this.element.attr("class",loaderClass+" ui-corner-all ui-body-"+theme+" ui-loader-"+(textVisible||msgText||theme.text?"verbose":"default")+(loadSettings.textonly||textonly?" ui-loader-textonly":"")),loadSettings.html?this.element.html(loadSettings.html):this.element.find("h1").text(message),this.element.appendTo($.mobile.pageContainer),this.checkLoaderPosition(),this.window.bind("scroll",$.proxy(this.checkLoaderPosition,this))},hide:function(){$html.removeClass("ui-loading"),this.options.text&&this.element.removeClass("ui-loader-fakefix"),$.mobile.window.unbind("scroll",this.fakeFixLoader),$.mobile.window.unbind("scroll",this.checkLoaderPosition)}})}(jQuery,this),function($,window,undefined){"$:nomunge";function get_fragment(url){return url=url||location.href,"#"+url.replace(/^[^#]*#?(.*)$/,"$1")}var fake_onhashchange,str_hashchange="hashchange",doc=document,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange="on"+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange)},$.fn[str_hashchange].delay=50,special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){return supports_onhashchange?!1:void $(fake_onhashchange.start)},teardown:function(){return supports_onhashchange?!1:void $(fake_onhashchange.stop)}}),fake_onhashchange=function(){function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);hash!==last_hash?(history_set(last_hash=hash,history_hash),$(window).trigger(str_hashchange)):history_hash!==last_hash&&(location.href=location.href.replace(/#.*/,"")+history_hash),timeout_id=setTimeout(poll,$.fn[str_hashchange].delay)}var timeout_id,self={},last_hash=get_fragment(),fn_retval=function(val){return val},history_set=fn_retval,history_get=fn_retval;return self.start=function(){timeout_id||poll()},self.stop=function(){timeout_id&&clearTimeout(timeout_id),timeout_id=undefined},window.attachEvent&&!window.addEventListener&&!supports_onhashchange&&function(){var iframe,iframe_src;self.start=function(){iframe||(iframe_src=$.fn[str_hashchange].src,iframe_src=iframe_src&&iframe_src+get_fragment(),iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){iframe_src||history_set(get_fragment()),poll()}).attr("src",iframe_src||"javascript:0").insertAfter("body")[0].contentWindow,doc.onpropertychange=function(){try{"title"===event.propertyName&&(iframe.document.title=doc.title)}catch(e){}})},self.stop=fn_retval,history_get=function(){return get_fragment(iframe.location.href)},history_set=function(hash,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;hash!==history_hash&&(iframe_doc.title=doc.title,iframe_doc.open(),domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>'),iframe_doc.close(),iframe.location.hash=hash)}}(),self}()}(jQuery,this),function($){window.matchMedia=window.matchMedia||function(doc){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");return div.id="mq-test-1",div.style.cssText="position:absolute;top:-100em",fakeBody.style.background="none",fakeBody.appendChild(div),function(q){return div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>',docElem.insertBefore(fakeBody,refNode),bool=42===div.offsetWidth,docElem.removeChild(fakeBody),{matches:bool,media:q}}}(document),$.mobile.media=function(q){return window.matchMedia(q).matches}}(jQuery),function($){var support={touch:"ontouchend"in document};$.mobile.support=$.mobile.support||{},$.extend($.support,support),$.extend($.mobile.support,support)}(jQuery),function($){$.extend($.support,{orientation:"orientation"in window&&"onorientationchange"in window})}(jQuery),function($,undefined){function propExists(prop){var v,uc_prop=prop.charAt(0).toUpperCase()+prop.substr(1),props=(prop+" "+vendors.join(uc_prop+" ")+uc_prop).split(" ");for(v in props)if(fbCSS[props[v]]!==undefined)return!0}function inlineSVG(){var w=window,svg=!(!w.document.createElementNS||!w.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||w.opera&&-1===navigator.userAgent.indexOf("Chrome")),support=function(data){data&&svg||$("html").addClass("ui-nosvg")},img=new w.Image;img.onerror=function(){support(!1)},img.onload=function(){support(1===img.width&&1===img.height)},img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}function transform3dTest(){var el,transforms,t,mqProp="transform-3d",ret=$.mobile.media("(-"+vendors.join("-"+mqProp+"),(-")+"-"+mqProp+"),("+mqProp+")");if(ret)return!!ret;el=document.createElement("div"),transforms={MozTransform:"-moz-transform",transform:"transform"},fakeBody.append(el);for(t in transforms)el.style[t]!==undefined&&(el.style[t]="translate3d( 100px, 1px, 1px )",ret=window.getComputedStyle(el).getPropertyValue(transforms[t]));return!!ret&&"none"!==ret}function baseTagTest(){var link,rebase,fauxBase=location.protocol+"//"+location.host+location.pathname+"ui-dir/",base=$("head base"),fauxEle=null,href="";return base.length?href=base.attr("href"):base=fauxEle=$("<base>",{href:fauxBase}).appendTo("head"),link=$("<a href='testurl' />").prependTo(fakeBody),rebase=link[0].href,base[0].href=href||location.pathname,fauxEle&&fauxEle.remove(),0===rebase.indexOf(fauxBase)}function cssPointerEventsTest(){var supports,element=document.createElement("x"),documentElement=document.documentElement,getComputedStyle=window.getComputedStyle;return"pointerEvents"in element.style?(element.style.pointerEvents="auto",element.style.pointerEvents="x",documentElement.appendChild(element),supports=getComputedStyle&&"auto"===getComputedStyle(element,"").pointerEvents,documentElement.removeChild(element),!!supports):!1}function boundingRect(){var div=document.createElement("div");return"undefined"!=typeof div.getBoundingClientRect}function fixedPosition(){var w=window,ua=navigator.userAgent,platform=navigator.platform,wkmatch=ua.match(/AppleWebKit\/([0-9]+)/),wkversion=!!wkmatch&&wkmatch[1],ffmatch=ua.match(/Fennec\/([0-9]+)/),ffversion=!!ffmatch&&ffmatch[1],operammobilematch=ua.match(/Opera Mobi\/([0-9]+)/),omversion=!!operammobilematch&&operammobilematch[1];return(platform.indexOf("iPhone")>-1||platform.indexOf("iPad")>-1||platform.indexOf("iPod")>-1)&&wkversion&&534>wkversion||w.operamini&&"[object OperaMini]"==={}.toString.call(w.operamini)||operammobilematch&&7458>omversion||ua.indexOf("Android")>-1&&wkversion&&533>wkversion||ffversion&&6>ffversion||"palmGetResource"in window&&wkversion&&534>wkversion||ua.indexOf("MeeGo")>-1&&ua.indexOf("NokiaBrowser/8.5.0")>-1?!1:!0}var nokiaLTE7_3,fakeBody=$("<body>").prependTo("html"),fbCSS=fakeBody[0].style,vendors=["Webkit","Moz","O"],webos="palmGetResource"in window,operamini=window.operamini&&"[object OperaMini]"==={}.toString.call(window.operamini),bb=window.blackberry&&!propExists("-webkit-transform");$.extend($.mobile,{browser:{}}),$.mobile.browser.oldIE=function(){var v=3,div=document.createElement("div"),a=div.all||[];do div.innerHTML="<!--[if gt IE "+ ++v+"]><br><![endif]-->";while(a[0]);return v>4?v:!v}(),$.extend($.support,{pushState:"pushState"in history&&"replaceState"in history&&!(window.navigator.userAgent.indexOf("Firefox")>=0&&window.top!==window)&&-1===window.navigator.userAgent.search(/CriOS/),mediaquery:$.mobile.media("only all"),cssPseudoElement:!!propExists("content"),touchOverflow:!!propExists("overflowScrolling"),cssTransform3d:transform3dTest(),boxShadow:!!propExists("boxShadow")&&!bb,fixedPosition:fixedPosition(),scrollTop:("pageXOffset"in window||"scrollTop"in document.documentElement||"scrollTop"in fakeBody[0])&&!webos&&!operamini,dynamicBaseTag:baseTagTest(),cssPointerEvents:cssPointerEventsTest(),boundingRect:boundingRect(),inlineSVG:inlineSVG}),fakeBody.remove(),nokiaLTE7_3=function(){var ua=window.navigator.userAgent;return ua.indexOf("Nokia")>-1&&(ua.indexOf("Symbian/3")>-1||ua.indexOf("Series60/5")>-1)&&ua.indexOf("AppleWebKit")>-1&&ua.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}(),$.mobile.gradeA=function(){return($.support.mediaquery&&$.support.cssPseudoElement||$.mobile.browser.oldIE&&$.mobile.browser.oldIE>=8)&&($.support.boundingRect||null!==$.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/))},$.mobile.ajaxBlacklist=window.blackberry&&!window.WebKitPoint||operamini||nokiaLTE7_3,nokiaLTE7_3&&$(function(){$("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")}),$.support.boxShadow||$("html").addClass("ui-noboxshadow")}(jQuery),function($,undefined){var self,$win=$.mobile.window,dummyFnToInitNavigate=function(){};$.event.special.beforenavigate={setup:function(){$win.on("navigate",dummyFnToInitNavigate)},teardown:function(){$win.off("navigate",dummyFnToInitNavigate)}},$.event.special.navigate=self={bound:!1,pushStateEnabled:!0,originalEventName:undefined,isPushStateEnabled:function(){return $.support.pushState&&$.mobile.pushStateEnabled===!0&&this.isHashChangeEnabled()},isHashChangeEnabled:function(){return $.mobile.hashListeningEnabled===!0},popstate:function(event){var newEvent=new $.Event("navigate"),beforeNavigate=new $.Event("beforenavigate"),state=event.originalEvent.state||{};beforeNavigate.originalEvent=event,$win.trigger(beforeNavigate),beforeNavigate.isDefaultPrevented()||(event.historyState&&$.extend(state,event.historyState),newEvent.originalEvent=event,setTimeout(function(){$win.trigger(newEvent,{state:state})},0))},hashchange:function(event){var newEvent=new $.Event("navigate"),beforeNavigate=new $.Event("beforenavigate");beforeNavigate.originalEvent=event,$win.trigger(beforeNavigate),beforeNavigate.isDefaultPrevented()||(newEvent.originalEvent=event,$win.trigger(newEvent,{state:event.hashchangeState||{}}))},setup:function(){self.bound||(self.bound=!0,self.isPushStateEnabled()?(self.originalEventName="popstate",$win.bind("popstate.navigate",self.popstate)):self.isHashChangeEnabled()&&(self.originalEventName="hashchange",$win.bind("hashchange.navigate",self.hashchange)))}}}(jQuery),function($,undefined){var path,$base,dialogHashKey="&ui-state=dialog";$.mobile.path=path={uiStateKey:"&ui-state",urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(url){var uri=url?this.parseUrl(url):location,hash=this.parseUrl(url||location.href).hash;return hash="#"===hash?"":hash,uri.protocol+"//"+uri.host+uri.pathname+uri.search+hash},getDocumentUrl:function(asParsedObject){return asParsedObject?$.extend({},path.documentUrl):path.documentUrl.href},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(url){if("object"===$.type(url))return url;var matches=path.urlParseRE.exec(url||"")||[];return{href:matches[0]||"",hrefNoHash:matches[1]||"",hrefNoSearch:matches[2]||"",domain:matches[3]||"",protocol:matches[4]||"",doubleSlash:matches[5]||"",authority:matches[6]||"",username:matches[8]||"",password:matches[9]||"",host:matches[10]||"",hostname:matches[11]||"",port:matches[12]||"",pathname:matches[13]||"",directory:matches[14]||"",filename:matches[15]||"",search:matches[16]||"",hash:matches[17]||""}},makePathAbsolute:function(relPath,absPath){var absStack,relStack,i,d;if(relPath&&"/"===relPath.charAt(0))return relPath;for(relPath=relPath||"",absPath=absPath?absPath.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"",absStack=absPath?absPath.split("/"):[],relStack=relPath.split("/"),i=0;i<relStack.length;i++)switch(d=relStack[i]){case".":break;case"..":absStack.length&&absStack.pop();break;default:absStack.push(d)}return"/"+absStack.join("/")},isSameDomain:function(absUrl1,absUrl2){return path.parseUrl(absUrl1).domain===path.parseUrl(absUrl2).domain},isRelativeUrl:function(url){return""===path.parseUrl(url).protocol},isAbsoluteUrl:function(url){return""!==path.parseUrl(url).protocol},makeUrlAbsolute:function(relUrl,absUrl){if(!path.isRelativeUrl(relUrl))return relUrl;absUrl===undefined&&(absUrl=this.documentBase);var relObj=path.parseUrl(relUrl),absObj=path.parseUrl(absUrl),protocol=relObj.protocol||absObj.protocol,doubleSlash=relObj.protocol?relObj.doubleSlash:relObj.doubleSlash||absObj.doubleSlash,authority=relObj.authority||absObj.authority,hasPath=""!==relObj.pathname,pathname=path.makePathAbsolute(relObj.pathname||absObj.filename,absObj.pathname),search=relObj.search||!hasPath&&absObj.search||"",hash=relObj.hash;return protocol+doubleSlash+authority+pathname+search+hash},addSearchParams:function(url,params){var u=path.parseUrl(url),p="object"==typeof params?$.param(params):params,s=u.search||"?";return u.hrefNoSearch+s+("?"!==s.charAt(s.length-1)?"&":"")+p+(u.hash||"")},convertUrlToDataUrl:function(absUrl){var u=path.parseUrl(absUrl);return path.isEmbeddedPage(u)?u.hash.split(dialogHashKey)[0].replace(/^#/,"").replace(/\?.*$/,""):path.isSameDomain(u,this.documentBase)?u.hrefNoHash.replace(this.documentBase.domain,"").split(dialogHashKey)[0]:window.decodeURIComponent(absUrl)},get:function(newPath){return newPath===undefined&&(newPath=path.parseLocation().hash),path.stripHash(newPath).replace(/[^\/]*\.[^\/*]+$/,"")},set:function(path){location.hash=path},isPath:function(url){return/\//.test(url)},clean:function(url){return url.replace(this.documentBase.domain,"")},stripHash:function(url){return url.replace(/^#/,"")},stripQueryParams:function(url){return url.replace(/\?.*$/,"")},cleanHash:function(hash){return path.stripHash(hash.replace(/\?.*$/,"").replace(dialogHashKey,""))},isHashValid:function(hash){return/^#[^#]+$/.test(hash)},isExternal:function(url){var u=path.parseUrl(url);return u.protocol&&u.domain!==this.documentUrl.domain?!0:!1},hasProtocol:function(url){return/^(:?\w+:)/.test(url)},isEmbeddedPage:function(url){var u=path.parseUrl(url);return""!==u.protocol?!this.isPath(u.hash)&&u.hash&&(u.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&u.hrefNoHash===this.documentBase.hrefNoHash):/^#/.test(u.href)},squash:function(url,resolutionUrl){var href,cleanedUrl,search,stateIndex,isPath=this.isPath(url),uri=this.parseUrl(url),preservedHash=uri.hash,uiState="";return resolutionUrl=resolutionUrl||(path.isPath(url)?path.getLocation():path.getDocumentUrl()),cleanedUrl=isPath?path.stripHash(url):url,cleanedUrl=path.isPath(uri.hash)?path.stripHash(uri.hash):cleanedUrl,stateIndex=cleanedUrl.indexOf(this.uiStateKey),stateIndex>-1&&(uiState=cleanedUrl.slice(stateIndex),cleanedUrl=cleanedUrl.slice(0,stateIndex)),href=path.makeUrlAbsolute(cleanedUrl,resolutionUrl),search=this.parseUrl(href).search,isPath?((path.isPath(preservedHash)||0===preservedHash.replace("#","").indexOf(this.uiStateKey))&&(preservedHash=""),uiState&&-1===preservedHash.indexOf(this.uiStateKey)&&(preservedHash+=uiState),-1===preservedHash.indexOf("#")&&""!==preservedHash&&(preservedHash="#"+preservedHash),href=path.parseUrl(href),href=href.protocol+"//"+href.host+href.pathname+search+preservedHash):href+=href.indexOf("#")>-1?uiState:"#"+uiState,href},isPreservableHash:function(hash){return 0===hash.replace("#","").indexOf(this.uiStateKey)},hashToSelector:function(hash){var hasHash="#"===hash.substring(0,1);return hasHash&&(hash=hash.substring(1)),(hasHash?"#":"")+hash.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1")
},getFilePath:function(path){var splitkey="&"+$.mobile.subPageUrlKey;return path&&path.split(splitkey)[0].split(dialogHashKey)[0]},isFirstPageUrl:function(url){var u=path.parseUrl(path.makeUrlAbsolute(url,this.documentBase)),samePath=u.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&u.hrefNoHash===this.documentBase.hrefNoHash,fp=$.mobile.firstPage,fpId=fp&&fp[0]?fp[0].id:undefined;return samePath&&(!u.hash||"#"===u.hash||fpId&&u.hash.replace(/^#/,"")===fpId)},isPermittedCrossDomainRequest:function(docUrl,reqUrl){return $.mobile.allowCrossDomainPages&&("file:"===docUrl.protocol||"content:"===docUrl.protocol)&&-1!==reqUrl.search(/^https?:/)}},path.documentUrl=path.parseLocation(),$base=$("head").find("base"),path.documentBase=$base.length?path.parseUrl(path.makeUrlAbsolute($base.attr("href"),path.documentUrl.href)):path.documentUrl,path.documentBaseDiffers=path.documentUrl.hrefNoHash!==path.documentBase.hrefNoHash,path.getDocumentBase=function(asParsedObject){return asParsedObject?$.extend({},path.documentBase):path.documentBase.href},$.extend($.mobile,{getDocumentUrl:path.getDocumentUrl,getDocumentBase:path.getDocumentBase})}(jQuery),function($,undefined){$.mobile.History=function(stack,index){this.stack=stack||[],this.activeIndex=index||0},$.extend($.mobile.History.prototype,{getActive:function(){return this.stack[this.activeIndex]},getLast:function(){return this.stack[this.previousIndex]},getNext:function(){return this.stack[this.activeIndex+1]},getPrev:function(){return this.stack[this.activeIndex-1]},add:function(url,data){data=data||{},this.getNext()&&this.clearForward(),data.hash&&-1===data.hash.indexOf("#")&&(data.hash="#"+data.hash),data.url=url,this.stack.push(data),this.activeIndex=this.stack.length-1},clearForward:function(){this.stack=this.stack.slice(0,this.activeIndex+1)},find:function(url,stack,earlyReturn){stack=stack||this.stack;var entry,i,index,length=stack.length;for(i=0;length>i;i++)if(entry=stack[i],(decodeURIComponent(url)===decodeURIComponent(entry.url)||decodeURIComponent(url)===decodeURIComponent(entry.hash))&&(index=i,earlyReturn))return index;return index},closest:function(url){var closest,a=this.activeIndex;return closest=this.find(url,this.stack.slice(0,a)),closest===undefined&&(closest=this.find(url,this.stack.slice(a),!0),closest=closest===undefined?closest:closest+a),closest},direct:function(opts){var newActiveIndex=this.closest(opts.url),a=this.activeIndex;newActiveIndex!==undefined&&(this.activeIndex=newActiveIndex,this.previousIndex=a),a>newActiveIndex?(opts.present||opts.back||$.noop)(this.getActive(),"back"):newActiveIndex>a?(opts.present||opts.forward||$.noop)(this.getActive(),"forward"):newActiveIndex===undefined&&opts.missing&&opts.missing(this.getActive())}})}(jQuery),function($){var path=$.mobile.path,initialHref=location.href;$.mobile.Navigator=function(history){this.history=history,this.ignoreInitialHashChange=!0,$.mobile.window.bind({"popstate.history":$.proxy(this.popstate,this),"hashchange.history":$.proxy(this.hashchange,this)})},$.extend($.mobile.Navigator.prototype,{squash:function(url,data){var state,href,hash=path.isPath(url)?path.stripHash(url):url;return href=path.squash(url),state=$.extend({hash:hash,url:href},data),window.history.replaceState(state,state.title||document.title,href),state},hash:function(url,href){var parsed,loc,hash,resolved;return parsed=path.parseUrl(url),loc=path.parseLocation(),loc.pathname+loc.search===parsed.pathname+parsed.search?hash=parsed.hash?parsed.hash:parsed.pathname+parsed.search:path.isPath(url)?(resolved=path.parseUrl(href),hash=resolved.pathname+resolved.search+(path.isPreservableHash(resolved.hash)?resolved.hash.replace("#",""):"")):hash=url,hash},go:function(url,data,noEvents){var state,href,hash,popstateEvent,isPopStateEvent=$.event.special.navigate.isPushStateEnabled();href=path.squash(url),hash=this.hash(url,href),noEvents&&hash!==path.stripHash(path.parseLocation().hash)&&(this.preventNextHashChange=noEvents),this.preventHashAssignPopState=!0,window.location.hash=hash,this.preventHashAssignPopState=!1,state=$.extend({url:href,hash:hash,title:document.title},data),isPopStateEvent&&(popstateEvent=new $.Event("popstate"),popstateEvent.originalEvent={type:"popstate",state:null},this.squash(url,state),noEvents||(this.ignorePopState=!0,$.mobile.window.trigger(popstateEvent))),this.history.add(state.url,state)},popstate:function(event){var hash,state;if($.event.special.navigate.isPushStateEnabled())return this.preventHashAssignPopState?(this.preventHashAssignPopState=!1,void event.stopImmediatePropagation()):this.ignorePopState?void(this.ignorePopState=!1):!event.originalEvent.state&&1===this.history.stack.length&&this.ignoreInitialHashChange&&(this.ignoreInitialHashChange=!1,location.href===initialHref)?void event.preventDefault():(hash=path.parseLocation().hash,!event.originalEvent.state&&hash?(state=this.squash(hash),this.history.add(state.url,state),void(event.historyState=state)):void this.history.direct({url:(event.originalEvent.state||{}).url||hash,present:function(historyEntry,direction){event.historyState=$.extend({},historyEntry),event.historyState.direction=direction}}))},hashchange:function(event){var history,hash;if($.event.special.navigate.isHashChangeEnabled()&&!$.event.special.navigate.isPushStateEnabled()){if(this.preventNextHashChange)return this.preventNextHashChange=!1,void event.stopImmediatePropagation();history=this.history,hash=path.parseLocation().hash,this.history.direct({url:hash,present:function(historyEntry,direction){event.hashchangeState=$.extend({},historyEntry),event.hashchangeState.direction=direction},missing:function(){history.add(hash,{hash:hash,title:document.title})}})}}})}(jQuery),function($){$.mobile.navigate=function(url,data,noEvents){$.mobile.navigate.navigator.go(url,data,noEvents)},$.mobile.navigate.history=new $.mobile.History,$.mobile.navigate.navigator=new $.mobile.Navigator($.mobile.navigate.history);var loc=$.mobile.path.parseLocation();$.mobile.navigate.history.add(loc.href,{hash:loc.hash})}(jQuery),function($,undefined){var props={animation:{},transition:{}},testElement=document.createElement("a"),vendorPrefixes=["","webkit-","moz-","o-"];$.each(["animation","transition"],function(i,test){var testName=0===i?test+"-name":test;$.each(vendorPrefixes,function(j,prefix){return testElement.style[$.camelCase(prefix+testName)]!==undefined?(props[test].prefix=prefix,!1):void 0}),props[test].duration=$.camelCase(props[test].prefix+test+"-duration"),props[test].event=$.camelCase(props[test].prefix+test+"-end"),""===props[test].prefix&&(props[test].event=props[test].event.toLowerCase())}),$.support.cssTransitions=props.transition.prefix!==undefined,$.support.cssAnimations=props.animation.prefix!==undefined,$(testElement).remove(),$.fn.animationComplete=function(callback,type,fallbackTime){var timer,duration,that=this,animationType=type&&"animation"!==type?"transition":"animation";return $.support.cssTransitions&&"transition"===animationType||$.support.cssAnimations&&"animation"===animationType?(fallbackTime===undefined&&($(this).context!==document&&(duration=3e3*parseFloat($(this).css(props[animationType].duration))),(0===duration||duration===undefined||isNaN(duration))&&(duration=$.fn.animationComplete.defaultDuration)),timer=setTimeout(function(){$(that).off(props[animationType].event),callback.apply(that)},duration),$(this).one(props[animationType].event,function(){clearTimeout(timer),callback.call(this,arguments)})):(setTimeout($.proxy(callback,this),0),$(this))},$.fn.animationComplete.defaultDuration=1e3}(jQuery),function($,window,document,undefined){function getNativeEvent(event){for(;event&&"undefined"!=typeof event.originalEvent;)event=event.originalEvent;return event}function createVirtualEvent(event,eventType){var oe,props,ne,prop,ct,touch,i,j,len,t=event.type;if(event=$.Event(event),event.type=eventType,oe=event.originalEvent,props=$.event.props,t.search(/^(mouse|click)/)>-1&&(props=mouseEventProps),oe)for(i=props.length,prop;i;)prop=props[--i],event[prop]=oe[prop];if(t.search(/mouse(down|up)|click/)>-1&&!event.which&&(event.which=1),-1!==t.search(/^touch/)&&(ne=getNativeEvent(oe),t=ne.touches,ct=ne.changedTouches,touch=t&&t.length?t[0]:ct&&ct.length?ct[0]:undefined))for(j=0,len=touchEventProps.length;len>j;j++)prop=touchEventProps[j],event[prop]=touch[prop];return event}function getVirtualBindingFlags(element){for(var b,k,flags={};element;){b=$.data(element,dataPropertyName);for(k in b)b[k]&&(flags[k]=flags.hasVirtualBinding=!0);element=element.parentNode}return flags}function getClosestElementWithVirtualBinding(element,eventType){for(var b;element;){if(b=$.data(element,dataPropertyName),b&&(!eventType||b[eventType]))return element;element=element.parentNode}return null}function enableTouchBindings(){blockTouchTriggers=!1}function disableTouchBindings(){blockTouchTriggers=!0}function enableMouseBindings(){lastTouchID=0,clickBlockList.length=0,blockMouseTriggers=!1,disableTouchBindings()}function disableMouseBindings(){enableTouchBindings()}function startResetTimer(){clearResetTimer(),resetTimerID=setTimeout(function(){resetTimerID=0,enableMouseBindings()},$.vmouse.resetTimerDuration)}function clearResetTimer(){resetTimerID&&(clearTimeout(resetTimerID),resetTimerID=0)}function triggerVirtualEvent(eventType,event,flags){var ve;return(flags&&flags[eventType]||!flags&&getClosestElementWithVirtualBinding(event.target,eventType))&&(ve=createVirtualEvent(event,eventType),$(event.target).trigger(ve)),ve}function mouseEventCallback(event){var ve,touchID=$.data(event.target,touchTargetPropertyName);blockMouseTriggers||lastTouchID&&lastTouchID===touchID||(ve=triggerVirtualEvent("v"+event.type,event),ve&&(ve.isDefaultPrevented()&&event.preventDefault(),ve.isPropagationStopped()&&event.stopPropagation(),ve.isImmediatePropagationStopped()&&event.stopImmediatePropagation()))}function handleTouchStart(event){var target,flags,t,touches=getNativeEvent(event).touches;touches&&1===touches.length&&(target=event.target,flags=getVirtualBindingFlags(target),flags.hasVirtualBinding&&(lastTouchID=nextTouchID++,$.data(target,touchTargetPropertyName,lastTouchID),clearResetTimer(),disableMouseBindings(),didScroll=!1,t=getNativeEvent(event).touches[0],startX=t.pageX,startY=t.pageY,triggerVirtualEvent("vmouseover",event,flags),triggerVirtualEvent("vmousedown",event,flags)))}function handleScroll(event){blockTouchTriggers||(didScroll||triggerVirtualEvent("vmousecancel",event,getVirtualBindingFlags(event.target)),didScroll=!0,startResetTimer())}function handleTouchMove(event){if(!blockTouchTriggers){var t=getNativeEvent(event).touches[0],didCancel=didScroll,moveThreshold=$.vmouse.moveDistanceThreshold,flags=getVirtualBindingFlags(event.target);didScroll=didScroll||Math.abs(t.pageX-startX)>moveThreshold||Math.abs(t.pageY-startY)>moveThreshold,didScroll&&!didCancel&&triggerVirtualEvent("vmousecancel",event,flags),triggerVirtualEvent("vmousemove",event,flags),startResetTimer()}}function handleTouchEnd(event){if(!blockTouchTriggers){disableTouchBindings();var ve,t,flags=getVirtualBindingFlags(event.target);triggerVirtualEvent("vmouseup",event,flags),didScroll||(ve=triggerVirtualEvent("vclick",event,flags),ve&&ve.isDefaultPrevented()&&(t=getNativeEvent(event).changedTouches[0],clickBlockList.push({touchID:lastTouchID,x:t.clientX,y:t.clientY}),blockMouseTriggers=!0)),triggerVirtualEvent("vmouseout",event,flags),didScroll=!1,startResetTimer()}}function hasVirtualBindings(ele){var k,bindings=$.data(ele,dataPropertyName);if(bindings)for(k in bindings)if(bindings[k])return!0;return!1}function dummyMouseHandler(){}function getSpecialEventObject(eventType){var realType=eventType.substr(1);return{setup:function(){hasVirtualBindings(this)||$.data(this,dataPropertyName,{});var bindings=$.data(this,dataPropertyName);bindings[eventType]=!0,activeDocHandlers[eventType]=(activeDocHandlers[eventType]||0)+1,1===activeDocHandlers[eventType]&&$document.bind(realType,mouseEventCallback),$(this).bind(realType,dummyMouseHandler),eventCaptureSupported&&(activeDocHandlers.touchstart=(activeDocHandlers.touchstart||0)+1,1===activeDocHandlers.touchstart&&$document.bind("touchstart",handleTouchStart).bind("touchend",handleTouchEnd).bind("touchmove",handleTouchMove).bind("scroll",handleScroll))},teardown:function(){--activeDocHandlers[eventType],activeDocHandlers[eventType]||$document.unbind(realType,mouseEventCallback),eventCaptureSupported&&(--activeDocHandlers.touchstart,activeDocHandlers.touchstart||$document.unbind("touchstart",handleTouchStart).unbind("touchmove",handleTouchMove).unbind("touchend",handleTouchEnd).unbind("scroll",handleScroll));var $this=$(this),bindings=$.data(this,dataPropertyName);bindings&&(bindings[eventType]=!1),$this.unbind(realType,dummyMouseHandler),hasVirtualBindings(this)||$this.removeData(dataPropertyName)}}}var threshold,i,dataPropertyName="virtualMouseBindings",touchTargetPropertyName="virtualTouchID",virtualEventNames="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),touchEventProps="clientX clientY pageX pageY screenX screenY".split(" "),mouseHookProps=$.event.mouseHooks?$.event.mouseHooks.props:[],mouseEventProps=$.event.props.concat(mouseHookProps),activeDocHandlers={},resetTimerID=0,startX=0,startY=0,didScroll=!1,clickBlockList=[],blockMouseTriggers=!1,blockTouchTriggers=!1,eventCaptureSupported="addEventListener"in document,$document=$(document),nextTouchID=1,lastTouchID=0;for($.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},i=0;i<virtualEventNames.length;i++)$.event.special[virtualEventNames[i]]=getSpecialEventObject(virtualEventNames[i]);eventCaptureSupported&&document.addEventListener("click",function(e){var x,y,ele,i,o,touchID,cnt=clickBlockList.length,target=e.target;if(cnt)for(x=e.clientX,y=e.clientY,threshold=$.vmouse.clickDistanceThreshold,ele=target;ele;){for(i=0;cnt>i;i++)if(o=clickBlockList[i],touchID=0,ele===target&&Math.abs(o.x-x)<threshold&&Math.abs(o.y-y)<threshold||$.data(ele,touchTargetPropertyName)===o.touchID)return e.preventDefault(),void e.stopPropagation();ele=ele.parentNode}},!0)}(jQuery,window,document),function($,window,undefined){function triggerCustomEvent(obj,eventType,event,bubble){var originalType=event.type;event.type=eventType,bubble?$.event.trigger(event,undefined,obj):$.event.dispatch.call(obj,event),event.type=originalType}var $document=$(document),supportTouch=$.mobile.support.touch,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove";$.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(i,name){$.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)},$.attrFn&&($.attrFn[name]=!0)}),$.event.special.scrollstart={enabled:!0,setup:function(){function trigger(event,state){scrolling=state,triggerCustomEvent(thisObject,scrolling?"scrollstart":"scrollstop",event)}var scrolling,timer,thisObject=this,$this=$(thisObject);$this.bind(scrollEvent,function(event){$.event.special.scrollstart.enabled&&(scrolling||trigger(event,!0),clearTimeout(timer),timer=setTimeout(function(){trigger(event,!1)},50))})},teardown:function(){$(this).unbind(scrollEvent)}},$.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var thisObject=this,$this=$(thisObject),isTaphold=!1;$this.bind("vmousedown",function(event){function clearTapTimer(){clearTimeout(timer)}function clearTapHandlers(){clearTapTimer(),$this.unbind("vclick",clickHandler).unbind("vmouseup",clearTapTimer),$document.unbind("vmousecancel",clearTapHandlers)}function clickHandler(event){clearTapHandlers(),isTaphold||origTarget!==event.target?isTaphold&&event.stopPropagation():triggerCustomEvent(thisObject,"tap",event)}if(isTaphold=!1,event.which&&1!==event.which)return!1;var timer,origTarget=event.target;$this.bind("vmouseup",clearTapTimer).bind("vclick",clickHandler),$document.bind("vmousecancel",clearTapHandlers),timer=setTimeout(function(){$.event.special.tap.emitTapOnTaphold||(isTaphold=!0),triggerCustomEvent(thisObject,"taphold",$.Event("taphold",{target:origTarget}))},$.event.special.tap.tapholdThreshold)})},teardown:function(){$(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),$document.unbind("vmousecancel")}},$.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(event){var winPageX=window.pageXOffset,winPageY=window.pageYOffset,x=event.clientX,y=event.clientY;return 0===event.pageY&&Math.floor(y)>Math.floor(event.pageY)||0===event.pageX&&Math.floor(x)>Math.floor(event.pageX)?(x-=winPageX,y-=winPageY):(y<event.pageY-winPageY||x<event.pageX-winPageX)&&(x=event.pageX-winPageX,y=event.pageY-winPageY),{x:x,y:y}},start:function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data);return{time:(new Date).getTime(),coords:[location.x,location.y],origin:$(event.target)}},stop:function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data);return{time:(new Date).getTime(),coords:[location.x,location.y]}},handleSwipe:function(start,stop,thisObject,origTarget){if(stop.time-start.time<$.event.special.swipe.durationThreshold&&Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(start.coords[1]-stop.coords[1])<$.event.special.swipe.verticalDistanceThreshold){var direction=start.coords[0]>stop.coords[0]?"swipeleft":"swiperight";return triggerCustomEvent(thisObject,"swipe",$.Event("swipe",{target:origTarget,swipestart:start,swipestop:stop}),!0),triggerCustomEvent(thisObject,direction,$.Event(direction,{target:origTarget,swipestart:start,swipestop:stop}),!0),!0}return!1},eventInProgress:!1,setup:function(){var events,thisObject=this,$this=$(thisObject),context={};events=$.data(this,"mobile-events"),events||(events={length:0},$.data(this,"mobile-events",events)),events.length++,events.swipe=context,context.start=function(event){if(!$.event.special.swipe.eventInProgress){$.event.special.swipe.eventInProgress=!0;var stop,start=$.event.special.swipe.start(event),origTarget=event.target,emitted=!1;context.move=function(event){start&&(stop=$.event.special.swipe.stop(event),emitted||(emitted=$.event.special.swipe.handleSwipe(start,stop,thisObject,origTarget),emitted&&($.event.special.swipe.eventInProgress=!1)),Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.scrollSupressionThreshold&&event.preventDefault())},context.stop=function(){emitted=!0,$.event.special.swipe.eventInProgress=!1,$document.off(touchMoveEvent,context.move),context.move=null},$document.on(touchMoveEvent,context.move).one(touchStopEvent,context.stop)}},$this.on(touchStartEvent,context.start)},teardown:function(){var events,context;events=$.data(this,"mobile-events"),events&&(context=events.swipe,delete events.swipe,events.length--,0===events.length&&$.removeData(this,"mobile-events")),context&&(context.start&&$(this).off(touchStartEvent,context.start),context.move&&$document.off(touchMoveEvent,context.move),context.stop&&$document.off(touchStopEvent,context.stop))}},$.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(event,sourceEvent){$.event.special[event]={setup:function(){$(this).bind(sourceEvent,$.noop)},teardown:function(){$(this).unbind(sourceEvent)}}})}(jQuery,this),function($){$.event.special.throttledresize={setup:function(){$(this).bind("resize",handler)},teardown:function(){$(this).unbind("resize",handler)}};var heldCall,curr,diff,throttle=250,handler=function(){curr=(new Date).getTime(),diff=curr-lastCall,diff>=throttle?(lastCall=curr,$(this).trigger("throttledresize")):(heldCall&&clearTimeout(heldCall),heldCall=setTimeout(handler,throttle-diff))},lastCall=0}(jQuery),function($,window){function handler(){var orientation=get_orientation();orientation!==last_orientation&&(last_orientation=orientation,win.trigger(event_name))}var get_orientation,last_orientation,initial_orientation_is_landscape,initial_orientation_is_default,ww,wh,landscape_threshold,win=$(window),event_name="orientationchange",portrait_map={0:!0,180:!0};$.support.orientation&&(ww=window.innerWidth||win.width(),wh=window.innerHeight||win.height(),landscape_threshold=50,initial_orientation_is_landscape=ww>wh&&ww-wh>landscape_threshold,initial_orientation_is_default=portrait_map[window.orientation],(initial_orientation_is_landscape&&initial_orientation_is_default||!initial_orientation_is_landscape&&!initial_orientation_is_default)&&(portrait_map={"-90":!0,90:!0})),$.event.special.orientationchange=$.extend({},$.event.special.orientationchange,{setup:function(){return $.support.orientation&&!$.event.special.orientationchange.disabled?!1:(last_orientation=get_orientation(),void win.bind("throttledresize",handler))},teardown:function(){return $.support.orientation&&!$.event.special.orientationchange.disabled?!1:void win.unbind("throttledresize",handler)},add:function(handleObj){var old_handler=handleObj.handler;handleObj.handler=function(event){return event.orientation=get_orientation(),old_handler.apply(this,arguments)}}}),$.event.special.orientationchange.orientation=get_orientation=function(){var isPortrait=!0,elem=document.documentElement;return isPortrait=$.support.orientation?portrait_map[window.orientation]:elem&&elem.clientWidth/elem.clientHeight<1.1,isPortrait?"portrait":"landscape"},$.fn[event_name]=function(fn){return fn?this.bind(event_name,fn):this.trigger(event_name)},$.attrFn&&($.attrFn[event_name]=!0)}(jQuery,this),function($){var baseElement=$("head").children("base"),base={element:baseElement.length?baseElement:$("<base>",{href:$.mobile.path.documentBase.hrefNoHash}).prependTo($("head")),linkSelector:"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",set:function(href){$.mobile.dynamicBaseEnabled&&$.support.dynamicBaseTag&&base.element.attr("href",$.mobile.path.makeUrlAbsolute(href,$.mobile.path.documentBase))},rewrite:function(href,page){var newPath=$.mobile.path.get(href);page.find(base.linkSelector).each(function(i,link){var thisAttr=$(link).is("[href]")?"href":$(link).is("[src]")?"src":"action",thisUrl=$(link).attr(thisAttr);thisUrl=thisUrl.replace(location.protocol+"//"+location.host+location.pathname,""),/^(\w+:|#|\/)/.test(thisUrl)||$(link).attr(thisAttr,newPath+thisUrl)})},reset:function(){base.element.attr("href",$.mobile.path.documentBase.hrefNoSearch)}};$.mobile.base=base}(jQuery),function($,undefined){$.mobile.widgets={};var originalWidget=$.widget,keepNativeFactoryDefault=$.mobile.keepNative;$.widget=function(orig){return function(){var constructor=orig.apply(this,arguments),name=constructor.prototype.widgetName;return constructor.initSelector=constructor.prototype.initSelector!==undefined?constructor.prototype.initSelector:":jqmData(role='"+name+"')",$.mobile.widgets[name]=constructor,constructor}}($.widget),$.extend($.widget,originalWidget),$.mobile.document.on("create",function(event){$(event.target).enhanceWithin()}),$.widget("mobile.page",{options:{theme:"a",domCache:!1,keepNativeDefault:$.mobile.keepNative,contentTheme:null,enhanced:!1},_createWidget:function(){$.Widget.prototype._createWidget.apply(this,arguments),this._trigger("init")},_create:function(){return this._trigger("beforecreate")===!1?!1:(this.options.enhanced||this._enhance(),this._on(this.element,{pagebeforehide:"removeContainerBackground",pagebeforeshow:"_handlePageBeforeShow"}),this.element.enhanceWithin(),void("dialog"===$.mobile.getAttribute(this.element[0],"role")&&$.mobile.dialog&&this.element.dialog()))},_enhance:function(){var attrPrefix="data-"+$.mobile.ns,self=this;this.options.role&&this.element.attr("data-"+$.mobile.ns+"role",this.options.role),this.element.attr("tabindex","0").addClass("ui-page ui-page-theme-"+this.options.theme),this.element.find("["+attrPrefix+"role='content']").each(function(){var $this=$(this),theme=this.getAttribute(attrPrefix+"theme")||undefined;self.options.contentTheme=theme||self.options.contentTheme||self.options.dialog&&self.options.theme||"dialog"===self.element.jqmData("role")&&self.options.theme,$this.addClass("ui-content"),self.options.contentTheme&&$this.addClass("ui-body-"+self.options.contentTheme),$this.attr("role","main").addClass("ui-content")})},bindRemove:function(callback){var page=this.element;!page.data("mobile-page").options.domCache&&page.is(":jqmData(external-page='true')")&&page.bind("pagehide.remove",callback||function(e,data){if(!data.samePage){var $this=$(this),prEvent=new $.Event("pageremove");$this.trigger(prEvent),prEvent.isDefaultPrevented()||$this.removeWithDependents()}})},_setOptions:function(o){o.theme!==undefined&&this.element.removeClass("ui-page-theme-"+this.options.theme).addClass("ui-page-theme-"+o.theme),o.contentTheme!==undefined&&this.element.find("[data-"+$.mobile.ns+"='content']").removeClass("ui-body-"+this.options.contentTheme).addClass("ui-body-"+o.contentTheme)},_handlePageBeforeShow:function(){this.setContainerBackground()},removeContainerBackground:function(){this.element.closest(":mobile-pagecontainer").pagecontainer({theme:"none"})},setContainerBackground:function(theme){this.element.parent().pagecontainer({theme:theme||this.options.theme})},keepNativeSelector:function(){var options=this.options,keepNative=$.trim(options.keepNative||""),globalValue=$.trim($.mobile.keepNative),optionValue=$.trim(options.keepNativeDefault),newDefault=keepNativeFactoryDefault===globalValue?"":globalValue,oldDefault=""===newDefault?optionValue:"";return(keepNative?[keepNative]:[]).concat(newDefault?[newDefault]:[]).concat(oldDefault?[oldDefault]:[]).join(", ")}})}(jQuery),function($,undefined){$.widget("mobile.pagecontainer",{options:{theme:"a"},initSelector:!1,_create:function(){this.setLastScrollEnabled=!0,this._on(this.window,{navigate:"_disableRecordScroll",scrollstop:"_delayedRecordScroll"}),this._on(this.window,{navigate:"_filterNavigateEvents"}),this._on({pagechange:"_afterContentChange"}),this.window.one("navigate",$.proxy(function(){this.setLastScrollEnabled=!0},this))},_setOptions:function(options){options.theme!==undefined&&"none"!==options.theme?this.element.removeClass("ui-overlay-"+this.options.theme).addClass("ui-overlay-"+options.theme):options.theme!==undefined&&this.element.removeClass("ui-overlay-"+this.options.theme),this._super(options)},_disableRecordScroll:function(){this.setLastScrollEnabled=!1},_enableRecordScroll:function(){this.setLastScrollEnabled=!0},_afterContentChange:function(){this.setLastScrollEnabled=!0,this._off(this.window,"scrollstop"),this._on(this.window,{scrollstop:"_delayedRecordScroll"})},_recordScroll:function(){if(this.setLastScrollEnabled){var currentScroll,minScroll,defaultScroll,active=this._getActiveHistory();active&&(currentScroll=this._getScroll(),minScroll=this._getMinScroll(),defaultScroll=this._getDefaultScroll(),active.lastScroll=minScroll>currentScroll?defaultScroll:currentScroll)}},_delayedRecordScroll:function(){setTimeout($.proxy(this,"_recordScroll"),100)},_getScroll:function(){return this.window.scrollTop()},_getMinScroll:function(){return $.mobile.minScrollBack},_getDefaultScroll:function(){return $.mobile.defaultHomeScroll},_filterNavigateEvents:function(e,data){var url;e.originalEvent&&e.originalEvent.isDefaultPrevented()||(url=e.originalEvent.type.indexOf("hashchange")>-1?data.state.hash:data.state.url,url||(url=this._getHash()),url&&"#"!==url&&0!==url.indexOf("#"+$.mobile.path.uiStateKey)||(url=location.href),this._handleNavigate(url,data.state))},_getHash:function(){return $.mobile.path.parseLocation().hash},getActivePage:function(){return this.activePage},_getInitialContent:function(){return $.mobile.firstPage},_getHistory:function(){return $.mobile.navigate.history},_getActiveHistory:function(){return $.mobile.navigate.history.getActive()},_getDocumentBase:function(){return $.mobile.path.documentBase},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(steps){if($.mobile.hashListeningEnabled)window.history.go(steps);else{var activeIndex=$.mobile.navigate.history.activeIndex,index=activeIndex+parseInt(steps,10),url=$.mobile.navigate.history.stack[index].url,direction=steps>=1?"forward":"back";$.mobile.navigate.history.activeIndex=index,$.mobile.navigate.history.previousIndex=activeIndex,this.change(url,{direction:direction,changeHash:!1,fromHashChange:!0})}},_handleDestination:function(to){var history;return"string"===$.type(to)&&(to=$.mobile.path.stripHash(to)),to&&(history=this._getHistory(),to=$.mobile.path.isPath(to)?to:$.mobile.path.makeUrlAbsolute("#"+to,this._getDocumentBase()),to===$.mobile.path.makeUrlAbsolute("#"+history.initialDst,this._getDocumentBase())&&history.stack.length&&history.stack[0].url!==history.initialDst.replace($.mobile.dialogHashKey,"")&&(to=this._getInitialContent())),to||this._getInitialContent()},_handleDialog:function(changePageOptions,data){var to,active,activeContent=this.getActivePage();return activeContent&&!activeContent.hasClass("ui-dialog")?("back"===data.direction?this.back():this.forward(),!1):(to=data.pageUrl,active=this._getActiveHistory(),$.extend(changePageOptions,{role:active.role,transition:active.transition,reverse:"back"===data.direction}),to)},_handleNavigate:function(url,data){var to=$.mobile.path.stripHash(url),history=this._getHistory(),transition=0===history.stack.length?"none":undefined,changePageOptions={changeHash:!1,fromHashChange:!0,reverse:"back"===data.direction};$.extend(changePageOptions,data,{transition:(history.getLast()||{}).transition||transition}),history.activeIndex>0&&to.indexOf($.mobile.dialogHashKey)>-1&&history.initialDst!==to&&(to=this._handleDialog(changePageOptions,data),to===!1)||this._changeContent(this._handleDestination(to),changePageOptions)},_changeContent:function(to,opts){$.mobile.changePage(to,opts)},_getBase:function(){return $.mobile.base},_getNs:function(){return $.mobile.ns},_enhance:function(content,role){return content.page({role:role})},_include:function(page,settings){page.appendTo(this.element),this._enhance(page,settings.role),page.page("bindRemove")},_find:function(absUrl){var page,fileUrl=this._createFileUrl(absUrl),dataUrl=this._createDataUrl(absUrl),initialContent=this._getInitialContent();return page=this.element.children("[data-"+this._getNs()+"url='"+dataUrl+"']"),0===page.length&&dataUrl&&!$.mobile.path.isPath(dataUrl)&&(page=this.element.children($.mobile.path.hashToSelector("#"+dataUrl)).attr("data-"+this._getNs()+"url",dataUrl).jqmData("url",dataUrl)),0===page.length&&$.mobile.path.isFirstPageUrl(fileUrl)&&initialContent&&initialContent.parent().length&&(page=$(initialContent)),page},_getLoader:function(){return $.mobile.loading()},_showLoading:function(delay,theme,msg,textonly){this._loadMsg||(this._loadMsg=setTimeout($.proxy(function(){this._getLoader().loader("show",theme,msg,textonly),this._loadMsg=0},this),delay))},_hideLoading:function(){clearTimeout(this._loadMsg),this._loadMsg=0,this._getLoader().loader("hide")},_showError:function(){this._hideLoading(),this._showLoading(0,$.mobile.pageLoadErrorMessageTheme,$.mobile.pageLoadErrorMessage,!0),setTimeout($.proxy(this,"_hideLoading"),1500)},_parse:function(html,fileUrl){var page,all=$("<div></div>");return all.get(0).innerHTML=html,page=all.find(":jqmData(role='page'), :jqmData(role='dialog')").first(),page.length||(page=$("<div data-"+this._getNs()+"role='page'>"+(html.split(/<\/?body[^>]*>/gim)[1]||"")+"</div>")),page.attr("data-"+this._getNs()+"url",$.mobile.path.convertUrlToDataUrl(fileUrl)).attr("data-"+this._getNs()+"external-page",!0),page},_setLoadedTitle:function(page,html){var newPageTitle=html.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;newPageTitle&&!page.jqmData("title")&&(newPageTitle=$("<div>"+newPageTitle+"</div>").text(),page.jqmData("title",newPageTitle))
},_isRewritableBaseTag:function(){return $.mobile.dynamicBaseEnabled&&!$.support.dynamicBaseTag},_createDataUrl:function(absoluteUrl){return $.mobile.path.convertUrlToDataUrl(absoluteUrl)},_createFileUrl:function(absoluteUrl){return $.mobile.path.getFilePath(absoluteUrl)},_triggerWithDeprecated:function(name,data,page){var deprecatedEvent=$.Event("page"+name),newEvent=$.Event(this.widgetName+name);return(page||this.element).trigger(deprecatedEvent,data),this.element.trigger(newEvent,data),{deprecatedEvent:deprecatedEvent,event:newEvent}},_loadSuccess:function(absUrl,triggerData,settings,deferred){var fileUrl=this._createFileUrl(absUrl),dataUrl=this._createDataUrl(absUrl);return $.proxy(function(html,textStatus,xhr){var content,pageElemRegex=new RegExp("(<[^>]+\\bdata-"+this._getNs()+"role=[\"']?page[\"']?[^>]*>)"),dataUrlRegex=new RegExp("\\bdata-"+this._getNs()+"url=[\"']?([^\"'>]*)[\"']?");pageElemRegex.test(html)&&RegExp.$1&&dataUrlRegex.test(RegExp.$1)&&RegExp.$1&&(fileUrl=$.mobile.path.getFilePath($("<div>"+RegExp.$1+"</div>").text())),settings.prefetch===undefined&&this._getBase().set(fileUrl),content=this._parse(html,fileUrl),this._setLoadedTitle(content,html),triggerData.xhr=xhr,triggerData.textStatus=textStatus,triggerData.page=content,triggerData.content=content,this._trigger("load",undefined,triggerData)&&(this._isRewritableBaseTag()&&content&&this._getBase().rewrite(fileUrl,content),this._include(content,settings),absUrl.indexOf("&"+$.mobile.subPageUrlKey)>-1&&(content=this.element.children("[data-"+this._getNs()+"url='"+dataUrl+"']")),settings.showLoadMsg&&this._hideLoading(),this.element.trigger("pageload"),deferred.resolve(absUrl,settings,content))},this)},_loadDefaults:{type:"get",data:undefined,reloadPage:!1,reload:!1,role:undefined,showLoadMsg:!1,loadMsgDelay:50},load:function(url,options){var fileUrl,dataUrl,pblEvent,triggerData,deferred=options&&options.deferred||$.Deferred(),settings=$.extend({},this._loadDefaults,options),content=null,absUrl=$.mobile.path.makeUrlAbsolute(url,this._findBaseWithDefault());return settings.reload=settings.reloadPage,settings.data&&"get"===settings.type&&(absUrl=$.mobile.path.addSearchParams(absUrl,settings.data),settings.data=undefined),settings.data&&"post"===settings.type&&(settings.reload=!0),fileUrl=this._createFileUrl(absUrl),dataUrl=this._createDataUrl(absUrl),content=this._find(absUrl),0===content.length&&$.mobile.path.isEmbeddedPage(fileUrl)&&!$.mobile.path.isFirstPageUrl(fileUrl)?void deferred.reject(absUrl,settings):(this._getBase().reset(),content.length&&!settings.reload?(this._enhance(content,settings.role),deferred.resolve(absUrl,settings,content),void(settings.prefetch||this._getBase().set(url))):(triggerData={url:url,absUrl:absUrl,dataUrl:dataUrl,deferred:deferred,options:settings},pblEvent=this._triggerWithDeprecated("beforeload",triggerData),pblEvent.deprecatedEvent.isDefaultPrevented()||pblEvent.event.isDefaultPrevented()?void 0:(settings.showLoadMsg&&this._showLoading(settings.loadMsgDelay),settings.prefetch===undefined&&this._getBase().reset(),$.mobile.allowCrossDomainPages||$.mobile.path.isSameDomain($.mobile.path.documentUrl,absUrl)?void $.ajax({url:fileUrl,type:settings.type,data:settings.data,contentType:settings.contentType,dataType:"html",success:this._loadSuccess(absUrl,triggerData,settings,deferred),error:this._loadError(absUrl,triggerData,settings,deferred)}):void deferred.reject(absUrl,settings))))},_loadError:function(absUrl,triggerData,settings,deferred){return $.proxy(function(xhr,textStatus,errorThrown){this._getBase().set($.mobile.path.get()),triggerData.xhr=xhr,triggerData.textStatus=textStatus,triggerData.errorThrown=errorThrown;var plfEvent=this._triggerWithDeprecated("loadfailed",triggerData);plfEvent.deprecatedEvent.isDefaultPrevented()||plfEvent.event.isDefaultPrevented()||(settings.showLoadMsg&&this._showError(),deferred.reject(absUrl,settings))},this)},_getTransitionHandler:function(transition){return transition=$.mobile._maybeDegradeTransition(transition),$.mobile.transitionHandlers[transition]||$.mobile.defaultTransitionHandler},_triggerCssTransitionEvents:function(to,from,prefix){var samePage=!1;prefix=prefix||"",from&&(to[0]===from[0]&&(samePage=!0),this._triggerWithDeprecated(prefix+"hide",{nextPage:to,samePage:samePage},from)),this._triggerWithDeprecated(prefix+"show",{prevPage:from||$("")},to)},_cssTransition:function(to,from,options){var TransitionHandler,promise,transition=options.transition,reverse=options.reverse,deferred=options.deferred;this._triggerCssTransitionEvents(to,from,"before"),this._hideLoading(),TransitionHandler=this._getTransitionHandler(transition),promise=new TransitionHandler(transition,reverse,to,from).transition(),promise.done(function(){deferred.resolve.apply(deferred,arguments)}),promise.done($.proxy(function(){this._triggerCssTransitionEvents(to,from)},this))},_releaseTransitionLock:function(){isPageTransitioning=!1,pageTransitionQueue.length>0&&$.mobile.changePage.apply(null,pageTransitionQueue.pop())},_removeActiveLinkClass:function(force){$.mobile.removeActiveLinkClass(force)},_loadUrl:function(to,triggerData,settings){settings.target=to,settings.deferred=$.Deferred(),this.load(to,settings),settings.deferred.done($.proxy(function(url,options,content){isPageTransitioning=!1,options.absUrl=triggerData.absUrl,this.transition(content,triggerData,options)},this)),settings.deferred.fail($.proxy(function(){this._removeActiveLinkClass(!0),this._releaseTransitionLock(),this._triggerWithDeprecated("changefailed",triggerData)},this))},_triggerPageBeforeChange:function(to,triggerData,settings){var pbcEvent=new $.Event("pagebeforechange");return $.extend(triggerData,{toPage:to,options:settings}),triggerData.absUrl="string"===$.type(to)?$.mobile.path.makeUrlAbsolute(to,this._findBaseWithDefault()):settings.absUrl,this.element.trigger(pbcEvent,triggerData),pbcEvent.isDefaultPrevented()?!1:!0},change:function(to,options){if(isPageTransitioning)return void pageTransitionQueue.unshift(arguments);var settings=$.extend({},$.mobile.changePage.defaults,options),triggerData={};settings.fromPage=settings.fromPage||this.activePage,this._triggerPageBeforeChange(to,triggerData,settings)&&(to=triggerData.toPage,"string"===$.type(to)?(isPageTransitioning=!0,this._loadUrl(to,triggerData,settings)):this.transition(to,triggerData,settings))},transition:function(toPage,triggerData,settings){var fromPage,url,pageUrl,fileUrl,active,activeIsInitialPage,historyDir,pageTitle,isDialog,alreadyThere,newPageTitle,params,cssTransitionDeferred,beforeTransition;if(isPageTransitioning)return void pageTransitionQueue.unshift([toPage,settings]);if(this._triggerPageBeforeChange(toPage,triggerData,settings)&&(beforeTransition=this._triggerWithDeprecated("beforetransition",triggerData),!beforeTransition.deprecatedEvent.isDefaultPrevented()&&!beforeTransition.event.isDefaultPrevented())){if(isPageTransitioning=!0,toPage[0]!==$.mobile.firstPage[0]||settings.dataUrl||(settings.dataUrl=$.mobile.path.documentUrl.hrefNoHash),fromPage=settings.fromPage,url=settings.dataUrl&&$.mobile.path.convertUrlToDataUrl(settings.dataUrl)||toPage.jqmData("url"),pageUrl=url,fileUrl=$.mobile.path.getFilePath(url),active=$.mobile.navigate.history.getActive(),activeIsInitialPage=0===$.mobile.navigate.history.activeIndex,historyDir=0,pageTitle=document.title,isDialog=("dialog"===settings.role||"dialog"===toPage.jqmData("role"))&&toPage.jqmData("dialog")!==!0,fromPage&&fromPage[0]===toPage[0]&&!settings.allowSamePageTransition)return isPageTransitioning=!1,this._triggerWithDeprecated("transition",triggerData),this.element.trigger("pagechange",triggerData),void(settings.fromHashChange&&$.mobile.navigate.history.direct({url:url}));toPage.page({role:settings.role}),settings.fromHashChange&&(historyDir="back"===settings.direction?-1:1);try{document.activeElement&&"body"!==document.activeElement.nodeName.toLowerCase()?$(document.activeElement).blur():$("input:focus, textarea:focus, select:focus").blur()}catch(e){}alreadyThere=!1,isDialog&&active&&(active.url&&active.url.indexOf($.mobile.dialogHashKey)>-1&&this.activePage&&!this.activePage.hasClass("ui-dialog")&&$.mobile.navigate.history.activeIndex>0&&(settings.changeHash=!1,alreadyThere=!0),url=active.url||"",url+=!alreadyThere&&url.indexOf("#")>-1?$.mobile.dialogHashKey:"#"+$.mobile.dialogHashKey,0===$.mobile.navigate.history.activeIndex&&url===$.mobile.navigate.history.initialDst&&(url+=$.mobile.dialogHashKey)),newPageTitle=active?toPage.jqmData("title")||toPage.children(":jqmData(role='header')").find(".ui-title").text():pageTitle,newPageTitle&&pageTitle===document.title&&(pageTitle=newPageTitle),toPage.jqmData("title")||toPage.jqmData("title",pageTitle),settings.transition=settings.transition||(historyDir&&!activeIsInitialPage?active.transition:undefined)||(isDialog?$.mobile.defaultDialogTransition:$.mobile.defaultPageTransition),!historyDir&&alreadyThere&&($.mobile.navigate.history.getActive().pageUrl=pageUrl),url&&!settings.fromHashChange&&(!$.mobile.path.isPath(url)&&url.indexOf("#")<0&&(url="#"+url),params={transition:settings.transition,title:pageTitle,pageUrl:pageUrl,role:settings.role},settings.changeHash!==!1&&$.mobile.hashListeningEnabled?$.mobile.navigate(url,params,!0):toPage[0]!==$.mobile.firstPage[0]&&$.mobile.navigate.history.add(url,params)),document.title=pageTitle,$.mobile.activePage=toPage,this.activePage=toPage,settings.reverse=settings.reverse||0>historyDir,cssTransitionDeferred=$.Deferred(),this._cssTransition(toPage,fromPage,{transition:settings.transition,reverse:settings.reverse,deferred:cssTransitionDeferred}),cssTransitionDeferred.done($.proxy(function(name,reverse,$to,$from,alreadyFocused){$.mobile.removeActiveLinkClass(),settings.duplicateCachedPage&&settings.duplicateCachedPage.remove(),alreadyFocused||$.mobile.focusPage(toPage),this._releaseTransitionLock(),this.element.trigger("pagechange",triggerData),this._triggerWithDeprecated("transition",triggerData)},this))}},_findBaseWithDefault:function(){var closestBase=this.activePage&&$.mobile.getClosestBaseUrl(this.activePage);return closestBase||$.mobile.path.documentBase.hrefNoHash}}),$.mobile.navreadyDeferred=$.Deferred();var pageTransitionQueue=[],isPageTransitioning=!1}(jQuery),function($,undefined){function findClosestLink(ele){for(;ele&&("string"!=typeof ele.nodeName||"a"!==ele.nodeName.toLowerCase());)ele=ele.parentNode;return ele}var domreadyDeferred=$.Deferred(),loadDeferred=$.Deferred(),documentUrl=$.mobile.path.documentUrl,$lastVClicked=null;$.mobile.loadPage=function(url,opts){var container;return opts=opts||{},container=opts.pageContainer||$.mobile.pageContainer,opts.deferred=$.Deferred(),container.pagecontainer("load",url,opts),opts.deferred.promise()},$.mobile.back=function(){var nav=window.navigator;this.phonegapNavigationEnabled&&nav&&nav.app&&nav.app.backHistory?nav.app.backHistory():$.mobile.pageContainer.pagecontainer("back")},$.mobile.focusPage=function(page){var autofocus=page.find("[autofocus]"),pageTitle=page.find(".ui-title:eq(0)");return autofocus.length?void autofocus.focus():void(pageTitle.length?pageTitle.focus():page.focus())},$.mobile._maybeDegradeTransition=$.mobile._maybeDegradeTransition||function(transition){return transition},$.mobile.changePage=function(to,options){$.mobile.pageContainer.pagecontainer("change",to,options)},$.mobile.changePage.defaults={transition:undefined,reverse:!1,changeHash:!0,fromHashChange:!1,role:undefined,duplicateCachedPage:undefined,pageContainer:undefined,showLoadMsg:!0,dataUrl:undefined,fromPage:undefined,allowSamePageTransition:!1},$.mobile._registerInternalEvents=function(){var getAjaxFormData=function($form,calculateOnly){var url,formData,vclickedName,method,ret=!0;return!$.mobile.ajaxEnabled||$form.is(":jqmData(ajax='false')")||!$form.jqmHijackable().length||$form.attr("target")?!1:(url=$lastVClicked&&$lastVClicked.attr("formaction")||$form.attr("action"),method=($form.attr("method")||"get").toLowerCase(),url||(url=$.mobile.getClosestBaseUrl($form),"get"===method&&(url=$.mobile.path.parseUrl(url).hrefNoSearch),url===$.mobile.path.documentBase.hrefNoHash&&(url=documentUrl.hrefNoSearch)),url=$.mobile.path.makeUrlAbsolute(url,$.mobile.getClosestBaseUrl($form)),$.mobile.path.isExternal(url)&&!$.mobile.path.isPermittedCrossDomainRequest(documentUrl,url)?!1:(calculateOnly||(formData=$form.serializeArray(),$lastVClicked&&$lastVClicked[0].form===$form[0]&&(vclickedName=$lastVClicked.attr("name"),vclickedName&&($.each(formData,function(key,value){return value.name===vclickedName?(vclickedName="",!1):void 0}),vclickedName&&formData.push({name:vclickedName,value:$lastVClicked.attr("value")}))),ret={url:url,options:{type:method,data:$.param(formData),transition:$form.jqmData("transition"),reverse:"reverse"===$form.jqmData("direction"),reloadPage:!0}}),ret))};$.mobile.document.delegate("form","submit",function(event){var formData;event.isDefaultPrevented()||(formData=getAjaxFormData($(this)),formData&&($.mobile.changePage(formData.url,formData.options),event.preventDefault()))}),$.mobile.document.bind("vclick",function(event){var $btn,btnEls,target=event.target,needClosest=!1;if(!(event.which>1)&&$.mobile.linkBindingEnabled){if($lastVClicked=$(target),$.data(target,"mobile-button")){if(!getAjaxFormData($(target).closest("form"),!0))return;target.parentNode&&(target=target.parentNode)}else{if(target=findClosestLink(target),!target||"#"===$.mobile.path.parseUrl(target.getAttribute("href")||"#").hash)return;if(!$(target).jqmHijackable().length)return}~target.className.indexOf("ui-link-inherit")?target.parentNode&&(btnEls=$.data(target.parentNode,"buttonElements")):btnEls=$.data(target,"buttonElements"),btnEls?target=btnEls.outer:needClosest=!0,$btn=$(target),needClosest&&($btn=$btn.closest(".ui-btn")),$btn.length>0&&!$btn.hasClass("ui-state-disabled")&&($.mobile.removeActiveLinkClass(!0),$.mobile.activeClickedLink=$btn,$.mobile.activeClickedLink.addClass($.mobile.activeBtnClass))}}),$.mobile.document.bind("click",function(event){if($.mobile.linkBindingEnabled&&!event.isDefaultPrevented()){var baseUrl,href,useDefaultUrlHandling,isExternal,transition,reverse,role,link=findClosestLink(event.target),$link=$(link),httpCleanup=function(){window.setTimeout(function(){$.mobile.removeActiveLinkClass(!0)},200)};if($.mobile.activeClickedLink&&$.mobile.activeClickedLink[0]===event.target.parentNode&&httpCleanup(),link&&!(event.which>1)&&$link.jqmHijackable().length){if($link.is(":jqmData(rel='back')"))return $.mobile.back(),!1;if(baseUrl=$.mobile.getClosestBaseUrl($link),href=$.mobile.path.makeUrlAbsolute($link.attr("href")||"#",baseUrl),!$.mobile.ajaxEnabled&&!$.mobile.path.isEmbeddedPage(href))return void httpCleanup();if(-1!==href.search("#")){if(href=href.replace(/[^#]*#/,""),!href)return void event.preventDefault();href=$.mobile.path.isPath(href)?$.mobile.path.makeUrlAbsolute(href,baseUrl):$.mobile.path.makeUrlAbsolute("#"+href,documentUrl.hrefNoHash)}if(useDefaultUrlHandling=$link.is("[rel='external']")||$link.is(":jqmData(ajax='false')")||$link.is("[target]"),isExternal=useDefaultUrlHandling||$.mobile.path.isExternal(href)&&!$.mobile.path.isPermittedCrossDomainRequest(documentUrl,href))return void httpCleanup();transition=$link.jqmData("transition"),reverse="reverse"===$link.jqmData("direction")||$link.jqmData("back"),role=$link.attr("data-"+$.mobile.ns+"rel")||undefined,$.mobile.changePage(href,{transition:transition,reverse:reverse,role:role,link:$link}),event.preventDefault()}}}),$.mobile.document.delegate(".ui-page","pageshow.prefetch",function(){var urls=[];$(this).find("a:jqmData(prefetch)").each(function(){var $link=$(this),url=$link.attr("href");url&&-1===$.inArray(url,urls)&&(urls.push(url),$.mobile.loadPage(url,{role:$link.attr("data-"+$.mobile.ns+"rel"),prefetch:!0}))})}),$.mobile.pageContainer.pagecontainer(),$.mobile.document.bind("pageshow",function(){loadDeferred?loadDeferred.done($.mobile.resetActivePageHeight):$.mobile.resetActivePageHeight()}),$.mobile.window.bind("throttledresize",$.mobile.resetActivePageHeight)},$(function(){domreadyDeferred.resolve()}),$.mobile.window.load(function(){loadDeferred.resolve(),loadDeferred=null}),$.when(domreadyDeferred,$.mobile.navreadyDeferred).done(function(){$.mobile._registerInternalEvents()})}(jQuery),function($,window){$.mobile.Transition=function(){this.init.apply(this,arguments)},$.extend($.mobile.Transition.prototype,{toPreClass:" ui-page-pre-in",init:function(name,reverse,$to,$from){$.extend(this,{name:name,reverse:reverse,$to:$to,$from:$from,deferred:new $.Deferred})},cleanFrom:function(){this.$from.removeClass($.mobile.activePageClass+" out in reverse "+this.name).height("")},beforeDoneIn:function(){},beforeDoneOut:function(){},beforeStartOut:function(){},doneIn:function(){this.beforeDoneIn(),this.$to.removeClass("out in reverse "+this.name).height(""),this.toggleViewportClass(),$.mobile.window.scrollTop()!==this.toScroll&&this.scrollPage(),this.sequential||this.$to.addClass($.mobile.activePageClass),this.deferred.resolve(this.name,this.reverse,this.$to,this.$from,!0)},doneOut:function(screenHeight,reverseClass,none,preventFocus){this.beforeDoneOut(),this.startIn(screenHeight,reverseClass,none,preventFocus)},hideIn:function(callback){this.$to.css("z-index",-10),callback.call(this),this.$to.css("z-index","")},scrollPage:function(){$.event.special.scrollstart.enabled=!1,($.mobile.hideUrlBar||this.toScroll!==$.mobile.defaultHomeScroll)&&window.scrollTo(0,this.toScroll),setTimeout(function(){$.event.special.scrollstart.enabled=!0},150)},startIn:function(screenHeight,reverseClass,none,preventFocus){this.hideIn(function(){this.$to.addClass($.mobile.activePageClass+this.toPreClass),preventFocus||$.mobile.focusPage(this.$to),this.$to.height(screenHeight+this.toScroll),none||this.scrollPage()}),this.$to.removeClass(this.toPreClass).addClass(this.name+" in "+reverseClass),none?this.doneIn():this.$to.animationComplete($.proxy(function(){this.doneIn()},this))},startOut:function(screenHeight,reverseClass,none){this.beforeStartOut(screenHeight,reverseClass,none),this.$from.height(screenHeight+$.mobile.window.scrollTop()).addClass(this.name+" out"+reverseClass)},toggleViewportClass:function(){$.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+this.name)},transition:function(){var none,reverseClass=this.reverse?" reverse":"",screenHeight=$.mobile.getScreenHeight(),maxTransitionOverride=$.mobile.maxTransitionWidth!==!1&&$.mobile.window.width()>$.mobile.maxTransitionWidth;return this.toScroll=$.mobile.navigate.history.getActive().lastScroll||$.mobile.defaultHomeScroll,none=!$.support.cssTransitions||!$.support.cssAnimations||maxTransitionOverride||!this.name||"none"===this.name||Math.max($.mobile.window.scrollTop(),this.toScroll)>$.mobile.getMaxScrollForTransition(),this.toggleViewportClass(),this.$from&&!none?this.startOut(screenHeight,reverseClass,none):this.doneOut(screenHeight,reverseClass,none,!0),this.deferred.promise()}})}(jQuery,this),function($){$.mobile.SerialTransition=function(){this.init.apply(this,arguments)},$.extend($.mobile.SerialTransition.prototype,$.mobile.Transition.prototype,{sequential:!0,beforeDoneOut:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(screenHeight,reverseClass,none){this.$from.animationComplete($.proxy(function(){this.doneOut(screenHeight,reverseClass,none)},this))}})}(jQuery),function($){$.mobile.ConcurrentTransition=function(){this.init.apply(this,arguments)},$.extend($.mobile.ConcurrentTransition.prototype,$.mobile.Transition.prototype,{sequential:!1,beforeDoneIn:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(screenHeight,reverseClass,none){this.doneOut(screenHeight,reverseClass,none)}})}(jQuery),function($){var defaultGetMaxScrollForTransition=function(){return 3*$.mobile.getScreenHeight()};$.mobile.transitionHandlers={sequential:$.mobile.SerialTransition,simultaneous:$.mobile.ConcurrentTransition},$.mobile.defaultTransitionHandler=$.mobile.transitionHandlers.sequential,$.mobile.transitionFallbacks={},$.mobile._maybeDegradeTransition=function(transition){return transition&&!$.support.cssTransform3d&&$.mobile.transitionFallbacks[transition]&&(transition=$.mobile.transitionFallbacks[transition]),transition},$.mobile.getMaxScrollForTransition=$.mobile.getMaxScrollForTransition||defaultGetMaxScrollForTransition}(jQuery),function($){$.mobile.transitionFallbacks.flip="fade"}(jQuery,this),function($){$.mobile.transitionFallbacks.flow="fade"}(jQuery,this),function($){$.mobile.transitionFallbacks.pop="fade"}(jQuery,this),function($){$.mobile.transitionHandlers.slide=$.mobile.transitionHandlers.simultaneous,$.mobile.transitionFallbacks.slide="fade"}(jQuery,this),function($){$.mobile.transitionFallbacks.slidedown="fade"}(jQuery,this),function($){$.mobile.transitionFallbacks.slidefade="fade"}(jQuery,this),function($){$.mobile.transitionFallbacks.slideup="fade"}(jQuery,this),function($){$.mobile.transitionFallbacks.turn="fade"}(jQuery,this),function($){$.mobile.degradeInputs={color:!1,date:!1,datetime:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:"number",search:"text",tel:!1,time:!1,url:!1,week:!1},$.mobile.page.prototype.options.degradeInputs=$.mobile.degradeInputs,$.mobile.degradeInputsWithin=function(target){target=$(target),target.find("input").not($.mobile.page.prototype.keepNativeSelector()).each(function(){var html,hasType,findstr,repstr,element=$(this),type=this.getAttribute("type"),optType=$.mobile.degradeInputs[type]||"text";$.mobile.degradeInputs[type]&&(html=$("<div>").html(element.clone()).html(),hasType=html.indexOf(" type=")>-1,findstr=hasType?/\s+type=["']?\w+['"]?/:/\/?>/,repstr=' type="'+optType+'" data-'+$.mobile.ns+'type="'+type+'"'+(hasType?"":">"),element.replaceWith(html.replace(findstr,repstr)))})}}(jQuery),function($,window,undefined){$.widget("mobile.page",$.mobile.page,{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0,dialog:!1},_create:function(){this._super(),this.options.dialog&&($.extend(this,{_inner:this.element.children(),_headerCloseButton:null}),this.options.enhanced||this._setCloseBtn(this.options.closeBtn))},_enhance:function(){this._super(),this.options.dialog&&this.element.addClass("ui-dialog").wrapInner($("<div/>",{role:"dialog","class":"ui-dialog-contain ui-overlay-shadow"+(this.options.corners?" ui-corner-all":"")}))},_setOptions:function(options){var closeButtonLocation,closeButtonText,currentOpts=this.options;options.corners!==undefined&&this._inner.toggleClass("ui-corner-all",!!options.corners),options.overlayTheme!==undefined&&$.mobile.activePage[0]===this.element[0]&&(currentOpts.overlayTheme=options.overlayTheme,this._handlePageBeforeShow()),options.closeBtnText!==undefined&&(closeButtonLocation=currentOpts.closeBtn,closeButtonText=options.closeBtnText),options.closeBtn!==undefined&&(closeButtonLocation=options.closeBtn),closeButtonLocation&&this._setCloseBtn(closeButtonLocation,closeButtonText),this._super(options)},_handlePageBeforeShow:function(){this.options.overlayTheme&&this.options.dialog?(this.removeContainerBackground(),this.setContainerBackground(this.options.overlayTheme)):this._super()},_setCloseBtn:function(location,text){var dst,btn=this._headerCloseButton;location="left"===location?"left":"right"===location?"right":"none","none"===location?btn&&(btn.remove(),btn=null):btn?(btn.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+location),text&&btn.text(text)):(dst=this._inner.find(":jqmData(role='header')").first(),btn=$("<a></a>",{href:"#","class":"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+location}).attr("data-"+$.mobile.ns+"rel","back").text(text||this.options.closeBtnText||"").prependTo(dst)),this._headerCloseButton=btn}})}(jQuery,this),function($,window,undefined){$.widget("mobile.dialog",{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0},_handlePageBeforeShow:function(){this._isCloseable=!0,this.options.overlayTheme&&this.element.page("removeContainerBackground").page("setContainerBackground",this.options.overlayTheme)},_handlePageBeforeHide:function(){this._isCloseable=!1},_handleVClickSubmit:function(event){var attrs,$target=$(event.target).closest("vclick"===event.type?"a":"form");$target.length&&!$target.jqmData("transition")&&(attrs={},attrs["data-"+$.mobile.ns+"transition"]=($.mobile.navigate.history.getActive()||{}).transition||$.mobile.defaultDialogTransition,attrs["data-"+$.mobile.ns+"direction"]="reverse",$target.attr(attrs))},_create:function(){var elem=this.element,opts=this.options;elem.addClass("ui-dialog").wrapInner($("<div/>",{role:"dialog","class":"ui-dialog-contain ui-overlay-shadow"+(opts.corners?" ui-corner-all":"")})),$.extend(this,{_isCloseable:!1,_inner:elem.children(),_headerCloseButton:null}),this._on(elem,{vclick:"_handleVClickSubmit",submit:"_handleVClickSubmit",pagebeforeshow:"_handlePageBeforeShow",pagebeforehide:"_handlePageBeforeHide"}),this._setCloseBtn(opts.closeBtn)},_setOptions:function(options){var closeButtonLocation,closeButtonText,currentOpts=this.options;options.corners!==undefined&&this._inner.toggleClass("ui-corner-all",!!options.corners),options.overlayTheme!==undefined&&$.mobile.activePage[0]===this.element[0]&&(currentOpts.overlayTheme=options.overlayTheme,this._handlePageBeforeShow()),options.closeBtnText!==undefined&&(closeButtonLocation=currentOpts.closeBtn,closeButtonText=options.closeBtnText),options.closeBtn!==undefined&&(closeButtonLocation=options.closeBtn),closeButtonLocation&&this._setCloseBtn(closeButtonLocation,closeButtonText),this._super(options)},_setCloseBtn:function(location,text){var dst,btn=this._headerCloseButton;location="left"===location?"left":"right"===location?"right":"none","none"===location?btn&&(btn.remove(),btn=null):btn?(btn.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+location),text&&btn.text(text)):(dst=this._inner.find(":jqmData(role='header')").first(),btn=$("<a></a>",{role:"button",href:"#","class":"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+location}).text(text||this.options.closeBtnText||"").prependTo(dst),this._on(btn,{click:"close"})),this._headerCloseButton=btn},close:function(){var hist=$.mobile.navigate.history;this._isCloseable&&(this._isCloseable=!1,$.mobile.hashListeningEnabled&&hist.activeIndex>0?$.mobile.back():$.mobile.pageContainer.pagecontainer("back"))}})}(jQuery,this),function($,undefined){var rInitialLetter=/([A-Z])/g,iconposClass=function(iconpos){return"ui-btn-icon-"+(null===iconpos?"left":iconpos)};$.widget("mobile.collapsible",{options:{enhanced:!1,expandCueText:null,collapseCueText:null,collapsed:!0,heading:"h1,h2,h3,h4,h5,h6,legend",collapsedIcon:null,expandedIcon:null,iconpos:null,theme:null,contentTheme:null,inset:null,corners:null,mini:null},_create:function(){var elem=this.element,ui={accordion:elem.closest(":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')"+($.mobile.collapsibleset?", :mobile-collapsibleset":"")).addClass("ui-collapsible-set")};this._ui=ui,this._renderedOptions=this._getOptions(this.options),this.options.enhanced?(ui.heading=$(".ui-collapsible-heading",this.element[0]),ui.content=ui.heading.next(),ui.anchor=$("a",ui.heading[0]).first(),ui.status=ui.anchor.children(".ui-collapsible-heading-status")):this._enhance(elem,ui),this._on(ui.heading,{tap:function(){ui.heading.find("a").first().addClass($.mobile.activeBtnClass)},click:function(event){this._handleExpandCollapse(!ui.heading.hasClass("ui-collapsible-heading-collapsed")),event.preventDefault(),event.stopPropagation()}})},_getOptions:function(options){var key,accordion=this._ui.accordion,accordionWidget=this._ui.accordionWidget;options=$.extend({},options),accordion.length&&!accordionWidget&&(this._ui.accordionWidget=accordionWidget=accordion.data("mobile-collapsibleset"));for(key in options)options[key]=null!=options[key]?options[key]:accordionWidget?accordionWidget.options[key]:accordion.length?$.mobile.getAttribute(accordion[0],key.replace(rInitialLetter,"-$1").toLowerCase()):null,null==options[key]&&(options[key]=$.mobile.collapsible.defaults[key]);return options},_themeClassFromOption:function(prefix,value){return value?"none"===value?"":prefix+value:""},_enhance:function(elem,ui){var iconclass,opts=this._renderedOptions,contentThemeClass=this._themeClassFromOption("ui-body-",opts.contentTheme);return elem.addClass("ui-collapsible "+(opts.inset?"ui-collapsible-inset ":"")+(opts.inset&&opts.corners?"ui-corner-all ":"")+(contentThemeClass?"ui-collapsible-themed-content ":"")),ui.originalHeading=elem.children(this.options.heading).first(),ui.content=elem.wrapInner("<div class='ui-collapsible-content "+contentThemeClass+"'></div>").children(".ui-collapsible-content"),ui.heading=ui.originalHeading,ui.heading.is("legend")&&(ui.heading=$("<div role='heading'>"+ui.heading.html()+"</div>"),ui.placeholder=$("<div><!-- placeholder for legend --></div>").insertBefore(ui.originalHeading),ui.originalHeading.remove()),iconclass=opts.collapsed?opts.collapsedIcon?"ui-icon-"+opts.collapsedIcon:"":opts.expandedIcon?"ui-icon-"+opts.expandedIcon:"",ui.status=$("<span class='ui-collapsible-heading-status'></span>"),ui.anchor=ui.heading.detach().addClass("ui-collapsible-heading").append(ui.status).wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().addClass("ui-btn "+(iconclass?iconclass+" ":"")+(iconclass?iconposClass(opts.iconpos)+" ":"")+this._themeClassFromOption("ui-btn-",opts.theme)+" "+(opts.mini?"ui-mini ":"")),ui.heading.insertBefore(ui.content),this._handleExpandCollapse(this.options.collapsed),ui},refresh:function(){this._applyOptions(this.options),this._renderedOptions=this._getOptions(this.options)},_applyOptions:function(options){var isCollapsed,newTheme,oldTheme,hasCorners,hasIcon,elem=this.element,currentOpts=this._renderedOptions,ui=this._ui,anchor=ui.anchor,status=ui.status,opts=this._getOptions(options);options.collapsed!==undefined&&this._handleExpandCollapse(options.collapsed),isCollapsed=elem.hasClass("ui-collapsible-collapsed"),isCollapsed?opts.expandCueText!==undefined&&status.text(opts.expandCueText):opts.collapseCueText!==undefined&&status.text(opts.collapseCueText),hasIcon=opts.collapsedIcon!==undefined?opts.collapsedIcon!==!1:currentOpts.collapsedIcon!==!1,(opts.iconpos!==undefined||opts.collapsedIcon!==undefined||opts.expandedIcon!==undefined)&&(anchor.removeClass([iconposClass(currentOpts.iconpos)].concat(currentOpts.expandedIcon?["ui-icon-"+currentOpts.expandedIcon]:[]).concat(currentOpts.collapsedIcon?["ui-icon-"+currentOpts.collapsedIcon]:[]).join(" ")),hasIcon&&anchor.addClass([iconposClass(opts.iconpos!==undefined?opts.iconpos:currentOpts.iconpos)].concat(isCollapsed?["ui-icon-"+(opts.collapsedIcon!==undefined?opts.collapsedIcon:currentOpts.collapsedIcon)]:["ui-icon-"+(opts.expandedIcon!==undefined?opts.expandedIcon:currentOpts.expandedIcon)]).join(" "))),opts.theme!==undefined&&(oldTheme=this._themeClassFromOption("ui-btn-",currentOpts.theme),newTheme=this._themeClassFromOption("ui-btn-",opts.theme),anchor.removeClass(oldTheme).addClass(newTheme)),opts.contentTheme!==undefined&&(oldTheme=this._themeClassFromOption("ui-body-",currentOpts.contentTheme),newTheme=this._themeClassFromOption("ui-body-",opts.contentTheme),ui.content.removeClass(oldTheme).addClass(newTheme)),opts.inset!==undefined&&(elem.toggleClass("ui-collapsible-inset",opts.inset),hasCorners=!(!opts.inset||!opts.corners&&!currentOpts.corners)),opts.corners!==undefined&&(hasCorners=!(!opts.corners||!opts.inset&&!currentOpts.inset)),hasCorners!==undefined&&elem.toggleClass("ui-corner-all",hasCorners),opts.mini!==undefined&&anchor.toggleClass("ui-mini",opts.mini)},_setOptions:function(options){this._applyOptions(options),this._super(options),this._renderedOptions=this._getOptions(this.options)},_handleExpandCollapse:function(isCollapse){var opts=this._renderedOptions,ui=this._ui;ui.status.text(isCollapse?opts.expandCueText:opts.collapseCueText),ui.heading.toggleClass("ui-collapsible-heading-collapsed",isCollapse).find("a").first().toggleClass("ui-icon-"+opts.expandedIcon,!isCollapse).toggleClass("ui-icon-"+opts.collapsedIcon,isCollapse||opts.expandedIcon===opts.collapsedIcon).removeClass($.mobile.activeBtnClass),this.element.toggleClass("ui-collapsible-collapsed",isCollapse),ui.content.toggleClass("ui-collapsible-content-collapsed",isCollapse).attr("aria-hidden",isCollapse).trigger("updatelayout"),this.options.collapsed=isCollapse,this._trigger(isCollapse?"collapse":"expand")
},expand:function(){this._handleExpandCollapse(!1)},collapse:function(){this._handleExpandCollapse(!0)},_destroy:function(){var ui=this._ui,opts=this.options;opts.enhanced||(ui.placeholder?(ui.originalHeading.insertBefore(ui.placeholder),ui.placeholder.remove(),ui.heading.remove()):(ui.status.remove(),ui.heading.removeClass("ui-collapsible-heading ui-collapsible-heading-collapsed").children().contents().unwrap()),ui.anchor.contents().unwrap(),ui.content.contents().unwrap(),this.element.removeClass("ui-collapsible ui-collapsible-collapsed ui-collapsible-themed-content ui-collapsible-inset ui-corner-all"))}}),$.mobile.collapsible.defaults={expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsedIcon:"plus",contentTheme:"inherit",expandedIcon:"minus",iconpos:"left",inset:!0,corners:!0,theme:"inherit",mini:!1}}(jQuery),function($){$.mobile.behaviors.addFirstLastClasses={_getVisibles:function($els,create){var visibles;return create?visibles=$els.not(".ui-screen-hidden"):(visibles=$els.filter(":visible"),0===visibles.length&&(visibles=$els.not(".ui-screen-hidden"))),visibles},_addFirstLastClasses:function($els,$visibles,create){$els.removeClass("ui-first-child ui-last-child"),$visibles.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child"),create||this.element.trigger("updatelayout")},_removeFirstLastClasses:function($els){$els.removeClass("ui-first-child ui-last-child")}}}(jQuery),function($,undefined){var childCollapsiblesSelector=":mobile-collapsible, "+$.mobile.collapsible.initSelector;$.widget("mobile.collapsibleset",$.extend({initSelector:":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",options:$.extend({enhanced:!1},$.mobile.collapsible.defaults),_handleCollapsibleExpand:function(event){var closestCollapsible=$(event.target).closest(".ui-collapsible");closestCollapsible.parent().is(":mobile-collapsibleset, :jqmData(role='collapsible-set')")&&closestCollapsible.siblings(".ui-collapsible:not(.ui-collapsible-collapsed)").collapsible("collapse")},_create:function(){var elem=this.element,opts=this.options;$.extend(this,{_classes:""}),opts.enhanced||(elem.addClass("ui-collapsible-set "+this._themeClassFromOption("ui-group-theme-",opts.theme)+" "+(opts.corners&&opts.inset?"ui-corner-all ":"")),this.element.find($.mobile.collapsible.initSelector).collapsible()),this._on(elem,{collapsibleexpand:"_handleCollapsibleExpand"})},_themeClassFromOption:function(prefix,value){return value?"none"===value?"":prefix+value:""},_init:function(){this._refresh(!0),this.element.children(childCollapsiblesSelector).filter(":jqmData(collapsed='false')").collapsible("expand")},_setOptions:function(options){var ret,hasCorners,elem=this.element,themeClass=this._themeClassFromOption("ui-group-theme-",options.theme);return themeClass&&elem.removeClass(this._themeClassFromOption("ui-group-theme-",this.options.theme)).addClass(themeClass),options.inset!==undefined&&(hasCorners=!(!options.inset||!options.corners&&!this.options.corners)),options.corners!==undefined&&(hasCorners=!(!options.corners||!options.inset&&!this.options.inset)),hasCorners!==undefined&&elem.toggleClass("ui-corner-all",hasCorners),ret=this._super(options),this.element.children(":mobile-collapsible").collapsible("refresh"),ret},_destroy:function(){var el=this.element;this._removeFirstLastClasses(el.children(childCollapsiblesSelector)),el.removeClass("ui-collapsible-set ui-corner-all "+this._themeClassFromOption("ui-group-theme-",this.options.theme)).children(":mobile-collapsible").collapsible("destroy")},_refresh:function(create){var collapsiblesInSet=this.element.children(childCollapsiblesSelector);this.element.find($.mobile.collapsible.initSelector).not(".ui-collapsible").collapsible(),this._addFirstLastClasses(collapsiblesInSet,this._getVisibles(collapsiblesInSet,create),create)},refresh:function(){this._refresh(!1)}},$.mobile.behaviors.addFirstLastClasses))}(jQuery),function($){$.fn.fieldcontain=function(){return this.addClass("ui-field-contain")}}(jQuery),function($){$.fn.grid=function(options){return this.each(function(){var iterator,letter,$this=$(this),o=$.extend({grid:null},options),$kids=$this.children(),gridCols={solo:1,a:2,b:3,c:4,d:5},grid=o.grid;if(!grid)if($kids.length<=5)for(letter in gridCols)gridCols[letter]===$kids.length&&(grid=letter);else grid="a",$this.addClass("ui-grid-duo");iterator=gridCols[grid],$this.addClass("ui-grid-"+grid),$kids.filter(":nth-child("+iterator+"n+1)").addClass("ui-block-a"),iterator>1&&$kids.filter(":nth-child("+iterator+"n+2)").addClass("ui-block-b"),iterator>2&&$kids.filter(":nth-child("+iterator+"n+3)").addClass("ui-block-c"),iterator>3&&$kids.filter(":nth-child("+iterator+"n+4)").addClass("ui-block-d"),iterator>4&&$kids.filter(":nth-child("+iterator+"n+5)").addClass("ui-block-e")})}}(jQuery),function($,undefined){$.widget("mobile.navbar",{options:{iconpos:"top",grid:null},_create:function(){var $navbar=this.element,$navbtns=$navbar.find("a"),iconpos=$navbtns.filter(":jqmData(icon)").length?this.options.iconpos:undefined;$navbar.addClass("ui-navbar").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid}),$navbtns.each(function(){var icon=$.mobile.getAttribute(this,"icon"),theme=$.mobile.getAttribute(this,"theme"),classes="ui-btn";theme&&(classes+=" ui-btn-"+theme),icon&&(classes+=" ui-icon-"+icon+" ui-btn-icon-"+iconpos),$(this).addClass(classes)}),$navbar.delegate("a","vclick",function(){var activeBtn=$(this);activeBtn.hasClass("ui-state-disabled")||activeBtn.hasClass("ui-disabled")||activeBtn.hasClass($.mobile.activeBtnClass)||($navbtns.removeClass($.mobile.activeBtnClass),activeBtn.addClass($.mobile.activeBtnClass),$(document).one("pagehide",function(){activeBtn.removeClass($.mobile.activeBtnClass)}))}),$navbar.closest(".ui-page").bind("pagebeforeshow",function(){$navbtns.filter(".ui-state-persist").addClass($.mobile.activeBtnClass)})}})}(jQuery),function($){var getAttr=$.mobile.getAttribute;$.widget("mobile.listview",$.extend({options:{theme:null,countTheme:null,dividerTheme:null,icon:"carat-r",splitIcon:"carat-r",splitTheme:null,corners:!0,shadow:!0,inset:!1},_create:function(){var t=this,listviewClasses="";listviewClasses+=t.options.inset?" ui-listview-inset":"",t.options.inset&&(listviewClasses+=t.options.corners?" ui-corner-all":"",listviewClasses+=t.options.shadow?" ui-shadow":""),t.element.addClass(" ui-listview"+listviewClasses),t.refresh(!0)},_findFirstElementByTagName:function(ele,nextProp,lcName,ucName){var dict={};for(dict[lcName]=dict[ucName]=!0;ele;){if(dict[ele.nodeName])return ele;ele=ele[nextProp]}return null},_addThumbClasses:function(containers){var i,img,len=containers.length;for(i=0;len>i;i++)img=$(this._findFirstElementByTagName(containers[i].firstChild,"nextSibling","img","IMG")),img.length&&$(this._findFirstElementByTagName(img[0].parentNode,"parentNode","li","LI")).addClass(img.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")},_getChildrenByTagName:function(ele,lcName,ucName){var results=[],dict={};for(dict[lcName]=dict[ucName]=!0,ele=ele.firstChild;ele;)dict[ele.nodeName]&&results.push(ele),ele=ele.nextSibling;return $(results)},_beforeListviewRefresh:$.noop,_afterListviewRefresh:$.noop,refresh:function(create){var buttonClass,pos,numli,item,itemClass,itemTheme,itemIcon,icon,a,isDivider,startCount,newStartCount,value,last,splittheme,splitThemeClass,spliticon,altButtonClass,dividerTheme,li,o=this.options,$list=this.element,ol=!!$.nodeName($list[0],"ol"),start=$list.attr("start"),itemClassDict={},countBubbles=$list.find(".ui-li-count"),countTheme=getAttr($list[0],"counttheme")||this.options.countTheme,countThemeClass=countTheme?"ui-body-"+countTheme:"ui-body-inherit";for(o.theme&&$list.addClass("ui-group-theme-"+o.theme),ol&&(start||0===start)&&(startCount=parseInt(start,10)-1,$list.css("counter-reset","listnumbering "+startCount)),this._beforeListviewRefresh(),li=this._getChildrenByTagName($list[0],"li","LI"),pos=0,numli=li.length;numli>pos;pos++)item=li.eq(pos),itemClass="",(create||item[0].className.search(/\bui-li-static\b|\bui-li-divider\b/)<0)&&(a=this._getChildrenByTagName(item[0],"a","A"),isDivider="list-divider"===getAttr(item[0],"role"),value=item.attr("value"),itemTheme=getAttr(item[0],"theme"),a.length&&a[0].className.search(/\bui-btn\b/)<0&&!isDivider?(itemIcon=getAttr(item[0],"icon"),icon=itemIcon===!1?!1:itemIcon||o.icon,a.removeClass("ui-link"),buttonClass="ui-btn",itemTheme&&(buttonClass+=" ui-btn-"+itemTheme),a.length>1?(itemClass="ui-li-has-alt",last=a.last(),splittheme=getAttr(last[0],"theme")||o.splitTheme||getAttr(item[0],"theme",!0),splitThemeClass=splittheme?" ui-btn-"+splittheme:"",spliticon=getAttr(last[0],"icon")||getAttr(item[0],"icon")||o.splitIcon,altButtonClass="ui-btn ui-btn-icon-notext ui-icon-"+spliticon+splitThemeClass,last.attr("title",$.trim(last.getEncodedText())).addClass(altButtonClass).empty()):icon&&(buttonClass+=" ui-btn-icon-right ui-icon-"+icon),a.first().addClass(buttonClass)):isDivider?(dividerTheme=getAttr(item[0],"theme")||o.dividerTheme||o.theme,itemClass="ui-li-divider ui-bar-"+(dividerTheme?dividerTheme:"inherit"),item.attr("role","heading")):a.length<=0&&(itemClass="ui-li-static ui-body-"+(itemTheme?itemTheme:"inherit")),ol&&value&&(newStartCount=parseInt(value,10)-1,item.css("counter-reset","listnumbering "+newStartCount))),itemClassDict[itemClass]||(itemClassDict[itemClass]=[]),itemClassDict[itemClass].push(item[0]);for(itemClass in itemClassDict)$(itemClassDict[itemClass]).addClass(itemClass);countBubbles.each(function(){$(this).closest("li").addClass("ui-li-has-count")}),countThemeClass&&countBubbles.addClass(countThemeClass),this._addThumbClasses(li),this._addThumbClasses(li.find(".ui-btn")),this._afterListviewRefresh(),this._addFirstLastClasses(li,this._getVisibles(li,create),create)}},$.mobile.behaviors.addFirstLastClasses))}(jQuery),function($){function defaultAutodividersSelector(elt){var text=$.trim(elt.text())||null;return text?text=text.slice(0,1).toUpperCase():null}$.widget("mobile.listview",$.mobile.listview,{options:{autodividers:!1,autodividersSelector:defaultAutodividersSelector},_beforeListviewRefresh:function(){this.options.autodividers&&(this._replaceDividers(),this._superApply(arguments))},_replaceDividers:function(){var i,lis,li,dividerText,divider,lastDividerText=null,list=this.element;for(list.children("li:jqmData(role='list-divider')").remove(),lis=list.children("li"),i=0;i<lis.length;i++)li=lis[i],dividerText=this.options.autodividersSelector($(li)),dividerText&&lastDividerText!==dividerText&&(divider=document.createElement("li"),divider.appendChild(document.createTextNode(dividerText)),divider.setAttribute("data-"+$.mobile.ns+"role","list-divider"),li.parentNode.insertBefore(divider,li)),lastDividerText=dividerText}})}(jQuery),function($){var rdivider=/(^|\s)ui-li-divider($|\s)/,rhidden=/(^|\s)ui-screen-hidden($|\s)/;$.widget("mobile.listview",$.mobile.listview,{options:{hideDividers:!1},_afterListviewRefresh:function(){var items,idx,item,hideDivider=!0;if(this._superApply(arguments),this.options.hideDividers)for(items=this._getChildrenByTagName(this.element[0],"li","LI"),idx=items.length-1;idx>-1;idx--)item=items[idx],item.className.match(rdivider)?(hideDivider&&(item.className=item.className+" ui-screen-hidden"),hideDivider=!0):item.className.match(rhidden)||(hideDivider=!1)}})}(jQuery),function($){$.mobile.nojs=function(target){$(":jqmData(role='nojs')",target).addClass("ui-nojs")}}(jQuery),function($){$.mobile.behaviors.formReset={_handleFormReset:function(){this._on(this.element.closest("form"),{reset:function(){this._delay("_reset")}})}}}(jQuery),function($,undefined){var escapeId=$.mobile.path.hashToSelector;$.widget("mobile.checkboxradio",$.extend({initSelector:"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",options:{theme:"inherit",mini:!1,wrapperClass:null,enhanced:!1,iconpos:"left"},_create:function(){var input=this.element,o=this.options,inheritAttr=function(input,dataAttr){return input.jqmData(dataAttr)||input.closest("form, fieldset").jqmData(dataAttr)},parentLabel=input.closest("label"),label=parentLabel.length?parentLabel:input.closest("form, fieldset, :jqmData(role='page'), :jqmData(role='dialog')").find("label").filter("[for='"+escapeId(input[0].id)+"']").first(),inputtype=input[0].type,checkedClass="ui-"+inputtype+"-on",uncheckedClass="ui-"+inputtype+"-off";("checkbox"===inputtype||"radio"===inputtype)&&(this.element[0].disabled&&(this.options.disabled=!0),o.iconpos=inheritAttr(input,"iconpos")||label.attr("data-"+$.mobile.ns+"iconpos")||o.iconpos,o.mini=inheritAttr(input,"mini")||o.mini,$.extend(this,{input:input,label:label,parentLabel:parentLabel,inputtype:inputtype,checkedClass:checkedClass,uncheckedClass:uncheckedClass}),this.options.enhanced||this._enhance(),this._on(label,{vmouseover:"_handleLabelVMouseOver",vclick:"_handleLabelVClick"}),this._on(input,{vmousedown:"_cacheVals",vclick:"_handleInputVClick",focus:"_handleInputFocus",blur:"_handleInputBlur"}),this._handleFormReset(),this.refresh())},_enhance:function(){this.label.addClass("ui-btn ui-corner-all"),this.parentLabel.length>0?this.input.add(this.label).wrapAll(this._wrapper()):(this.element.wrap(this._wrapper()),this.element.parent().prepend(this.label)),this._setOptions({theme:this.options.theme,iconpos:this.options.iconpos,mini:this.options.mini})},_wrapper:function(){return $("<div class='"+(this.options.wrapperClass?this.options.wrapperClass:"")+" ui-"+this.inputtype+(this.options.disabled?" ui-state-disabled":"")+"' ></div>")},_handleInputFocus:function(){this.label.addClass($.mobile.focusClass)},_handleInputBlur:function(){this.label.removeClass($.mobile.focusClass)},_handleInputVClick:function(){this.element.prop("checked",this.element.is(":checked")),this._getInputSet().not(this.element).prop("checked",!1),this._updateAll()},_handleLabelVMouseOver:function(event){this.label.parent().hasClass("ui-state-disabled")&&event.stopPropagation()},_handleLabelVClick:function(event){var input=this.element;return input.is(":disabled")?void event.preventDefault():(this._cacheVals(),input.prop("checked","radio"===this.inputtype&&!0||!input.prop("checked")),input.triggerHandler("click"),this._getInputSet().not(input).prop("checked",!1),this._updateAll(),!1)},_cacheVals:function(){this._getInputSet().each(function(){$(this).attr("data-"+$.mobile.ns+"cacheVal",this.checked)})},_getInputSet:function(){var selector,formId,radio=this.element[0],name=radio.name,form=radio.form,doc=this.element.parents().last().get(0),radios=this.element;return name&&"radio"===this.inputtype&&doc&&(selector="input[type='radio'][name='"+escapeId(name)+"']",form?(formId=form.id,formId&&(radios=$(selector+"[form='"+escapeId(formId)+"']",doc)),radios=$(form).find(selector).filter(function(){return this.form===form}).add(radios)):radios=$(selector,doc).filter(function(){return!this.form})),radios},_updateAll:function(){var self=this;this._getInputSet().each(function(){var $this=$(this);(this.checked||"checkbox"===self.inputtype)&&$this.trigger("change")}).checkboxradio("refresh")},_reset:function(){this.refresh()},_hasIcon:function(){var controlgroup,controlgroupWidget,controlgroupConstructor=$.mobile.controlgroup;return controlgroupConstructor&&(controlgroup=this.element.closest(":mobile-controlgroup,"+controlgroupConstructor.prototype.initSelector),controlgroup.length>0)?(controlgroupWidget=$.data(controlgroup[0],"mobile-controlgroup"),"horizontal"!==(controlgroupWidget?controlgroupWidget.options.type:controlgroup.attr("data-"+$.mobile.ns+"type"))):!0},refresh:function(){var hasIcon=this._hasIcon(),isChecked=this.element[0].checked,active=$.mobile.activeBtnClass,iconposClass="ui-btn-icon-"+this.options.iconpos,addClasses=[],removeClasses=[];hasIcon?(removeClasses.push(active),addClasses.push(iconposClass)):(removeClasses.push(iconposClass),(isChecked?addClasses:removeClasses).push(active)),isChecked?(addClasses.push(this.checkedClass),removeClasses.push(this.uncheckedClass)):(addClasses.push(this.uncheckedClass),removeClasses.push(this.checkedClass)),this.label.addClass(addClasses.join(" ")).removeClass(removeClasses.join(" "))},widget:function(){return this.label.parent()},_setOptions:function(options){var label=this.label,currentOptions=this.options,outer=this.widget(),hasIcon=this._hasIcon();options.disabled!==undefined&&(this.input.prop("disabled",!!options.disabled),outer.toggleClass("ui-state-disabled",!!options.disabled)),options.mini!==undefined&&outer.toggleClass("ui-mini",!!options.mini),options.theme!==undefined&&label.removeClass("ui-btn-"+currentOptions.theme).addClass("ui-btn-"+options.theme),options.wrapperClass!==undefined&&outer.removeClass(currentOptions.wrapperClass).addClass(options.wrapperClass),options.iconpos!==undefined&&hasIcon?label.removeClass("ui-btn-icon-"+currentOptions.iconpos).addClass("ui-btn-icon-"+options.iconpos):hasIcon||label.removeClass("ui-btn-icon-"+currentOptions.iconpos),this._super(options)}},$.mobile.behaviors.formReset))}(jQuery),function($,undefined){$.widget("mobile.button",{initSelector:"input[type='button'], input[type='submit'], input[type='reset']",options:{theme:null,icon:null,iconpos:"left",iconshadow:!1,corners:!0,shadow:!0,inline:null,mini:null,wrapperClass:null,enhanced:!1},_create:function(){this.element.is(":disabled")&&(this.options.disabled=!0),this.options.enhanced||this._enhance(),$.extend(this,{wrapper:this.element.parent()}),this._on({focus:function(){this.widget().addClass($.mobile.focusClass)},blur:function(){this.widget().removeClass($.mobile.focusClass)}}),this.refresh(!0)},_enhance:function(){this.element.wrap(this._button())},_button:function(){var options=this.options,iconClasses=this._getIconClasses(this.options);return $("<div class='ui-btn ui-input-btn"+(options.wrapperClass?" "+options.wrapperClass:"")+(options.theme?" ui-btn-"+options.theme:"")+(options.corners?" ui-corner-all":"")+(options.shadow?" ui-shadow":"")+(options.inline?" ui-btn-inline":"")+(options.mini?" ui-mini":"")+(options.disabled?" ui-state-disabled":"")+(iconClasses?" "+iconClasses:"")+"' >"+this.element.val()+"</div>")},widget:function(){return this.wrapper},_destroy:function(){this.element.insertBefore(this.button),this.button.remove()},_getIconClasses:function(options){return options.icon?"ui-icon-"+options.icon+(options.iconshadow?" ui-shadow-icon":"")+" ui-btn-icon-"+options.iconpos:""},_setOptions:function(options){var outer=this.widget();options.theme!==undefined&&outer.removeClass(this.options.theme).addClass("ui-btn-"+options.theme),options.corners!==undefined&&outer.toggleClass("ui-corner-all",options.corners),options.shadow!==undefined&&outer.toggleClass("ui-shadow",options.shadow),options.inline!==undefined&&outer.toggleClass("ui-btn-inline",options.inline),options.mini!==undefined&&outer.toggleClass("ui-mini",options.mini),options.disabled!==undefined&&(this.element.prop("disabled",options.disabled),outer.toggleClass("ui-state-disabled",options.disabled)),(options.icon!==undefined||options.iconshadow!==undefined||options.iconpos!==undefined)&&outer.removeClass(this._getIconClasses(this.options)).addClass(this._getIconClasses($.extend({},this.options,options))),this._super(options)},refresh:function(create){var originalElement,isDisabled=this.element.prop("disabled");this.options.icon&&"notext"===this.options.iconpos&&this.element.attr("title")&&this.element.attr("title",this.element.val()),create||(originalElement=this.element.detach(),$(this.wrapper).text(this.element.val()).append(originalElement)),this.options.disabled!==isDisabled&&this._setOptions({disabled:isDisabled})}})}(jQuery),function($){var meta=$("meta[name=viewport]"),initialContent=meta.attr("content"),disabledZoom=initialContent+",maximum-scale=1, user-scalable=no",enabledZoom=initialContent+",maximum-scale=10, user-scalable=yes",disabledInitially=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(initialContent);$.mobile.zoom=$.extend({},{enabled:!disabledInitially,locked:!1,disable:function(lock){disabledInitially||$.mobile.zoom.locked||(meta.attr("content",disabledZoom),$.mobile.zoom.enabled=!1,$.mobile.zoom.locked=lock||!1)},enable:function(unlock){disabledInitially||$.mobile.zoom.locked&&unlock!==!0||(meta.attr("content",enabledZoom),$.mobile.zoom.enabled=!0,$.mobile.zoom.locked=!1)},restore:function(){disabledInitially||(meta.attr("content",initialContent),$.mobile.zoom.enabled=!0)}})}(jQuery),function($,undefined){$.widget("mobile.textinput",{initSelector:"input[type='text'],input[type='search'],:jqmData(type='search'),input[type='number'],:jqmData(type='number'),input[type='password'],input[type='email'],input[type='url'],input[type='tel'],textarea,input[type='time'],input[type='date'],input[type='month'],input[type='week'],input[type='datetime'],input[type='datetime-local'],input[type='color'],input:not([type]),input[type='file']",options:{theme:null,corners:!0,mini:!1,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,wrapperClass:"",enhanced:!1},_create:function(){var options=this.options,isSearch=this.element.is("[type='search'], :jqmData(type='search')"),isTextarea="TEXTAREA"===this.element[0].tagName,isRange=this.element.is("[data-"+($.mobile.ns||"")+"type='range']"),inputNeedsWrap=(this.element.is("input")||this.element.is("[data-"+($.mobile.ns||"")+"type='search']"))&&!isRange;this.element.prop("disabled")&&(options.disabled=!0),$.extend(this,{classes:this._classesFromOptions(),isSearch:isSearch,isTextarea:isTextarea,isRange:isRange,inputNeedsWrap:inputNeedsWrap}),this._autoCorrect(),options.enhanced||this._enhance(),this._on({focus:"_handleFocus",blur:"_handleBlur"})},refresh:function(){this.setOptions({disabled:this.element.is(":disabled")})},_enhance:function(){var elementClasses=[];this.isTextarea&&elementClasses.push("ui-input-text"),(this.isTextarea||this.isRange)&&elementClasses.push("ui-shadow-inset"),this.inputNeedsWrap?this.element.wrap(this._wrap()):elementClasses=elementClasses.concat(this.classes),this.element.addClass(elementClasses.join(" "))},widget:function(){return this.inputNeedsWrap?this.element.parent():this.element},_classesFromOptions:function(){var options=this.options,classes=[];return classes.push("ui-body-"+(null===options.theme?"inherit":options.theme)),options.corners&&classes.push("ui-corner-all"),options.mini&&classes.push("ui-mini"),options.disabled&&classes.push("ui-state-disabled"),options.wrapperClass&&classes.push(options.wrapperClass),classes},_wrap:function(){return $("<div class='"+(this.isSearch?"ui-input-search ":"ui-input-text ")+this.classes.join(" ")+" ui-shadow-inset'></div>")},_autoCorrect:function(){"undefined"==typeof this.element[0].autocorrect||$.support.touchOverflow||(this.element[0].setAttribute("autocorrect","off"),this.element[0].setAttribute("autocomplete","off"))},_handleBlur:function(){this.widget().removeClass($.mobile.focusClass),this.options.preventFocusZoom&&$.mobile.zoom.enable(!0)},_handleFocus:function(){this.options.preventFocusZoom&&$.mobile.zoom.disable(!0),this.widget().addClass($.mobile.focusClass)},_setOptions:function(options){var outer=this.widget();this._super(options),(options.disabled!==undefined||options.mini!==undefined||options.corners!==undefined||options.theme!==undefined||options.wrapperClass!==undefined)&&(outer.removeClass(this.classes.join(" ")),this.classes=this._classesFromOptions(),outer.addClass(this.classes.join(" "))),options.disabled!==undefined&&this.element.prop("disabled",!!options.disabled)},_destroy:function(){this.options.enhanced||(this.inputNeedsWrap&&this.element.unwrap(),this.element.removeClass("ui-input-text "+this.classes.join(" ")))}})}(jQuery),function($,undefined){$.widget("mobile.slider",$.extend({initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",widgetEventPrefix:"slide",options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!1},_create:function(){var options,wrapper,j,length,i,optionsCount,origTabIndex,side,activeClass,sliderImg,self=this,control=this.element,trackTheme=this.options.trackTheme||$.mobile.getAttribute(control[0],"theme"),trackThemeClass=trackTheme?" ui-bar-"+trackTheme:" ui-bar-inherit",cornerClass=this.options.corners||control.jqmData("corners")?" ui-corner-all":"",miniClass=this.options.mini||control.jqmData("mini")?" ui-mini":"",cType=control[0].nodeName.toLowerCase(),isToggleSwitch="select"===cType,isRangeslider=control.parent().is(":jqmData(role='rangeslider')"),selectClass=isToggleSwitch?"ui-slider-switch":"",controlID=control.attr("id"),$label=$("[for='"+controlID+"']"),labelID=$label.attr("id")||controlID+"-label",min=isToggleSwitch?0:parseFloat(control.attr("min")),max=isToggleSwitch?control.find("option").length-1:parseFloat(control.attr("max")),step=window.parseFloat(control.attr("step")||1),domHandle=document.createElement("a"),handle=$(domHandle),domSlider=document.createElement("div"),slider=$(domSlider),valuebg=this.options.highlight&&!isToggleSwitch?function(){var bg=document.createElement("div");return bg.className="ui-slider-bg "+$.mobile.activeBtnClass,$(bg).prependTo(slider)}():!1;if($label.attr("id",labelID),this.isToggleSwitch=isToggleSwitch,domHandle.setAttribute("href","#"),domSlider.setAttribute("role","application"),domSlider.className=[this.isToggleSwitch?"ui-slider ui-slider-track ui-shadow-inset ":"ui-slider-track ui-shadow-inset ",selectClass,trackThemeClass,cornerClass,miniClass].join(""),domHandle.className="ui-slider-handle",domSlider.appendChild(domHandle),handle.attr({role:"slider","aria-valuemin":min,"aria-valuemax":max,"aria-valuenow":this._value(),"aria-valuetext":this._value(),title:this._value(),"aria-labelledby":labelID}),$.extend(this,{slider:slider,handle:handle,control:control,type:cType,step:step,max:max,min:min,valuebg:valuebg,isRangeslider:isRangeslider,dragging:!1,beforeStart:null,userModified:!1,mouseMoved:!1}),isToggleSwitch){for(origTabIndex=control.attr("tabindex"),origTabIndex&&handle.attr("tabindex",origTabIndex),control.attr("tabindex","-1").focus(function(){$(this).blur(),handle.focus()}),wrapper=document.createElement("div"),wrapper.className="ui-slider-inneroffset",j=0,length=domSlider.childNodes.length;length>j;j++)wrapper.appendChild(domSlider.childNodes[j]);for(domSlider.appendChild(wrapper),handle.addClass("ui-slider-handle-snapping"),options=control.find("option"),i=0,optionsCount=options.length;optionsCount>i;i++)side=i?"a":"b",activeClass=i?" "+$.mobile.activeBtnClass:"",sliderImg=document.createElement("span"),sliderImg.className=["ui-slider-label ui-slider-label-",side,activeClass].join(""),sliderImg.setAttribute("role","img"),sliderImg.appendChild(document.createTextNode(options[i].innerHTML)),$(sliderImg).prependTo(slider);self._labels=$(".ui-slider-label",slider)}control.addClass(isToggleSwitch?"ui-slider-switch":"ui-slider-input"),this._on(control,{change:"_controlChange",keyup:"_controlKeyup",blur:"_controlBlur",vmouseup:"_controlVMouseUp"}),slider.bind("vmousedown",$.proxy(this._sliderVMouseDown,this)).bind("vclick",!1),this._on(document,{vmousemove:"_preventDocumentDrag"}),this._on(slider.add(document),{vmouseup:"_sliderVMouseUp"}),slider.insertAfter(control),isToggleSwitch||isRangeslider||(wrapper=this.options.mini?"<div class='ui-slider ui-mini'>":"<div class='ui-slider'>",control.add(slider).wrapAll(wrapper)),this._on(this.handle,{vmousedown:"_handleVMouseDown",keydown:"_handleKeydown",keyup:"_handleKeyup"}),this.handle.bind("vclick",!1),this._handleFormReset(),this.refresh(undefined,undefined,!0)},_setOptions:function(options){options.theme!==undefined&&this._setTheme(options.theme),options.trackTheme!==undefined&&this._setTrackTheme(options.trackTheme),options.corners!==undefined&&this._setCorners(options.corners),options.mini!==undefined&&this._setMini(options.mini),options.highlight!==undefined&&this._setHighlight(options.highlight),options.disabled!==undefined&&this._setDisabled(options.disabled),this._super(options)},_controlChange:function(event){return this._trigger("controlchange",event)===!1?!1:void(this.mouseMoved||this.refresh(this._value(),!0))},_controlKeyup:function(){this.refresh(this._value(),!0,!0)},_controlBlur:function(){this.refresh(this._value(),!0)},_controlVMouseUp:function(){this._checkedRefresh()},_handleVMouseDown:function(){this.handle.focus()},_handleKeydown:function(event){var index=this._value();if(!this.options.disabled){switch(event.keyCode){case $.mobile.keyCode.HOME:case $.mobile.keyCode.END:case $.mobile.keyCode.PAGE_UP:case $.mobile.keyCode.PAGE_DOWN:case $.mobile.keyCode.UP:case $.mobile.keyCode.RIGHT:case $.mobile.keyCode.DOWN:case $.mobile.keyCode.LEFT:event.preventDefault(),this._keySliding||(this._keySliding=!0,this.handle.addClass("ui-state-active"))}switch(event.keyCode){case $.mobile.keyCode.HOME:this.refresh(this.min);break;case $.mobile.keyCode.END:this.refresh(this.max);break;case $.mobile.keyCode.PAGE_UP:case $.mobile.keyCode.UP:case $.mobile.keyCode.RIGHT:this.refresh(index+this.step);break;case $.mobile.keyCode.PAGE_DOWN:case $.mobile.keyCode.DOWN:case $.mobile.keyCode.LEFT:this.refresh(index-this.step)}}},_handleKeyup:function(){this._keySliding&&(this._keySliding=!1,this.handle.removeClass("ui-state-active"))},_sliderVMouseDown:function(event){return this.options.disabled||1!==event.which&&0!==event.which&&event.which!==undefined?!1:this._trigger("beforestart",event)===!1?!1:(this.dragging=!0,this.userModified=!1,this.mouseMoved=!1,this.isToggleSwitch&&(this.beforeStart=this.element[0].selectedIndex),this.refresh(event),this._trigger("start"),!1)},_sliderVMouseUp:function(){return this.dragging?(this.dragging=!1,this.isToggleSwitch&&(this.handle.addClass("ui-slider-handle-snapping"),this.refresh(this.mouseMoved?this.userModified?0===this.beforeStart?1:0:this.beforeStart:0===this.beforeStart?1:0)),this.mouseMoved=!1,this._trigger("stop"),!1):void 0},_preventDocumentDrag:function(event){return this._trigger("drag",event)===!1?!1:this.dragging&&!this.options.disabled?(this.mouseMoved=!0,this.isToggleSwitch&&this.handle.removeClass("ui-slider-handle-snapping"),this.refresh(event),this.userModified=this.beforeStart!==this.element[0].selectedIndex,!1):void 0},_checkedRefresh:function(){this.value!==this._value()&&this.refresh(this._value())},_value:function(){return this.isToggleSwitch?this.element[0].selectedIndex:parseFloat(this.element.val())},_reset:function(){this.refresh(undefined,!1,!0)},refresh:function(val,isfromControl,preventInputUpdate){var left,width,data,tol,pxStep,percent,control,isInput,optionElements,min,max,step,newval,valModStep,alignValue,percentPerStep,handlePercent,aPercent,bPercent,valueChanged,self=this,parentTheme=$.mobile.getAttribute(this.element[0],"theme"),theme=this.options.theme||parentTheme,themeClass=theme?" ui-btn-"+theme:"",trackTheme=this.options.trackTheme||parentTheme,trackThemeClass=trackTheme?" ui-bar-"+trackTheme:" ui-bar-inherit",cornerClass=this.options.corners?" ui-corner-all":"",miniClass=this.options.mini?" ui-mini":"";if(self.slider[0].className=[this.isToggleSwitch?"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset":"ui-slider-track ui-shadow-inset",trackThemeClass,cornerClass,miniClass].join(""),(this.options.disabled||this.element.prop("disabled"))&&this.disable(),this.value=this._value(),this.options.highlight&&!this.isToggleSwitch&&0===this.slider.find(".ui-slider-bg").length&&(this.valuebg=function(){var bg=document.createElement("div");return bg.className="ui-slider-bg "+$.mobile.activeBtnClass,$(bg).prependTo(self.slider)}()),this.handle.addClass("ui-btn"+themeClass+" ui-shadow"),control=this.element,isInput=!this.isToggleSwitch,optionElements=isInput?[]:control.find("option"),min=isInput?parseFloat(control.attr("min")):0,max=isInput?parseFloat(control.attr("max")):optionElements.length-1,step=isInput&&parseFloat(control.attr("step"))>0?parseFloat(control.attr("step")):1,"object"==typeof val){if(data=val,tol=8,left=this.slider.offset().left,width=this.slider.width(),pxStep=width/((max-min)/step),!this.dragging||data.pageX<left-tol||data.pageX>left+width+tol)return;
percent=pxStep>1?(data.pageX-left)/width*100:Math.round((data.pageX-left)/width*100)}else null==val&&(val=isInput?parseFloat(control.val()||0):control[0].selectedIndex),percent=(parseFloat(val)-min)/(max-min)*100;if(!isNaN(percent)&&(newval=percent/100*(max-min)+min,valModStep=(newval-min)%step,alignValue=newval-valModStep,2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),percentPerStep=100/((max-min)/step),newval=parseFloat(alignValue.toFixed(5)),"undefined"==typeof pxStep&&(pxStep=width/((max-min)/step)),pxStep>1&&isInput&&(percent=(newval-min)*percentPerStep*(1/step)),0>percent&&(percent=0),percent>100&&(percent=100),min>newval&&(newval=min),newval>max&&(newval=max),this.handle.css("left",percent+"%"),this.handle[0].setAttribute("aria-valuenow",isInput?newval:optionElements.eq(newval).attr("value")),this.handle[0].setAttribute("aria-valuetext",isInput?newval:optionElements.eq(newval).getEncodedText()),this.handle[0].setAttribute("title",isInput?newval:optionElements.eq(newval).getEncodedText()),this.valuebg&&this.valuebg.css("width",percent+"%"),this._labels&&(handlePercent=this.handle.width()/this.slider.width()*100,aPercent=percent&&handlePercent+(100-handlePercent)*percent/100,bPercent=100===percent?0:Math.min(handlePercent+100-aPercent,100),this._labels.each(function(){var ab=$(this).hasClass("ui-slider-label-a");$(this).width((ab?aPercent:bPercent)+"%")})),!preventInputUpdate)){if(valueChanged=!1,isInput?(valueChanged=control.val()!==newval,control.val(newval)):(valueChanged=control[0].selectedIndex!==newval,control[0].selectedIndex=newval),this._trigger("beforechange",val)===!1)return!1;!isfromControl&&valueChanged&&control.trigger("change")}},_setHighlight:function(value){value=!!value,value?(this.options.highlight=!!value,this.refresh()):this.valuebg&&(this.valuebg.remove(),this.valuebg=!1)},_setTheme:function(value){this.handle.removeClass("ui-btn-"+this.options.theme).addClass("ui-btn-"+value);var currentTheme=this.options.theme?this.options.theme:"inherit",newTheme=value?value:"inherit";this.control.removeClass("ui-body-"+currentTheme).addClass("ui-body-"+newTheme)},_setTrackTheme:function(value){var currentTrackTheme=this.options.trackTheme?this.options.trackTheme:"inherit",newTrackTheme=value?value:"inherit";this.slider.removeClass("ui-body-"+currentTrackTheme).addClass("ui-body-"+newTrackTheme)},_setMini:function(value){value=!!value,this.isToggleSwitch||this.isRangeslider||(this.slider.parent().toggleClass("ui-mini",value),this.element.toggleClass("ui-mini",value)),this.slider.toggleClass("ui-mini",value)},_setCorners:function(value){this.slider.toggleClass("ui-corner-all",value),this.isToggleSwitch||this.control.toggleClass("ui-corner-all",value)},_setDisabled:function(value){value=!!value,this.element.prop("disabled",value),this.slider.toggleClass("ui-state-disabled",value).attr("aria-disabled",value)}},$.mobile.behaviors.formReset))}(jQuery),function($){function getPopup(){return popup||(popup=$("<div></div>",{"class":"ui-slider-popup ui-shadow ui-corner-all"})),popup.clone()}var popup;$.widget("mobile.slider",$.mobile.slider,{options:{popupEnabled:!1,showValue:!1},_create:function(){this._super(),$.extend(this,{_currentValue:null,_popup:null,_popupVisible:!1}),this._setOption("popupEnabled",this.options.popupEnabled),this._on(this.handle,{vmousedown:"_showPopup"}),this._on(this.slider.add(this.document),{vmouseup:"_hidePopup"}),this._refresh()},_positionPopup:function(){var dstOffset=this.handle.offset();this._popup.offset({left:dstOffset.left+(this.handle.width()-this._popup.width())/2,top:dstOffset.top-this._popup.outerHeight()-5})},_setOption:function(key,value){this._super(key,value),"showValue"===key?this.handle.html(value&&!this.options.mini?this._value():""):"popupEnabled"===key&&value&&!this._popup&&(this._popup=getPopup().addClass("ui-body-"+(this.options.theme||"a")).hide().insertBefore(this.element))},refresh:function(){this._super.apply(this,arguments),this._refresh()},_refresh:function(){var newValue,o=this.options;o.popupEnabled&&this.handle.removeAttr("title"),newValue=this._value(),newValue!==this._currentValue&&(this._currentValue=newValue,o.popupEnabled&&this._popup?(this._positionPopup(),this._popup.html(newValue)):o.showValue&&!this.options.mini&&this.handle.html(newValue))},_showPopup:function(){this.options.popupEnabled&&!this._popupVisible&&(this.handle.html(""),this._popup.show(),this._positionPopup(),this._popupVisible=!0)},_hidePopup:function(){var o=this.options;o.popupEnabled&&this._popupVisible&&(o.showValue&&!o.mini&&this.handle.html(this._value()),this._popup.hide(),this._popupVisible=!1)}})}(jQuery),function($,undefined){$.widget("mobile.flipswitch",$.extend({options:{onText:"On",offText:"Off",theme:null,enhanced:!1,wrapperClass:null,corners:!0,mini:!1},_create:function(){this.options.enhanced?$.extend(this,{flipswitch:this.element.parent(),on:this.element.find(".ui-flipswitch-on").eq(0),off:this.element.find(".ui-flipswitch-off").eq(0),type:this.element.get(0).tagName}):this._enhance(),this._handleFormReset(),this._originalTabIndex=this.element.attr("tabindex"),null!=this._originalTabIndex&&this.on.attr("tabindex",this._originalTabIndex),this.element.attr("tabindex","-1"),this._on({focus:"_handleInputFocus"}),this.element.is(":disabled")&&this._setOptions({disabled:!0}),this._on(this.flipswitch,{click:"_toggle",swipeleft:"_left",swiperight:"_right"}),this._on(this.on,{keydown:"_keydown"}),this._on({change:"refresh"})},_handleInputFocus:function(){this.on.focus()},widget:function(){return this.flipswitch},_left:function(){this.flipswitch.removeClass("ui-flipswitch-active"),"SELECT"===this.type?this.element.get(0).selectedIndex=0:this.element.prop("checked",!1),this.element.trigger("change")},_right:function(){this.flipswitch.addClass("ui-flipswitch-active"),"SELECT"===this.type?this.element.get(0).selectedIndex=1:this.element.prop("checked",!0),this.element.trigger("change")},_enhance:function(){var flipswitch=$("<div>"),options=this.options,element=this.element,theme=options.theme?options.theme:"inherit",on=$("<a></a>",{href:"#"}),off=$("<span></span>"),type=element.get(0).tagName,onText="INPUT"===type?options.onText:element.find("option").eq(1).text(),offText="INPUT"===type?options.offText:element.find("option").eq(0).text();on.addClass("ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit").text(onText),off.addClass("ui-flipswitch-off").text(offText),flipswitch.addClass("ui-flipswitch ui-shadow-inset ui-bar-"+theme+" "+(options.wrapperClass?options.wrapperClass:"")+" "+(element.is(":checked")||element.find("option").eq(1).is(":selected")?"ui-flipswitch-active":"")+(element.is(":disabled")?" ui-state-disabled":"")+(options.corners?" ui-corner-all":"")+(options.mini?" ui-mini":"")).append(on,off),element.addClass("ui-flipswitch-input").after(flipswitch).appendTo(flipswitch),$.extend(this,{flipswitch:flipswitch,on:on,off:off,type:type})},_reset:function(){this.refresh()},refresh:function(){var direction,existingDirection=this.flipswitch.hasClass("ui-flipswitch-active")?"_right":"_left";direction="SELECT"===this.type?this.element.get(0).selectedIndex>0?"_right":"_left":this.element.prop("checked")?"_right":"_left",direction!==existingDirection&&this[direction]()},_toggle:function(){var direction=this.flipswitch.hasClass("ui-flipswitch-active")?"_left":"_right";this[direction]()},_keydown:function(e){e.which===$.mobile.keyCode.LEFT?this._left():e.which===$.mobile.keyCode.RIGHT?this._right():e.which===$.mobile.keyCode.SPACE&&(this._toggle(),e.preventDefault())},_setOptions:function(options){if(options.theme!==undefined){var currentTheme=options.theme?options.theme:"inherit",newTheme=options.theme?options.theme:"inherit";this.widget().removeClass("ui-bar-"+currentTheme).addClass("ui-bar-"+newTheme)}options.onText!==undefined&&this.on.text(options.onText),options.offText!==undefined&&this.off.text(options.offText),options.disabled!==undefined&&this.widget().toggleClass("ui-state-disabled",options.disabled),options.mini!==undefined&&this.widget().toggleClass("ui-mini",options.mini),options.corners!==undefined&&this.widget().toggleClass("ui-corner-all",options.corners),this._super(options)},_destroy:function(){this.options.enhanced||(null!=this._originalTabIndex?this.element.attr("tabindex",this._originalTabIndex):this.element.removeAttr("tabindex"),this.on.remove(),this.off.remove(),this.element.unwrap(),this.flipswitch.remove(),this.removeClass("ui-flipswitch-input"))}},$.mobile.behaviors.formReset))}(jQuery),function($,undefined){$.widget("mobile.rangeslider",$.extend({options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!0},_create:function(){var $el=this.element,elClass=this.options.mini?"ui-rangeslider ui-mini":"ui-rangeslider",_inputFirst=$el.find("input").first(),_inputLast=$el.find("input").last(),_label=$el.find("label").first(),_sliderWidgetFirst=$.data(_inputFirst.get(0),"mobile-slider")||$.data(_inputFirst.slider().get(0),"mobile-slider"),_sliderWidgetLast=$.data(_inputLast.get(0),"mobile-slider")||$.data(_inputLast.slider().get(0),"mobile-slider"),_sliderFirst=_sliderWidgetFirst.slider,_sliderLast=_sliderWidgetLast.slider,firstHandle=_sliderWidgetFirst.handle,_sliders=$("<div class='ui-rangeslider-sliders' />").appendTo($el);_inputFirst.addClass("ui-rangeslider-first"),_inputLast.addClass("ui-rangeslider-last"),$el.addClass(elClass),_sliderFirst.appendTo(_sliders),_sliderLast.appendTo(_sliders),_label.insertBefore($el),firstHandle.prependTo(_sliderLast),$.extend(this,{_inputFirst:_inputFirst,_inputLast:_inputLast,_sliderFirst:_sliderFirst,_sliderLast:_sliderLast,_label:_label,_targetVal:null,_sliderTarget:!1,_sliders:_sliders,_proxy:!1}),this.refresh(),this._on(this.element.find("input.ui-slider-input"),{slidebeforestart:"_slidebeforestart",slidestop:"_slidestop",slidedrag:"_slidedrag",slidebeforechange:"_change",blur:"_change",keyup:"_change"}),this._on({mousedown:"_change"}),this._on(this.element.closest("form"),{reset:"_handleReset"}),this._on(firstHandle,{vmousedown:"_dragFirstHandle"})},_handleReset:function(){var self=this;setTimeout(function(){self._updateHighlight()},0)},_dragFirstHandle:function(event){return $.data(this._inputFirst.get(0),"mobile-slider").dragging=!0,$.data(this._inputFirst.get(0),"mobile-slider").refresh(event),!1},_slidedrag:function(event){var first=$(event.target).is(this._inputFirst),otherSlider=first?this._inputLast:this._inputFirst;return this._sliderTarget=!1,"first"===this._proxy&&first||"last"===this._proxy&&!first?($.data(otherSlider.get(0),"mobile-slider").dragging=!0,$.data(otherSlider.get(0),"mobile-slider").refresh(event),!1):void 0},_slidestop:function(event){var first=$(event.target).is(this._inputFirst);this._proxy=!1,this.element.find("input").trigger("vmouseup"),this._sliderFirst.css("z-index",first?1:"")},_slidebeforestart:function(event){this._sliderTarget=!1,$(event.originalEvent.target).hasClass("ui-slider-track")&&(this._sliderTarget=!0,this._targetVal=$(event.target).val())},_setOptions:function(options){options.theme!==undefined&&this._setTheme(options.theme),options.trackTheme!==undefined&&this._setTrackTheme(options.trackTheme),options.mini!==undefined&&this._setMini(options.mini),options.highlight!==undefined&&this._setHighlight(options.highlight),this._super(options),this.refresh()},refresh:function(){var $el=this.element,o=this.options;(this._inputFirst.is(":disabled")||this._inputLast.is(":disabled"))&&(this.options.disabled=!0),$el.find("input").slider({theme:o.theme,trackTheme:o.trackTheme,disabled:o.disabled,corners:o.corners,mini:o.mini,highlight:o.highlight}).slider("refresh"),this._updateHighlight()},_change:function(event){if("keyup"===event.type)return this._updateHighlight(),!1;var self=this,min=parseFloat(this._inputFirst.val(),10),max=parseFloat(this._inputLast.val(),10),first=$(event.target).hasClass("ui-rangeslider-first"),thisSlider=first?this._inputFirst:this._inputLast,otherSlider=first?this._inputLast:this._inputFirst;if(this._inputFirst.val()>this._inputLast.val()&&"mousedown"===event.type&&!$(event.target).hasClass("ui-slider-handle"))thisSlider.blur();else if("mousedown"===event.type)return;return min>max&&!this._sliderTarget?(thisSlider.val(first?max:min).slider("refresh"),this._trigger("normalize")):min>max&&(thisSlider.val(this._targetVal).slider("refresh"),setTimeout(function(){otherSlider.val(first?min:max).slider("refresh"),$.data(otherSlider.get(0),"mobile-slider").handle.focus(),self._sliderFirst.css("z-index",first?"":1),self._trigger("normalize")},0),this._proxy=first?"first":"last"),min===max?($.data(thisSlider.get(0),"mobile-slider").handle.css("z-index",1),$.data(otherSlider.get(0),"mobile-slider").handle.css("z-index",0)):($.data(otherSlider.get(0),"mobile-slider").handle.css("z-index",""),$.data(thisSlider.get(0),"mobile-slider").handle.css("z-index","")),this._updateHighlight(),min>=max?!1:void 0},_updateHighlight:function(){var min=parseInt($.data(this._inputFirst.get(0),"mobile-slider").handle.get(0).style.left,10),max=parseInt($.data(this._inputLast.get(0),"mobile-slider").handle.get(0).style.left,10),width=max-min;this.element.find(".ui-slider-bg").css({"margin-left":min+"%",width:width+"%"})},_setTheme:function(value){this._inputFirst.slider("option","theme",value),this._inputLast.slider("option","theme",value)},_setTrackTheme:function(value){this._inputFirst.slider("option","trackTheme",value),this._inputLast.slider("option","trackTheme",value)},_setMini:function(value){this._inputFirst.slider("option","mini",value),this._inputLast.slider("option","mini",value),this.element.toggleClass("ui-mini",!!value)},_setHighlight:function(value){this._inputFirst.slider("option","highlight",value),this._inputLast.slider("option","highlight",value)},_destroy:function(){this._label.prependTo(this.element),this.element.removeClass("ui-rangeslider ui-mini"),this._inputFirst.after(this._sliderFirst),this._inputLast.after(this._sliderLast),this._sliders.remove(),this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy")}},$.mobile.behaviors.formReset))}(jQuery),function($,undefined){$.widget("mobile.textinput",$.mobile.textinput,{options:{clearBtn:!1,clearBtnText:"Clear text"},_create:function(){this._super(),(this.options.clearBtn||this.isSearch)&&this._addClearBtn()},clearButton:function(){return $("<a href='#' class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all' title='"+this.options.clearBtnText+"'>"+this.options.clearBtnText+"</a>")},_clearBtnClick:function(event){this.element.val("").focus().trigger("change"),this._clearBtn.addClass("ui-input-clear-hidden"),event.preventDefault()},_addClearBtn:function(){this.options.enhanced||this._enhanceClear(),$.extend(this,{_clearBtn:this.widget().find("a.ui-input-clear")}),this._bindClearEvents(),this._toggleClear()},_enhanceClear:function(){this.clearButton().appendTo(this.widget()),this.widget().addClass("ui-input-has-clear")},_bindClearEvents:function(){this._on(this._clearBtn,{click:"_clearBtnClick"}),this._on({keyup:"_toggleClear",change:"_toggleClear",input:"_toggleClear",focus:"_toggleClear",blur:"_toggleClear",cut:"_toggleClear",paste:"_toggleClear"})},_unbindClear:function(){this._off(this._clearBtn,"click"),this._off(this.element,"keyup change input focus blur cut paste")},_setOptions:function(options){this._super(options),options.clearBtn===undefined||this.element.is("textarea, :jqmData(type='range')")||(options.clearBtn?this._addClearBtn():this._destroyClear()),options.clearBtnText!==undefined&&this._clearBtn!==undefined&&this._clearBtn.text(options.clearBtnText).attr("title",options.clearBtnText)},_toggleClear:function(){this._delay("_toggleClearClass",0)},_toggleClearClass:function(){this._clearBtn.toggleClass("ui-input-clear-hidden",!this.element.val())},_destroyClear:function(){this.widget().removeClass("ui-input-has-clear"),this._unbindClear(),this._clearBtn.remove()},_destroy:function(){this._super(),this._destroyClear()}})}(jQuery),function($,undefined){$.widget("mobile.textinput",$.mobile.textinput,{options:{autogrow:!0,keyupTimeoutBuffer:100},_create:function(){this._super(),this.options.autogrow&&this.isTextarea&&this._autogrow()},_autogrow:function(){this.element.addClass("ui-textinput-autogrow"),this._on({keyup:"_timeout",change:"_timeout",input:"_timeout",paste:"_timeout"}),this._on(!0,this.document,{pageshow:"_handleShow",popupbeforeposition:"_handleShow",updatelayout:"_handleShow",panelopen:"_handleShow"})},_handleShow:function(event){$.contains(event.target,this.element[0])&&this.element.is(":visible")&&("popupbeforeposition"!==event.type&&this.element.addClass("ui-textinput-autogrow-resize").animationComplete($.proxy(function(){this.element.removeClass("ui-textinput-autogrow-resize")},this),"transition"),this._timeout())},_unbindAutogrow:function(){this.element.removeClass("ui-textinput-autogrow"),this._off(this.element,"keyup change input paste"),this._off(this.document,"pageshow popupbeforeposition updatelayout panelopen")},keyupTimeout:null,_prepareHeightUpdate:function(delay){this.keyupTimeout&&clearTimeout(this.keyupTimeout),delay===undefined?this._updateHeight():this.keyupTimeout=this._delay("_updateHeight",delay)},_timeout:function(){this._prepareHeightUpdate(this.options.keyupTimeoutBuffer)},_updateHeight:function(){var paddingTop,paddingBottom,paddingHeight,scrollHeight,clientHeight,borderTop,borderBottom,borderHeight,height,scrollTop=this.window.scrollTop();this.keyupTimeout=0,"onpage"in this.element[0]||this.element.css({height:0,"min-height":0,"max-height":0}),scrollHeight=this.element[0].scrollHeight,clientHeight=this.element[0].clientHeight,borderTop=parseFloat(this.element.css("border-top-width")),borderBottom=parseFloat(this.element.css("border-bottom-width")),borderHeight=borderTop+borderBottom,height=scrollHeight+borderHeight+15,0===clientHeight&&(paddingTop=parseFloat(this.element.css("padding-top")),paddingBottom=parseFloat(this.element.css("padding-bottom")),paddingHeight=paddingTop+paddingBottom,height+=paddingHeight),this.element.css({height:height,"min-height":"","max-height":""}),this.window.scrollTop(scrollTop)},refresh:function(){this.options.autogrow&&this.isTextarea&&this._updateHeight()},_setOptions:function(options){this._super(options),options.autogrow!==undefined&&this.isTextarea&&(options.autogrow?this._autogrow():this._unbindAutogrow())}})}(jQuery),function($){$.widget("mobile.selectmenu",$.extend({initSelector:"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",options:{theme:null,icon:"carat-d",iconpos:"right",inline:!1,corners:!0,shadow:!0,iconshadow:!1,overlayTheme:null,dividerTheme:null,hidePlaceholderMenuItems:!0,closeText:"Close",nativeMenu:!0,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,mini:!1},_button:function(){return $("<div/>")},_setDisabled:function(value){return this.element.attr("disabled",value),this.button.attr("aria-disabled",value),this._setOption("disabled",value)},_focusButton:function(){var self=this;setTimeout(function(){self.button.focus()},40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var inline=this.options.inline||this.element.jqmData("inline"),mini=this.options.mini||this.element.jqmData("mini"),classes="";~this.element[0].className.indexOf("ui-btn-left")&&(classes=" ui-btn-left"),~this.element[0].className.indexOf("ui-btn-right")&&(classes=" ui-btn-right"),inline&&(classes+=" ui-btn-inline"),mini&&(classes+=" ui-mini"),this.select=this.element.removeClass("ui-btn-left ui-btn-right").wrap("<div class='ui-select"+classes+"'>"),this.selectId=this.select.attr("id")||"select-"+this.uuid,this.buttonId=this.selectId+"-button",this.label=$("label[for='"+this.selectId+"']"),this.isMultiple=this.select[0].multiple},_destroy:function(){var wrapper=this.element.parents(".ui-select");wrapper.length>0&&(wrapper.is(".ui-btn-left, .ui-btn-right")&&this.element.addClass(wrapper.hasClass("ui-btn-left")?"ui-btn-left":"ui-btn-right"),this.element.insertAfter(wrapper),wrapper.remove())},_create:function(){this._preExtension(),this.button=this._button();var self=this,options=this.options,iconpos=options.icon?options.iconpos||this.select.jqmData("iconpos"):!1,button=this.button.insertBefore(this.select).attr("id",this.buttonId).addClass("ui-btn"+(options.icon?" ui-icon-"+options.icon+" ui-btn-icon-"+iconpos+(options.iconshadow?" ui-shadow-icon":""):"")+(options.theme?" ui-btn-"+options.theme:"")+(options.corners?" ui-corner-all":"")+(options.shadow?" ui-shadow":""));this.setButtonText(),options.nativeMenu&&window.opera&&window.opera.version&&button.addClass("ui-select-nativeonly"),this.isMultiple&&(this.buttonCount=$("<span>").addClass("ui-li-count ui-body-inherit").hide().appendTo(button.addClass("ui-li-has-count"))),(options.disabled||this.element.attr("disabled"))&&this.disable(),this.select.change(function(){self.refresh(),options.nativeMenu&&this.blur()}),this._handleFormReset(),this._on(this.button,{keydown:"_handleKeydown"}),this.build()},build:function(){var self=this;this.select.appendTo(self.button).bind("vmousedown",function(){self.button.addClass($.mobile.activeBtnClass)}).bind("focus",function(){self.button.addClass($.mobile.focusClass)}).bind("blur",function(){self.button.removeClass($.mobile.focusClass)}).bind("focus vmouseover",function(){self.button.trigger("vmouseover")}).bind("vmousemove",function(){self.button.removeClass($.mobile.activeBtnClass)}).bind("change blur vmouseout",function(){self.button.trigger("vmouseout").removeClass($.mobile.activeBtnClass)}),self.button.bind("vmousedown",function(){self.options.preventFocusZoom&&$.mobile.zoom.disable(!0)}),self.label.bind("click focus",function(){self.options.preventFocusZoom&&$.mobile.zoom.disable(!0)}),self.select.bind("focus",function(){self.options.preventFocusZoom&&$.mobile.zoom.disable(!0)}),self.button.bind("mouseup",function(){self.options.preventFocusZoom&&setTimeout(function(){$.mobile.zoom.enable(!0)},0)}),self.select.bind("blur",function(){self.options.preventFocusZoom&&$.mobile.zoom.enable(!0)})},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var self=this;return this.selected().map(function(){return self._selectOptions().index(this)}).get()},setButtonText:function(){var self=this,selected=this.selected(),text=this.placeholder,span=$(document.createElement("span"));this.button.children("span").not(".ui-li-count").remove().end().end().prepend(function(){return text=selected.length?selected.map(function(){return $(this).text()}).get().join(", "):self.placeholder,text?span.text(text):span.html("&#160;"),span.addClass(self.select.attr("class")).addClass(selected.attr("class")).removeClass("ui-screen-hidden")}())},setButtonCount:function(){var selected=this.selected();this.isMultiple&&this.buttonCount[selected.length>1?"show":"hide"]().text(selected.length)},_handleKeydown:function(){this._delay("_refreshButton")},_reset:function(){this.refresh()},_refreshButton:function(){this.setButtonText(),this.setButtonCount()},refresh:function(){this._refreshButton()},open:$.noop,close:$.noop,disable:function(){this._setDisabled(!0),this.button.addClass("ui-state-disabled")},enable:function(){this._setDisabled(!1),this.button.removeClass("ui-state-disabled")}},$.mobile.behaviors.formReset))}(jQuery),function($){$.mobile.links=function(target){$(target).find("a").jqmEnhanceable().filter(":jqmData(rel='popup')[href][href!='']").each(function(){var element=this,idref=element.getAttribute("href").substring(1);idref&&(element.setAttribute("aria-haspopup",!0),element.setAttribute("aria-owns",idref),element.setAttribute("aria-expanded",!1))}).end().not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")}}(jQuery),function($,undefined){function fitSegmentInsideSegment(windowSize,segmentSize,offset,desired){var returnValue=desired;return returnValue=segmentSize>windowSize?offset+(windowSize-segmentSize)/2:Math.min(Math.max(offset,desired-segmentSize/2),offset+windowSize-segmentSize)}function getWindowCoordinates(theWindow){return{x:theWindow.scrollLeft(),y:theWindow.scrollTop(),cx:theWindow[0].innerWidth||theWindow.width(),cy:theWindow[0].innerHeight||theWindow.height()}}$.widget("mobile.popup",{options:{wrapperClass:null,theme:null,overlayTheme:null,shadow:!0,corners:!0,transition:"none",positionTo:"origin",tolerance:null,closeLinkSelector:"a:jqmData(rel='back')",closeLinkEvents:"click.popup",navigateEvents:"navigate.popup",closeEvents:"navigate.popup pagebeforechange.popup",dismissible:!0,enhanced:!1,history:!$.mobile.browser.oldIE},_create:function(){var theElement=this.element,myId=theElement.attr("id"),currentOptions=this.options;currentOptions.history=currentOptions.history&&$.mobile.ajaxEnabled&&$.mobile.hashListeningEnabled,$.extend(this,{_scrollTop:0,_page:theElement.closest(".ui-page"),_ui:null,_fallbackTransition:"",_currentTransition:!1,_prerequisites:null,_isOpen:!1,_tolerance:null,_resizeData:null,_ignoreResizeTo:0,_orientationchangeInProgress:!1}),0===this._page.length&&(this._page=$("body")),currentOptions.enhanced?this._ui={container:theElement.parent(),screen:theElement.parent().prev(),placeholder:$(this.document[0].getElementById(myId+"-placeholder"))}:(this._ui=this._enhance(theElement,myId),this._applyTransition(currentOptions.transition)),this._setTolerance(currentOptions.tolerance)._ui.focusElement=this._ui.container,this._on(this._ui.screen,{vclick:"_eatEventAndClose"}),this._on(this.window,{orientationchange:$.proxy(this,"_handleWindowOrientationchange"),resize:$.proxy(this,"_handleWindowResize"),keyup:$.proxy(this,"_handleWindowKeyUp")}),this._on(this.document,{focusin:"_handleDocumentFocusIn"})},_enhance:function(theElement,myId){var currentOptions=this.options,wrapperClass=currentOptions.wrapperClass,ui={screen:$("<div class='ui-screen-hidden ui-popup-screen "+this._themeClassFromOption("ui-overlay-",currentOptions.overlayTheme)+"'></div>"),placeholder:$("<div style='display: none;'><!-- placeholder --></div>"),container:$("<div class='ui-popup-container ui-popup-hidden ui-popup-truncate"+(wrapperClass?" "+wrapperClass:"")+"'></div>")},fragment=this.document[0].createDocumentFragment();return fragment.appendChild(ui.screen[0]),fragment.appendChild(ui.container[0]),myId&&(ui.screen.attr("id",myId+"-screen"),ui.container.attr("id",myId+"-popup"),ui.placeholder.attr("id",myId+"-placeholder").html("<!-- placeholder for "+myId+" -->")),this._page[0].appendChild(fragment),ui.placeholder.insertAfter(theElement),theElement.detach().addClass("ui-popup "+this._themeClassFromOption("ui-body-",currentOptions.theme)+" "+(currentOptions.shadow?"ui-overlay-shadow ":"")+(currentOptions.corners?"ui-corner-all ":"")).appendTo(ui.container),ui},_eatEventAndClose:function(theEvent){return theEvent.preventDefault(),theEvent.stopImmediatePropagation(),this.options.dismissible&&this.close(),!1},_resizeScreen:function(){var screen=this._ui.screen,popupHeight=this._ui.container.outerHeight(!0),screenHeight=screen.removeAttr("style").height(),documentHeight=this.document.height()-1;documentHeight>screenHeight?screen.height(documentHeight):popupHeight>screenHeight&&screen.height(popupHeight)},_handleWindowKeyUp:function(theEvent){return this._isOpen&&theEvent.keyCode===$.mobile.keyCode.ESCAPE?this._eatEventAndClose(theEvent):void 0},_expectResizeEvent:function(){var windowCoordinates=getWindowCoordinates(this.window);if(this._resizeData){if(windowCoordinates.x===this._resizeData.windowCoordinates.x&&windowCoordinates.y===this._resizeData.windowCoordinates.y&&windowCoordinates.cx===this._resizeData.windowCoordinates.cx&&windowCoordinates.cy===this._resizeData.windowCoordinates.cy)return!1;clearTimeout(this._resizeData.timeoutId)}return this._resizeData={timeoutId:this._delay("_resizeTimeout",200),windowCoordinates:windowCoordinates},!0},_resizeTimeout:function(){this._isOpen?this._expectResizeEvent()||(this._ui.container.hasClass("ui-popup-hidden")&&(this._ui.container.removeClass("ui-popup-hidden ui-popup-truncate"),this.reposition({positionTo:"window"}),this._ignoreResizeEvents()),this._resizeScreen(),this._resizeData=null,this._orientationchangeInProgress=!1):(this._resizeData=null,this._orientationchangeInProgress=!1)},_stopIgnoringResizeEvents:function(){this._ignoreResizeTo=0},_ignoreResizeEvents:function(){this._ignoreResizeTo&&clearTimeout(this._ignoreResizeTo),this._ignoreResizeTo=this._delay("_stopIgnoringResizeEvents",1e3)},_handleWindowResize:function(){this._isOpen&&0===this._ignoreResizeTo&&(!this._expectResizeEvent()&&!this._orientationchangeInProgress||this._ui.container.hasClass("ui-popup-hidden")||this._ui.container.addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style"))},_handleWindowOrientationchange:function(){!this._orientationchangeInProgress&&this._isOpen&&0===this._ignoreResizeTo&&(this._expectResizeEvent(),this._orientationchangeInProgress=!0)},_handleDocumentFocusIn:function(theEvent){var target,targetElement=theEvent.target,ui=this._ui;if(this._isOpen){if(targetElement!==ui.container[0]){if(target=$(targetElement),0===target.parents().filter(ui.container[0]).length)return $(this.document[0].activeElement).one("focus",function(){target.blur()}),ui.focusElement.focus(),theEvent.preventDefault(),theEvent.stopImmediatePropagation(),!1;ui.focusElement[0]===ui.container[0]&&(ui.focusElement=target)}this._ignoreResizeEvents()}},_themeClassFromOption:function(prefix,value){return value?"none"===value?"":prefix+value:prefix+"inherit"},_applyTransition:function(value){return value&&(this._ui.container.removeClass(this._fallbackTransition),"none"!==value&&(this._fallbackTransition=$.mobile._maybeDegradeTransition(value),"none"===this._fallbackTransition&&(this._fallbackTransition=""),this._ui.container.addClass(this._fallbackTransition))),this},_setOptions:function(newOptions){var currentOptions=this.options,theElement=this.element,screen=this._ui.screen;return newOptions.wrapperClass!==undefined&&this._ui.container.removeClass(currentOptions.wrapperClass).addClass(newOptions.wrapperClass),newOptions.theme!==undefined&&theElement.removeClass(this._themeClassFromOption("ui-body-",currentOptions.theme)).addClass(this._themeClassFromOption("ui-body-",newOptions.theme)),newOptions.overlayTheme!==undefined&&(screen.removeClass(this._themeClassFromOption("ui-overlay-",currentOptions.overlayTheme)).addClass(this._themeClassFromOption("ui-overlay-",newOptions.overlayTheme)),this._isOpen&&screen.addClass("in")),newOptions.shadow!==undefined&&theElement.toggleClass("ui-overlay-shadow",newOptions.shadow),newOptions.corners!==undefined&&theElement.toggleClass("ui-corner-all",newOptions.corners),newOptions.transition!==undefined&&(this._currentTransition||this._applyTransition(newOptions.transition)),newOptions.tolerance!==undefined&&this._setTolerance(newOptions.tolerance),newOptions.disabled!==undefined&&newOptions.disabled&&this.close(),this._super(newOptions)},_setTolerance:function(value){var ar,tol={t:30,r:15,b:30,l:15};if(value!==undefined)switch(ar=String(value).split(","),$.each(ar,function(idx,val){ar[idx]=parseInt(val,10)}),ar.length){case 1:isNaN(ar[0])||(tol.t=tol.r=tol.b=tol.l=ar[0]);break;case 2:isNaN(ar[0])||(tol.t=tol.b=ar[0]),isNaN(ar[1])||(tol.l=tol.r=ar[1]);break;case 4:isNaN(ar[0])||(tol.t=ar[0]),isNaN(ar[1])||(tol.r=ar[1]),isNaN(ar[2])||(tol.b=ar[2]),isNaN(ar[3])||(tol.l=ar[3])}return this._tolerance=tol,this},_clampPopupWidth:function(infoOnly){var menuSize,windowCoordinates=getWindowCoordinates(this.window),rectangle={x:this._tolerance.l,y:windowCoordinates.y+this._tolerance.t,cx:windowCoordinates.cx-this._tolerance.l-this._tolerance.r,cy:windowCoordinates.cy-this._tolerance.t-this._tolerance.b};return infoOnly||this._ui.container.css("max-width",rectangle.cx),menuSize={cx:this._ui.container.outerWidth(!0),cy:this._ui.container.outerHeight(!0)},{rc:rectangle,menuSize:menuSize}
},_calculateFinalLocation:function(desired,clampInfo){var returnValue,rectangle=clampInfo.rc,menuSize=clampInfo.menuSize;return returnValue={left:fitSegmentInsideSegment(rectangle.cx,menuSize.cx,rectangle.x,desired.x),top:fitSegmentInsideSegment(rectangle.cy,menuSize.cy,rectangle.y,desired.y)},returnValue.top=Math.max(0,returnValue.top),returnValue.top-=Math.min(returnValue.top,Math.max(0,returnValue.top+menuSize.cy-this.document.height())),returnValue},_placementCoords:function(desired){return this._calculateFinalLocation(desired,this._clampPopupWidth())},_createPrerequisites:function(screenPrerequisite,containerPrerequisite,whenDone){var prerequisites,self=this;prerequisites={screen:$.Deferred(),container:$.Deferred()},prerequisites.screen.then(function(){prerequisites===self._prerequisites&&screenPrerequisite()}),prerequisites.container.then(function(){prerequisites===self._prerequisites&&containerPrerequisite()}),$.when(prerequisites.screen,prerequisites.container).done(function(){prerequisites===self._prerequisites&&(self._prerequisites=null,whenDone())}),self._prerequisites=prerequisites},_animate:function(args){return this._ui.screen.removeClass(args.classToRemove).addClass(args.screenClassToAdd),args.prerequisites.screen.resolve(),args.transition&&"none"!==args.transition&&(args.applyTransition&&this._applyTransition(args.transition),this._fallbackTransition)?void this._ui.container.addClass(args.containerClassToAdd).removeClass(args.classToRemove).animationComplete($.proxy(args.prerequisites.container,"resolve")):(this._ui.container.removeClass(args.classToRemove),void args.prerequisites.container.resolve())},_desiredCoords:function(openOptions){var offset,dst=null,windowCoordinates=getWindowCoordinates(this.window),x=openOptions.x,y=openOptions.y,pTo=openOptions.positionTo;if(pTo&&"origin"!==pTo)if("window"===pTo)x=windowCoordinates.cx/2+windowCoordinates.x,y=windowCoordinates.cy/2+windowCoordinates.y;else{try{dst=$(pTo)}catch(err){dst=null}dst&&(dst.filter(":visible"),0===dst.length&&(dst=null))}return dst&&(offset=dst.offset(),x=offset.left+dst.outerWidth()/2,y=offset.top+dst.outerHeight()/2),("number"!==$.type(x)||isNaN(x))&&(x=windowCoordinates.cx/2+windowCoordinates.x),("number"!==$.type(y)||isNaN(y))&&(y=windowCoordinates.cy/2+windowCoordinates.y),{x:x,y:y}},_reposition:function(openOptions){openOptions={x:openOptions.x,y:openOptions.y,positionTo:openOptions.positionTo},this._trigger("beforeposition",undefined,openOptions),this._ui.container.offset(this._placementCoords(this._desiredCoords(openOptions)))},reposition:function(openOptions){this._isOpen&&this._reposition(openOptions)},_openPrerequisitesComplete:function(){var id=this.element.attr("id");this._ui.container.addClass("ui-popup-active"),this._isOpen=!0,this._resizeScreen(),this._ui.container.attr("tabindex","0").focus(),this._ignoreResizeEvents(),id&&this.document.find("[aria-haspopup='true'][aria-owns='"+id+"']").attr("aria-expanded",!0),this._trigger("afteropen")},_open:function(options){var openOptions=$.extend({},this.options,options),androidBlacklist=function(){var ua=navigator.userAgent,wkmatch=ua.match(/AppleWebKit\/([0-9\.]+)/),wkversion=!!wkmatch&&wkmatch[1],androidmatch=ua.match(/Android (\d+(?:\.\d+))/),andversion=!!androidmatch&&androidmatch[1],chromematch=ua.indexOf("Chrome")>-1;return null!==androidmatch&&"4.0"===andversion&&wkversion&&wkversion>534.13&&!chromematch?!0:!1}();this._createPrerequisites($.noop,$.noop,$.proxy(this,"_openPrerequisitesComplete")),this._currentTransition=openOptions.transition,this._applyTransition(openOptions.transition),this._ui.screen.removeClass("ui-screen-hidden"),this._ui.container.removeClass("ui-popup-truncate"),this._reposition(openOptions),this._ui.container.removeClass("ui-popup-hidden"),this.options.overlayTheme&&androidBlacklist&&this.element.closest(".ui-page").addClass("ui-popup-open"),this._animate({additionalCondition:!0,transition:openOptions.transition,classToRemove:"",screenClassToAdd:"in",containerClassToAdd:"in",applyTransition:!1,prerequisites:this._prerequisites})},_closePrerequisiteScreen:function(){this._ui.screen.removeClass("out").addClass("ui-screen-hidden")},_closePrerequisiteContainer:function(){this._ui.container.removeClass("reverse out").addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style")},_closePrerequisitesDone:function(){var container=this._ui.container,id=this.element.attr("id");container.removeAttr("tabindex"),$.mobile.popup.active=undefined,$(":focus",container[0]).add(container[0]).blur(),id&&this.document.find("[aria-haspopup='true'][aria-owns='"+id+"']").attr("aria-expanded",!1),this._trigger("afterclose")},_close:function(immediate){this._ui.container.removeClass("ui-popup-active"),this._page.removeClass("ui-popup-open"),this._isOpen=!1,this._createPrerequisites($.proxy(this,"_closePrerequisiteScreen"),$.proxy(this,"_closePrerequisiteContainer"),$.proxy(this,"_closePrerequisitesDone")),this._animate({additionalCondition:this._ui.screen.hasClass("in"),transition:immediate?"none":this._currentTransition,classToRemove:"in",screenClassToAdd:"out",containerClassToAdd:"reverse out",applyTransition:!0,prerequisites:this._prerequisites})},_unenhance:function(){this.options.enhanced||(this._setOptions({theme:$.mobile.popup.prototype.options.theme}),this.element.detach().insertAfter(this._ui.placeholder).removeClass("ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit"),this._ui.screen.remove(),this._ui.container.remove(),this._ui.placeholder.remove())},_destroy:function(){return $.mobile.popup.active===this?(this.element.one("popupafterclose",$.proxy(this,"_unenhance")),this.close()):this._unenhance(),this},_closePopup:function(theEvent,data){var parsedDst,toUrl,currentOptions=this.options,immediate=!1;theEvent&&theEvent.isDefaultPrevented()||$.mobile.popup.active!==this||(window.scrollTo(0,this._scrollTop),theEvent&&"pagebeforechange"===theEvent.type&&data&&(parsedDst="string"==typeof data.toPage?data.toPage:data.toPage.jqmData("url"),parsedDst=$.mobile.path.parseUrl(parsedDst),toUrl=parsedDst.pathname+parsedDst.search+parsedDst.hash,this._myUrl!==$.mobile.path.makeUrlAbsolute(toUrl)?immediate=!0:theEvent.preventDefault()),this.window.off(currentOptions.closeEvents),this.element.undelegate(currentOptions.closeLinkSelector,currentOptions.closeLinkEvents),this._close(immediate))},_bindContainerClose:function(){this.window.on(this.options.closeEvents,$.proxy(this,"_closePopup"))},widget:function(){return this._ui.container},open:function(options){var url,hashkey,activePage,currentIsDialog,hasHash,urlHistory,self=this,currentOptions=this.options;return $.mobile.popup.active||currentOptions.disabled?this:($.mobile.popup.active=this,this._scrollTop=this.window.scrollTop(),currentOptions.history?(urlHistory=$.mobile.navigate.history,hashkey=$.mobile.dialogHashKey,activePage=$.mobile.activePage,currentIsDialog=activePage?activePage.hasClass("ui-dialog"):!1,this._myUrl=url=urlHistory.getActive().url,(hasHash=url.indexOf(hashkey)>-1&&!currentIsDialog&&urlHistory.activeIndex>0)?(self._open(options),self._bindContainerClose(),this):(-1!==url.indexOf(hashkey)||currentIsDialog?url=$.mobile.path.parseLocation().hash+hashkey:url+=url.indexOf("#")>-1?hashkey:"#"+hashkey,0===urlHistory.activeIndex&&url===urlHistory.initialDst&&(url+=hashkey),this.window.one("beforenavigate",function(theEvent){theEvent.preventDefault(),self._open(options),self._bindContainerClose()}),this.urlAltered=!0,$.mobile.navigate(url,{role:"dialog"}),this)):(self._open(options),self._bindContainerClose(),self.element.delegate(currentOptions.closeLinkSelector,currentOptions.closeLinkEvents,function(theEvent){self.close(),theEvent.preventDefault()}),this))},close:function(){return $.mobile.popup.active!==this?this:(this._scrollTop=this.window.scrollTop(),this.options.history&&this.urlAltered?($.mobile.back(),this.urlAltered=!1):this._closePopup(),this)}}),$.mobile.popup.handleLink=function($link){var offset,path=$.mobile.path,popup=$(path.hashToSelector(path.parseUrl($link.attr("href")).hash)).first();popup.length>0&&popup.data("mobile-popup")&&(offset=$link.offset(),popup.popup("open",{x:offset.left+$link.outerWidth()/2,y:offset.top+$link.outerHeight()/2,transition:$link.jqmData("transition"),positionTo:$link.jqmData("position-to")})),setTimeout(function(){$link.removeClass($.mobile.activeBtnClass)},300)},$.mobile.document.on("pagebeforechange",function(theEvent,data){"popup"===data.options.role&&($.mobile.popup.handleLink(data.options.link),theEvent.preventDefault())})}(jQuery),function($,undefined){var unfocusableItemSelector=".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",goToAdjacentItem=function(item,target,direction){var adjacent=item[direction+"All"]().not(unfocusableItemSelector).first();adjacent.length&&(target.blur().attr("tabindex","-1"),adjacent.find("a").first().focus())};$.widget("mobile.selectmenu",$.mobile.selectmenu,{_create:function(){var o=this.options;return o.nativeMenu=o.nativeMenu||this.element.parents(":jqmData(role='popup'),:mobile-popup").length>0,this._super()},_handleSelectFocus:function(){this.element.blur(),this.button.focus()},_handleKeydown:function(event){this._super(event),this._handleButtonVclickKeydown(event)},_handleButtonVclickKeydown:function(event){this.options.disabled||this.isOpen||("vclick"===event.type||event.keyCode&&(event.keyCode===$.mobile.keyCode.ENTER||event.keyCode===$.mobile.keyCode.SPACE))&&(this._decideFormat(),"overlay"===this.menuType?this.button.attr("href","#"+this.popupId).attr("data-"+($.mobile.ns||"")+"rel","popup"):this.button.attr("href","#"+this.dialogId).attr("data-"+($.mobile.ns||"")+"rel","dialog"),this.isOpen=!0)},_handleListFocus:function(e){var params="focusin"===e.type?{tabindex:"0",event:"vmouseover"}:{tabindex:"-1",event:"vmouseout"};$(e.target).attr("tabindex",params.tabindex).trigger(params.event)},_handleListKeydown:function(event){var target=$(event.target),li=target.closest("li");switch(event.keyCode){case 38:return goToAdjacentItem(li,target,"prev"),!1;case 40:return goToAdjacentItem(li,target,"next"),!1;case 13:case 32:return target.trigger("click"),!1}},_handleMenuPageHide:function(){this.thisPage.page("bindRemove")},_handleHeaderCloseClick:function(){return"overlay"===this.menuType?(this.close(),!1):void 0},build:function(){var selectId,popupId,dialogId,label,thisPage,isMultiple,menuId,themeAttr,overlayTheme,overlayThemeAttr,dividerThemeAttr,menuPage,listbox,list,header,headerTitle,menuPageContent,menuPageClose,headerClose,self,o=this.options;return o.nativeMenu?this._super():(self=this,selectId=this.selectId,popupId=selectId+"-listbox",dialogId=selectId+"-dialog",label=this.label,thisPage=this.element.closest(".ui-page"),isMultiple=this.element[0].multiple,menuId=selectId+"-menu",themeAttr=o.theme?" data-"+$.mobile.ns+"theme='"+o.theme+"'":"",overlayTheme=o.overlayTheme||o.theme||null,overlayThemeAttr=overlayTheme?" data-"+$.mobile.ns+"overlay-theme='"+overlayTheme+"'":"",dividerThemeAttr=o.dividerTheme&&isMultiple?" data-"+$.mobile.ns+"divider-theme='"+o.dividerTheme+"'":"",menuPage=$("<div data-"+$.mobile.ns+"role='dialog' class='ui-selectmenu' id='"+dialogId+"'"+themeAttr+overlayThemeAttr+"><div data-"+$.mobile.ns+"role='header'><div class='ui-title'>"+label.getEncodedText()+"</div></div><div data-"+$.mobile.ns+"role='content'></div></div>"),listbox=$("<div id='"+popupId+"' class='ui-selectmenu'></div>").insertAfter(this.select).popup({theme:o.overlayTheme}),list=$("<ul class='ui-selectmenu-list' id='"+menuId+"' role='listbox' aria-labelledby='"+this.buttonId+"'"+themeAttr+dividerThemeAttr+"></ul>").appendTo(listbox),header=$("<div class='ui-header ui-bar-"+(o.theme?o.theme:"inherit")+"'></div>").prependTo(listbox),headerTitle=$("<h1 class='ui-title'></h1>").appendTo(header),this.isMultiple&&(headerClose=$("<a>",{role:"button",text:o.closeText,href:"#","class":"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"}).appendTo(header)),$.extend(this,{selectId:selectId,menuId:menuId,popupId:popupId,dialogId:dialogId,thisPage:thisPage,menuPage:menuPage,label:label,isMultiple:isMultiple,theme:o.theme,listbox:listbox,list:list,header:header,headerTitle:headerTitle,headerClose:headerClose,menuPageContent:menuPageContent,menuPageClose:menuPageClose,placeholder:""}),this.refresh(),this._origTabIndex===undefined&&(this._origTabIndex=null===this.select[0].getAttribute("tabindex")?!1:this.select.attr("tabindex")),this.select.attr("tabindex","-1"),this._on(this.select,{focus:"_handleSelectFocus"}),this._on(this.button,{vclick:"_handleButtonVclickKeydown"}),this.list.attr("role","listbox"),this._on(this.list,{focusin:"_handleListFocus",focusout:"_handleListFocus",keydown:"_handleListKeydown"}),this.list.delegate("li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)","click",function(event){var oldIndex=self.select[0].selectedIndex,newIndex=$.mobile.getAttribute(this,"option-index"),option=self._selectOptions().eq(newIndex)[0];option.selected=self.isMultiple?!option.selected:!0,self.isMultiple&&$(this).find("a").toggleClass("ui-checkbox-on",option.selected).toggleClass("ui-checkbox-off",!option.selected),(self.isMultiple||oldIndex!==newIndex)&&self.select.trigger("change"),self.isMultiple?self.list.find("li:not(.ui-li-divider)").eq(newIndex).find("a").first().focus():self.close(),event.preventDefault()}),this._on(this.menuPage,{pagehide:"_handleMenuPageHide"}),this._on(this.listbox,{popupafterclose:"close"}),this.isMultiple&&this._on(this.headerClose,{click:"_handleHeaderCloseClick"}),this)},_isRebuildRequired:function(){var list=this.list.find("li"),options=this._selectOptions().not(".ui-screen-hidden");return options.text()!==list.text()},selected:function(){return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )")},refresh:function(force){var self,indices;return this.options.nativeMenu?this._super(force):(self=this,(force||this._isRebuildRequired())&&self._buildList(),indices=this.selectedIndices(),self.setButtonText(),self.setButtonCount(),void self.list.find("li:not(.ui-li-divider)").find("a").removeClass($.mobile.activeBtnClass).end().attr("aria-selected",!1).each(function(i){if($.inArray(i,indices)>-1){var item=$(this);item.attr("aria-selected",!0),self.isMultiple?item.find("a").removeClass("ui-checkbox-off").addClass("ui-checkbox-on"):item.hasClass("ui-screen-hidden")?item.next().find("a").addClass($.mobile.activeBtnClass):item.find("a").addClass($.mobile.activeBtnClass)}}))},close:function(){if(!this.options.disabled&&this.isOpen){var self=this;"page"===self.menuType?(self.menuPage.dialog("close"),self.list.appendTo(self.listbox)):self.listbox.popup("close"),self._focusButton(),self.isOpen=!1}},open:function(){this.button.click()},_focusMenuItem:function(){var selector=this.list.find("a."+$.mobile.activeBtnClass);0===selector.length&&(selector=this.list.find("li:not("+unfocusableItemSelector+") a.ui-btn")),selector.first().focus()},_decideFormat:function(){var self=this,$window=this.window,selfListParent=self.list.parent(),menuHeight=selfListParent.outerHeight(),scrollTop=$window.scrollTop(),btnOffset=self.button.offset().top,screenHeight=$window.height();menuHeight>screenHeight-80||!$.support.scrollTop?(self.menuPage.appendTo($.mobile.pageContainer).page(),self.menuPageContent=self.menuPage.find(".ui-content"),self.menuPageClose=self.menuPage.find(".ui-header a"),self.thisPage.unbind("pagehide.remove"),0===scrollTop&&btnOffset>screenHeight&&self.thisPage.one("pagehide",function(){$(this).jqmData("lastScroll",btnOffset)}),self.menuPage.one({pageshow:$.proxy(this,"_focusMenuItem"),pagehide:$.proxy(this,"close")}),self.menuType="page",self.menuPageContent.append(self.list),self.menuPage.find("div .ui-title").text(self.label.text())):(self.menuType="overlay",self.listbox.one({popupafteropen:$.proxy(this,"_focusMenuItem")}))},_buildList:function(){var $options,numOptions,select,optGroup,i,option,$option,parent,text,anchor,classes,optLabel,divider,item,self=this,o=this.options,placeholder=this.placeholder,needPlaceholder=!0,dataIcon="false",dataPrefix="data-"+$.mobile.ns,dataIndexAttr=dataPrefix+"option-index",dataIconAttr=dataPrefix+"icon",dataRoleAttr=dataPrefix+"role",dataPlaceholderAttr=dataPrefix+"placeholder",fragment=document.createDocumentFragment(),isPlaceholderItem=!1;for(self.list.empty().filter(".ui-listview").listview("destroy"),$options=this._selectOptions(),numOptions=$options.length,select=this.select[0],i=0;numOptions>i;i++,isPlaceholderItem=!1)option=$options[i],$option=$(option),$option.hasClass("ui-screen-hidden")||(parent=option.parentNode,text=$option.text(),anchor=document.createElement("a"),classes=[],anchor.setAttribute("href","#"),anchor.appendChild(document.createTextNode(text)),parent!==select&&"optgroup"===parent.nodeName.toLowerCase()&&(optLabel=parent.getAttribute("label"),optLabel!==optGroup&&(divider=document.createElement("li"),divider.setAttribute(dataRoleAttr,"list-divider"),divider.setAttribute("role","option"),divider.setAttribute("tabindex","-1"),divider.appendChild(document.createTextNode(optLabel)),fragment.appendChild(divider),optGroup=optLabel)),!needPlaceholder||option.getAttribute("value")&&0!==text.length&&!$option.jqmData("placeholder")||(needPlaceholder=!1,isPlaceholderItem=!0,null===option.getAttribute(dataPlaceholderAttr)&&(this._removePlaceholderAttr=!0),option.setAttribute(dataPlaceholderAttr,!0),o.hidePlaceholderMenuItems&&classes.push("ui-screen-hidden"),placeholder!==text&&(placeholder=self.placeholder=text)),item=document.createElement("li"),option.disabled&&(classes.push("ui-state-disabled"),item.setAttribute("aria-disabled",!0)),item.setAttribute(dataIndexAttr,i),item.setAttribute(dataIconAttr,dataIcon),isPlaceholderItem&&item.setAttribute(dataPlaceholderAttr,!0),item.className=classes.join(" "),item.setAttribute("role","option"),anchor.setAttribute("tabindex","-1"),this.isMultiple&&$(anchor).addClass("ui-btn ui-checkbox-off ui-btn-icon-right"),item.appendChild(anchor),fragment.appendChild(item));self.list[0].appendChild(fragment),this.isMultiple||placeholder.length?this.headerTitle.text(this.placeholder):this.header.addClass("ui-screen-hidden"),self.list.listview()},_button:function(){return this.options.nativeMenu?this._super():$("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})},_destroy:function(){this.options.nativeMenu||(this.close(),this._origTabIndex!==undefined&&(this._origTabIndex!==!1?this.select.attr("tabindex",this._origTabIndex):this.select.removeAttr("tabindex")),this._removePlaceholderAttr&&this._selectOptions().removeAttr("data-"+$.mobile.ns+"placeholder"),this.listbox.remove(),this.menuPage.remove()),this._super()}})}(jQuery),function($,undefined){function optionsToClasses(options,existingClasses){var classes=existingClasses?existingClasses:[];return classes.push("ui-btn"),options.theme&&classes.push("ui-btn-"+options.theme),options.icon&&(classes=classes.concat(["ui-icon-"+options.icon,"ui-btn-icon-"+options.iconpos]),options.iconshadow&&classes.push("ui-shadow-icon")),options.inline&&classes.push("ui-btn-inline"),options.shadow&&classes.push("ui-shadow"),options.corners&&classes.push("ui-corner-all"),options.mini&&classes.push("ui-mini"),classes}function classNameToOptions(classes){var idx,map,unknownClass,alreadyEnhanced=!1,noIcon=!0,o={icon:"",inline:!1,shadow:!1,corners:!1,iconshadow:!1,mini:!1},unknownClasses=[];for(classes=classes.split(" "),idx=0;idx<classes.length;idx++)unknownClass=!0,map=reverseBoolOptionMap[classes[idx]],map!==undefined?(unknownClass=!1,o[map]=!0):0===classes[idx].indexOf("ui-btn-icon-")?(unknownClass=!1,noIcon=!1,o.iconpos=classes[idx].substring(12)):0===classes[idx].indexOf("ui-icon-")?(unknownClass=!1,o.icon=classes[idx].substring(8)):0===classes[idx].indexOf("ui-btn-")&&8===classes[idx].length?(unknownClass=!1,o.theme=classes[idx].substring(7)):"ui-btn"===classes[idx]&&(unknownClass=!1,alreadyEnhanced=!0),unknownClass&&unknownClasses.push(classes[idx]);return noIcon&&(o.icon=""),{options:o,unknownClasses:unknownClasses,alreadyEnhanced:alreadyEnhanced}}function camelCase2Hyphenated(c){return"-"+c.toLowerCase()}var reverseBoolOptionMap={"ui-shadow":"shadow","ui-corner-all":"corners","ui-btn-inline":"inline","ui-shadow-icon":"iconshadow","ui-mini":"mini"},getAttrFixed=function(){var ret=$.mobile.getAttribute.apply(this,arguments);return null==ret?undefined:ret},capitalLettersRE=/[A-Z]/g;$.fn.buttonMarkup=function(options,overwriteClasses){var idx,data,el,retrievedOptions,optionKey,defaults=$.fn.buttonMarkup.defaults;for(idx=0;idx<this.length;idx++){if(el=this[idx],data=overwriteClasses?{alreadyEnhanced:!1,unknownClasses:[]}:classNameToOptions(el.className),retrievedOptions=$.extend({},data.alreadyEnhanced?data.options:{},options),!data.alreadyEnhanced)for(optionKey in defaults)retrievedOptions[optionKey]===undefined&&(retrievedOptions[optionKey]=getAttrFixed(el,optionKey.replace(capitalLettersRE,camelCase2Hyphenated)));el.className=optionsToClasses($.extend({},defaults,retrievedOptions),data.unknownClasses).join(" "),"button"!==el.tagName.toLowerCase()&&el.setAttribute("role","button")}return this},$.fn.buttonMarkup.defaults={icon:"",iconpos:"left",theme:null,inline:!1,shadow:!0,corners:!0,iconshadow:!1,mini:!1},$.extend($.fn.buttonMarkup,{initSelector:"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button"})}(jQuery),function($,undefined){$.widget("mobile.controlgroup",$.extend({options:{enhanced:!1,theme:null,shadow:!1,corners:!0,excludeInvisible:!0,type:"vertical",mini:!1},_create:function(){var elem=this.element,opts=this.options;$.fn.buttonMarkup&&this.element.find($.fn.buttonMarkup.initSelector).buttonMarkup(),$.each(this._childWidgets,$.proxy(function(number,widgetName){$.mobile[widgetName]&&this.element.find($.mobile[widgetName].initSelector).not($.mobile.page.prototype.keepNativeSelector())[widgetName]()},this)),$.extend(this,{_ui:null,_initialRefresh:!0}),this._ui=opts.enhanced?{groupLegend:elem.children(".ui-controlgroup-label").children(),childWrapper:elem.children(".ui-controlgroup-controls")}:this._enhance()},_childWidgets:["checkboxradio","selectmenu","button"],_themeClassFromOption:function(value){return value?"none"===value?"":"ui-group-theme-"+value:""},_enhance:function(){var elem=this.element,opts=this.options,ui={groupLegend:elem.children("legend"),childWrapper:elem.addClass("ui-controlgroup ui-controlgroup-"+("horizontal"===opts.type?"horizontal":"vertical")+" "+this._themeClassFromOption(opts.theme)+" "+(opts.corners?"ui-corner-all ":"")+(opts.mini?"ui-mini ":"")).wrapInner("<div class='ui-controlgroup-controls "+(opts.shadow===!0?"ui-shadow":"")+"'></div>").children()};return ui.groupLegend.length>0&&$("<div role='heading' class='ui-controlgroup-label'></div>").append(ui.groupLegend).prependTo(elem),ui},_init:function(){this.refresh()},_setOptions:function(options){var callRefresh,returnValue,elem=this.element;return options.type!==undefined&&(elem.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical").addClass("ui-controlgroup-"+("horizontal"===options.type?"horizontal":"vertical")),callRefresh=!0),options.theme!==undefined&&elem.removeClass(this._themeClassFromOption(this.options.theme)).addClass(this._themeClassFromOption(options.theme)),options.corners!==undefined&&elem.toggleClass("ui-corner-all",options.corners),options.mini!==undefined&&elem.toggleClass("ui-mini",options.mini),options.shadow!==undefined&&this._ui.childWrapper.toggleClass("ui-shadow",options.shadow),options.excludeInvisible!==undefined&&(this.options.excludeInvisible=options.excludeInvisible,callRefresh=!0),returnValue=this._super(options),callRefresh&&this.refresh(),returnValue},container:function(){return this._ui.childWrapper},refresh:function(){var $el=this.container(),els=$el.find(".ui-btn").not(".ui-slider-handle"),create=this._initialRefresh;$.mobile.checkboxradio&&$el.find(":mobile-checkboxradio").checkboxradio("refresh"),this._addFirstLastClasses(els,this.options.excludeInvisible?this._getVisibles(els,create):els,create),this._initialRefresh=!1},_destroy:function(){var ui,buttons,opts=this.options;return opts.enhanced?this:(ui=this._ui,buttons=this.element.removeClass("ui-controlgroup ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini "+this._themeClassFromOption(opts.theme)).find(".ui-btn").not(".ui-slider-handle"),this._removeFirstLastClasses(buttons),ui.groupLegend.unwrap(),void ui.childWrapper.children().unwrap())}},$.mobile.behaviors.addFirstLastClasses))}(jQuery),function($,undefined){$.widget("mobile.toolbar",{initSelector:":jqmData(role='footer'), :jqmData(role='header')",options:{theme:null,addBackBtn:!1,backBtnTheme:null,backBtnText:"Back"},_create:function(){var leftbtn,rightbtn,role=this.element.is(":jqmData(role='header')")?"header":"footer",page=this.element.closest(".ui-page");0===page.length&&(page=!1,this._on(this.document,{pageshow:"refresh"})),$.extend(this,{role:role,page:page,leftbtn:leftbtn,rightbtn:rightbtn}),this.element.attr("role","header"===role?"banner":"contentinfo").addClass("ui-"+role),this.refresh(),this._setOptions(this.options)},_setOptions:function(o){if(o.addBackBtn!==undefined&&(this.options.addBackBtn&&"header"===this.role&&$(".ui-page").length>1&&this.page[0].getAttribute("data-"+$.mobile.ns+"url")!==$.mobile.path.stripHash(location.hash)&&!this.leftbtn?this._addBackButton():this.element.find(".ui-toolbar-back-btn").remove()),null!=o.backBtnTheme&&this.element.find(".ui-toolbar-back-btn").addClass("ui-btn ui-btn-"+o.backBtnTheme),o.backBtnText!==undefined&&this.element.find(".ui-toolbar-back-btn .ui-btn-text").text(o.backBtnText),o.theme!==undefined){var currentTheme=this.options.theme?this.options.theme:"inherit",newTheme=o.theme?o.theme:"inherit";this.element.removeClass("ui-bar-"+currentTheme).addClass("ui-bar-"+newTheme)}this._super(o)},refresh:function(){"header"===this.role&&this._addHeaderButtonClasses(),this.page||(this._setRelative(),"footer"===this.role&&this.element.appendTo("body")),this._addHeadingClasses(),this._btnMarkup()},_setRelative:function(){$("[data-"+$.mobile.ns+"role='page']").css({position:"relative"})},_btnMarkup:function(){this.element.children("a").filter(":not([data-"+$.mobile.ns+"role='none'])").attr("data-"+$.mobile.ns+"role","button"),this.element.trigger("create")},_addHeaderButtonClasses:function(){var $headeranchors=this.element.children("a, button");this.leftbtn=$headeranchors.hasClass("ui-btn-left"),this.rightbtn=$headeranchors.hasClass("ui-btn-right"),this.leftbtn=this.leftbtn||$headeranchors.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length,this.rightbtn=this.rightbtn||$headeranchors.eq(1).addClass("ui-btn-right").length},_addBackButton:function(){var options=this.options,theme=options.backBtnTheme||options.theme;$("<a role='button' href='javascript:void(0);' class='ui-btn ui-corner-all ui-shadow ui-btn-left "+(theme?"ui-btn-"+theme+" ":"")+"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' data-"+$.mobile.ns+"rel='back'>"+options.backBtnText+"</a>").prependTo(this.element)},_addHeadingClasses:function(){this.element.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading","aria-level":"1"})}})}(jQuery),function($,undefined){$.widget("mobile.toolbar",$.mobile.toolbar,{options:{position:null,visibleOnPageShow:!0,disablePageZoom:!0,transition:"slide",fullscreen:!1,tapToggle:!0,tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",hideDuringFocus:"input, textarea, select",updatePagePadding:!0,trackPersistentToolbars:!0,supportBlacklist:function(){return!$.support.fixedPosition}},_create:function(){this._super(),"fixed"!==this.options.position||this.options.supportBlacklist()||this._makeFixed()},_makeFixed:function(){this.element.addClass("ui-"+this.role+"-fixed"),this.updatePagePadding(),this._addTransitionClass(),this._bindPageEvents(),this._bindToggleHandlers()},_setOptions:function(o){if("fixed"===o.position&&"fixed"!==this.options.position&&this._makeFixed(),"fixed"===this.options.position&&!this.options.supportBlacklist()){var $page=this.page?this.page:$(".ui-page-active").length>0?$(".ui-page-active"):$(".ui-page").eq(0);o.fullscreen!==undefined&&(o.fullscreen?(this.element.addClass("ui-"+this.role+"-fullscreen"),$page.addClass("ui-page-"+this.role+"-fullscreen")):(this.element.removeClass("ui-"+this.role+"-fullscreen"),$page.removeClass("ui-page-"+this.role+"-fullscreen").addClass("ui-page-"+this.role+"-fixed")))}this._super(o)},_addTransitionClass:function(){var tclass=this.options.transition;tclass&&"none"!==tclass&&("slide"===tclass&&(tclass=this.element.hasClass("ui-header")?"slidedown":"slideup"),this.element.addClass(tclass))},_bindPageEvents:function(){var page=this.page?this.element.closest(".ui-page"):this.document;this._on(page,{pagebeforeshow:"_handlePageBeforeShow",webkitAnimationStart:"_handleAnimationStart",animationstart:"_handleAnimationStart",updatelayout:"_handleAnimationStart",pageshow:"_handlePageShow",pagebeforehide:"_handlePageBeforeHide"})},_handlePageBeforeShow:function(){var o=this.options;o.disablePageZoom&&$.mobile.zoom.disable(!0),o.visibleOnPageShow||this.hide(!0)},_handleAnimationStart:function(){this.options.updatePagePadding&&this.updatePagePadding(this.page?this.page:".ui-page-active")},_handlePageShow:function(){this.updatePagePadding(this.page?this.page:".ui-page-active"),this.options.updatePagePadding&&this._on(this.window,{throttledresize:"updatePagePadding"})},_handlePageBeforeHide:function(e,ui){var thisFooter,thisHeader,nextFooter,nextHeader,o=this.options;o.disablePageZoom&&$.mobile.zoom.enable(!0),o.updatePagePadding&&this._off(this.window,"throttledresize"),o.trackPersistentToolbars&&(thisFooter=$(".ui-footer-fixed:jqmData(id)",this.page),thisHeader=$(".ui-header-fixed:jqmData(id)",this.page),nextFooter=thisFooter.length&&ui.nextPage&&$(".ui-footer-fixed:jqmData(id='"+thisFooter.jqmData("id")+"')",ui.nextPage)||$(),nextHeader=thisHeader.length&&ui.nextPage&&$(".ui-header-fixed:jqmData(id='"+thisHeader.jqmData("id")+"')",ui.nextPage)||$(),(nextFooter.length||nextHeader.length)&&(nextFooter.add(nextHeader).appendTo($.mobile.pageContainer),ui.nextPage.one("pageshow",function(){nextHeader.prependTo(this),nextFooter.appendTo(this)})))},_visible:!0,updatePagePadding:function(tbPage){var $el=this.element,header="header"===this.role,pos=parseFloat($el.css(header?"top":"bottom"));this.options.fullscreen||(tbPage=tbPage&&tbPage.type===undefined&&tbPage||this.page||$el.closest(".ui-page"),tbPage=this.page?this.page:".ui-page-active",$(tbPage).css("padding-"+(header?"top":"bottom"),$el.outerHeight()+pos))},_useTransition:function(notransition){var $win=this.window,$el=this.element,scroll=$win.scrollTop(),elHeight=$el.height(),pHeight=this.page?$el.closest(".ui-page").height():$(".ui-page-active").height(),viewportHeight=$.mobile.getScreenHeight();return!notransition&&(this.options.transition&&"none"!==this.options.transition&&("header"===this.role&&!this.options.fullscreen&&scroll>elHeight||"footer"===this.role&&!this.options.fullscreen&&pHeight-elHeight>scroll+viewportHeight)||this.options.fullscreen)},show:function(notransition){var hideClass="ui-fixed-hidden",$el=this.element;this._useTransition(notransition)?$el.removeClass("out "+hideClass).addClass("in").animationComplete(function(){$el.removeClass("in")}):$el.removeClass(hideClass),this._visible=!0},hide:function(notransition){var hideClass="ui-fixed-hidden",$el=this.element,outclass="out"+("slide"===this.options.transition?" reverse":"");this._useTransition(notransition)?$el.addClass(outclass).removeClass("in").animationComplete(function(){$el.addClass(hideClass).removeClass(outclass)}):$el.addClass(hideClass).removeClass(outclass),this._visible=!1},toggle:function(){this[this._visible?"hide":"show"]()
},_bindToggleHandlers:function(){var delayShow,delayHide,self=this,o=self.options,isVisible=!0,page=this.page?this.page:$(".ui-page");page.bind("vclick",function(e){o.tapToggle&&!$(e.target).closest(o.tapToggleBlacklist).length&&self.toggle()}).bind("focusin focusout",function(e){screen.width<1025&&$(e.target).is(o.hideDuringFocus)&&!$(e.target).closest(".ui-header-fixed, .ui-footer-fixed").length&&("focusout"!==e.type||isVisible?"focusin"===e.type&&isVisible&&(clearTimeout(delayShow),isVisible=!1,delayHide=setTimeout(function(){self.hide()},0)):(isVisible=!0,clearTimeout(delayHide),delayShow=setTimeout(function(){self.show()},0)))})},_setRelative:function(){"fixed"!==this.options.position&&$("[data-"+$.mobile.ns+"role='page']").css({position:"relative"})},_destroy:function(){var $el=this.element,header=$el.hasClass("ui-header");$el.closest(".ui-page").css("padding-"+(header?"top":"bottom"),""),$el.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden"),$el.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen")}})}(jQuery),function($){$.widget("mobile.toolbar",$.mobile.toolbar,{_makeFixed:function(){this._super(),this._workarounds()},_workarounds:function(){var ua=navigator.userAgent,platform=navigator.platform,wkmatch=ua.match(/AppleWebKit\/([0-9]+)/),wkversion=!!wkmatch&&wkmatch[1],os=null,self=this;if(platform.indexOf("iPhone")>-1||platform.indexOf("iPad")>-1||platform.indexOf("iPod")>-1)os="ios";else{if(!(ua.indexOf("Android")>-1))return;os="android"}if("ios"===os)self._bindScrollWorkaround();else{if(!("android"===os&&wkversion&&534>wkversion))return;self._bindScrollWorkaround(),self._bindListThumbWorkaround()}},_viewportOffset:function(){var $el=this.element,header=$el.hasClass("ui-header"),offset=Math.abs($el.offset().top-this.window.scrollTop());return header||(offset=Math.round(offset-this.window.height()+$el.outerHeight())-60),offset},_bindScrollWorkaround:function(){var self=this;this._on(this.window,{scrollstop:function(){var viewportOffset=self._viewportOffset();viewportOffset>2&&self._visible&&self._triggerRedraw()}})},_bindListThumbWorkaround:function(){this.element.closest(".ui-page").addClass("ui-android-2x-fixed")},_triggerRedraw:function(){var paddingBottom=parseFloat($(".ui-page-active").css("padding-bottom"));$(".ui-page-active").css("padding-bottom",paddingBottom+1+"px"),setTimeout(function(){$(".ui-page-active").css("padding-bottom",paddingBottom+"px")},0)},destroy:function(){this._super(),this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix")}})}(jQuery),function($,undefined){function getArrow(){var clone=uiTemplate.clone(),gd=clone.eq(0),ct=clone.eq(1),ar=ct.children();return{arEls:ct.add(gd),gd:gd,ct:ct,ar:ar}}var ieHack=$.mobile.browser.oldIE&&$.mobile.browser.oldIE<=8,uiTemplate=$("<div class='ui-popup-arrow-guide'></div><div class='ui-popup-arrow-container"+(ieHack?" ie":"")+"'><div class='ui-popup-arrow'></div></div>");$.widget("mobile.popup",$.mobile.popup,{options:{arrow:""},_create:function(){var ar,ret=this._super();return this.options.arrow&&(this._ui.arrow=ar=this._addArrow()),ret},_addArrow:function(){var theme,opts=this.options,ar=getArrow();return theme=this._themeClassFromOption("ui-body-",opts.theme),ar.ar.addClass(theme+(opts.shadow?" ui-overlay-shadow":"")),ar.arEls.hide().appendTo(this.element),ar},_unenhance:function(){var ar=this._ui.arrow;return ar&&ar.arEls.remove(),this._super()},_tryAnArrow:function(p,dir,desired,s,best){var result,r,diff,desiredForArrow={},tip={};return s.arFull[p.dimKey]>s.guideDims[p.dimKey]?best:(desiredForArrow[p.fst]=desired[p.fst]+(s.arHalf[p.oDimKey]+s.menuHalf[p.oDimKey])*p.offsetFactor-s.contentBox[p.fst]+(s.clampInfo.menuSize[p.oDimKey]-s.contentBox[p.oDimKey])*p.arrowOffsetFactor,desiredForArrow[p.snd]=desired[p.snd],result=s.result||this._calculateFinalLocation(desiredForArrow,s.clampInfo),r={x:result.left,y:result.top},tip[p.fst]=r[p.fst]+s.contentBox[p.fst]+p.tipOffset,tip[p.snd]=Math.max(result[p.prop]+s.guideOffset[p.prop]+s.arHalf[p.dimKey],Math.min(result[p.prop]+s.guideOffset[p.prop]+s.guideDims[p.dimKey]-s.arHalf[p.dimKey],desired[p.snd])),diff=Math.abs(desired.x-tip.x)+Math.abs(desired.y-tip.y),(!best||diff<best.diff)&&(tip[p.snd]-=s.arHalf[p.dimKey]+result[p.prop]+s.contentBox[p.snd],best={dir:dir,diff:diff,result:result,posProp:p.prop,posVal:tip[p.snd]}),best)},_getPlacementState:function(clamp){var offset,gdOffset,ar=this._ui.arrow,state={clampInfo:this._clampPopupWidth(!clamp),arFull:{cx:ar.ct.width(),cy:ar.ct.height()},guideDims:{cx:ar.gd.width(),cy:ar.gd.height()},guideOffset:ar.gd.offset()};return offset=this.element.offset(),ar.gd.css({left:0,top:0,right:0,bottom:0}),gdOffset=ar.gd.offset(),state.contentBox={x:gdOffset.left-offset.left,y:gdOffset.top-offset.top,cx:ar.gd.width(),cy:ar.gd.height()},ar.gd.removeAttr("style"),state.guideOffset={left:state.guideOffset.left-offset.left,top:state.guideOffset.top-offset.top},state.arHalf={cx:state.arFull.cx/2,cy:state.arFull.cy/2},state.menuHalf={cx:state.clampInfo.menuSize.cx/2,cy:state.clampInfo.menuSize.cy/2},state},_placementCoords:function(desired){var state,best,params,elOffset,bgRef,optionValue=this.options.arrow,ar=this._ui.arrow;return ar?(ar.arEls.show(),bgRef={},state=this._getPlacementState(!0),params={l:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:1,tipOffset:-state.arHalf.cx,arrowOffsetFactor:0},r:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:-1,tipOffset:state.arHalf.cx+state.contentBox.cx,arrowOffsetFactor:1},b:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:-1,tipOffset:state.arHalf.cy+state.contentBox.cy,arrowOffsetFactor:1},t:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:1,tipOffset:-state.arHalf.cy,arrowOffsetFactor:0}},$.each((optionValue===!0?"l,t,r,b":optionValue).split(","),$.proxy(function(key,value){best=this._tryAnArrow(params[value],value,desired,state,best)},this)),best?(ar.ct.removeClass("ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b").addClass("ui-popup-arrow-"+best.dir).removeAttr("style").css(best.posProp,best.posVal).show(),ieHack||(elOffset=this.element.offset(),bgRef[params[best.dir].fst]=ar.ct.offset(),bgRef[params[best.dir].snd]={left:elOffset.left+state.contentBox.x,top:elOffset.top+state.contentBox.y}),best.result):(ar.arEls.hide(),this._super(desired))):this._super(desired)},_setOptions:function(opts){var newTheme,oldTheme=this.options.theme,ar=this._ui.arrow,ret=this._super(opts);if(opts.arrow!==undefined){if(!ar&&opts.arrow)return void(this._ui.arrow=this._addArrow());ar&&!opts.arrow&&(ar.arEls.remove(),this._ui.arrow=null)}return ar=this._ui.arrow,ar&&(opts.theme!==undefined&&(oldTheme=this._themeClassFromOption("ui-body-",oldTheme),newTheme=this._themeClassFromOption("ui-body-",opts.theme),ar.ar.removeClass(oldTheme).addClass(newTheme)),opts.shadow!==undefined&&ar.ar.toggleClass("ui-overlay-shadow",opts.shadow)),ret},_destroy:function(){var ar=this._ui.arrow;return ar&&ar.arEls.remove(),this._super()}})}(jQuery),function($,undefined){$.widget("mobile.panel",{options:{classes:{panel:"ui-panel",panelOpen:"ui-panel-open",panelClosed:"ui-panel-closed",panelFixed:"ui-panel-fixed",panelInner:"ui-panel-inner",modal:"ui-panel-dismiss",modalOpen:"ui-panel-dismiss-open",pageContainer:"ui-panel-page-container",pageWrapper:"ui-panel-wrapper",pageFixedToolbar:"ui-panel-fixed-toolbar",pageContentPrefix:"ui-panel-page-content",animate:"ui-panel-animate"},animate:!0,theme:null,position:"left",dismissible:!0,display:"reveal",swipeClose:!0,positionFixed:!1},_closeLink:null,_parentPage:null,_page:null,_modal:null,_panelInner:null,_wrapper:null,_fixedToolbars:null,_create:function(){var el=this.element,parentPage=el.closest(".ui-page, :jqmData(role='page')");$.extend(this,{_closeLink:el.find(":jqmData(rel='close')"),_parentPage:parentPage.length>0?parentPage:!1,_openedPage:null,_page:this._getPage,_panelInner:this._getPanelInner(),_fixedToolbars:this._getFixedToolbars}),"overlay"!==this.options.display&&this._getWrapper(),this._addPanelClasses(),$.support.cssTransform3d&&this.options.animate&&this.element.addClass(this.options.classes.animate),this._bindUpdateLayout(),this._bindCloseEvents(),this._bindLinkListeners(),this._bindPageEvents(),this.options.dismissible&&this._createModal(),this._bindSwipeEvents()},_getPanelInner:function(){var panelInner=this.element.find("."+this.options.classes.panelInner);return 0===panelInner.length&&(panelInner=this.element.children().wrapAll("<div class='"+this.options.classes.panelInner+"' />").parent()),panelInner},_createModal:function(){var self=this,target=self._parentPage?self._parentPage.parent():self.element.parent();self._modal=$("<div class='"+self.options.classes.modal+"'></div>").on("mousedown",function(){self.close()}).appendTo(target)},_getPage:function(){var page=this._openedPage||this._parentPage||$("."+$.mobile.activePageClass);return page},_getWrapper:function(){var wrapper=this._page().find("."+this.options.classes.pageWrapper);0===wrapper.length&&(wrapper=this._page().children(".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)").wrapAll("<div class='"+this.options.classes.pageWrapper+"'></div>").parent()),this._wrapper=wrapper},_getFixedToolbars:function(){var extFixedToolbars=$("body").children(".ui-header-fixed, .ui-footer-fixed"),intFixedToolbars=this._page().find(".ui-header-fixed, .ui-footer-fixed"),fixedToolbars=extFixedToolbars.add(intFixedToolbars).addClass(this.options.classes.pageFixedToolbar);return fixedToolbars},_getPosDisplayClasses:function(prefix){return prefix+"-position-"+this.options.position+" "+prefix+"-display-"+this.options.display},_getPanelClasses:function(){var panelClasses=this.options.classes.panel+" "+this._getPosDisplayClasses(this.options.classes.panel)+" "+this.options.classes.panelClosed+" ui-body-"+(this.options.theme?this.options.theme:"inherit");return this.options.positionFixed&&(panelClasses+=" "+this.options.classes.panelFixed),panelClasses},_addPanelClasses:function(){this.element.addClass(this._getPanelClasses())},_handleCloseClickAndEatEvent:function(event){return event.isDefaultPrevented()?void 0:(event.preventDefault(),this.close(),!1)},_handleCloseClick:function(event){event.isDefaultPrevented()||this.close()},_bindCloseEvents:function(){this._on(this._closeLink,{click:"_handleCloseClick"}),this._on({"click a:jqmData(ajax='false')":"_handleCloseClick"})},_positionPanel:function(scrollToTop){var self=this,panelInnerHeight=self._panelInner.outerHeight(),expand=panelInnerHeight>$.mobile.getScreenHeight();expand||!self.options.positionFixed?(expand&&(self._unfixPanel(),$.mobile.resetActivePageHeight(panelInnerHeight)),scrollToTop&&this.window[0].scrollTo(0,$.mobile.defaultHomeScroll)):self._fixPanel()},_bindFixListener:function(){this._on($(window),{throttledresize:"_positionPanel"})},_unbindFixListener:function(){this._off($(window),"throttledresize")},_unfixPanel:function(){this.options.positionFixed&&$.support.fixedPosition&&this.element.removeClass(this.options.classes.panelFixed)},_fixPanel:function(){this.options.positionFixed&&$.support.fixedPosition&&this.element.addClass(this.options.classes.panelFixed)},_bindUpdateLayout:function(){var self=this;self.element.on("updatelayout",function(){self._open&&self._positionPanel()})},_bindLinkListeners:function(){this._on("body",{"click a":"_handleClick"})},_handleClick:function(e){var link,panelId=this.element.attr("id");return e.currentTarget.href.split("#")[1]===panelId&&panelId!==undefined?(e.preventDefault(),link=$(e.target),link.hasClass("ui-btn")&&(link.addClass($.mobile.activeBtnClass),this.element.one("panelopen panelclose",function(){link.removeClass($.mobile.activeBtnClass)})),this.toggle(),!1):void 0},_bindSwipeEvents:function(){var self=this,area=self._modal?self.element.add(self._modal):self.element;self.options.swipeClose&&("left"===self.options.position?area.on("swipeleft.panel",function(){self.close()}):area.on("swiperight.panel",function(){self.close()}))},_bindPageEvents:function(){var self=this;this.document.on("panelbeforeopen",function(e){self._open&&e.target!==self.element[0]&&self.close()}).on("keyup.panel",function(e){27===e.keyCode&&self._open&&self.close()}),this._parentPage||"overlay"===this.options.display||this._on(this.document,{pageshow:"_getWrapper"}),self._parentPage?this.document.on("pagehide",":jqmData(role='page')",function(){self._open&&self.close(!0)}):this.document.on("pagebeforehide",function(){self._open&&self.close(!0)})},_open:!1,_pageContentOpenClasses:null,_modalOpenClasses:null,open:function(immediate){if(!this._open){var self=this,o=self.options,_openPanel=function(){self.document.off("panelclose"),self._page().jqmData("panel","open"),$.support.cssTransform3d&&o.animate&&"overlay"!==o.display&&(self._wrapper.addClass(o.classes.animate),self._fixedToolbars().addClass(o.classes.animate)),!immediate&&$.support.cssTransform3d&&o.animate?self.element.animationComplete(complete,"transition"):setTimeout(complete,0),o.theme&&"overlay"!==o.display&&self._page().parent().addClass(o.classes.pageContainer+"-themed "+o.classes.pageContainer+"-"+o.theme),self.element.removeClass(o.classes.panelClosed).addClass(o.classes.panelOpen),self._positionPanel(!0),self._pageContentOpenClasses=self._getPosDisplayClasses(o.classes.pageContentPrefix),"overlay"!==o.display&&(self._page().parent().addClass(o.classes.pageContainer),self._wrapper.addClass(self._pageContentOpenClasses),self._fixedToolbars().addClass(self._pageContentOpenClasses)),self._modalOpenClasses=self._getPosDisplayClasses(o.classes.modal)+" "+o.classes.modalOpen,self._modal&&self._modal.addClass(self._modalOpenClasses).height(Math.max(self._modal.height(),self.document.height()))},complete=function(){"overlay"!==o.display&&(self._wrapper.addClass(o.classes.pageContentPrefix+"-open"),self._fixedToolbars().addClass(o.classes.pageContentPrefix+"-open")),self._bindFixListener(),self._trigger("open"),self._openedPage=self._page()};self._trigger("beforeopen"),"open"===self._page().jqmData("panel")?self.document.on("panelclose",function(){_openPanel()}):_openPanel(),self._open=!0}},close:function(immediate){if(this._open){var self=this,o=this.options,_closePanel=function(){self.element.removeClass(o.classes.panelOpen),"overlay"!==o.display&&(self._wrapper.removeClass(self._pageContentOpenClasses),self._fixedToolbars().removeClass(self._pageContentOpenClasses)),!immediate&&$.support.cssTransform3d&&o.animate?self.element.animationComplete(complete,"transition"):setTimeout(complete,0),self._modal&&self._modal.removeClass(self._modalOpenClasses)},complete=function(){o.theme&&"overlay"!==o.display&&self._page().parent().removeClass(o.classes.pageContainer+"-themed "+o.classes.pageContainer+"-"+o.theme),self.element.addClass(o.classes.panelClosed),"overlay"!==o.display&&(self._page().parent().removeClass(o.classes.pageContainer),self._wrapper.removeClass(o.classes.pageContentPrefix+"-open"),self._fixedToolbars().removeClass(o.classes.pageContentPrefix+"-open")),$.support.cssTransform3d&&o.animate&&"overlay"!==o.display&&(self._wrapper.removeClass(o.classes.animate),self._fixedToolbars().removeClass(o.classes.animate)),self._fixPanel(),self._unbindFixListener(),$.mobile.resetActivePageHeight(),self._page().jqmRemoveData("panel"),self._trigger("close"),self._openedPage=null};self._trigger("beforeclose"),_closePanel(),self._open=!1}},toggle:function(){this[this._open?"close":"open"]()},_destroy:function(){var otherPanels,o=this.options,multiplePanels=$("body > :mobile-panel").length+$.mobile.activePage.find(":mobile-panel").length>1;"overlay"!==o.display&&(otherPanels=$("body > :mobile-panel").add($.mobile.activePage.find(":mobile-panel")),0===otherPanels.not(".ui-panel-display-overlay").not(this.element).length&&this._wrapper.children().unwrap(),this._open&&(this._fixedToolbars().removeClass(o.classes.pageContentPrefix+"-open"),$.support.cssTransform3d&&o.animate&&this._fixedToolbars().removeClass(o.classes.animate),this._page().parent().removeClass(o.classes.pageContainer),o.theme&&this._page().parent().removeClass(o.classes.pageContainer+"-themed "+o.classes.pageContainer+"-"+o.theme))),multiplePanels||this.document.off("panelopen panelclose"),this._open&&this._page().jqmRemoveData("panel"),this._panelInner.children().unwrap(),this.element.removeClass([this._getPanelClasses(),o.classes.panelOpen,o.classes.animate].join(" ")).off("swipeleft.panel swiperight.panel").off("panelbeforeopen").off("panelhide").off("keyup.panel").off("updatelayout"),this._modal&&this._modal.remove()}})}(jQuery),function($,undefined){$.widget("mobile.table",{options:{classes:{table:"ui-table"},enhanced:!1},_create:function(){this.options.enhanced||this.element.addClass(this.options.classes.table),$.extend(this,{headers:undefined,allHeaders:undefined}),this._refresh(!0)},_setHeaders:function(){var trs=this.element.find("thead tr");this.headers=this.element.find("tr:eq(0)").children(),this.allHeaders=this.headers.add(trs.children())},refresh:function(){this._refresh()},rebuild:$.noop,_refresh:function(){var table=this.element,trs=table.find("thead tr");this._setHeaders(),trs.each(function(){var columnCount=0;$(this).children().each(function(){var j,span=parseInt(this.getAttribute("colspan"),10),selector=":nth-child("+(columnCount+1)+")";if(this.setAttribute("data-"+$.mobile.ns+"colstart",columnCount+1),span)for(j=0;span-1>j;j++)columnCount++,selector+=", :nth-child("+(columnCount+1)+")";$(this).jqmData("cells",table.find("tr").not(trs.eq(0)).not(this).children(selector)),columnCount++})})}})}(jQuery),function($){$.widget("mobile.table",$.mobile.table,{options:{mode:"columntoggle",columnBtnTheme:null,columnPopupTheme:null,columnBtnText:"Columns...",classes:$.extend($.mobile.table.prototype.options.classes,{popup:"ui-table-columntoggle-popup",columnBtn:"ui-table-columntoggle-btn",priorityPrefix:"ui-table-priority-",columnToggleTable:"ui-table-columntoggle"})},_create:function(){this._super(),"columntoggle"===this.options.mode&&($.extend(this,{_menu:null}),this.options.enhanced?(this._menu=$(this.document[0].getElementById(this._id()+"-popup")).children().first(),this._addToggles(this._menu,!0)):(this._menu=this._enhanceColToggle(),this.element.addClass(this.options.classes.columnToggleTable)),this._setupEvents(),this._setToggleState())},_id:function(){return this.element.attr("id")||this.widgetName+this.uuid},_setupEvents:function(){this._on(this.window,{throttledresize:"_setToggleState"}),this._on(this._menu,{"change input":"_menuInputChange"})},_addToggles:function(menu,keep){var inputs,checkboxIndex=0,opts=this.options,container=menu.controlgroup("container");keep?inputs=menu.find("input"):container.empty(),this.headers.not("td").each(function(){var header=$(this),priority=$.mobile.getAttribute(this,"priority"),cells=header.add(header.jqmData("cells"));priority&&(cells.addClass(opts.classes.priorityPrefix+priority),(keep?inputs.eq(checkboxIndex++):$("<label><input type='checkbox' checked />"+(header.children("abbr").first().attr("title")||header.text())+"</label>").appendTo(container).children(0).checkboxradio({theme:opts.columnPopupTheme})).jqmData("cells",cells))}),keep||menu.controlgroup("refresh")},_menuInputChange:function(evt){var input=$(evt.target),checked=input[0].checked;input.jqmData("cells").toggleClass("ui-table-cell-hidden",!checked).toggleClass("ui-table-cell-visible",checked),input[0].getAttribute("locked")?(input.removeAttr("locked"),this._unlockCells(input.jqmData("cells"))):input.attr("locked",!0)},_unlockCells:function(cells){cells.removeClass("ui-table-cell-hidden ui-table-cell-visible")},_enhanceColToggle:function(){var id,menuButton,popup,menu,table=this.element,opts=this.options,ns=$.mobile.ns,fragment=this.document[0].createDocumentFragment();return id=this._id()+"-popup",menuButton=$("<a href='#"+id+"' class='"+opts.classes.columnBtn+" ui-btn ui-btn-"+(opts.columnBtnTheme||"a")+" ui-corner-all ui-shadow ui-mini' data-"+ns+"rel='popup'>"+opts.columnBtnText+"</a>"),popup=$("<div class='"+opts.classes.popup+"' id='"+id+"'></div>"),menu=$("<fieldset></fieldset>").controlgroup(),this._addToggles(menu,!1),menu.appendTo(popup),fragment.appendChild(popup[0]),fragment.appendChild(menuButton[0]),table.before(fragment),popup.popup(),menu},rebuild:function(){this._super(),"columntoggle"===this.options.mode&&this._refresh(!1)},_refresh:function(create){this._super(create),create||"columntoggle"!==this.options.mode||(this._unlockCells(this.element.find(".ui-table-cell-hidden, .ui-table-cell-visible")),this._addToggles(this._menu,create),this._setToggleState())},_setToggleState:function(){this._menu.find("input").each(function(){var checkbox=$(this);this.checked="table-cell"===checkbox.jqmData("cells").eq(0).css("display"),checkbox.checkboxradio("refresh")})},_destroy:function(){this._super()}})}(jQuery),function($){$.widget("mobile.table",$.mobile.table,{options:{mode:"reflow",classes:$.extend($.mobile.table.prototype.options.classes,{reflowTable:"ui-table-reflow",cellLabels:"ui-table-cell-label"})},_create:function(){this._super(),"reflow"===this.options.mode&&(this.options.enhanced||(this.element.addClass(this.options.classes.reflowTable),this._updateReflow()))},rebuild:function(){this._super(),"reflow"===this.options.mode&&this._refresh(!1)},_refresh:function(create){this._super(create),create||"reflow"!==this.options.mode||this._updateReflow()},_updateReflow:function(){var table=this,opts=this.options;$(table.allHeaders.get().reverse()).each(function(){var iteration,filter,cells=$(this).jqmData("cells"),colstart=$.mobile.getAttribute(this,"colstart"),hierarchyClass=cells.not(this).filter("thead th").length&&" ui-table-cell-label-top",text=$(this).text();""!==text&&(hierarchyClass?(iteration=parseInt(this.getAttribute("colspan"),10),filter="",iteration&&(filter="td:nth-child("+iteration+"n + "+colstart+")"),table._addLabels(cells.filter(filter),opts.classes.cellLabels+hierarchyClass,text)):table._addLabels(cells,opts.classes.cellLabels,text))})},_addLabels:function(cells,label,text){cells.not(":has(b."+label+")").prepend("<b class='"+label+"'>"+text+"</b>")}})}(jQuery),function($,undefined){var defaultFilterCallback=function(index,searchValue){return-1===(""+($.mobile.getAttribute(this,"filtertext")||$(this).text())).toLowerCase().indexOf(searchValue)};$.widget("mobile.filterable",{initSelector:":jqmData(filter='true')",options:{filterReveal:!1,filterCallback:defaultFilterCallback,enhanced:!1,input:null,children:"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"},_create:function(){var opts=this.options;$.extend(this,{_search:null,_timer:0}),this._setInput(opts.input),opts.enhanced||this._filterItems((this._search&&this._search.val()||"").toLowerCase())},_onKeyUp:function(){var val,lastval,search=this._search;if(search){if(val=search.val().toLowerCase(),lastval=$.mobile.getAttribute(search[0],"lastval")+"",lastval&&lastval===val)return;this._timer&&(window.clearTimeout(this._timer),this._timer=0),this._timer=this._delay(function(){this._trigger("beforefilter",null,{input:search}),search[0].setAttribute("data-"+$.mobile.ns+"lastval",val),this._filterItems(val),this._timer=0},250)}},_getFilterableItems:function(){var elem=this.element,children=this.options.children,items=children?$.isFunction(children)?children():children.nodeName?$(children):children.jquery?children:this.element.find(children):{length:0};return 0===items.length&&(items=elem.children()),items},_filterItems:function(val){var idx,callback,length,dst,show=[],hide=[],opts=this.options,filterItems=this._getFilterableItems();if(null!=val)for(callback=opts.filterCallback||defaultFilterCallback,length=filterItems.length,idx=0;length>idx;idx++)dst=callback.call(filterItems[idx],idx,val)?hide:show,dst.push(filterItems[idx]);0===hide.length?filterItems[opts.filterReveal?"addClass":"removeClass"]("ui-screen-hidden"):($(hide).addClass("ui-screen-hidden"),$(show).removeClass("ui-screen-hidden")),this._refreshChildWidget(),this._trigger("filter",null,{items:filterItems})},_refreshChildWidget:function(){var widget,idx,recognizedWidgets=["collapsibleset","selectmenu","controlgroup","listview"];for(idx=recognizedWidgets.length-1;idx>-1;idx--)widget=recognizedWidgets[idx],$.mobile[widget]&&(widget=this.element.data("mobile-"+widget),widget&&$.isFunction(widget.refresh)&&widget.refresh())},_setInput:function(selector){var search=this._search;this._timer&&(window.clearTimeout(this._timer),this._timer=0),search&&(this._off(search,"keyup change input"),search=null),selector&&(search=selector.jquery?selector:selector.nodeName?$(selector):this.document.find(selector),this._on(search,{keyup:"_onKeyUp",change:"_onKeyUp",input:"_onKeyUp"})),this._search=search},_setOptions:function(options){var refilter=!(options.filterReveal===undefined&&options.filterCallback===undefined&&options.children===undefined);this._super(options),options.input!==undefined&&(this._setInput(options.input),refilter=!0),refilter&&this.refresh()},_destroy:function(){var opts=this.options,items=this._getFilterableItems();opts.enhanced?items.toggleClass("ui-screen-hidden",opts.filterReveal):items.removeClass("ui-screen-hidden")},refresh:function(){this._timer&&(window.clearTimeout(this._timer),this._timer=0),this._filterItems((this._search&&this._search.val()||"").toLowerCase())}})}(jQuery),function($,undefined){var replaceSetOptions=function(self,orig){return function(options){orig.call(this,options),self._syncTextInputOptions(options)}},rDividerListItem=/(^|\s)ui-li-divider(\s|$)/,origDefaultFilterCallback=$.mobile.filterable.prototype.options.filterCallback;$.mobile.filterable.prototype.options.filterCallback=function(index,searchValue){return!this.className.match(rDividerListItem)&&origDefaultFilterCallback.call(this,index,searchValue)},$.widget("mobile.filterable",$.mobile.filterable,{options:{filterPlaceholder:"Filter items...",filterTheme:null},_create:function(){var idx,widgetName,elem=this.element,recognizedWidgets=["collapsibleset","selectmenu","controlgroup","listview"],createHandlers={};for(this._super(),$.extend(this,{_widget:null}),idx=recognizedWidgets.length-1;idx>-1;idx--)if(widgetName=recognizedWidgets[idx],$.mobile[widgetName]){if(this._setWidget(elem.data("mobile-"+widgetName)))break;createHandlers[widgetName+"create"]="_handleCreate"}this._widget||this._on(elem,createHandlers)},_handleCreate:function(evt){this._setWidget(this.element.data("mobile-"+evt.type.substring(0,evt.type.length-6)))},_trigger:function(type,event,data){this._widget&&"mobile-listview"===this._widget.widgetFullName&&"beforefilter"===type&&this._widget._trigger("beforefilter",event,data),this._super(type,event,data)},_setWidget:function(widget){return!this._widget&&widget&&(this._widget=widget,this._widget._setOptions=replaceSetOptions(this,this._widget._setOptions)),this._widget&&(this._syncTextInputOptions(this._widget.options),"listview"===this._widget.widgetName&&(this._widget.options.hideDividers=!0,this._widget.element.listview("refresh"))),!!this._widget},_isSearchInternal:function(){return this._search&&this._search.jqmData("ui-filterable-"+this.uuid+"-internal")},_setInput:function(selector){var opts=this.options,updatePlaceholder=!0,textinputOpts={};if(!selector){if(this._isSearchInternal())return;updatePlaceholder=!1,selector=$("<input data-"+$.mobile.ns+"type='search' placeholder='"+opts.filterPlaceholder+"'></input>").jqmData("ui-filterable-"+this.uuid+"-internal",!0),$("<form class='ui-filterable'></form>").append(selector).submit(function(evt){evt.preventDefault(),selector.blur()}).insertBefore(this.element),$.mobile.textinput&&(null!=this.options.filterTheme&&(textinputOpts.theme=opts.filterTheme),selector.textinput(textinputOpts))}this._super(selector),this._isSearchInternal()&&updatePlaceholder&&this._search.attr("placeholder",this.options.filterPlaceholder)},_setOptions:function(options){var ret=this._super(options);return options.filterPlaceholder!==undefined&&this._isSearchInternal()&&this._search.attr("placeholder",options.filterPlaceholder),options.filterTheme!==undefined&&this._search&&$.mobile.textinput&&this._search.textinput("option","theme",options.filterTheme),ret},_destroy:function(){this._isSearchInternal()&&this._search.remove(),this._super()},_syncTextInputOptions:function(options){var idx,textinputOptions={};if(this._isSearchInternal()&&$.mobile.textinput){for(idx in $.mobile.textinput.prototype.options)options[idx]!==undefined&&(textinputOptions[idx]="theme"===idx&&null!=this.options.filterTheme?this.options.filterTheme:options[idx]);this._search.textinput("option",textinputOptions)}}})}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function isLocal(anchor){return anchor.hash.length>1&&decodeURIComponent(anchor.href.replace(rhash,""))===decodeURIComponent(location.href.replace(rhash,""))}var tabId=0,rhash=/#.*$/;$.widget("ui.tabs",{version:"fadf2b312a05040436451c64bbfaf4814bc62c56",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){$(this).is(".ui-state-disabled")&&event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){$(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),options.active=this._initialActive(),$.isArray(options.disabled)&&(options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(options.active):$(),this._refresh(),this.active.length&&this.load(options.active)},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);return null===active&&(locationHash&&this.tabs.each(function(i,tab){return $(tab).attr("aria-controls")===locationHash?(active=i,!1):void 0}),null===active&&(active=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===active||-1===active)&&(active=this.tabs.length?0:!1)),active!==!1&&(active=this.tabs.index(this.tabs.eq(active)),-1===active&&(active=collapsible?!1:0)),!collapsible&&active===!1&&this.anchors.length&&(active=0),active},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=!0;if(!this._handlePageNav(event)){switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=!1,selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex);case $.ui.keyCode.ENTER:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex===this.options.active?!1:selectedIndex);default:return}event.preventDefault(),clearTimeout(this.activating),selectedIndex=this._focusNextTab(selectedIndex,goingForward),event.ctrlKey||(focusedTab.attr("aria-selected","false"),this.tabs.eq(selectedIndex).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",selectedIndex)
},this.delay))}},_panelKeydown:function(event){this._handlePageNav(event)||event.ctrlKey&&event.keyCode===$.ui.keyCode.UP&&(event.preventDefault(),this.active.focus())},_handlePageNav:function(event){return event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(index,goingForward){function constrain(){return index>lastTabIndex&&(index=0),0>index&&(index=lastTabIndex),index}for(var lastTabIndex=this.tabs.length-1;-1!==$.inArray(constrain(),this.options.disabled);)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){return index=this._findNextTab(index,goingForward),this.tabs.eq(index).focus(),index},_setOption:function(key,value){return"active"===key?void this._activate(value):"disabled"===key?void this._setupDisabled(value):(this._super(key,value),"collapsible"===key&&(this.element.toggleClass("ui-tabs-collapsible",value),value||this.options.active!==!1||this._activate(0)),"event"===key&&this._setupEvents(value),void("heightStyle"===key&&this._setupHeightStyle(value)))},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)}),this._processTabs(),options.active!==!1&&this.anchors.length?this.active.length&&!$.contains(this.tablist[0],this.active[0])?this.tabs.length===options.disabled.length?(options.active=!1,this.active=$()):this._activate(this._findNextTab(Math.max(0,options.active-1),!1)):options.active=this.tabs.index(this.active):(options.active=!1,this.active=$()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");isLocal(anchor)?(selector=anchor.hash,panel=that.element.find(that._sanitizeSelector(selector))):(panelId=that._tabId(tab),selector="#"+panelId,panel=that.element.find(selector),panel.length||(panel=that._createPanel(panelId),panel.insertAfter(that.panels[i-1]||that.tablist)),panel.attr("aria-live","polite")),panel.length&&(that.panels=that.panels.add(panel)),originalAriaControls&&tab.data("ui-tabs-aria-controls",originalAriaControls),tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId}),panel.attr("aria-labelledby",anchorId)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(disabled){$.isArray(disabled)&&(disabled.length?disabled.length===this.anchors.length&&(disabled=!0):disabled=!1);for(var li,i=0;li=this.tabs[i];i++)disabled===!0||-1!==$.inArray(i,disabled)?$(li).addClass("ui-state-disabled").attr("aria-disabled","true"):$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,events),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();"fill"===heightStyle?(maxHeight=parent.height(),maxHeight-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(!0)}),this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight))},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=active.length?this._getPanelForTab(active):$(),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault(),tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.tabs.index(tab),this.active=clickedIsActive?$():tab,this.xhr&&this.xhr.abort(),toHide.length||toShow.length||$.error("jQuery UI Tabs: Mismatching fragment identifier."),toShow.length&&this.load(this.tabs.index(tab),event),this._toggle(event,eventData))},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&that.options.show?that._show(toShow,that.options.show,complete):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=!0,toHide.length&&this.options.hide?this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),eventData.oldTab.attr("aria-selected","false"),toShow.length&&toHide.length?eventData.oldTab.attr("tabIndex",-1):toShow.length&&this.tabs.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}),eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);active[0]!==this.active[0]&&(active.length||(active=this.active),anchor=active.find(".ui-tabs-anchor")[0],this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop}))},_findActive:function(index){return index===!1?$():this.tabs.eq(index)},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))),index},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){$.data(this,"ui-tabs-destroy")?$(this).remove():$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");prev?li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls"):li.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;disabled!==!1&&(index===undefined?disabled=!1:(index=this._getIndex(index),disabled=$.isArray(disabled)?$.map(disabled,function(num){return num!==index?num:null}):$.map(this.tabs,function(li,num){return num!==index?num:null})),this._setupDisabled(disabled))},disable:function(index){var disabled=this.options.disabled;if(disabled!==!0){if(index===undefined)disabled=!0;else{if(index=this._getIndex(index),-1!==$.inArray(index,disabled))return;disabled=$.isArray(disabled)?$.merge([index],disabled).sort():[index]}this._setupDisabled(disabled)}},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};isLocal(anchor[0])||(this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData)),this.xhr&&"canceled"!==this.xhr.statusText&&(tab.addClass("ui-tabs-loading"),panel.attr("aria-busy","true"),this.xhr.success(function(response){setTimeout(function(){panel.html(response),that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){"abort"===status&&that.panels.stop(!1,!0),tab.removeClass("ui-tabs-loading"),panel.removeAttr("aria-busy"),jqXHR===that.xhr&&delete that.xhr},1)})))},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}})}(jQuery),function(){}(jQuery),function($,window){function checkTilt(e){evt=e.originalEvent,aig=evt.accelerationIncludingGravity,x=Math.abs(aig.x),y=Math.abs(aig.y),z=Math.abs(aig.z),!window.orientation&&(x>7||(z>6&&8>y||8>z&&y>6)&&x>5)?zoom.enabled&&zoom.disable():zoom.enabled||zoom.enable()}$.mobile.iosorientationfixEnabled=!0;var zoom,evt,x,y,z,aig,ua=navigator.userAgent;return/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(ua)&&ua.indexOf("AppleWebKit")>-1?(zoom=$.mobile.zoom,void $.mobile.document.on("mobileinit",function(){$.mobile.iosorientationfixEnabled&&$.mobile.window.bind("orientationchange.iosorientationfix",zoom.enable).bind("devicemotion.iosorientationfix",checkTilt)})):void($.mobile.iosorientationfixEnabled=!1)}(jQuery,this),function($,window){function hideRenderingClass(){$html.removeClass("ui-mobile-rendering")}var $html=$("html"),$window=$.mobile.window;$(window.document).trigger("mobileinit"),$.mobile.gradeA()&&($.mobile.ajaxBlacklist&&($.mobile.ajaxEnabled=!1),$html.addClass("ui-mobile ui-mobile-rendering"),setTimeout(hideRenderingClass,5e3),$.extend($.mobile,{initializePage:function(){var path=$.mobile.path,$pages=$(":jqmData(role='page'), :jqmData(role='dialog')"),hash=path.stripHash(path.stripQueryParams(path.parseLocation().hash)),hashPage=document.getElementById(hash);$pages.length||($pages=$("body").wrapInner("<div data-"+$.mobile.ns+"role='page'></div>").children(0)),$pages.each(function(){var $this=$(this);$this[0].getAttribute("data-"+$.mobile.ns+"url")||$this.attr("data-"+$.mobile.ns+"url",$this.attr("id")||location.pathname+location.search)}),$.mobile.firstPage=$pages.first(),$.mobile.pageContainer=$.mobile.firstPage.parent().addClass("ui-mobile-viewport").pagecontainer(),$.mobile.navreadyDeferred.resolve(),$window.trigger("pagecontainercreate"),$.mobile.loading("show"),hideRenderingClass(),$.mobile.hashListeningEnabled&&$.mobile.path.isHashValid(location.hash)&&($(hashPage).is(":jqmData(role='page')")||$.mobile.path.isPath(hash)||hash===$.mobile.dialogHashKey)?$.event.special.navigate.isPushStateEnabled()?($.mobile.navigate.history.stack=[],$.mobile.navigate($.mobile.path.isPath(location.hash)?location.hash:location.href)):$window.trigger("hashchange",[!0]):($.mobile.path.isHashValid(location.hash)&&($.mobile.navigate.history.initialDst=hash.replace("#","")),$.event.special.navigate.isPushStateEnabled()&&$.mobile.navigate.navigator.squash(path.parseLocation().href),$.mobile.changePage($.mobile.firstPage,{transition:"none",reverse:!0,changeHash:!1,fromHashChange:!0}))}}),$(function(){$.support.inlineSVG(),$.mobile.hideUrlBar&&window.scrollTo(0,1),$.mobile.defaultHomeScroll=$.support.scrollTop&&1!==$.mobile.window.scrollTop()?1:0,$.mobile.autoInitializePage&&$.mobile.initializePage(),$.mobile.hideUrlBar&&$window.load($.mobile.silentScroll),$.support.cssPointerEvents||$.mobile.document.delegate(".ui-state-disabled,.ui-disabled","vclick",function(e){e.preventDefault(),e.stopImmediatePropagation()})}))}(jQuery,this)}),function(){var AP,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP=function(_super){function AP(){return _ref=AP.__super__.constructor.apply(this,arguments)}return __extends(AP,_super),AP.view={component:{}},AP.controller={component:{}},AP.router={component:{}},AP.getView=function(str){return str?_.find(AP.view.component,function(val,key){return key===str})||_.find(AP.view,function(val,key){return key===str})||AP.getClass(str):void 0},AP.getClass=function(qName){var e;try{return eval(qName)}catch(_error){e=_error}},AP.defer=function(ms,fn,scope){return setTimeout(function(){return fn.apply(scope)},ms)},AP.formatDate=function(dateString){return new Date(dateString).toString("MMMM d, yyyy")},AP.formatTime=function(dateString){var hour,match,suffix;return match=null!=dateString?dateString.match(/T(\d{2}):(\d{2})/):void 0,null!=(null!=match?match[1]:void 0)&&null!=(null!=match?match[2]:void 0)?(hour=parseInt(match[1],10),suffix="am",hour>12&&(hour-=12,suffix="pm"),""+hour+":"+match[2]+suffix):""},AP.formatDateTime=function(dateString){return""+this.formatDate(dateString)+" at "+this.formatTime(dateString)},AP}(window.AP),window.AP=AP}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};window.WeatherSoapAppSdk=function(_super){function WeatherSoapAppSdk(){return _ref=WeatherSoapAppSdk.__super__.constructor.apply(this,arguments)}return __extends(WeatherSoapAppSdk,_super),WeatherSoapAppSdk.setup=function(){return this.rootViewName=this.rootViewName||"",this.views={},this.controllers={},this.routers={}},WeatherSoapAppSdk.init=function(){"Initializes the application.  Call only once.";return AP.baseUrl="https://vast-chamber-1788.herokuapp.com",WeatherSoapAppSdk.__super__.constructor.init.apply(this,arguments),AP.Viewport=new AP.view.Viewport,new AP.controller.component.Main,this.router=new this.routers.MainRouter,Backbone.history.start()},WeatherSoapAppSdk.getRootViewClass=function(){return this.getView(this.rootViewName)},WeatherSoapAppSdk.getView=function(str){return str?_.find(this.views,function(val,key){var _ref1;return key===str||(null!=(_ref1=val.prototype.id)?_ref1.toString():void 0)===str.toString()})||AP.getView(str):void 0},WeatherSoapAppSdk}(window.WeatherSoapAppSdk)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};window.WeatherSoapAppSdk=function(_super){function WeatherSoapAppSdk(){return _ref=WeatherSoapAppSdk.__super__.constructor.apply(this,arguments)}return __extends(WeatherSoapAppSdk,_super),WeatherSoapAppSdk.setup(),WeatherSoapAppSdk.rootViewName="WeatherByCity",WeatherSoapAppSdk}(window.WeatherSoapAppSdk)}.call(this),function(){AP.registerApp(window.WeatherSoapAppSdk,"WeatherSoapApp")}.call(this),function(){AP.controller.Controller=function(){function Controller(){this.initialize.apply(this,arguments)}return _.extend(Controller.prototype,Backbone.Events),Controller.prototype.events=null,Controller.prototype.initialize=function(){var eventSet,_i,_len,_ref,_results;for(this.events=this.events||[],_ref=this.events,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)eventSet=_ref[_i],_results.push(this.bindDomEvent(eventSet));return _results},Controller.prototype.bindDomEvent=function(eventSet){var _this=this;return $("body").delegate(eventSet[0],eventSet[1],function(){return _this[eventSet[2]].apply(_this,arguments)})},Controller}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.Authentication=function(_super){function Authentication(){return _ref=Authentication.__super__.constructor.apply(this,arguments)}return __extends(Authentication,_super),Authentication.prototype.initialize=function(){return Authentication.__super__.initialize.apply(this,arguments),this.listenTo(AP.auth.Authentication,"auth:authenticated",this.onAuthChange),this.listenTo(AP.auth.Authentication,"auth:deauthenticated",this.onAuthChange),this.listenTo(AP.auth.Authentication,"auth:error",this.onAuthError)},Authentication.prototype.onAuthChange=function(){return window.location.reload()},Authentication.prototype.onAuthError=function(){var page;return page=AP.Viewport.add({name:"Dialog",pageTitle:"Login Error",items:[{name:"Content",className:"ap-content ap-text-center",content:"Your login request was not accepted.  Please try again."}]}),page.show()},Authentication}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.Authentication=function(_super){function Authentication(){return _ref=Authentication.__super__.constructor.apply(this,arguments)}return __extends(Authentication,_super),Authentication.prototype.events=[[".ap-authenticationbutton","action","onAction"],[".ap-authenticationformpage","save","onSave"]],Authentication.prototype.onAction=function(){var page;return AP.auth.Authentication.isAuthenticated()?AP.auth.Authentication.logout():page=AP.Viewport.showItemByClass("AP.view.component.AuthenticationFormPage",{backButton:!0})},Authentication.prototype.onSave=function(e,view){var values;return values=view.getValues(),AP.auth.Authentication.login(values)},Authentication}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.Carousel=function(_super){function Carousel(){return _ref=Carousel.__super__.constructor.apply(this,arguments)}return __extends(Carousel,_super),Carousel.prototype.events=[[".ap-carousel","select","onItemSelect"]],Carousel.prototype.onItemSelect=function(e,view,record){var app,data,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.page)&&(pageClass=app.getView(data.page)),pageClass?AP.getActiveApp().router.navigateToPage(pageClass,{record:record,query:record.toJSON()}):void 0},Carousel}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.CreateObjectForm=function(_super){function CreateObjectForm(){return _ref=CreateObjectForm.__super__.constructor.apply(this,arguments)}return __extends(CreateObjectForm,_super),CreateObjectForm.prototype.events=[[".ap-createobjectformpage","savesuccess","onSaveSuccess"],[".ap-createobjectformpage","savefailure","onSaveFailure"],[".ap-createobjectformpage","validationfailure","onValidationFailure"]],CreateObjectForm.prototype.onSaveSuccess=function(e,view,record){return this.successAction(view,record),this.successMessage(view,record)},CreateObjectForm.prototype.onSaveFailure=function(e,view,record){return this.failureAction(view,record),this.failureMessage(view,record)},CreateObjectForm.prototype.onValidationFailure=function(e,view,record){var page;return page=AP.Viewport.add({name:"Dialog",pageTitle:"Please Correct&hellip;",items:_.map(record.errors(),function(error){return"<strong>{{ field }}</strong>:  {{ message }}"})}),page.show()},CreateObjectForm.prototype.successAction=function(view,record){var app,data,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.success_page)&&(pageClass=app.getView(data.success_page)),"Open Page"===data.success_action&&pageClass&&AP.auth.Authorization.isAuthorized(pageClass.prototype.rules)?AP.getActiveApp().router.navigateToPage(pageClass,{record:record,query:record.toJSON()}):"Back"===data.success_action?view.parent.goBack():void 0},CreateObjectForm.prototype.successMessage=function(view,record){var app,data,page;return app=AP.getActiveApp(),data=view.getObjectData(),data.success_message&&"Open Page"!==data.success_action?(page=AP.Viewport.add({name:"Dialog",pageTitle:"Success",record:record,items:[{name:"Content",className:"ap-content ap-text-center",content:data.success_message,record:record}]}),page.show()):void 0},CreateObjectForm.prototype.failureAction=function(view){var data;return data=view.getObjectData(),"Back"===data.failure_action?view.parent.goBack():void 0},CreateObjectForm.prototype.failureMessage=function(view,record){var app,data,page;return app=AP.getActiveApp(),data=view.getObjectData(),data.failure_message?(page=AP.Viewport.add({name:"Dialog",pageTitle:"Error",record:record,items:[{name:"Content",className:"ap-content ap-text-center",content:data.failure_message}]}),page.show()):void 0},CreateObjectForm}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.List=function(_super){function List(){return _ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.events=[[".ap-list","select","onItemSelect"]],List.prototype.onItemSelect=function(e,view,record){var app,data,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.page)&&(pageClass=app.getView(data.page)),pageClass?AP.getActiveApp().router.navigateToPage(pageClass,{record:record,query:record.toJSON()}):void 0},List}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.Main=function(_super){function Main(){return _ref=Main.__super__.constructor.apply(this,arguments)}return __extends(Main,_super),Main.prototype.initialize=function(){return Main.__super__.initialize.apply(this,arguments),this.initializeSettings(),this.initializeControllers()},Main.prototype.initializeSettings=function(){return _.templateSettings=_.extend({},_.templateSettings,{escape:/\{%-([\s\S]+?)%\}/g,evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{(.+?)\}\}/g}),"undefined"!=typeof Offline&&null!==Offline?Offline.options={checks:{active:"xhr",xhr:{url:"https://www.googleapis.com/"}},checkOnLoad:!0,interceptRequests:!1,requests:!1}:void 0},Main.prototype.initializeControllers=function(){return new AP.controller.Authentication,new AP.controller.component.Authentication,new AP.controller.component.Carousel,new AP.controller.component.CreateObjectForm,new AP.controller.component.List,new AP.controller.component.Map,new AP.controller.component.PageButton,new AP.controller.component.QueryObjectForm,new AP.controller.component.TabbedNavigation,new AP.controller.component.UpdateObjectForm},Main}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.Map=function(_super){function Map(){return _ref=Map.__super__.constructor.apply(this,arguments)}return __extends(Map,_super),Map.prototype.events=[[".ap-map","select","onItemSelect"],[".ap-mappage","listaction","onListAction"]],Map.prototype.onItemSelect=function(e,view,record){var app,data,page,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.page)&&(pageClass=app.getView(data.page)),pageClass&&AP.auth.Authorization.isAuthorized(pageClass.prototype.rules)?AP.getActiveApp().router.navigateToPage(pageClass,{record:record,query:record.toJSON()}):(page=AP.Viewport.add({name:"Dialog",pageTitle:data.detail_title,record:record}),data.detail_description&&page.showItemByClass("AP.view.Content",{className:"ap-content ap-text-center",content:data.detail_description}),page.show())},Map.prototype.onListAction=function(e,view){var data,listPage,mapView,_ref1;return mapView=view.getItemByClass("Map"),data=mapView.getObjectData(),listPage=new AP.view.component.ListPage({backButton:!0,datasource:data.datasource,page:data.page,per_page:data.per_page,allow_pagination:data.allow_pagination,detail_title:data.detail_title,detail_description:data.detail_description,page:data.page,record:view.record,query:null!=(_ref1=view.record)?_ref1.toJSON():void 0}),AP.Viewport.showItemByClass(listPage)},Map}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.PageButton=function(_super){function PageButton(){return _ref=PageButton.__super__.constructor.apply(this,arguments)}return __extends(PageButton,_super),PageButton.prototype.events=[[".ap-pagebutton","action","onAction"]],PageButton.prototype.onAction=function(e,view){var app,data,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.page)&&(pageClass=app.getView(data.page)),pageClass?AP.getActiveApp().router.navigateToPage(pageClass,{record:view.getRecord(),query:view.query}):void 0},PageButton}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.QueryObjectForm=function(_super){function QueryObjectForm(){return _ref=QueryObjectForm.__super__.constructor.apply(this,arguments)}return __extends(QueryObjectForm,_super),QueryObjectForm.prototype.events=[[".ap-queryobjectformpage","savesuccess","onSaveSuccess"]],QueryObjectForm.prototype.onSaveSuccess=function(e,view,record){var app,data,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.page)&&(pageClass=app.getView(data.page)),pageClass?AP.getActiveApp().router.navigateToPage(pageClass,{record:record,query:record.toJSON()}):void 0},QueryObjectForm}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.TabbedNavigation=function(_super){function TabbedNavigation(){return _ref=TabbedNavigation.__super__.constructor.apply(this,arguments)}return __extends(TabbedNavigation,_super),TabbedNavigation.prototype.events=[['[data-role="navbar"] [data-view-class]',"click","onTabClick"],[".ap-morepage","select","onMoreListItemSelect"]],TabbedNavigation.prototype.onTabClick=function(e){var tabs,viewClassName;return e.preventDefault(),tabs=AP.Viewport.getItemByClass("AP.view.component.TabbedNavigation"),viewClassName=$(e.currentTarget).attr("data-view-class"),AP.getActiveApp().router.navigateToPage(viewClassName),$(".ui-footer .ui-navbar li a").removeClass("ui-btn-active"),$('.ui-footer .ui-navbar li a[data-view-class="'+viewClassName+'"]').addClass("ui-btn-active"),!1},TabbedNavigation.prototype.onMoreListItemSelect=function(e,list,record){var tabs,viewClassName;return tabs=AP.Viewport.getItemByClass("AP.view.component.TabbedNavigation"),viewClassName=record.get("name"),AP.getActiveApp().router.navigateToPage(viewClassName)},TabbedNavigation}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.controller.component.UpdateObjectForm=function(_super){function UpdateObjectForm(){return _ref=UpdateObjectForm.__super__.constructor.apply(this,arguments)}return __extends(UpdateObjectForm,_super),UpdateObjectForm.prototype.events=[[".ap-updateobjectformpage","savesuccess","onSaveSuccess"],[".ap-updateobjectformpage","savefailure","onSaveFailure"],[".ap-updateobjectformpage","validationfailure","onValidationFailure"]],UpdateObjectForm.prototype.onSaveSuccess=function(e,view,record){return this.successAction(view,record),this.successMessage(view,record)},UpdateObjectForm.prototype.onSaveFailure=function(e,view,record){return this.failureAction(view,record),this.failureMessage(view,record)},UpdateObjectForm.prototype.onValidationFailure=function(e,view,record){var page;return page=AP.Viewport.add({name:"Dialog",pageTitle:"Please Correct&hellip;",items:_.map(record.errors(),function(error){return"<strong>{{ field }}</strong>:  {{ message }}"
})}),page.show()},UpdateObjectForm.prototype.successAction=function(view,record){var app,data,pageClass;return app=AP.getActiveApp(),data=view.getObjectData(),_.isString(data.success_page)&&(pageClass=app.getView(data.success_page)),"Open Page"===data.success_action&&pageClass&&AP.auth.Authorization.isAuthorized(pageClass.prototype.rules)?AP.getActiveApp().router.navigateToPage(pageClass,{record:record,query:record.toJSON()}):"Back"===data.success_action?view.parent.goBack():void 0},UpdateObjectForm.prototype.successMessage=function(view,record){var app,data,page;return app=AP.getActiveApp(),data=view.getObjectData(),data.success_message&&"Open Page"!==data.success_action?(page=AP.Viewport.add({name:"Dialog",pageTitle:"Success",record:record,items:[{name:"Content",className:"ap-content ap-text-center",content:data.success_message,record:record}]}),page.show()):void 0},UpdateObjectForm.prototype.failureAction=function(view){var data;return data=view.getObjectData(),"Back"===data.failure_action?view.parent.goBack():void 0},UpdateObjectForm.prototype.failureMessage=function(view,record){var app,data,page;return app=AP.getActiveApp(),data=view.getObjectData(),data.failure_message?(page=AP.Viewport.add({name:"Dialog",pageTitle:"Error",record:record,items:[{name:"Content",className:"ap-content ap-text-center",content:data.failure_message}]}),page.show()):void 0},UpdateObjectForm}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.router.Router=function(_super){function Router(){return _ref=Router.__super__.constructor.apply(this,arguments)}return __extends(Router,_super),Router.prototype.getQueryString=function(queryObj){var key,queryItems,value;return queryItems=_.compact(function(){var _results;_results=[];for(key in queryObj)value=queryObj[key],_results.push(null!=value?""+key+"="+encodeURIComponent(value):void 0);return _results}()),queryItems.join("&")},Router.prototype.getQueryObject=function(queryString){var pair;return null!=queryString?_.object(function(){var _i,_len,_ref1,_results;for(_ref1=queryString.split("&"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)pair=_ref1[_i],_results.push(pair.split("="));return _results}()):void 0},Router.prototype.getPageUrl=function(baseName,modelName,recordId,query){var queryString,url;return url=_.compact([baseName,modelName,recordId]).join("/"),null!=query&&(queryString=this.getQueryString(query)),queryString&&(url=""+url+"//"+queryString),url},Router.prototype.navigateToPage=function(page,options){var authorized,baseName,modelName,pageClass,pageInstance,recordId,trigger,url,_ref1,_ref2,_ref3,_ref4;return null==options&&(options={}),null==options.query&&(options.query=page.query),pageClass=AP.getActiveApp().getView(page.name||page),pageInstance=AP.Viewport.getItemByClass(pageClass),pageClass&&(baseName=null!=(_ref1=pageClass.prototype)?_ref1.baseName:void 0,modelName=null!=(_ref2=options.record)?_ref2.constructor.prototype.name:void 0,recordId=null!=(_ref3=options.record)?_ref3.id:void 0,url=this.getPageUrl(baseName,modelName,recordId,options.query),authorized=AP.auth.Authorization.isAuthorized(null!=(_ref4=pageClass.prototype)?_ref4.rules:void 0),authorized&&(url&&(trigger=!(null!=options.record||null!=options.query),this.navigate(url,{trigger:trigger})),url&&null==recordId&&null==options.query&&null==pageInstance||this.showPage(pageClass,options))),pageClass&&authorized?void 0:this.root()},Router.prototype.loadRecordAndShowPage=function(modelName,recordId,pageClass,options){var collection,collectionClass,collectionName;return collectionName=""+modelName+"ExactMatch",collectionClass=AP.getActiveApp().getCollection(collectionName),collection=new collectionClass,collection.fetch({query:{id:recordId},success:function(){return options.record=collection.first(),AP.Viewport.showItemByClass(pageClass,options)}})},Router.prototype.showPage=function(page,options){var ancestorPage,ancestorPageClass,authorized,currentPage,isRoot,isTabs,isTabsChild,modelName,pageClass,pageData,pageInstance,recordId,rootClass,tabs,tabsClass;return null==options&&(options={}),options.query=this.getQueryObject(options.query_string)||options.query,pageClass=AP.getActiveApp().getView(page.name||page),pageData=pageClass.prototype||{},pageInstance=AP.Viewport.getItemByClass(pageClass),modelName=pageData.model_name||options.model_name,recordId=options.record_id,ancestorPage=pageData.nearest_page_ancestor_name,ancestorPageClass=AP.getActiveApp().getView(ancestorPage),currentPage=AP.Viewport.getCurrentItem(),rootClass=AP.getActiveApp().getRootViewClass(),authorized=AP.auth.Authorization.isAuthorized(pageData.rules),isRoot=pageClass===rootClass,isTabs=pageClass.isTabbedNavigation,isTabsChild=null!=ancestorPageClass?ancestorPageClass.isTabbedNavigation:void 0,isRoot||isTabsChild||(pageData.nearest_page_ancestor_name&&(options.backButton=!0),options.previousPage=options.previousPage||(null!=pageInstance?pageInstance.previousPage:void 0)||currentPage||rootClass),((null!=pageInstance?pageInstance.record:void 0)||(null!=pageInstance?pageInstance.query:void 0))&&AP.Viewport.remove(pageInstance),authorized&&("MorePage"===pageData.name?(tabs=AP.Viewport.showItemByClass(rootClass),tabs.showItemByClass(pageData.viewName,options)):isTabs||isTabsChild?(tabsClass=isTabs?pageClass:ancestorPageClass,tabs=AP.Viewport.getItemByClass(tabsClass),tabs||(tabs=AP.Viewport.showItemByClass(tabsClass)),isTabs?tabs.showFirst():tabs.showItemByClass(pageData.viewName,options)):modelName&&null!=recordId&&null==options.record?this.loadRecordAndShowPage(modelName,recordId,pageClass,options):AP.Viewport.showItemByClass(pageClass,options)),authorized?void 0:this.root()},Router}(Backbone.Router)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};WeatherSoapAppSdk.routers.MainRouter=function(_super){function MainRouter(){return _ref=MainRouter.__super__.constructor.apply(this,arguments)}return __extends(MainRouter,_super),MainRouter.prototype.routes={"":"root","weather_by_city(/:model_name)(/:record_id)(//:query_string)":"weather_by_city","query_weather(/:model_name)(/:record_id)(//:query_string)":"query_weather","weatherby_zip_results(/:model_name)(/:record_id)(//:query_string)":"weatherby_zip_results"},MainRouter.prototype.root=function(){return this.navigateToPage(AP.getActiveApp().getRootViewClass())},MainRouter.prototype.weather_by_city=function(model_name,record_id,query_string){return this.showPage("WeatherByCity",{model_name:model_name,record_id:record_id,query_string:query_string})},MainRouter.prototype.query_weather=function(model_name,record_id,query_string){return this.showPage("QueryWeather",{model_name:model_name,record_id:record_id,query_string:query_string})},MainRouter.prototype.weatherby_zip_results=function(model_name,record_id,query_string){return this.showPage("WeatherbyZipResults",{model_name:model_name,record_id:record_id,query_string:query_string})},MainRouter}(AP.router.Router)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.View=function(_super){function View(){return _ref=View.__super__.constructor.apply(this,arguments)}return __extends(View,_super),View.prototype.className="ap-view",View.prototype.template=null,View.prototype.items=null,View.prototype.parent=null,View.prototype.record=null,View.prototype.data=null,View.prototype.rules=null,View.prototype.events={},View.prototype.bindAll=function(obj){var funcs;return funcs=Array.prototype.slice.call(arguments,1),0===funcs.length&&(funcs=this.functions),_.each(funcs,function(f){return obj[f]=_.bind(obj[f],obj)}),obj},View.prototype.functions=function(){var key,names,value;names=[];for(key in this)value=this[key],_.isFunction(value&&!_.isObject(value))&&names.push(key);return names.sort()},View.prototype.initialize=function(defaults){var key,value,_ref1,_ref2,_ref3,_ref4,_ref5;this.defaults=null!=defaults?defaults:{},View.__super__.initialize.apply(this,arguments),this.events=_.extend({},null!=(_ref1=this.constructor.__super__)?_ref1.events:void 0,null!=(_ref2=this.constructor.__super__)&&null!=(_ref3=_ref2.constructor)&&null!=(_ref4=_ref3.__super__)?_ref4.events:void 0,this.events,this.defaults.events),this.bindAll(this),_ref5=this.defaults;for(key in _ref5)value=_ref5[key],this[key]=value;return this.items=this.defaults.items||this.items||[],this.rules=this.defaults.rules||this.rules||[],this.initializeItems(),this.render(),this.getRecord()&&this.listenTo(this.getRecord(),"change",this.render),this.listenTo(AP.auth.Authentication,"auth:authenticated",this.doAuthVisibility),this.listenTo(AP.auth.Authentication,"auth:deauthenticated",this.doAuthVisibility)},View.prototype.initializeItems=function(){var instance,item,newItems,_i,_len,_ref1;for(newItems=[],_ref1=this.items,_i=0,_len=_ref1.length;_len>_i;_i++)item=_ref1[_i],instance=this.initializeItem(item),newItems.push(instance);return this.items=newItems},View.prototype.initializeItem=function(item,options){var app,view;return _.isObject(item)&&item instanceof AP.view.View?(item.parent=this,item):(app=AP.getActiveApp(),_.isString(item)||_.isFunction(item)?(view=item,options=_.extend({parent:this},options)):!_.isObject(item)||null==item.name||item instanceof AP.view.View||(view=item.name,options=_.extend({parent:this},item,options)),new(app.getView(view))(options))},View.prototype.getAuthData=function(){return{user:AP.auth.Authentication.getAuthSessionData()||{}}},View.prototype.getTemplate=function(){return this.template?_.template(this.template||""):void 0},View.prototype.getObjectData=function(){var _ref1;return _.extend({},null!=(_ref1=this.parent)?_ref1.getObjectData():void 0,this,{record:this.getRecord()})},View.prototype.getRecordData=function(){var _ref1,_ref2;return _.extend({},null!=(_ref1=this.parent)?_ref1.getRecordData():void 0,null!=(_ref2=this.record)?_ref2.toJSON():void 0)},View.prototype.getAttribute=function(attr){var _ref1;return this[attr]||(null!=(_ref1=this.parent)?_ref1.getAttribute(attr):void 0)},View.prototype.getRecord=function(){return this.getAttribute("record")},View.prototype.getData=function(){return _.extend({},this.getObjectData(),this.getAuthData(),this.data,this.getRecordData())},View.prototype.render=function(){var item,_i,_len,_ref1;for(this.hidden&&this.hide(),this.$el.data("view",this),this.extraClassName&&this.$el.addClass(this.extraClassName),this.$el.html(this.toHtml()),_ref1=this.items,_i=0,_len=_ref1.length;_len>_i;_i++)item=_ref1[_i],this.append(item.el);return this.doAuthVisibility(),this.$el.trigger("render"),this},View.prototype.toHtml=function(){var template;return template=this.getTemplate(),template&&_.isFunction(template)?template(this.getData()):template?template:""},View.prototype.renderAttr=function(attr){var allData,objectData,tags,templateString;return objectData=this.getObjectData(),allData=this.getData(),templateString=objectData[attr]||"",tags=_.compact(templateString.match(_.templateSettings.interpolate))||[],_.each(tags,function(tag){var relationshipName,stripped,_ref1;return stripped=tag.replace(/{{\s?|\s?}}/g,""),stripped.indexOf(".")>0&&(relationshipName=_.first(stripped.split(".")),allData&&relationshipName&&!allData[relationshipName])?(null!=(_ref1=allData.record)&&_ref1.fetchRelated(relationshipName),allData[relationshipName]={}):void 0}),_.template(templateString)(allData)},View.prototype.doAuthVisibility=function(){return this.isRemoved()?void 0:!this.hidden&&this.isAuthorized()?this._show():this._hide()},View.prototype.isAuthorized=function(){return AP.auth.Authorization.isAuthorized(this.rules)},View.prototype._show=function(){return this.$el.show()},View.prototype.show=function(){return this.hidden=!1,this._show(),this.doAuthVisibility()},View.prototype._hide=function(){return this.$el.hide()},View.prototype.hide=function(){return this.hidden=!0,this._hide()},View.prototype.hideAll=function(){var item,_i,_len,_ref1,_results;for(_ref1=this.items,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)item=_ref1[_i],_results.push(item.hide());return _results},View.prototype.append=function(el){return this.$el.append(el)},View.prototype.add=function(view,options){return _.contains(this.items,view)?void 0:(view=this.initializeItem(view,options),this.items.push(view),this.append(view.el),delete view.removed,this.doAuthVisibility(),this.trigger("itemAdd",this,view),view.trigger("add",view,this),view)},View.prototype.remove=function(view){return _.contains(this.items,view)?(this.items=_.without(this.items,view),view.$el.remove(),view.parent=null,view.removed=!0,this.trigger("itemRemove",this,view),view.trigger("remove",view,this),view):void 0},View.prototype.isRemoved=function(){var data;return data=this.getObjectData(),!!data.removed},View.prototype.getItemByClass=function(c){return _.isString(c)?(c=AP.getActiveApp().getView(c),c&&_.find(this.items,function(item){return item instanceof c})):_.find(this.items,function(item){return item===c||_.isFunction(c)&&item instanceof c})},View.prototype.showItemByClass=function(c,options){var view;return view=c instanceof AP.view.View?c:this.getItemByClass(c)||c,view=this.add(view,options)||view,null!=view&&view.show(),view},View}(Backbone.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.DataView=function(_super){function DataView(){return _ref=DataView.__super__.constructor.apply(this,arguments)}return __extends(DataView,_super),DataView.prototype.className="ap-dataview",DataView.prototype.collection=null,DataView.prototype.query=null,DataView.prototype.defaultCollection=null,DataView.prototype.defaultQuery=null,DataView.prototype.itemTpl=null,DataView.prototype.itemOptions=null,DataView.prototype.noDataMessage=null,DataView.prototype.paginate=!1,DataView.prototype.currentPage=1,DataView.prototype.perPage=0,DataView.prototype.limitParam="limit",DataView.prototype.template="",DataView.prototype.initialize=function(){return DataView.__super__.initialize.apply(this,arguments),this.noDataMessage=new AP.view.Content({className:"ap-content ap-no-data-message",content:"No data available.",hidden:!0,parent:this}),this.appendExtra(this.noDataMessage.el),this.initializeCollection(),this.listenTo(AP.auth.Authentication,"auth:authenticated",this.fetch),this.listenTo(AP.auth.Authentication,"auth:deauthenticated",this.removeAll)},DataView.prototype.initializeCollection=function(){return this.collection?this.setCollection(this.collection,this.query,!0):this.noDataMessage.show()},DataView.prototype.appendExtra=function(el){return this.append(el)},DataView.prototype.getCollection=function(){return null},DataView.prototype.clearQuery=function(){return this.query=null},DataView.prototype.setQuery=function(query){return this.query=query},DataView.prototype.setCollection=function(collection,query,defaultSettings){return this.collection&&this.stopListening(this.collection),collection=this.getCollection(collection)||collection,this.collection=!_.isFunction(collection)&&collection instanceof AP.collection.Collection||collection instanceof Backbone.Collection?collection:new collection,this.clearQuery(),query&&this.setQuery(query),this.currentPage=1,this.collection instanceof Backbone.Collection&&(this.listenTo(this.collection,"sync",this.onCollectionReset),this.listenTo(this.collection,"deletesuccess",this.onCollectionReset),this.removeAll(),this.collection.length?this.reset():this.fetch()),defaultSettings?(this.defaultCollection=this.collection,this.defaultQuery=this.query):void 0},DataView.prototype.getItemOptions=function(record){var options;return options={parent:this,record:record},this.itemTpl&&(options.template=this.itemTpl),_.extend(options,this.itemOptions)},DataView.prototype.getItemClass=function(){return AP.view.DataViewItem},DataView.prototype.getNewItem=function(record){return new(this.getItemClass())(this.getItemOptions(record))},DataView.prototype.onCollectionReset=function(){return this.reset()},DataView.prototype.reset=function(){var _ref1,_ref2,_this=this;return this.removeAll(),this.collection&&this.collection.length?(this.noDataMessage.hide(),null!=(_ref1=this.collection)&&_ref1.each(function(record){return _this.add(_this.getNewItem(record))})):this.noDataMessage.show(),this.trigger("datareset"),(null!=(_ref2=this.collection)?_ref2.length:void 0)?this.collection.previousLength=this.collection.length:void 0},DataView.prototype.revertCollection=function(){return this.setCollection(this.defaultCollection,this.defaultQuery),this.fetch()},DataView.prototype.getPaginationParams=function(){var params;return params={},this.paginate&&this.perPage&&(params[this.limitParam]=this.currentPage*this.perPage),params},DataView.prototype.fetch=function(){var query;return query=this.getAttribute("query"),!this.isRemoved()&&this.isAuthorized()?query?this.collection.query(query,{data:this.getPaginationParams()}):this.collection.fetch({data:this.getPaginationParams()}):void 0},DataView.prototype.removeAll=function(){var item,_i,_len,_ref1,_results;for(_ref1=this.items.slice(),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)item=_ref1[_i],_results.push(this.remove(item));return _results},DataView}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.DataViewItem=function(_super){function DataViewItem(){return _ref=DataViewItem.__super__.constructor.apply(this,arguments)}return __extends(DataViewItem,_super),DataViewItem.prototype.className="ap-dataviewitem",DataViewItem.prototype.initialize=function(){return DataViewItem.__super__.initialize.apply(this,arguments),this.record?this.listenTo(this.record,"savesuccess",this.render):void 0},DataViewItem.prototype.render=function(){return DataViewItem.__super__.render.apply(this,arguments),this.record&&(this.$el.data("record",this.record),this.$el.attr("data-id",this.record.get("id"))),this},DataViewItem}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Page=function(_super){function Page(){return _ref=Page.__super__.constructor.apply(this,arguments)}return __extends(Page,_super),Page.prototype.className="ap-page",Page.prototype.id="",Page.prototype.pageTitle="",Page.prototype.backButton=!1,Page.prototype.backButtonText="Back",Page.prototype.backButtonHref="#",Page.prototype.previousPage="",Page.prototype.attributes={"data-role":"page"},Page.prototype.headerTemplate='<div data-role="header" data-position="fixed" data-tap-toggle="false" data-hide-during-focus="">\n  {% if (backButton) { %}\n    <a data-role="button" data-icon="arrow-l" class="ap-backbutton" href="{%- backButtonHref %}">{%- backButtonText %}</a>\n  {% } %}\n  <h1>{{ renderAttr("pageTitle") }}</h1>\n</div>',Page.prototype.contentTemplate='<div data-role="content"></div>',Page.prototype.footerTemplate="",Page.prototype.events={"click .ap-backbutton":"onBackAction"},Page.prototype.initialize=function(){var _ref1;return this.id||(this.id=this.uuid()),this.$el.attr("id",this.id),Page.__super__.initialize.apply(this,arguments),this.getRecord()&&this.stopListening(this.getRecord()),this.initializeHeader(),this.previousPage?void 0:this.previousPage=null!=(_ref1=AP.Viewport)?_ref1.getCurrentItem():void 0},Page.prototype.initializeHeader=function(){},Page.prototype.onBackAction=function(e){return e.preventDefault(),this.goBack()},Page.prototype.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r,v;return r=16*Math.random()|0,v="x"===c?r:3&r|8,v.toString(16)})},Page.prototype.getTemplate=function(){return _.template(this.template||""+this.headerTemplate+this.contentTemplate+this.footerTemplate)},Page.prototype._show=function(options){return $.mobile.changePage("#"+this.id,options)},Page.prototype.append=function(el){return this.$el.find('[data-role="content"]').append(el)},Page.prototype.appendHeader=function(el){return this.$el.find('[data-role="header"]').append(el)},Page.prototype.goBack=function(){return this.previousPage?(AP.getActiveApp().router.navigateToPage(this.previousPage),AP.Viewport.remove(this)):void 0},Page}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Dialog=function(_super){function Dialog(){return _ref=Dialog.__super__.constructor.apply(this,arguments)}return __extends(Dialog,_super),Dialog.prototype.className="ap-page ap-dialog",Dialog.prototype.backButton=!0,Dialog.prototype.backButtonText="Close",Dialog}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Field=function(_super){function Field(){return _ref=Field.__super__.constructor.apply(this,arguments)}return __extends(Field,_super),Field.prototype.className="ap-field",Field.prototype.name="",Field.prototype.label="",Field.prototype.type="text",Field.prototype.value="",Field.prototype.placeholder="",Field.prototype.checked=!1,Field.prototype.disabled=!1,Field.prototype.required=!1,Field.prototype.attributes={},Field.prototype.inputAttributes=null,Field.prototype.template='{% if (type != \'hidden\') { %}\n  {% if (label && (type !== \'checkbox\')) { %}\n    <label for="{%- name %}">{%- label %}:</label>\n  {% } %}\n  {% if (type === \'textarea\') { %}\n    <textarea {% if (required) { %}required{% } %} name="{%- name %}" value="{%- value %}" {% if (placeholder) { %}placeholder="{%- placeholder %}"{% } %}{% if (disabled) { %} disabled="disabled"{% } %}{% if (inputAttributes) { %}{% for (attr in inputAttributes) { %} {{ attr }}="{{ inputAttributes[attr] }}"{% } %}{% } %}></textarea>\n  {% } else if (type === \'toggle\') { %}\n    <select {% if (required) { %}required{% } %} name="{%- name %}" data-role="slider"{% if (disabled) { %} disabled="disabled"{% } %}>\n    	<option value="false">Off</option>\n    	<option value="true"{% if (checked) { %} selected{% } %}>On</option>\n    </select>\n  {% } else if (type === \'checkbox\') { %}\n    <input {% if (required) { %}required{% } %} type="{%- type %}" name="{%- name %}" id="{%- name %}" {% if (checked) { %}checked="checked"{% } %}{% if (disabled) { %} disabled="disabled"{% } %} {% for (attr in inputAttributes) { %} {{ attr }}="{{ inputAttributes[attr] }}"{% } %} />\n    {% if (label) { %}\n      <label for="{%- name %}">{%- label %}</label>\n    {% } %}\n  {% } else { %}\n    <input {% if (required) { %}required{% } %} type="{%- type %}" name="{%- name %}" value="{%- value %}" {% if (placeholder) { %}placeholder="{%- placeholder %}"{% } %}{% if (disabled) { %} disabled="disabled"{% } %} {% for (attr in inputAttributes) { %} {{ attr }}="{{ inputAttributes[attr] }}"{% } %} />\n  {% } %}\n{% } else { %}\n  <input {% if (required) { %}required{% } %} type="{%- type %}" name="{%- name %}" value="{%- value %}" {% for (attr in inputAttributes) { %} {{ attr }}="{{ inputAttributes[attr] }}"{% } %} />\n{% } %}',Field}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Form=function(_super){function Form(){return _ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.className="ap-form",Form.prototype.tagName="form",Form.prototype.allowSave=!0,Form.prototype.events={submit:"onSubmit",save:"onSave"},Form.prototype.onSubmit=function(e){return e.preventDefault(),e.stopPropagation(),this.fireSave()},Form.prototype.fireSave=_.debounce(function(){return this.$el.trigger("save",this)},750,!0),Form.prototype.onSave=function(){return this.allowSave?this.saveForm():void 0},Form.prototype.submit=function(){return this.$el.submit()},Form.prototype.saveForm=function(){},Form.prototype.getValues=function(){var item,values,_i,_len,_ref1;for(values={},_ref1=this.$el.serializeArray(),_i=0,_len=_ref1.length;_len>_i;_i++)item=_ref1[_i],$.isArray(values[item.name])?values[item.name].push(item.value):values[item.name]=values[item.name]?[values[item.name],item.value]:item.value;return this.$el.find('[type="checkbox"]').each(function(i,el){var name,value;return name=el.name,value=$(el).is(":checked"),values[name]=value,!0}),values},Form}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.ModelForm=function(_super){function ModelForm(){return _ref=ModelForm.__super__.constructor.apply(this,arguments)}return __extends(ModelForm,_super),ModelForm.prototype.className="ap-form ap-modelform",ModelForm.prototype.collection=null,ModelForm.prototype.model=null,ModelForm.prototype.showIdField=!1,ModelForm.prototype.submitButtonTitle="Submit",ModelForm.prototype.submitButton=null,ModelForm.prototype.clearRecordBeforeSave=!1,ModelForm.prototype.fieldTypes={"boolean":"checkbox",integer:"number","float":"number",string:"text",date:"date",time:"datetime",password:"password"},ModelForm.prototype.events={"action .ap-submit-button":"onSubmitButtonAction"},ModelForm.prototype.initialize=function(options){return null==options&&(options={}),ModelForm.__super__.initialize.apply(this,arguments),this.addFormFields(),this.addSubmitButton(),this.on("savesuccess",this.onSaveSuccess,this),this.on("savefailure",this.onSaveFailure,this),this.on("validationfailure",this.onValidationFailure,this)},ModelForm.prototype.getModel=function(){var model,_ref1,_ref2;return model=this.model||(null!=(_ref1=this.record)&&null!=(_ref2=_ref1.collection)?_ref2.model:void 0)},ModelForm.prototype.getFieldDefs=function(){var config,field,fieldDefs,formFields,model,name,_ref1;if(model=this.getModel(),formFields=this.formFields||("function"==typeof this.getObjectData?this.getObjectData().formFields:void 0)){fieldDefs=[];for(name in formFields)config=formFields[name],field=_.extend({},null!=(_ref1=_.where(model.prototype.fieldDefinitions,{name:name}))?_ref1[0]:void 0,config),fieldDefs.push(field)}else model&&(fieldDefs=model.prototype.fieldDefinitions);return fieldDefs},ModelForm.prototype.addSubmitButton=function(){return this.allowSave?(this.submitButton=new AP.view.Button({className:"ap-button ap-submit-button",title:this.submitButtonTitle,theme:"b",preventDefaultClickAction:!1,template:'<button type="submit" data-role="button" {% if (theme) { %}data-theme="{{ theme }}"{% } %}>\n  {{ renderAttr(\'title\') }}\n</button>'}),this.add(new AP.view.View({className:"form-actions",items:[this.submitButton]}))):void 0},ModelForm.prototype.addFormFields=function(){var field,fieldDefs,fieldOptions,fieldType,fields,hasNonAutoKeyField,idAttribute,model,nonAutoKeyFields;return fieldDefs=this.getFieldDefs(),model=this.getModel(),model&&(nonAutoKeyFields=model.prototype.nonAutoKeyFields),model&&(idAttribute=model.prototype.idAttribute),hasNonAutoKeyField=_.contains(nonAutoKeyFields,idAttribute),fieldDefs?fields=function(){var _i,_len,_ref1,_ref2,_results;for(_results=[],_i=0,_len=fieldDefs.length;_len>_i;_i++)field=fieldDefs[_i],hasNonAutoKeyField&&field.name===idAttribute||field.name!==idAttribute||this.showIdField?(fieldType=this.fieldTypes[field.type],fieldOptions={type:fieldType,label:field.label+(field.required?"*":""),name:field.name,value:null!=(_ref1=this.record)?_ref1.get(field.name):void 0,required:field.required,checked:"boolean"===field.type&&null!=(_ref2=this.record)?_ref2.get(field.name):void 0,step:"float"===field.type?1e-7:void 0,min:"float"===field.type||"integer"===field.type?-1e8:void 0,inputAttributes:field.inputAttributes,span:field.span,prepend:field.prepend,append:field.append,disabled:field.disabled,help:field.help},field.file_url&&(fieldOptions.type="file",fieldOptions.imageThumbnail=field.file_url&&"Image"===field.file_type),_results.push(this.add(new AP.view.Field(fieldOptions)))):_results.push(void 0);return _results}.call(this):void 0},ModelForm.prototype.castValues=function(values){var castValues,fieldDefs,key,type,value,_ref1;castValues={},fieldDefs=this.getFieldDefs();for(key in values)if(value=values[key],type=null!=(_ref1=_.where(fieldDefs,{name:key})[0])?_ref1.type:void 0,castValues[key]=null,null!=value)switch(type){case"float":castValues[key]=parseFloat(value.toString()),_.isNaN(castValues[key])&&(castValues[key]=value.toString());break;case"integer":castValues[key]=parseInt(value.toString(),10),_.isNaN(castValues[key])&&(castValues[key]=value.toString());break;case"string":castValues[key]=value.toString();break;case"boolean":_.isBoolean(castValues[key])||(castValues[key]="on"===value.toString()||"true"===value.toString());break;default:castValues[key]=value}return castValues},ModelForm.prototype.setValues=function(record){var castValues,values;return values=this.getValues(),castValues=this.castValues(values),record?(this.clearRecordBeforeSave&&record.clear(),record.set(castValues,{silent:!0})):void 0},ModelForm.prototype.readFiles=function(record,callback){var count,el,fieldName,index,_i,_len,_ref1,_results,_this=this;if(count=$("[type=file]",this.el).toArray().length,index=0,count){for(_ref1=$("[type=file]",this.el).toArray(),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)el=_ref1[_i],fieldName=$(el).attr("name"),_results.push(this.readFile(el,function(result){return result&&record.set(fieldName,result),index++,index===count?callback.apply(_this):void 0}));return _results}return callback.apply(this)},ModelForm.prototype.readFile=function(fileEl,onload){var fieldName,reader,_ref1,_ref2;return(null!=(_ref1=fileEl.files)?_ref1[0]:void 0)?(fieldName=$(fileEl).attr("name"),reader=new FileReader,reader.onload=function(e){return onload(e.target.result)},reader.readAsDataURL(null!=(_ref2=fileEl.files)?_ref2[0]:void 0)):onload(null)},ModelForm.prototype.onSubmitButtonAction=function(){return this.$el.submit()},ModelForm.prototype.getRecord=function(){var record;return record=this.record,!record&&this.model&&(record=new this.model),record},ModelForm.prototype.onSaveSuccess=function(record){var _ref1;
return this.$el.trigger("savesuccess",[this,record]),record.trigger("savesuccess"),null!=(_ref1=this.collection)?_ref1.trigger("sync"):void 0},ModelForm.prototype.onSaveFailure=function(record,response){return this.$el.trigger("savefailure",[this,record,response])},ModelForm.prototype.onValidationFailure=function(record){return this.$el.trigger("validationfailure",[this,record])},ModelForm.prototype.saveRecord=function(record){var options,_this=this;return this.submitButton.disable(),options={success:function(){return _this.trigger("savesuccess",record),_this.submitButton.enable()},error:function(record,response){return _this.trigger("savefailure",record,response),_this.submitButton.enable()}},this.readFiles(record,function(){return this.collection&&(null!=record?record.isNew():void 0)?this.collection.create(record,options):record.save(null,options)})},ModelForm.prototype.saveForm=function(){var record;return record=this.getRecord(),this.setValues(record)?record.isValid()?this.saveRecord(record):(this.trigger("validationfailure",record),record.set(record.previousAttributes,{silent:!0})):this.trigger("savefailure",record)},ModelForm}(AP.view.Form)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Button=function(_super){function Button(){return _ref=Button.__super__.constructor.apply(this,arguments)}return __extends(Button,_super),Button.prototype.className="ap-button",Button.prototype.title="",Button.prototype.url="#",Button.prototype.target=null,Button.prototype.theme=null,Button.prototype.right=!1,Button.prototype.disabled=!1,Button.prototype.preventDefaultClickAction=!0,Button.prototype.template='<a href="{%- renderAttr(\'url\') %}" {% if (target) { %}target="{{ target }}"{% } %} data-role="button" {% if (theme) { %}data-theme="{{ theme }}"{% } %}>\n  {{ renderAttr(\'title\') }}\n</a>',Button.prototype.events={click:"onClick"},Button.prototype.onClick=function(e){return(this.preventDefaultClickAction||this.disabled)&&e.preventDefault(),this.fireAction()},Button.prototype.fireAction=_.debounce(function(){return this.disabled?void 0:this.$el.trigger("action",this)},300,!0),Button.prototype.initialize=function(){return Button.__super__.initialize.apply(this,arguments)},Button.prototype.render=function(){return Button.__super__.render.apply(this,arguments),this.right&&this.$el.addClass("ui-btn-right"),this.disabled?this.disable():void 0},Button.prototype.disable=function(){return this.disabled=!0,this.$el.addClass("btn-disable")},Button.prototype.enable=function(){return this.disabled=!1,this.$el.removeClass("btn-disable")},Button}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Carousel=function(_super){function Carousel(){return _ref=Carousel.__super__.constructor.apply(this,arguments)}return __extends(Carousel,_super),Carousel.prototype.className="ap-dataview ap-carousel",Carousel.prototype.active=0,Carousel.prototype.width=null,Carousel.prototype.clickCancelled=!1,Carousel.prototype.clickCancelTimeout=null,Carousel.prototype.autoCycle=!0,Carousel.prototype.autoCycleInterval=3e3,Carousel.prototype.autoCycleTimeout=null,Carousel.prototype.template='<div class="ap-carousel-container">\n  <div class="ap-carousel-slider"></div>\n</div>',Carousel.prototype.events={swipeleft:"onSwipeLeft",swiperight:"onSwipeRight","click .ap-carouselitem":"onItemClick"},Carousel.prototype.initialize=function(){return Carousel.__super__.initialize.apply(this,arguments),this.on("datareset",this.onDataReset,this)},Carousel.prototype.onSwipeLeft=function(){return this.cancelClick(),this.nextItem()},Carousel.prototype.onSwipeRight=function(){return this.cancelClick(),this.previousItem()},Carousel.prototype.onItemClick=function(e){var record,_ref1;return e.preventDefault(),AP.defer(50,function(){}),this.clickCancelled?void 0:(record=null!=(_ref1=$(e.currentTarget))?_ref1.data("record"):void 0,this.$el.trigger("select",[this,record]))},Carousel.prototype.onDataReset=function(){return this.collection?(this.active=0,this.updateDimensions(),this.resetAutoCycle()):void 0},Carousel.prototype.cancelClick=function(){var _this=this;return this.clickCancelled=!0,clearTimeout(this.clickCancelTimeout),this.clickCancelTimeout=setTimeout(function(){return _this.clickCancelled=!1},500)},Carousel.prototype.appendExtra=function(el){return this.$el.append(el)},Carousel.prototype.append=function(el){return this.getSliderEl().append(el)},Carousel.prototype.getSliderEl=function(){return this.$el.find(".ap-carousel-slider")},Carousel.prototype.getItemClass=function(){return AP.view.CarouselItem},Carousel.prototype.updateDimensions=function(){var width;return width=this.$el.width(),width?(this.width=width,this.$el.find(".ap-carouselitem").width(this.width)):void 0},Carousel.prototype.resetAutoCycle=function(){var _this=this;return clearTimeout(this.autoCycleTimeout),this.autoCycleTimeout=setTimeout(function(){return _this.autoCycle?_this.nextItem():void 0},this.autoCycleInterval)},Carousel.prototype.nItem=function(index){return index<this.collection.size()?(this.updateDimensions(),this.active=index,this.$el.find(".ap-carousel-slider").css({left:-(this.active*this.width)}),this.resetAutoCycle()):void 0},Carousel.prototype.firstItem=function(){return this.nItem(0)},Carousel.prototype.nextItem=function(){return this.active<this.collection.size()-1?this.nItem(this.active+1):this.active===this.collection.size()-1?this.firstItem():void 0},Carousel.prototype.previousItem=function(){return this.active>0?this.nItem(this.active-1):void 0},Carousel}(AP.view.DataView)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.CarouselItem=function(_super){function CarouselItem(){return _ref=CarouselItem.__super__.constructor.apply(this,arguments)}return __extends(CarouselItem,_super),CarouselItem.prototype.className="ap-dataviewitem ap-carouselitem",CarouselItem.prototype.linked=!0,CarouselItem.prototype.before=null,CarouselItem.prototype.imageUrl=null,CarouselItem.prototype.itemTitle=null,CarouselItem.prototype.itemContent=null,CarouselItem.prototype.after=null,CarouselItem.prototype.template='{% if (imageUrl) { %}\n  <div class="ap-carouselitem-image" style="background-image: url({{ imageUrl }});"></div>\n{% } %}\n<div class="ap-carouselitem-detail">\n  {% if (itemTitle) { %}\n    <div class="ap-carouselitem-title">{%- renderAttr("itemTitle") %}</div>\n  {% } %}\n  {% if (itemContent) { %}\n    <div class="ap-carouselitem-content">{{ renderAttr("itemContent") }}</div>\n  {% } %}\n</div>',CarouselItem}(AP.view.DataViewItem)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Chart=function(_super){function Chart(){return _ref=Chart.__super__.constructor.apply(this,arguments)}return __extends(Chart,_super),Chart.prototype.className="ap-chart",Chart.prototype.chart=null,Chart.prototype.chartTitle="",Chart.prototype.independentVariable=null,Chart.prototype.depdendentVariable=null,Chart.prototype.template='<div class="ap-chart-container">\n  <div class="ap-chart-title ap-text-center">{{ chartTitle }}</div>\n  <svg></svg>\n</div>',Chart.prototype.reset=function(){var options,_ref1,_ref2;return(null!=(_ref1=this.collection)?_ref1.length:void 0)?(this.noDataMessage.hide(),options=this.getChartOptions(),this.renderChart(options)):this.noDataMessage.show(),this.trigger("datareset"),(null!=(_ref2=this.collection)?_ref2.length:void 0)?this.collection.previousLength=this.collection.length:void 0},Chart.prototype.append=function(el){return this.$el.find(".ap-chart-container").append(el)},Chart.prototype.appendExtra=function(el){return this.$el.append(el)},Chart.prototype.getChartData=function(){return{}},Chart.prototype.getChartOptions=function(){var objectData,options;return objectData=this.getObjectData(),options={}},Chart.prototype.renderChart=function(){},Chart}(AP.view.DataView)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Content=function(_super){function Content(){return _ref=Content.__super__.constructor.apply(this,arguments)}return __extends(Content,_super),Content.prototype.className="ap-content",Content.prototype.template='{{ renderAttr("content") }}',Content.prototype.content=null,Content.prototype.hyperlinkContent=!1,Content.prototype.toHtml=function(){var html;return html=Content.__super__.toHtml.apply(this,arguments),this.hyperlinkContent&&(html=html.replace(/((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/i,'<a href="$&" target="_blank">$&</a>'),html=html.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i,'<a href="mailto:$&">$&</a>'),html=html.replace(/\+?[\d]?[\s\.-]?\(?[\d]{3}\)?([\s\.-]?)[\d|\w]{3}\1[\d|\w]{4}/i,function(match){var letters,phone,qstep;return phone=match.toLowerCase().replace(/\/|-|\./g,""),letters="abc def ghi jkl mno pqrstuv wxyz",qstep=4,phone=phone.replace(/[a-z]/g,function(letter){return Math.floor(letters.indexOf(letter)/qstep)+2}),'<a href="tel:'+phone+'">'+match+"</a>"})),html},Content}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.HorizontalRule=function(_super){function HorizontalRule(){return _ref=HorizontalRule.__super__.constructor.apply(this,arguments)}return __extends(HorizontalRule,_super),HorizontalRule.prototype.className="ap-horizontalrule",HorizontalRule.prototype.template="<hr>",HorizontalRule}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Image=function(_super){function Image(){return _ref=Image.__super__.constructor.apply(this,arguments)}return __extends(Image,_super),Image.prototype.className="ap-image",Image.prototype.template='<img src="{%- renderAttr("url") %}">',Image.prototype.url=null,Image}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.List=function(_super){function List(){return _ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.className="ap-dataview ap-list",List.prototype.inset=!0,List.prototype.moreButton=null,List.prototype.template='<ul data-role="listview" {% if (inset) { %} data-inset="{{ inset }}"{% } %}></ul>',List.prototype.events={"click li":"onItemClick","action .ap-more-button":"onMoreAction","render li":"onItemRender"},List.prototype.initialize=function(){return List.__super__.initialize.apply(this,arguments),this.on("datareset",this.onDataReset,this),this.moreButton=new AP.view.Button({className:"ap-button ap-more-button",title:"Load More&hellip;",hidden:!0,parent:this}),this.appendExtra(this.moreButton.el)},List.prototype.onItemClick=function(e){var record,_ref1;return $(e.currentTarget).data("view").linked&&e.preventDefault(),record=null!=(_ref1=$(e.currentTarget))?_ref1.data("record"):void 0,this.$el.trigger("select",[this,record])},List.prototype.onMoreAction=function(){return this.currentPage++,this.fetch()},List.prototype.onDataReset=function(){return this.collection&&this.collection.length?(this.paginate&&this.perPage&&this.collection.previousLength!==this.collection.length&&this.collection.length===this.perPage*this.currentPage&&this.moreButton.show(),this.refreshListView(),this.$el.find("ul").show()):this.$el.find("ul").hide()},List.prototype.onItemRender=function(){return this.refreshListView()},List.prototype.refreshListView=function(){return this.$el.find("ul").listview("refresh")},List.prototype.append=function(el){return this.$el.find("ul").append(el)},List.prototype.appendExtra=function(el){return this.$el.append(el)},List.prototype.getItemClass=function(){return AP.view.ListItem},List}(AP.view.DataView)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.ListItem=function(_super){function ListItem(){return _ref=ListItem.__super__.constructor.apply(this,arguments)}return __extends(ListItem,_super),ListItem.prototype.className="ap-dataviewitem ap-listitem",ListItem.prototype.tagName="li",ListItem.prototype.linked=!0,ListItem.prototype.before=null,ListItem.prototype.imageUrl=null,ListItem.prototype.itemTitle=null,ListItem.prototype.itemContent=null,ListItem.prototype.after=null,ListItem.prototype.template='{% if (linked) { %}\n  <a href="#">\n{% } %}\n  {% if (before) { %}\n    {{ renderAttr("before") }}\n  {% } %}\n  {% if (imageUrl) { %}\n    <img src="{%- renderAttr("imageUrl") %}">\n  {% } %}\n  {% if (itemTitle) { %}\n    <h2>{{ renderAttr("itemTitle") }}</h2>\n  {% } %}\n  {% if (itemContent) { %}\n    {{ renderAttr("itemContent") }}\n  {% } %}\n  {% if (after) { %}\n    {{ renderAttr("after") }}\n  {% } %}\n{% if (linked) { %}\n  </a>\n{% } %}',ListItem.prototype.append=function(el){return this.linked?this.$el.find("a").append(el):ListItem.__super__.append.apply(this,arguments)},ListItem.prototype.render=function(){return this.$el.removeData(),this.$el.attr("class",this.className),ListItem.__super__.render.apply(this,arguments),this},ListItem}(AP.view.DataViewItem)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Map=function(_super){function Map(){return _ref=Map.__super__.constructor.apply(this,arguments)}return __extends(Map,_super),Map.prototype.className="ap-dataview ap-map",Map.prototype.currentLocation=null,Map.prototype.geolocate=!1,Map.prototype.zoom=3,Map.prototype.center=null,Map.prototype.mapTypeId=null,Map.prototype.googleMap=null,Map.prototype.googleMapBounds=null,Map.prototype.moreButton=null,Map.prototype.template='<div class="ap-map-container"></div>',Map.prototype.events={"action .ap-more-button":"onMoreAction"},Map.prototype.initialize=function(){return"undefined"!=typeof google&&null!==google&&(this.center=new google.maps.LatLng(39.8282,-98.5795)),"undefined"!=typeof google&&null!==google&&(this.mapTypeId=google.maps.MapTypeId.ROADMAP),Map.__super__.initialize.apply(this,arguments),this.on("datareset",this.onDataReset,this),this.on("markerselect",this.onMarkerSelect,this),this.moreButton=new AP.view.Button({className:"ap-button ap-more-button",title:"Load More&hellip;",hidden:!0,parent:this}),this.appendExtra(this.moreButton.el),"undefined"!=typeof google&&null!==google?this.initializeMap():this.initializeOfflinePlaceholder()},Map.prototype.initializeMap=function(){var data,_this=this;return data=this.getObjectData(),AP.defer(200,function(){return _this.googleMap=new google.maps.Map(_this.$el.find(".ap-map-container")[0],_this.getMapOptions()),_this.getCurrentLocation({success:function(location){return data.geolocate?_this.googleMap.setCenter(location):void 0},complete:function(){return _this.trigger("mapready")}})})},Map.prototype.initializeOfflinePlaceholder=function(){return this.offlineMessage=new AP.view.Content({className:"ap-content ap-no-data-message",content:"<br />Google Maps unavailable in offline mode.",parent:this}),this.appendExtra(this.offlineMessage.el)},Map.prototype.initializeCollection=function(){var _this=this;return this.on("mapready",function(){return _this.collection?_this.setCollection(_this.collection,_this.query,!0):_this.noDataMessage.show()})},Map.prototype.onDataReset=function(){var data,_ref1,_ref2,_this=this;return data=this.getObjectData(),(null!=(_ref1=this.collection)?_ref1.length:void 0)&&this.paginate&&this.perPage&&this.collection.previousLength!==this.collection.length&&this.collection.length===this.perPage*this.currentPage&&this.moreButton.show(),!data.geolocate&&(null!=(_ref2=this.collection)?_ref2.length:void 0)?(this.googleMapBounds=new google.maps.LatLngBounds,_.each(this.items,function(item){return _this.googleMapBounds.extend(item.googleMarker.position)}),this.googleMap.setCenter(this.googleMapBounds.getCenter()),this.googleMap.fitBounds(this.googleMapBounds)):void 0},Map.prototype.onMarkerSelect=function(view,record){return this.$el.trigger("select",[this,record])},Map.prototype.onMoreAction=function(){return this.currentPage++,this.fetch()},Map.prototype.getMapOptions=function(){var data;return data=this.getData(),{center:data.center,zoom:data.zoom,mapTypeId:data.mapTypeId,disableDefaultUI:!0}},Map.prototype.getCurrentLocation=function(options){var _ref1,_this=this;return null==options&&(options={}),null!=(_ref1=navigator.geolocation)?_ref1.getCurrentPosition(function(location){return _this.currentLocation=new google.maps.LatLng(location.coords.latitude,location.coords.longitude),null!=options&&"function"==typeof options.success&&options.success(_this.currentLocation),null!=options&&"function"==typeof options.complete?options.complete():void 0},function(){return null!=options&&"function"==typeof options.failure&&options.failure(),null!=options&&"function"==typeof options.complete?options.complete():void 0}):void 0},Map.prototype.append=function(el){var mapItem;return mapItem=$(el).data("view"),mapItem.googleMarker.setMap(this.googleMap)},Map.prototype.appendExtra=function(el){return this.$el.append(el)},Map.prototype.getItemClass=function(){return AP.view.MapItem},Map.prototype.remove=function(view){var _ref1;return _.contains(this.items,view)&&null!=view&&null!=(_ref1=view.googleMarker)&&"function"==typeof _ref1.setMap&&_ref1.setMap(null),Map.__super__.remove.apply(this,arguments)},Map}(AP.view.DataView)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.MapItem=function(_super){function MapItem(){return _ref=MapItem.__super__.constructor.apply(this,arguments)}return __extends(MapItem,_super),MapItem.prototype.className="ap-dataviewitem ap-mapitem",MapItem.prototype.latitude=null,MapItem.prototype.longitude=null,MapItem.prototype.googleMarker=null,MapItem.prototype.initialize=function(){return MapItem.__super__.initialize.apply(this,arguments),this.on("select",this.onSelect,this),this.on("remove",this.onRemove,this),this.initializeMarker()},MapItem.prototype.initializeMarker=function(){var data,_this=this;return data=this.getData(),this.googleMarker=new google.maps.Marker({position:new google.maps.LatLng(data.latitude,data.longitude)}),google.maps.event.addListener(this.googleMarker,"mousedown",function(){return _this.trigger("select")})},MapItem.prototype.onSelect=function(){var _ref1;return null!=(_ref1=this.parent)?_ref1.trigger("markerselect",this,this.record):void 0},MapItem}(AP.view.DataViewItem)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.Viewport=function(_super){function Viewport(){return _ref=Viewport.__super__.constructor.apply(this,arguments)}return __extends(Viewport,_super),Viewport.prototype.className="ap-viewport",Viewport.prototype._currentItem=null,Viewport.prototype.el="body",Viewport.prototype.render=function(){return this},Viewport.prototype.showItemByClass=function(){var view;return view=Viewport.__super__.showItemByClass.apply(this,arguments),this._currentItem=view,view},Viewport.prototype.getCurrentItem=function(){return this._currentItem},Viewport}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.AuthenticationButton=function(_super){function AuthenticationButton(){return _ref=AuthenticationButton.__super__.constructor.apply(this,arguments)}return __extends(AuthenticationButton,_super),AuthenticationButton.prototype.className="ap-button ap-authenticationbutton",AuthenticationButton.prototype.getObjectData=function(){var data;return data=AuthenticationButton.__super__.getObjectData.apply(this,arguments),AP.auth.Authentication.isAuthenticated()&&(data.title=data.authenticated_title),data},AuthenticationButton}(AP.view.Button)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.AuthenticationFormPage=function(_super){function AuthenticationFormPage(){return _ref=AuthenticationFormPage.__super__.constructor.apply(this,arguments)}return __extends(AuthenticationFormPage,_super),AuthenticationFormPage.prototype.className="ap-page ap-authenticationformpage",AuthenticationFormPage.prototype.events={action:"onAction"},AuthenticationFormPage.prototype.initializeItems=function(){var authSettings,formFields;return AuthenticationFormPage.__super__.initializeItems.apply(this,arguments),authSettings=AP.auth.Authentication.getAuthenticationSettings(),formFields={},formFields[authSettings.lookup_field]={label:"Username",type:"string",name:authSettings.lookup_field,inputAttributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off"}},formFields[authSettings.match_field]={label:"Password",type:"password",name:authSettings.match_field},this.authForm=this.showItemByClass("AP.view.ModelForm",{model:AP.auth.Authentication.getAuthenticatableObject(),formFields:formFields,submitButtonTitle:"Login",onSave:function(){}})},AuthenticationFormPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.BarChart=function(_super){function BarChart(){return _ref=BarChart.__super__.constructor.apply(this,arguments)}return __extends(BarChart,_super),BarChart.prototype.className="ap-chart ap-barchart",BarChart.prototype.chartType="bar",BarChart.prototype.initializeCollection=function(){var collectionClass;return collectionClass=this.getCollectionClass(),collectionClass&&(this.collection=new collectionClass),BarChart.__super__.initializeCollection.apply(this,arguments)},BarChart.prototype.getCollectionClass=function(){var _ref1;return AP.getActiveApp().getCollection("function"==typeof this.getData&&null!=(_ref1=this.getData())?_ref1.datasource:void 0)},BarChart.prototype.getObjectData=function(){var data,fieldDefs,model;return data=BarChart.__super__.getObjectData.apply(this,arguments),data.title&&(data.chartTitle=data.title),data.series=[],this.collection&&data.independent_field_definitions&&data.dependent_field_definitions&&(model=this.collection.model,fieldDefs=model.prototype.fieldDefinitions||[],data.series=_.flatten(_.map(data.independent_field_definitions,function(iValue,iName){return _.map(data.dependent_field_definitions,function(dValue,dName){return{independentVariable:iName,dependentVariable:dName}})}))),data},BarChart.prototype.getChartData=function(){var chartData,objectData,rawData,series;return objectData=this.getObjectData(),rawData=this.collection.toJSON(),chartData=function(){var _i,_len,_ref1,_results;for(_ref1=objectData.series,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)series=_ref1[_i],_results.push({key:""+series.dependentVariable+" by "+series.independentVariable,dependentVariable:series.dependentVariable,independentVariable:series.independentVariable,values:_.map(rawData,function(datum){return{label:datum[series.independentVariable].toString(),value:parseInt(datum[series.dependentVariable],10)}})});return _results}()},BarChart.prototype.renderChart=function(){var data,_this=this;return data=this.getChartData(),nv.addGraph(function(){var axisLabel,series;return _this.chart=nv.models.multiBarHorizontalChart().x(function(d){return d.label}).y(function(d){return d.value}).showControls(!1),axisLabel=function(){var _i,_len,_results;for(_results=[],_i=0,_len=data.length;_len>_i;_i++)series=data[_i],_results.push(series.dependentVariable);return _results}().join("; "),_this.chart.yAxis.axisLabel(axisLabel),d3.select("."+_this.extraClassName+" svg").datum(data).transition().duration(500).call(_this.chart),nv.utils.windowResize(_this.chart.update),_this.chart})},BarChart}(AP.view.Chart)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.Carousel=function(_super){function Carousel(){return _ref=Carousel.__super__.constructor.apply(this,arguments)}return __extends(Carousel,_super),Carousel.prototype.initializeCollection=function(){var collectionClass,data;return data=this.getObjectData(),collectionClass=this.getCollectionClass(),collectionClass&&(this.collection=new collectionClass,this.listenTo(collectionClass.prototype.model,"sync",this.onModelClassSync)),data.per_page&&(this.perPage=parseInt(data.per_page,10)),data.allow_pagination&&(this.paginate="true"===data.allow_pagination.toString()),Carousel.__super__.initializeCollection.apply(this,arguments)},Carousel.prototype.onModelClassSync=function(){return this.fetch()},Carousel.prototype.getCollectionClass=function(){var _ref1;return AP.getActiveApp().getCollection("function"==typeof this.getData&&null!=(_ref1=this.getData())?_ref1.datasource:void 0)},Carousel.prototype.getItemClass=function(){return AP.view.component.CarouselItem},Carousel}(AP.view.Carousel)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.CarouselItem=function(_super){function CarouselItem(){return _ref=CarouselItem.__super__.constructor.apply(this,arguments)}return __extends(CarouselItem,_super),CarouselItem.prototype.getObjectData=function(){var data;return data=CarouselItem.__super__.getObjectData.apply(this,arguments),data.detail_title&&(data.itemTitle=data.detail_title),data.detail_description&&(data.itemContent=data.detail_description),data},CarouselItem.prototype.getData=function(){var data;return data=CarouselItem.__super__.getData.apply(this,arguments),data.image_url_field_definition&&(data.imageUrl=data[data.image_url_field_definition]),data},CarouselItem}(AP.view.CarouselItem)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.CarouselPage=function(_super){function CarouselPage(){return _ref=CarouselPage.__super__.constructor.apply(this,arguments)}return __extends(CarouselPage,_super),CarouselPage.prototype.className="ap-page ap-carouselpage",CarouselPage.prototype.query=null,CarouselPage.prototype.initialize=function(){return CarouselPage.__super__.initialize.apply(this,arguments),this.showItemByClass("AP.view.component.Carousel",{query:this.query})},CarouselPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return CarouselPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},CarouselPage.prototype.getObjectData=function(){var data;return data=CarouselPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},CarouselPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.ContentPage=function(_super){function ContentPage(){return _ref=ContentPage.__super__.constructor.apply(this,arguments)}return __extends(ContentPage,_super),ContentPage.prototype.className="ap-page ap-contentpage",ContentPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return ContentPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},ContentPage.prototype.getObjectData=function(){var data;return data=ContentPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},ContentPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);
return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.CreateObjectFormPage=function(_super){function CreateObjectFormPage(){return _ref=CreateObjectFormPage.__super__.constructor.apply(this,arguments)}return __extends(CreateObjectFormPage,_super),CreateObjectFormPage.prototype.className="ap-page ap-createobjectformpage",CreateObjectFormPage.prototype.initialize=function(){var data;return CreateObjectFormPage.__super__.initialize.apply(this,arguments),data=this.getObjectData(),this.showItemByClass("AP.view.component.ModelForm",{model:AP.getActiveApp().getModel(data.object_definition)})},CreateObjectFormPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return CreateObjectFormPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},CreateObjectFormPage.prototype.getObjectData=function(){var data;return data=CreateObjectFormPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},CreateObjectFormPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.HorizontalRule=function(_super){function HorizontalRule(){return _ref=HorizontalRule.__super__.constructor.apply(this,arguments)}return __extends(HorizontalRule,_super),HorizontalRule}(AP.view.HorizontalRule)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.Image=function(_super){function Image(){return _ref=Image.__super__.constructor.apply(this,arguments)}return __extends(Image,_super),Image.prototype.url=null,Image.prototype.baseName=null,Image.prototype.image_url_field_definition=null,Image.prototype.getObjectData=function(){var base_name,data,extension,image_url,recordData,url;return data=Image.__super__.getObjectData.apply(this,arguments),recordData=this.getRecordData(),base_name=data.baseName,extension=(data.url||"").split(".").reverse()[0],url=""+base_name+"."+extension,image_url=recordData[data.image_url_field_definition],data.url=image_url?image_url:url,data},Image}(AP.view.Image)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.Label=function(_super){function Label(){return _ref=Label.__super__.constructor.apply(this,arguments)}return __extends(Label,_super),Label.prototype.className="ap-content ap-label",Label.prototype.hyperlink_content=!1,Label.prototype.initialize=function(){return this.hyperlinkContent="true"===this.hyperlink_content.toString(),Label.__super__.initialize.apply(this,arguments)},Label}(AP.view.Content)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.List=function(_super){function List(){return _ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initializeCollection=function(){var collectionClass,data;return data=this.getObjectData(),collectionClass=this.getCollectionClass(),collectionClass&&(this.collection=new collectionClass,this.listenTo(collectionClass.prototype.model,"sync",this.onModelClassSync)),data.per_page&&(this.perPage=parseInt(data.per_page,10)),data.allow_pagination&&(this.paginate="true"===data.allow_pagination.toString()),List.__super__.initializeCollection.apply(this,arguments)},List.prototype.onModelClassSync=function(){return this.fetch()},List.prototype.getCollectionClass=function(){var _ref1;return AP.getActiveApp().getCollection("function"==typeof this.getData&&null!=(_ref1=this.getData())?_ref1.datasource:void 0)},List.prototype.getItemOptions=function(){var options;return options=List.__super__.getItemOptions.apply(this,arguments),options.linked=!!this.getData().page,options},List.prototype.getNewItem=function(record){var app,data,listItemClass,listItemName;return app=AP.getActiveApp(),data=this.getData(),listItemName=data.list_item,listItemClass=app.getView(listItemName),new(listItemClass=_.isObject(listItemClass)?listItemClass:app.getView("AP.view.component.ListItem"))(this.getItemOptions(record))},List}(AP.view.List)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.ListItem=function(_super){function ListItem(){return _ref=ListItem.__super__.constructor.apply(this,arguments)}return __extends(ListItem,_super),ListItem.prototype.getObjectData=function(){var data,recordData;return data=ListItem.__super__.getObjectData.apply(this,arguments),recordData=this.getRecordData(),data.image_url_field_definition&&(data.imageUrl=recordData[data.image_url_field_definition]),data.detail_title&&(data.itemTitle=data.detail_title),data.detail_description&&(data.itemContent='<div class="ui-li-desc">'+data.detail_description+"</div>"),data},ListItem}(AP.view.ListItem)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.ListPage=function(_super){function ListPage(){return _ref=ListPage.__super__.constructor.apply(this,arguments)}return __extends(ListPage,_super),ListPage.prototype.className="ap-page ap-listpage",ListPage.prototype.query=null,ListPage.prototype.initialize=function(){return ListPage.__super__.initialize.apply(this,arguments),this.showItemByClass("AP.view.component.List",{inset:!1,query:this.query})},ListPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return ListPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},ListPage.prototype.getObjectData=function(){var data;return data=ListPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},ListPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.Map=function(_super){function Map(){return _ref=Map.__super__.constructor.apply(this,arguments)}return __extends(Map,_super),Map.prototype.initializeCollection=function(){var collectionClass,data;return data=this.getObjectData(),collectionClass=this.getCollectionClass(),collectionClass&&(this.collection=new collectionClass,this.listenTo(collectionClass.prototype.model,"sync",this.onModelClassSync)),data.per_page&&(this.perPage=parseInt(data.per_page,10)),data.allow_pagination&&(this.paginate="true"===data.allow_pagination.toString()),Map.__super__.initializeCollection.apply(this,arguments)},Map.prototype.onModelClassSync=function(){return this.fetch()},Map.prototype.getCollectionClass=function(){var _ref1;return AP.getActiveApp().getCollection("function"==typeof this.getData&&null!=(_ref1=this.getData())?_ref1.datasource:void 0)},Map.prototype.getItemClass=function(){return AP.view.component.MapItem},Map.prototype.getObjectData=function(){var data;return data=Map.__super__.getObjectData.apply(this,arguments),data.zoom&&(data.zoom=parseInt(data.zoom,10)),data.geolocate="true"===data.use_current_location.toString(),data.showList="true"===data.show_list.toString(),data},Map}(AP.view.Map)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.MapItem=function(_super){function MapItem(){return _ref=MapItem.__super__.constructor.apply(this,arguments)}return __extends(MapItem,_super),MapItem.prototype.getObjectData=function(){var data;return data=MapItem.__super__.getObjectData.apply(this,arguments),data.detail_title&&(data.itemTitle=data.detail_title),data.detail_description&&(data.itemContent=data.detail_description),data},MapItem.prototype.getData=function(){var data;return data=MapItem.__super__.getData.apply(this,arguments),data.latitude=data[data.latitude_field_definition],data.longitude=data[data.longitude_field_definition],data},MapItem}(AP.view.MapItem)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.MapPage=function(_super){function MapPage(){return _ref=MapPage.__super__.constructor.apply(this,arguments)}return __extends(MapPage,_super),MapPage.prototype.className="ap-page ap-mappage",MapPage.prototype.query=null,MapPage.prototype.events={"action .ap-list-button":"onListAction"},MapPage.prototype.initialize=function(){return MapPage.__super__.initialize.apply(this,arguments),this.map=this.showItemByClass("AP.view.component.Map",{query:this.query,zoom:this.zoom,use_current_location:this.use_current_location,show_list:this.show_list})},MapPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return MapPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass&&(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)),data.showList?(this.listButton=new AP.view.Button({className:"ap-button ap-list-button",parent:this,right:!0,title:"List"}),this.appendHeader(this.listButton.el)):void 0},MapPage.prototype.onListAction=function(){return this.$el.trigger("listaction",this)},MapPage.prototype.getObjectData=function(){var data;return data=MapPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},MapPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.ModelForm=function(_super){function ModelForm(){return _ref=ModelForm.__super__.constructor.apply(this,arguments)}return __extends(ModelForm,_super),ModelForm.prototype.getFieldDefs=function(){var data,fieldDefMaps,fieldDefs,_ref1;return fieldDefs=ModelForm.__super__.getFieldDefs.apply(this,arguments),data=this.getObjectData(),(null!=(_ref1=data.field_definition_maps)?_ref1.length:void 0)&&(fieldDefMaps=_.sortBy(data.field_definition_maps,function(field){return field.position}),fieldDefs=_.map(fieldDefMaps,function(field){return _.extend({},_.first(_.where(fieldDefs,{name:field.name})),field)})),fieldDefs},ModelForm}(AP.view.ModelForm)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.MorePage=function(_super){function MorePage(){return _ref=MorePage.__super__.constructor.apply(this,arguments)}return __extends(MorePage,_super),MorePage.prototype.id="morepage",MorePage.prototype.name="MorePage",MorePage.prototype.viewName="MorePage",MorePage.prototype.className="ap-page ap-morepage",MorePage.prototype.icon="ellipsis-h",MorePage.prototype.title="More",MorePage.prototype.pageTitle="More",MorePage.prototype.collection=null,MorePage.prototype.initialize=function(){return MorePage.__super__.initialize.apply(this,arguments),this.showItemByClass("AP.view.List",{collection:this.collection,inset:!1,itemOptions:{linked:!0,itemTitle:'<i class="fa fa-{{ icon }}"></i> {{ title }}'}})},MorePage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.ObjectPage=function(_super){function ObjectPage(){return _ref=ObjectPage.__super__.constructor.apply(this,arguments)}return __extends(ObjectPage,_super),ObjectPage.prototype.className="ap-page ap-objectpage",ObjectPage.prototype.initialize=function(){return ObjectPage.__super__.initialize.apply(this,arguments),this.showItemByClass("AP.view.component.ModelForm",{record:this.record,allowSave:!1})},ObjectPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return ObjectPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},ObjectPage.prototype.getObjectData=function(){var data;return data=ObjectPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},ObjectPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.PageButton=function(_super){function PageButton(){return _ref=PageButton.__super__.constructor.apply(this,arguments)}return __extends(PageButton,_super),PageButton.prototype.className="ap-button ap-pagebutton",PageButton}(AP.view.Button)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.PieChart=function(_super){function PieChart(){return _ref=PieChart.__super__.constructor.apply(this,arguments)}return __extends(PieChart,_super),PieChart.prototype.className="ap-chart ap-piechart",PieChart.prototype.chartType="pie",PieChart.prototype.template='<div class="ap-chart-container"></div>',PieChart.prototype.initializeCollection=function(){var collectionClass,data;return data=this.getObjectData(),collectionClass=this.getCollectionClass(),collectionClass&&(this.collection=new collectionClass),PieChart.__super__.initializeCollection.apply(this,arguments)},PieChart.prototype.getCollectionClass=function(){var _ref1;return AP.getActiveApp().getCollection("function"==typeof this.getData&&null!=(_ref1=this.getData())?_ref1.datasource:void 0)},PieChart.prototype.getObjectData=function(){var data,fieldDefs,model;return data=PieChart.__super__.getObjectData.apply(this,arguments),data.title&&(data.chartTitle=data.title),data.series=[],this.collection&&data.independent_field_definitions&&data.dependent_field_definitions&&(model=this.collection.model,fieldDefs=model.prototype.fieldDefinitions||[],data.series=_.flatten(_.map(data.independent_field_definitions,function(iValue,iName){return _.map(data.dependent_field_definitions,function(dValue,dName){return{independentVariable:iName,dependentVariable:dName}})}))),data},PieChart.prototype.getChartData=function(){var chartData,objectData,rawData,series;return objectData=this.getObjectData(),rawData=this.collection.toJSON(),chartData=function(){var _i,_len,_ref1,_results;for(_ref1=objectData.series,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)series=_ref1[_i],_results.push({key:""+series.dependentVariable+" by "+series.independentVariable,values:_.map(rawData,function(datum){return{label:datum[series.independentVariable],dependentVariable:series.dependentVariable,independentVariable:series.independentVariable,value:parseInt(datum[series.dependentVariable],10)}})});return _results}()},PieChart.prototype.renderChart=function(){var data,title,_this=this;return title=this.getObjectData().chartTitle,data=this.getChartData(),nv.addGraph(function(){var chart,el,i,series;return _this.chart=function(){var _i,_len,_results;for(_results=[],i=_i=0,_len=data.length;_len>_i;i=++_i)series=data[i],$("."+this.extraClassName+" .ap-chart-container").append('<div class="ap-chart-title ap-text-center">'+title+": "+series.key+"</div>").append("<svg></svg>"),el=$("."+this.extraClassName+" svg:eq("+i+")").get(0),chart=nv.models.pieChart().x(function(d){return d.label}).y(function(d){return d.value}),d3.select(el).datum(series.values).transition().duration(500).call(chart),nv.utils.windowResize(chart.update),_results.push(chart);return _results}.call(_this)})},PieChart}(AP.view.Chart)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.QueryObjectFormPage=function(_super){function QueryObjectFormPage(){return _ref=QueryObjectFormPage.__super__.constructor.apply(this,arguments)}return __extends(QueryObjectFormPage,_super),QueryObjectFormPage.prototype.className="ap-page ap-queryobjectformpage",QueryObjectFormPage.prototype.modelForm=null,QueryObjectFormPage.prototype.initialize=function(){var data;return QueryObjectFormPage.__super__.initialize.apply(this,arguments),data=this.getObjectData(),this.modelForm=this.showItemByClass("AP.view.component.ModelForm",{model:AP.getActiveApp().getModel(data.object_definition),submitButtonTitle:"Search",saveRecord:function(record){return this.trigger("savesuccess",record)}})},QueryObjectFormPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return QueryObjectFormPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},QueryObjectFormPage.prototype.getObjectData=function(){var data;return data=QueryObjectFormPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},QueryObjectFormPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.Scatterplot=function(_super){function Scatterplot(){return _ref=Scatterplot.__super__.constructor.apply(this,arguments)}return __extends(Scatterplot,_super),Scatterplot.prototype.className="ap-chart ap-scatterplot",Scatterplot.prototype.chartType="scatter",Scatterplot.prototype.initializeCollection=function(){var collectionClass,data;return data=this.getObjectData(),collectionClass=this.getCollectionClass(),collectionClass&&(this.collection=new collectionClass),Scatterplot.__super__.initializeCollection.apply(this,arguments)},Scatterplot.prototype.getCollectionClass=function(){var _ref1;return AP.getActiveApp().getCollection("function"==typeof this.getData&&null!=(_ref1=this.getData())?_ref1.datasource:void 0)},Scatterplot.prototype.getObjectData=function(){var data,fieldDefs,model;return data=Scatterplot.__super__.getObjectData.apply(this,arguments),data.title&&(data.chartTitle=data.title),data.series=[],this.collection&&data.independent_field_definitions&&data.dependent_field_definitions&&(model=this.collection.model,fieldDefs=model.prototype.fieldDefinitions||[],data.series=_.flatten(_.map(data.independent_field_definitions,function(iValue,iName){return _.map(data.dependent_field_definitions,function(dValue,dName){return{independentVariable:iName,dependentVariable:dName}})}))),data},Scatterplot.prototype.getChartData=function(){var chartData,objectData,rawData,series;return objectData=this.getObjectData(),rawData=this.collection.toJSON(),chartData=function(){var _i,_len,_ref1,_results;for(_ref1=objectData.series,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)series=_ref1[_i],_results.push({key:""+series.dependentVariable+" by "+series.independentVariable,dependentVariable:series.dependentVariable,independentVariable:series.independentVariable,values:_.map(rawData,function(datum){return{label:datum[series.independentVariable],value:parseInt(datum[series.dependentVariable],10)}})});return _results}()},Scatterplot.prototype.renderChart=function(){var data,_this=this;return data=this.getChartData(),nv.addGraph(function(){var axisLabel,series;return _this.chart=nv.models.scatterChart().x(function(d){return d.label}).y(function(d){return d.value}).showControls(!1),axisLabel=function(){var _i,_len,_results;for(_results=[],_i=0,_len=data.length;_len>_i;_i++)series=data[_i],_results.push(series.dependentVariable);return _results}().join("; "),_this.chart.yAxis.axisLabel(axisLabel),_this.chart.xAxis.axisLabel(series.independentVariable),d3.select("."+_this.extraClassName+" svg").datum(data).transition().duration(500).call(_this.chart),nv.utils.windowResize(_this.chart.update),_this.chart})},Scatterplot}(AP.view.Chart)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.StyledText=function(_super){function StyledText(){return _ref=StyledText.__super__.constructor.apply(this,arguments)}return __extends(StyledText,_super),StyledText.prototype.className="ap-content ap-styledtext",StyledText}(AP.view.Content)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.TabbedNavigation=function(_super){function TabbedNavigation(){return _ref=TabbedNavigation.__super__.constructor.apply(this,arguments)}return __extends(TabbedNavigation,_super),TabbedNavigation.isTabbedNavigation=!0,TabbedNavigation.prototype.className="ap-tabbednavigation",TabbedNavigation.prototype.collection=null,TabbedNavigation.prototype.initialize=function(){return TabbedNavigation.__super__.initialize.apply(this,arguments),this.showFirst(),this.initializeMoreItems()},TabbedNavigation.prototype.initializeMoreItems=function(){var MoreItems,app,moreItems,_ref1;return app=AP.getActiveApp(),moreItems=this.getMoreItems(),moreItems?(MoreItems=function(_super1){function MoreItems(){return _ref1=MoreItems.__super__.constructor.apply(this,arguments)}return __extends(MoreItems,_super1),MoreItems.prototype.fetch=function(){return this.trigger("sync")},MoreItems}(Backbone.Collection),this.collection=new MoreItems(_.map(moreItems,function(item){var data;return data=app.getView(item).prototype,{name:data.name,title:data.title,icon:data.icon}}))):void 0},TabbedNavigation.prototype.initializeItems=function(){return this.initialItems=this.items,this.items=[]},TabbedNavigation.prototype.showFirst=function(){var _ref1;return this.showItemByClass(null!=(_ref1=this.getNavItems())?_ref1[0]:void 0)},TabbedNavigation.prototype.showItemByClass=function(c,options){var app;return app=AP.getActiveApp(),_.isString(c)?(options=_.extend({},options),options.authorizedViewClassNames=this.getNavItems(),options.authorizedViewClasses=_.map(options.authorizedViewClassNames,function(name){return app.getView(name)}),"MorePage"===c&&(options.collection=this.collection),options.authorizedViewClassNames.indexOf(c)>-1?options.footerTemplate='<div data-role="footer" data-id="ap-footer" data-position="fixed" data-tap-toggle="false">\n  <div data-role="navbar">\n    <ul>\n      {% _.each(authorizedViewClasses, function (c) { %}\n        <li>\n          <a href="#" data-page="{{ c.prototype.id }}" data-view-class="{{ c.prototype.name }}" data-icon="custom" class="{% if (c.prototype.name == viewName) { %}ui-btn-active {% } %}">\n            <span>\n              <i class="fa fa-2x fa-{{ c.prototype.icon }}"></i>\n              <span>{{ c.prototype.title }}</span>\n            </span>\n          </a>\n        </li>\n      {% }) %}\n    </ul>\n  </div>\n</div>':(options.backButton=!0,options.previousPage=AP.Viewport.getCurrentItem()),AP.Viewport.showItemByClass(c,options)):void 0},TabbedNavigation.prototype.getAuthorizedItems=function(){var app;return app=AP.getActiveApp(),_.filter(this.initialItems,function(name){return AP.auth.Authorization.isAuthorized(app.getView(name).prototype.rules)})},TabbedNavigation.prototype.getNavItems=function(){var authorizedItems,itemCount;return authorizedItems=this.getAuthorizedItems(),itemCount=authorizedItems.length,5>=itemCount?null!=authorizedItems?authorizedItems.slice():void 0:authorizedItems.slice(0,4).concat(["MorePage"])},TabbedNavigation.prototype.getMoreItems=function(){var authorizedItems,itemCount;return authorizedItems=this.getAuthorizedItems(),itemCount=authorizedItems.length,itemCount>5?authorizedItems.slice(4):null},TabbedNavigation}(AP.view.View)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.UpdateObjectFormPage=function(_super){function UpdateObjectFormPage(){return _ref=UpdateObjectFormPage.__super__.constructor.apply(this,arguments)}return __extends(UpdateObjectFormPage,_super),UpdateObjectFormPage.prototype.className="ap-page ap-updateobjectformpage",UpdateObjectFormPage.prototype.initialize=function(){return UpdateObjectFormPage.__super__.initialize.apply(this,arguments),this.showItemByClass("AP.view.component.ModelForm",{record:this.record})},UpdateObjectFormPage.prototype.initializeHeader=function(){var app,data,id,titleBarButtonClass;return UpdateObjectFormPage.__super__.initializeHeader.apply(this,arguments),app=AP.getActiveApp(),data=this.getObjectData(),id=data.title_bar_button,titleBarButtonClass=app.getView(id),id&&titleBarButtonClass?(this.titleBarButton=new titleBarButtonClass({parent:this,right:!0}),this.appendHeader(this.titleBarButton.el)):void 0},UpdateObjectFormPage.prototype.getObjectData=function(){var data;return data=UpdateObjectFormPage.__super__.getObjectData.apply(this,arguments),data.title&&(data.pageTitle=data.title),data},UpdateObjectFormPage}(AP.view.Page)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AP.view.component.UrlButton=function(_super){function UrlButton(){return _ref=UrlButton.__super__.constructor.apply(this,arguments)}return __extends(UrlButton,_super),UrlButton.prototype.className="ap-button ap-urlbutton",UrlButton.prototype.target="_blank",UrlButton.prototype.preventDefaultClickAction=!1,UrlButton}(AP.view.Button)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};WeatherSoapAppSdk.views.QueryWeather=function(_super){function QueryWeather(){return _ref=QueryWeather.__super__.constructor.apply(this,arguments)}return __extends(QueryWeather,_super),QueryWeather.prototype.viewName="QueryWeather",QueryWeather.prototype.baseName="query_weather",QueryWeather.prototype.extraClassName="ap-query_weather",QueryWeather.prototype.application="WeatherSoapApp",QueryWeather.prototype.items=[],QueryWeather.prototype.rules=[],QueryWeather.prototype.nearest_page_ancestor_name="WeatherByCity",QueryWeather.prototype.model_name="WeatherByZip",QueryWeather.prototype.formFields={get_city_weather_by_zip:{name:"get_city_weather_by_zip",object_definition:{name:"WeatherByZip"},label:"ZIP Code"}},QueryWeather.prototype.type="PageComponent::QueryObjectFormPage",QueryWeather.prototype.name="QueryWeather",QueryWeather.prototype.title="Look by Zip",QueryWeather.prototype.authenticated_title="",QueryWeather.prototype.detail_title="",QueryWeather.prototype.detail_description="",QueryWeather.prototype.content="",QueryWeather.prototype.hyperlink_content="false",QueryWeather.prototype.allow_pagination="false",QueryWeather.prototype.show_list="false",QueryWeather.prototype.use_current_location="true",QueryWeather.prototype.zoom="11",QueryWeather.prototype.url="",QueryWeather.prototype.success_action="Back",QueryWeather.prototype.success_message="",QueryWeather.prototype.failure_action="Back",QueryWeather.prototype.failure_message="",QueryWeather.prototype.per_page="25",QueryWeather.prototype.icon="bar-chart-o",QueryWeather.prototype.position="0",QueryWeather.prototype.id="8423",QueryWeather.prototype.button_component="false",QueryWeather.prototype.datasource_driven_component="false",QueryWeather.prototype.full_page_component="true",QueryWeather.prototype.object_form_component="true",QueryWeather.prototype.object_instance_form_page_component="false",QueryWeather.prototype.objectifiable_component="false",QueryWeather.prototype.paginated_component="false",QueryWeather.prototype.partial_page_component="false",QueryWeather.prototype.titled_component="true",QueryWeather.prototype.tabbed_navigation_child="true",QueryWeather.prototype.authorization_rules="",QueryWeather.prototype.field_definition_maps="",QueryWeather.prototype.styles="",QueryWeather.prototype.object_definition="WeatherByZip",QueryWeather.prototype.page="WeatherbyZipResults",QueryWeather.prototype.children="",QueryWeather.prototype.isPage="true",QueryWeather
}(AP.view.component.QueryObjectFormPage)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};WeatherSoapAppSdk.views.WeatherByCity=function(_super){function WeatherByCity(){return _ref=WeatherByCity.__super__.constructor.apply(this,arguments)}return __extends(WeatherByCity,_super),WeatherByCity.prototype.viewName="WeatherByCity",WeatherByCity.prototype.baseName="weather_by_city",WeatherByCity.prototype.extraClassName="ap-weather_by_city",WeatherByCity.prototype.application="WeatherSoapApp",WeatherByCity.prototype.items=["QueryWeather"],WeatherByCity.prototype.rules=[],WeatherByCity.prototype.type="PageComponent::TabbedNavigation",WeatherByCity.prototype.name="WeatherByCity",WeatherByCity.prototype.title="",WeatherByCity.prototype.authenticated_title="",WeatherByCity.prototype.detail_title="",WeatherByCity.prototype.detail_description="",WeatherByCity.prototype.content="",WeatherByCity.prototype.hyperlink_content="false",WeatherByCity.prototype.allow_pagination="false",WeatherByCity.prototype.show_list="false",WeatherByCity.prototype.use_current_location="true",WeatherByCity.prototype.zoom="11",WeatherByCity.prototype.url="",WeatherByCity.prototype.success_action="Back",WeatherByCity.prototype.success_message="",WeatherByCity.prototype.failure_action="Back",WeatherByCity.prototype.failure_message="",WeatherByCity.prototype.per_page="25",WeatherByCity.prototype.icon="info-circle",WeatherByCity.prototype.position="0",WeatherByCity.prototype.id="8422",WeatherByCity.prototype.button_component="false",WeatherByCity.prototype.datasource_driven_component="false",WeatherByCity.prototype.full_page_component="false",WeatherByCity.prototype.object_form_component="false",WeatherByCity.prototype.object_instance_form_page_component="false",WeatherByCity.prototype.objectifiable_component="false",WeatherByCity.prototype.paginated_component="false",WeatherByCity.prototype.partial_page_component="false",WeatherByCity.prototype.titled_component="false",WeatherByCity.prototype.tabbed_navigation_child="false",WeatherByCity.prototype.authorization_rules="",WeatherByCity.prototype.styles="",WeatherByCity.prototype.children="",WeatherByCity.prototype.isPage="false",WeatherByCity}(AP.view.component.TabbedNavigation)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};WeatherSoapAppSdk.views.WeatherbyZipResults=function(_super){function WeatherbyZipResults(){return _ref=WeatherbyZipResults.__super__.constructor.apply(this,arguments)}return __extends(WeatherbyZipResults,_super),WeatherbyZipResults.prototype.viewName="WeatherbyZipResults",WeatherbyZipResults.prototype.baseName="weatherby_zip_results",WeatherbyZipResults.prototype.extraClassName="ap-weatherby_zip_results",WeatherbyZipResults.prototype.application="WeatherSoapApp",WeatherbyZipResults.prototype.items=[],WeatherbyZipResults.prototype.rules=[],WeatherbyZipResults.prototype.nearest_page_ancestor_name="QueryWeather",WeatherbyZipResults.prototype.model_name="WeatherByZip",WeatherbyZipResults.prototype.type="PageComponent::ListPage",WeatherbyZipResults.prototype.name="WeatherbyZipResults",WeatherbyZipResults.prototype.title="WeatherByZip",WeatherbyZipResults.prototype.authenticated_title="",WeatherbyZipResults.prototype.detail_title="{{get_city_weather_by_zip}}",WeatherbyZipResults.prototype.detail_description="{{get_city_weather_by_zip_response}}",WeatherbyZipResults.prototype.content="",WeatherbyZipResults.prototype.hyperlink_content="false",WeatherbyZipResults.prototype.allow_pagination="false",WeatherbyZipResults.prototype.show_list="false",WeatherbyZipResults.prototype.use_current_location="true",WeatherbyZipResults.prototype.zoom="11",WeatherbyZipResults.prototype.url="",WeatherbyZipResults.prototype.success_action="Back",WeatherbyZipResults.prototype.success_message="",WeatherbyZipResults.prototype.failure_action="Back",WeatherbyZipResults.prototype.failure_message="",WeatherbyZipResults.prototype.per_page="25",WeatherbyZipResults.prototype.icon="info-circle",WeatherbyZipResults.prototype.position="0",WeatherbyZipResults.prototype.id="8424",WeatherbyZipResults.prototype.button_component="false",WeatherbyZipResults.prototype.datasource_driven_component="true",WeatherbyZipResults.prototype.full_page_component="true",WeatherbyZipResults.prototype.object_form_component="false",WeatherbyZipResults.prototype.object_instance_form_page_component="false",WeatherbyZipResults.prototype.objectifiable_component="false",WeatherbyZipResults.prototype.paginated_component="true",WeatherbyZipResults.prototype.partial_page_component="false",WeatherbyZipResults.prototype.titled_component="true",WeatherbyZipResults.prototype.tabbed_navigation_child="true",WeatherbyZipResults.prototype.authorization_rules="",WeatherbyZipResults.prototype.styles="",WeatherbyZipResults.prototype.object_definition="WeatherByZip",WeatherbyZipResults.prototype.datasource="WeatherByZipAll",WeatherbyZipResults.prototype.children="",WeatherbyZipResults.prototype.isPage="true",WeatherbyZipResults}(AP.view.component.ListPage)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};WeatherSoapAppSdk.controllers.ExampleCustomController=function(_super){function ExampleCustomController(){return _ref=ExampleCustomController.__super__.constructor.apply(this,arguments)}return __extends(ExampleCustomController,_super),ExampleCustomController.prototype.events=[[".ap-custom-selector","event","onEvent"]],ExampleCustomController.prototype.onEvent=function(){},ExampleCustomController}(AP.controller.Controller)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};WeatherSoapAppSdk.views.ExampleCustomView=function(_super){function ExampleCustomView(){return _ref=ExampleCustomView.__super__.constructor.apply(this,arguments)}return __extends(ExampleCustomView,_super),ExampleCustomView.prototype.viewIntro="Views are used to display information to users and to build\nuser interfaces.  Add custom views to build your own UI.",ExampleCustomView.prototype.customViewContent="This example custom content component extends\n<code>AP.view.Content</code>.  Save your own custom views to\n<code>app/view/custom/</code> to enjoy automatic compilation into builds\nwhen using Grunt.  See <code>README.md</code> for more information.",ExampleCustomView.prototype.template="<p>{{ viewIntro }}</p>\n<p>{{ customViewContent }}</p>",ExampleCustomView}(AP.view.Content)}.call(this),function(){var init,pageChangeCount;pageChangeCount=0,init=_.once(function(){return AP.getApp("WeatherSoapApp").init()}),$(document).on("pagechange",function(){return 1===pageChangeCount&&init(),pageChangeCount++,AP.defer(2e3,function(){return 1===pageChangeCount?init():void 0})})}.call(this);